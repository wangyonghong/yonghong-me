<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Honng</title>
  
  <subtitle>Stay Hungary. Stay Foolish.</subtitle>
  <link href="http://yonghong.tech/atom.xml" rel="self"/>
  
  <link href="http://yonghong.tech/"/>
  <updated>2021-11-26T14:24:00.000Z</updated>
  <id>http://yonghong.tech/</id>
  
  <author>
    <name>Honng</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Git çš„å¥‡æŠ€æ·«å·§</title>
    <link href="http://yonghong.tech/tips/git-tips/"/>
    <id>http://yonghong.tech/tips/git-tips/</id>
    <published>2021-11-26T14:24:00.000Z</published>
    <updated>2021-11-26T14:24:00.000Z</updated>
    
    <content type="html"><![CDATA[<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tLzUyMXh1ZXdlaWhhbi9naXQtdGlwcw==">https://github.com/521xueweihan/git-tips<i class="fa fa-external-link-alt"></i></span></p><p>Git æ˜¯ä¸€ä¸ª â€œåˆ†å¸ƒå¼ç‰ˆæœ¬ç®¡ç†å·¥å…·â€ï¼Œç®€å•çš„ç†è§£ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼šå¤§å®¶åœ¨å†™ä¸œè¥¿çš„æ—¶å€™éƒ½ç”¨è¿‡ â€œå›æ’¤â€ è¿™ä¸ªåŠŸèƒ½ï¼Œä½†æ˜¯å›æ’¤åªèƒ½å›æ’¤å‡ æ­¥ï¼Œå‡å¦‚æƒ³è¦æ‰¾å›æˆ‘ä¸‰å¤©ä¹‹å‰çš„ä¿®æ”¹ï¼Œå…‰ç”¨ â€œå›æ’¤â€ æ˜¯æ‰¾ä¸å›æ¥çš„ã€‚è€Œ â€œç‰ˆæœ¬ç®¡ç†å·¥å…·â€ èƒ½è®°å½•æ¯æ¬¡çš„ä¿®æ”¹ï¼Œåªè¦æäº¤åˆ°ç‰ˆæœ¬ä»“åº“ï¼Œä½ å°±å¯ä»¥æ‰¾åˆ°ä¹‹å‰ä»»ä½•æ—¶åˆ»çš„çŠ¶æ€ï¼ˆæ–‡æœ¬çŠ¶æ€ï¼‰ã€‚</p><p>ä¸‹é¢çš„å†…å®¹å°±æ˜¯åˆ—ä¸¾äº†å¸¸ç”¨çš„ Git å‘½ä»¤å’Œä¸€äº›å°æŠ€å·§ï¼Œå¯ä»¥é€šè¿‡ â€œé¡µé¢å†…æŸ¥æ‰¾â€ çš„æ–¹å¼è¿›è¡Œå¿«é€ŸæŸ¥è¯¢ï¼š<code>Ctrl/Command+f</code>ã€‚</p><h2 id="å¼€å·å¿…è¯»"><a href="#å¼€å·å¿…è¯»" class="headerlink" title="å¼€å·å¿…è¯»"></a>å¼€å·å¿…è¯»</h2><p><em>å¦‚æœä¹‹å‰æœªä½¿ç”¨è¿‡ Gitï¼Œå¯ä»¥å­¦ä¹  <span class="exturl" data-url="aHR0cHM6Ly9yb2dlcmR1ZGxlci5naXRodWIuaW8vZ2l0LWd1aWRlL2luZGV4LnpoLmh0bWw=">Git å°ç™½æ•™ç¨‹<i class="fa fa-external-link-alt"></i></span>å…¥é—¨</em></p><ol><li><strong>ä¸€å®šè¦å…ˆæµ‹è¯•å‘½ä»¤çš„æ•ˆæœå</strong>ï¼Œå†ç”¨äºå·¥ä½œç¯å¢ƒä¸­ï¼Œä»¥é˜²é€ æˆä¸èƒ½å¼¥è¡¥çš„åæœï¼<strong>åˆ°æ—¶å€™åˆ«æ‹¿ç€ç åˆ€æ¥æ‰¾æˆ‘</strong></li><li>æ‰€æœ‰çš„å‘½ä»¤éƒ½åœ¨<code>git version 2.7.4 (Apple Git-66)</code>ä¸‹æµ‹è¯•é€šè¿‡</li><li>ç»Ÿä¸€æ¦‚å¿µï¼š<ul><li>å·¥ä½œåŒºï¼šæ”¹åŠ¨ï¼ˆå¢åˆ æ–‡ä»¶å’Œå†…å®¹ï¼‰</li><li>æš‚å­˜åŒºï¼šè¾“å…¥å‘½ä»¤ï¼š<code>git add æ”¹åŠ¨çš„æ–‡ä»¶å</code>ï¼Œæ­¤æ¬¡æ”¹åŠ¨å°±æ”¾åˆ°äº† â€˜æš‚å­˜åŒºâ€™</li><li>æœ¬åœ°ä»“åº“(ç®€ç§°ï¼šæœ¬åœ°)ï¼šè¾“å…¥å‘½ä»¤ï¼š<code>git commit æ­¤æ¬¡ä¿®æ”¹çš„æè¿°</code>ï¼Œæ­¤æ¬¡æ”¹åŠ¨å°±æ”¾åˆ°äº† â€™æœ¬åœ°ä»“åº“â€™ï¼Œæ¯ä¸ª commitï¼Œæˆ‘å«å®ƒä¸ºä¸€ä¸ª â€˜ç‰ˆæœ¬â€™ã€‚</li><li>è¿œç¨‹ä»“åº“(ç®€ç§°ï¼šè¿œç¨‹)ï¼šè¾“å…¥å‘½ä»¤ï¼š<code>git push è¿œç¨‹ä»“åº“</code>ï¼Œæ­¤æ¬¡æ”¹åŠ¨å°±æ”¾åˆ°äº† â€˜è¿œç¨‹ä»“åº“â€™ï¼ˆGitHub ç­‰)</li><li>commit-idï¼šè¾“å‡ºå‘½ä»¤ï¼š<code>git log</code>ï¼Œæœ€ä¸Šé¢é‚£è¡Œ <code>commit xxxxxx</code>ï¼Œåé¢çš„å­—ç¬¦ä¸²å°±æ˜¯ commit-id</li></ul></li><li>å¦‚æœå–œæ¬¢è¿™ä¸ªé¡¹ç›®ï¼Œæ¬¢è¿ Starã€æäº¤ Prã€<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tLzUyMXh1ZXdlaWhhbi9naXQtdGlwcy9pc3N1ZXM=">åé¦ˆé—®é¢˜<i class="fa fa-external-link-alt"></i></span>ğŸ˜Š</li></ol><span id="more"></span><h2 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><ul><li><a href="#%E5%BC%80%E5%8D%B7%E5%BF%85%E8%AF%BB">å¼€å·å¿…è¯»</a></li><li><a href="#%E7%9B%AE%E5%BD%95">ç›®å½•</a></li><li><a href="#%E5%B1%95%E7%A4%BA%E5%B8%AE%E5%8A%A9%E4%BF%A1%E6%81%AF">å±•ç¤ºå¸®åŠ©ä¿¡æ¯</a></li><li><a href="#%E5%9B%9E%E5%88%B0%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E7%9A%84%E7%8A%B6%E6%80%81">å›åˆ°è¿œç¨‹ä»“åº“çš„çŠ¶æ€</a></li><li><a href="#%E9%87%8D%E8%AE%BE%E7%AC%AC%E4%B8%80%E4%B8%AA-commit">é‡è®¾ç¬¬ä¸€ä¸ª commit</a></li><li><a href="#%E6%9F%A5%E7%9C%8B%E5%86%B2%E7%AA%81%E6%96%87%E4%BB%B6%E5%88%97%E8%A1%A8">æŸ¥çœ‹å†²çªæ–‡ä»¶åˆ—è¡¨</a></li><li><a href="#%E5%B1%95%E7%A4%BA%E5%B7%A5%E4%BD%9C%E5%8C%BA%E5%92%8C%E6%9A%82%E5%AD%98%E5%8C%BA%E7%9A%84%E4%B8%8D%E5%90%8C">å±•ç¤ºå·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„ä¸åŒ</a></li><li><a href="#%E5%B1%95%E7%A4%BA%E6%9A%82%E5%AD%98%E5%8C%BA%E5%92%8C%E6%9C%80%E8%BF%91%E7%89%88%E6%9C%AC%E7%9A%84%E4%B8%8D%E5%90%8C">å±•ç¤ºæš‚å­˜åŒºå’Œæœ€è¿‘ç‰ˆæœ¬çš„ä¸åŒ</a></li><li><a href="#%E5%B1%95%E7%A4%BA%E6%9A%82%E5%AD%98%E5%8C%BA%E5%B7%A5%E4%BD%9C%E5%8C%BA%E5%92%8C%E6%9C%80%E8%BF%91%E7%89%88%E6%9C%AC%E7%9A%84%E4%B8%8D%E5%90%8C">å±•ç¤ºæš‚å­˜åŒºã€å·¥ä½œåŒºå’Œæœ€è¿‘ç‰ˆæœ¬çš„ä¸åŒ</a></li><li><a href="#%E5%BF%AB%E9%80%9F%E5%88%87%E6%8D%A2%E5%88%B0%E4%B8%8A%E4%B8%80%E4%B8%AA%E5%88%86%E6%94%AF">å¿«é€Ÿåˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯</a></li><li><a href="#%E5%88%A0%E9%99%A4%E5%B7%B2%E7%BB%8F%E5%90%88%E5%B9%B6%E5%88%B0-master-%E7%9A%84%E5%88%86%E6%94%AF">åˆ é™¤å·²ç»åˆå¹¶åˆ° master çš„åˆ†æ”¯</a></li><li><a href="#%E5%B1%95%E7%A4%BA%E6%9C%AC%E5%9C%B0%E5%88%86%E6%94%AF%E5%85%B3%E8%81%94%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E7%9A%84%E6%83%85%E5%86%B5">å±•ç¤ºæœ¬åœ°åˆ†æ”¯å…³è”è¿œç¨‹ä»“åº“çš„æƒ…å†µ</a></li><li><a href="#%E5%85%B3%E8%81%94%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF">å…³è”è¿œç¨‹åˆ†æ”¯</a></li><li><a href="#%E5%88%97%E5%87%BA%E6%89%80%E6%9C%89%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF">åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯</a></li><li><a href="#%E5%88%97%E5%87%BA%E6%9C%AC%E5%9C%B0%E5%92%8C%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF">åˆ—å‡ºæœ¬åœ°å’Œè¿œç¨‹åˆ†æ”¯</a></li><li><a href="#%E6%9F%A5%E7%9C%8B%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF%E5%92%8C%E6%9C%AC%E5%9C%B0%E5%88%86%E6%94%AF%E7%9A%84%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB">æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯å’Œæœ¬åœ°åˆ†æ”¯çš„å¯¹åº”å…³ç³»</a></li><li><a href="#%E8%BF%9C%E7%A8%8B%E5%88%A0%E9%99%A4%E4%BA%86%E5%88%86%E6%94%AF%E6%9C%AC%E5%9C%B0%E4%B9%9F%E6%83%B3%E5%88%A0%E9%99%A4">è¿œç¨‹åˆ é™¤äº†åˆ†æ”¯æœ¬åœ°ä¹Ÿæƒ³åˆ é™¤</a></li><li><a href="#%E5%88%9B%E5%BB%BA%E5%B9%B6%E5%88%87%E6%8D%A2%E5%88%B0%E6%9C%AC%E5%9C%B0%E5%88%86%E6%94%AF">åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æœ¬åœ°åˆ†æ”¯</a></li><li><a href="#%E4%BB%8E%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF%E4%B8%AD%E5%88%9B%E5%BB%BA%E5%B9%B6%E5%88%87%E6%8D%A2%E5%88%B0%E6%9C%AC%E5%9C%B0%E5%88%86%E6%94%AF">ä»è¿œç¨‹åˆ†æ”¯ä¸­åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æœ¬åœ°åˆ†æ”¯</a></li><li><a href="#%E5%88%A0%E9%99%A4%E6%9C%AC%E5%9C%B0%E5%88%86%E6%94%AF">åˆ é™¤æœ¬åœ°åˆ†æ”¯</a></li><li><a href="#%E5%88%A0%E9%99%A4%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF">åˆ é™¤è¿œç¨‹åˆ†æ”¯</a></li><li><a href="#%E9%87%8D%E5%91%BD%E5%90%8D%E6%9C%AC%E5%9C%B0%E5%88%86%E6%94%AF">é‡å‘½åæœ¬åœ°åˆ†æ”¯</a></li><li><a href="#%E6%9F%A5%E7%9C%8B%E6%A0%87%E7%AD%BE">æŸ¥çœ‹æ ‡ç­¾</a></li><li><a href="#%E6%9F%A5%E7%9C%8B%E6%A0%87%E7%AD%BE%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF">æŸ¥çœ‹æ ‡ç­¾è¯¦ç»†ä¿¡æ¯</a></li><li><a href="#%E6%9C%AC%E5%9C%B0%E5%88%9B%E5%BB%BA%E6%A0%87%E7%AD%BE">æœ¬åœ°åˆ›å»ºæ ‡ç­¾</a></li><li><a href="#%E6%8E%A8%E9%80%81%E6%A0%87%E7%AD%BE%E5%88%B0%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93">æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“</a></li><li><a href="#%E5%88%A0%E9%99%A4%E6%9C%AC%E5%9C%B0%E6%A0%87%E7%AD%BE">åˆ é™¤æœ¬åœ°æ ‡ç­¾</a></li><li><a href="#%E5%88%A0%E9%99%A4%E8%BF%9C%E7%A8%8B%E6%A0%87%E7%AD%BE">åˆ é™¤è¿œç¨‹æ ‡ç­¾</a></li><li><a href="#%E5%88%87%E5%9B%9E%E5%88%B0%E6%9F%90%E4%B8%AA%E6%A0%87%E7%AD%BE">åˆ‡å›åˆ°æŸä¸ªæ ‡ç­¾</a></li><li><a href="#%E6%94%BE%E5%BC%83%E5%B7%A5%E4%BD%9C%E5%8C%BA%E7%9A%84%E4%BF%AE%E6%94%B9">æ”¾å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹</a></li><li><a href="#%E6%81%A2%E5%A4%8D%E5%88%A0%E9%99%A4%E7%9A%84%E6%96%87%E4%BB%B6">æ¢å¤åˆ é™¤çš„æ–‡ä»¶</a></li><li><a href="#%E4%BB%A5%E6%96%B0%E5%A2%9E%E4%B8%80%E4%B8%AA-commit-%E7%9A%84%E6%96%B9%E5%BC%8F%E8%BF%98%E5%8E%9F%E6%9F%90%E4%B8%80%E4%B8%AA-commit-%E7%9A%84%E4%BF%AE%E6%94%B9">ä»¥æ–°å¢ä¸€ä¸ª commit çš„æ–¹å¼è¿˜åŸæŸä¸€ä¸ª commit çš„ä¿®æ”¹</a></li><li><a href="#%E5%9B%9E%E5%88%B0%E6%9F%90%E4%B8%AA-commit-%E7%9A%84%E7%8A%B6%E6%80%81%E5%B9%B6%E5%88%A0%E9%99%A4%E5%90%8E%E9%9D%A2%E7%9A%84-commit">å›åˆ°æŸä¸ª commit çš„çŠ¶æ€ï¼Œå¹¶åˆ é™¤åé¢çš„ commit</a></li><li><a href="#%E4%BF%AE%E6%94%B9%E4%B8%8A%E4%B8%80%E4%B8%AA-commit-%E7%9A%84%E6%8F%8F%E8%BF%B0">ä¿®æ”¹ä¸Šä¸€ä¸ª commit çš„æè¿°</a></li><li><a href="#%E6%9F%A5%E7%9C%8B-commit-%E5%8E%86%E5%8F%B2">æŸ¥çœ‹ commit å†å²</a></li><li><a href="#%E6%9F%A5%E7%9C%8B%E6%9F%90%E6%AE%B5%E4%BB%A3%E7%A0%81%E6%98%AF%E8%B0%81%E5%86%99%E7%9A%84">æŸ¥çœ‹æŸæ®µä»£ç æ˜¯è°å†™çš„</a></li><li><a href="#%E6%98%BE%E7%A4%BA%E6%9C%AC%E5%9C%B0%E6%9B%B4%E6%96%B0%E8%BF%87-head-%E7%9A%84-git-%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95">æ˜¾ç¤ºæœ¬åœ°æ›´æ–°è¿‡ HEAD çš„ git å‘½ä»¤è®°å½•</a></li><li><a href="#%E4%BF%AE%E6%94%B9%E4%BD%9C%E8%80%85%E5%90%8D">ä¿®æ”¹ä½œè€…å</a></li><li><a href="#%E4%BF%AE%E6%94%B9%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E7%9A%84-url">ä¿®æ”¹è¿œç¨‹ä»“åº“çš„ url</a></li><li><a href="#%E5%A2%9E%E5%8A%A0%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93">å¢åŠ è¿œç¨‹ä»“åº“</a></li><li><a href="#%E5%88%97%E5%87%BA%E6%89%80%E6%9C%89%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93">åˆ—å‡ºæ‰€æœ‰è¿œç¨‹ä»“åº“</a></li><li><a href="#%E6%9F%A5%E7%9C%8B%E4%B8%A4%E4%B8%AA%E6%98%9F%E6%9C%9F%E5%86%85%E7%9A%84%E6%94%B9%E5%8A%A8">æŸ¥çœ‹ä¸¤ä¸ªæ˜ŸæœŸå†…çš„æ”¹åŠ¨</a></li><li><a href="#%E6%8A%8A-a-%E5%88%86%E6%94%AF%E7%9A%84%E6%9F%90%E4%B8%80%E4%B8%AA-commit%E6%94%BE%E5%88%B0-b-%E5%88%86%E6%94%AF%E4%B8%8A">æŠŠ A åˆ†æ”¯çš„æŸä¸€ä¸ª commitï¼Œæ”¾åˆ° B åˆ†æ”¯ä¸Š</a></li><li><a href="#%E7%BB%99-git-%E5%91%BD%E4%BB%A4%E8%B5%B7%E5%88%AB%E5%90%8D">ç»™ git å‘½ä»¤èµ·åˆ«å</a></li><li><a href="#%E5%AD%98%E5%82%A8%E5%BD%93%E5%89%8D%E7%9A%84%E4%BF%AE%E6%94%B9%E4%BD%86%E4%B8%8D%E7%94%A8%E6%8F%90%E4%BA%A4-commit">å­˜å‚¨å½“å‰çš„ä¿®æ”¹ï¼Œä½†ä¸ç”¨æäº¤ commit</a></li><li><a href="#%E4%BF%9D%E5%AD%98%E5%BD%93%E5%89%8D%E7%8A%B6%E6%80%81%E5%8C%85%E6%8B%AC-untracked-%E7%9A%84%E6%96%87%E4%BB%B6">ä¿å­˜å½“å‰çŠ¶æ€ï¼ŒåŒ…æ‹¬ untracked çš„æ–‡ä»¶</a></li><li><a href="#%E5%B1%95%E7%A4%BA%E6%89%80%E6%9C%89-stashes">å±•ç¤ºæ‰€æœ‰ stashes</a></li><li><a href="#%E5%9B%9E%E5%88%B0%E6%9F%90%E4%B8%AA-stash-%E7%9A%84%E7%8A%B6%E6%80%81">å›åˆ°æŸä¸ª stash çš„çŠ¶æ€</a></li><li><a href="#%E5%9B%9E%E5%88%B0%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA-stash-%E7%9A%84%E7%8A%B6%E6%80%81%E5%B9%B6%E5%88%A0%E9%99%A4%E8%BF%99%E4%B8%AA-stash">å›åˆ°æœ€åä¸€ä¸ª stash çš„çŠ¶æ€ï¼Œå¹¶åˆ é™¤è¿™ä¸ª stash</a></li><li><a href="#%E5%88%A0%E9%99%A4%E6%89%80%E6%9C%89%E7%9A%84-stash">åˆ é™¤æ‰€æœ‰çš„ stash</a></li><li><a href="#%E4%BB%8E-stash-%E4%B8%AD%E6%8B%BF%E5%87%BA%E6%9F%90%E4%B8%AA%E6%96%87%E4%BB%B6%E7%9A%84%E4%BF%AE%E6%94%B9">ä» stash ä¸­æ‹¿å‡ºæŸä¸ªæ–‡ä»¶çš„ä¿®æ”¹</a></li><li><a href="#%E5%B1%95%E7%A4%BA%E6%89%80%E6%9C%89-tracked-%E7%9A%84%E6%96%87%E4%BB%B6">å±•ç¤ºæ‰€æœ‰ tracked çš„æ–‡ä»¶</a></li><li><a href="#%E5%B1%95%E7%A4%BA%E6%89%80%E6%9C%89-untracked-%E7%9A%84%E6%96%87%E4%BB%B6">å±•ç¤ºæ‰€æœ‰ untracked çš„æ–‡ä»¶</a></li><li><a href="#%E5%B1%95%E7%A4%BA%E6%89%80%E6%9C%89%E5%BF%BD%E7%95%A5%E7%9A%84%E6%96%87%E4%BB%B6">å±•ç¤ºæ‰€æœ‰å¿½ç•¥çš„æ–‡ä»¶</a></li><li><a href="#%E5%BC%BA%E5%88%B6%E5%88%A0%E9%99%A4-untracked-%E7%9A%84%E6%96%87%E4%BB%B6">å¼ºåˆ¶åˆ é™¤ untracked çš„æ–‡ä»¶</a></li><li><a href="#%E5%BC%BA%E5%88%B6%E5%88%A0%E9%99%A4-untracked-%E7%9A%84%E7%9B%AE%E5%BD%95">å¼ºåˆ¶åˆ é™¤ untracked çš„ç›®å½•</a></li><li><a href="#%E5%B1%95%E7%A4%BA%E7%AE%80%E5%8C%96%E7%9A%84-commit-%E5%8E%86%E5%8F%B2">å±•ç¤ºç®€åŒ–çš„ commit å†å²</a></li><li><a href="#%E6%8A%8A%E6%9F%90%E4%B8%80%E4%B8%AA%E5%88%86%E6%94%AF%E5%AF%BC%E5%87%BA%E6%88%90%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6">æŠŠæŸä¸€ä¸ªåˆ†æ”¯å¯¼å‡ºæˆä¸€ä¸ªæ–‡ä»¶</a></li><li><a href="#%E4%BB%8E%E5%8C%85%E4%B8%AD%E5%AF%BC%E5%85%A5%E5%88%86%E6%94%AF">ä»åŒ…ä¸­å¯¼å…¥åˆ†æ”¯</a></li><li><a href="#%E6%89%A7%E8%A1%8C-rebase-%E4%B9%8B%E5%89%8D%E8%87%AA%E5%8A%A8-stash">æ‰§è¡Œ rebase ä¹‹å‰è‡ªåŠ¨ stash</a></li><li><a href="#%E4%BB%8E%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E6%A0%B9%E6%8D%AE-id%E6%8B%89%E4%B8%8B%E6%9F%90%E4%B8%80%E7%8A%B6%E6%80%81%E5%88%B0%E6%9C%AC%E5%9C%B0%E5%88%86%E6%94%AF">ä»è¿œç¨‹ä»“åº“æ ¹æ® IDï¼Œæ‹‰ä¸‹æŸä¸€çŠ¶æ€ï¼Œåˆ°æœ¬åœ°åˆ†æ”¯</a></li><li><a href="#%E8%AF%A6%E7%BB%86%E5%B1%95%E7%A4%BA%E4%B8%80%E8%A1%8C%E4%B8%AD%E7%9A%84%E4%BF%AE%E6%94%B9">è¯¦ç»†å±•ç¤ºä¸€è¡Œä¸­çš„ä¿®æ”¹</a></li><li><a href="#%E6%B8%85%E9%99%A4-gitignore-%E6%96%87%E4%BB%B6%E4%B8%AD%E8%AE%B0%E5%BD%95%E7%9A%84%E6%96%87%E4%BB%B6">æ¸…é™¤ gitignore æ–‡ä»¶ä¸­è®°å½•çš„æ–‡ä»¶</a></li><li><a href="#%E5%B1%95%E7%A4%BA%E6%89%80%E6%9C%89-alias-%E5%92%8C-configs">å±•ç¤ºæ‰€æœ‰ alias å’Œ configs</a></li><li><a href="#%E5%B1%95%E7%A4%BA%E5%BF%BD%E7%95%A5%E7%9A%84%E6%96%87%E4%BB%B6">å±•ç¤ºå¿½ç•¥çš„æ–‡ä»¶</a></li><li><a href="#commit-%E5%8E%86%E5%8F%B2%E4%B8%AD%E6%98%BE%E7%A4%BA-branch1-%E6%9C%89%E7%9A%84%E4%BD%86%E6%98%AF-branch2-%E6%B2%A1%E6%9C%89-commit">commit å†å²ä¸­æ˜¾ç¤º Branch1 æœ‰çš„ï¼Œä½†æ˜¯ Branch2 æ²¡æœ‰ commit</a></li><li><a href="#%E5%9C%A8-commit-log-%E4%B8%AD%E6%98%BE%E7%A4%BA-gpg-%E7%AD%BE%E5%90%8D">åœ¨ commit log ä¸­æ˜¾ç¤º GPG ç­¾å</a></li><li><a href="#%E5%88%A0%E9%99%A4%E5%85%A8%E5%B1%80%E8%AE%BE%E7%BD%AE">åˆ é™¤å…¨å±€è®¾ç½®</a></li><li><a href="#%E6%96%B0%E5%BB%BA%E5%B9%B6%E5%88%87%E6%8D%A2%E5%88%B0%E6%96%B0%E5%88%86%E6%94%AF%E4%B8%8A%E5%90%8C%E6%97%B6%E8%BF%99%E4%B8%AA%E5%88%86%E6%94%AF%E6%B2%A1%E6%9C%89%E4%BB%BB%E4%BD%95-commit">æ–°å»ºå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯ä¸Šï¼ŒåŒæ—¶è¿™ä¸ªåˆ†æ”¯æ²¡æœ‰ä»»ä½• commit</a></li><li><a href="#%E5%B1%95%E7%A4%BA%E4%BB%BB%E6%84%8F%E5%88%86%E6%94%AF%E6%9F%90%E4%B8%80%E6%96%87%E4%BB%B6%E7%9A%84%E5%86%85%E5%AE%B9">å±•ç¤ºä»»æ„åˆ†æ”¯æŸä¸€æ–‡ä»¶çš„å†…å®¹</a></li><li><a href="#clone-%E4%B8%8B%E6%9D%A5%E6%8C%87%E5%AE%9A%E7%9A%84%E5%8D%95%E4%B8%80%E5%88%86%E6%94%AF">clone ä¸‹æ¥æŒ‡å®šçš„å•ä¸€åˆ†æ”¯</a></li><li><a href="#clone-%E6%9C%80%E6%96%B0%E4%B8%80%E6%AC%A1%E6%8F%90%E4%BA%A4">clone æœ€æ–°ä¸€æ¬¡æäº¤</a></li><li><a href="#%E5%BF%BD%E7%95%A5%E6%9F%90%E4%B8%AA%E6%96%87%E4%BB%B6%E7%9A%84%E6%94%B9%E5%8A%A8">å¿½ç•¥æŸä¸ªæ–‡ä»¶çš„æ”¹åŠ¨</a></li><li><a href="#%E5%BF%BD%E7%95%A5%E6%96%87%E4%BB%B6%E7%9A%84%E6%9D%83%E9%99%90%E5%8F%98%E5%8C%96">å¿½ç•¥æ–‡ä»¶çš„æƒé™å˜åŒ–</a></li><li><a href="#%E4%BB%A5%E6%9C%80%E5%90%8E%E6%8F%90%E4%BA%A4%E7%9A%84%E9%A1%BA%E5%BA%8F%E5%88%97%E5%87%BA%E6%89%80%E6%9C%89-git-%E5%88%86%E6%94%AF">ä»¥æœ€åæäº¤çš„é¡ºåºåˆ—å‡ºæ‰€æœ‰ Git åˆ†æ”¯</a></li><li><a href="#%E5%9C%A8-commit-log-%E4%B8%AD%E6%9F%A5%E6%89%BE%E7%9B%B8%E5%85%B3%E5%86%85%E5%AE%B9">åœ¨ commit log ä¸­æŸ¥æ‰¾ç›¸å…³å†…å®¹</a></li><li><a href="#%E6%8A%8A%E6%9A%82%E5%AD%98%E5%8C%BA%E7%9A%84%E6%8C%87%E5%AE%9A-file-%E6%94%BE%E5%88%B0%E5%B7%A5%E4%BD%9C%E5%8C%BA%E4%B8%AD">æŠŠæš‚å­˜åŒºçš„æŒ‡å®š file æ”¾åˆ°å·¥ä½œåŒºä¸­</a></li><li><a href="#%E5%BC%BA%E5%88%B6%E6%8E%A8%E9%80%81">å¼ºåˆ¶æ¨é€</a></li><li><a href="#git-%E9%85%8D%E7%BD%AE-http-%E5%92%8C-socks-%E4%BB%A3%E7%90%86">git é…ç½® http å’Œ socks ä»£ç†</a></li><li><a href="#git-%E9%85%8D%E7%BD%AE-ssh-%E4%BB%A3%E7%90%86">git é…ç½® ssh ä»£ç†</a></li><li><a href="#%E8%84%91%E5%9B%BE">è„‘å›¾</a></li><li><a href="#%E4%BC%98%E9%9B%85%E7%9A%84commit%E4%BF%A1%E6%81%AF">ä¼˜é›…çš„Commitä¿¡æ¯</a></li><li><a href="#commit%E5%B7%A5%E5%85%B7">commitå·¥å…·</a></li></ul><h2 id="å±•ç¤ºå¸®åŠ©ä¿¡æ¯"><a href="#å±•ç¤ºå¸®åŠ©ä¿¡æ¯" class="headerlink" title="å±•ç¤ºå¸®åŠ©ä¿¡æ¯"></a>å±•ç¤ºå¸®åŠ©ä¿¡æ¯</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">help</span> -g</span><br></pre></td></tr></table></figure><p>The command output as below:</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">The common Git guides are:</span><br><span class="line">   attributes          Defining attributes per path</span><br><span class="line">   <span class="keyword">cli</span>                 Git command-<span class="keyword">line</span> interface and conventions</span><br><span class="line">   core-<span class="keyword">tutorial</span>       A Git core <span class="keyword">tutorial</span> <span class="keyword">for</span> developers</span><br><span class="line">   cvs-migration       Git <span class="keyword">for</span> CVS users</span><br><span class="line">   diffcore            Tweaking diff output</span><br><span class="line">   everyday            A useful minimum <span class="keyword">set</span> of commands <span class="keyword">for</span> Everyday Git</span><br><span class="line">   glossary            A Git Glossary</span><br><span class="line">   hooks               Hooks used <span class="keyword">by</span> Git</span><br><span class="line">   ignore              Specifies intentionally untracked files to ignore</span><br><span class="line">   modules             Defining submodule properties</span><br><span class="line">   namespaces          Git namespaces</span><br><span class="line">   repository-layout    Git Repository Layout</span><br><span class="line">   revisions           Specifying revisions and ranges <span class="keyword">for</span> Git</span><br><span class="line">   <span class="keyword">tutorial</span>            A <span class="keyword">tutorial</span> introduction to Git</span><br><span class="line">   <span class="keyword">tutorial</span>-2          A <span class="keyword">tutorial</span> introduction to Git: part <span class="keyword">two</span></span><br><span class="line">   workflows           <span class="keyword">An</span> overview of recommended workflows with Git</span><br><span class="line"></span><br><span class="line">&#x27;git <span class="keyword">help</span> -a&#x27; and &#x27;git <span class="keyword">help</span> -<span class="keyword">g</span>&#x27; <span class="keyword">list</span> available subcommands and some concept guides. See &#x27;git <span class="keyword">help</span> &lt;command&gt;&#x27; or &#x27;git <span class="keyword">help</span> &lt;concept&gt;&#x27; to <span class="keyword">read</span> <span class="keyword">about</span> a specific subcommand or concept.</span><br></pre></td></tr></table></figure><h2 id="å›åˆ°è¿œç¨‹ä»“åº“çš„çŠ¶æ€"><a href="#å›åˆ°è¿œç¨‹ä»“åº“çš„çŠ¶æ€" class="headerlink" title="å›åˆ°è¿œç¨‹ä»“åº“çš„çŠ¶æ€"></a>å›åˆ°è¿œç¨‹ä»“åº“çš„çŠ¶æ€</h2><p>æŠ›å¼ƒæœ¬åœ°æ‰€æœ‰çš„ä¿®æ”¹ï¼Œå›åˆ°è¿œç¨‹ä»“åº“çš„çŠ¶æ€ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git fetch --all &amp;&amp; git reset --hard origin/master</span><br></pre></td></tr></table></figure><h2 id="é‡è®¾ç¬¬ä¸€ä¸ª-commit"><a href="#é‡è®¾ç¬¬ä¸€ä¸ª-commit" class="headerlink" title="é‡è®¾ç¬¬ä¸€ä¸ª commit"></a>é‡è®¾ç¬¬ä¸€ä¸ª commit</h2><p>ä¹Ÿå°±æ˜¯æŠŠæ‰€æœ‰çš„æ”¹åŠ¨éƒ½é‡æ–°æ”¾å›å·¥ä½œåŒºï¼Œå¹¶<strong>æ¸…ç©ºæ‰€æœ‰çš„ commit</strong>ï¼Œè¿™æ ·å°±å¯ä»¥é‡æ–°æäº¤ç¬¬ä¸€ä¸ª commit äº†</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git update-ref -d HEAD</span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹å†²çªæ–‡ä»¶åˆ—è¡¨"><a href="#æŸ¥çœ‹å†²çªæ–‡ä»¶åˆ—è¡¨" class="headerlink" title="æŸ¥çœ‹å†²çªæ–‡ä»¶åˆ—è¡¨"></a>æŸ¥çœ‹å†²çªæ–‡ä»¶åˆ—è¡¨</h2><p>å±•ç¤ºå·¥ä½œåŒºçš„å†²çªæ–‡ä»¶åˆ—è¡¨</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff --name-only --diff-filter=U</span><br></pre></td></tr></table></figure><h2 id="å±•ç¤ºå·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„ä¸åŒ"><a href="#å±•ç¤ºå·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„ä¸åŒ" class="headerlink" title="å±•ç¤ºå·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„ä¸åŒ"></a>å±•ç¤ºå·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„ä¸åŒ</h2><p>è¾“å‡º<strong>å·¥ä½œåŒº</strong>å’Œ<strong>æš‚å­˜åŒº</strong>çš„ different (ä¸åŒ)ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff</span><br></pre></td></tr></table></figure><p>è¿˜å¯ä»¥å±•ç¤ºæœ¬åœ°ä»“åº“ä¸­ä»»æ„ä¸¤ä¸ª commit ä¹‹é—´çš„æ–‡ä»¶å˜åŠ¨ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff &lt;commit-id&gt; &lt;commit-id&gt;</span><br></pre></td></tr></table></figure><h2 id="å±•ç¤ºæš‚å­˜åŒºå’Œæœ€è¿‘ç‰ˆæœ¬çš„ä¸åŒ"><a href="#å±•ç¤ºæš‚å­˜åŒºå’Œæœ€è¿‘ç‰ˆæœ¬çš„ä¸åŒ" class="headerlink" title="å±•ç¤ºæš‚å­˜åŒºå’Œæœ€è¿‘ç‰ˆæœ¬çš„ä¸åŒ"></a>å±•ç¤ºæš‚å­˜åŒºå’Œæœ€è¿‘ç‰ˆæœ¬çš„ä¸åŒ</h2><p>è¾“å‡º<strong>æš‚å­˜åŒº</strong>å’Œæœ¬åœ°æœ€è¿‘çš„ç‰ˆæœ¬ (commit) çš„ different (ä¸åŒ)ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff --cached</span><br></pre></td></tr></table></figure><h2 id="å±•ç¤ºæš‚å­˜åŒºã€å·¥ä½œåŒºå’Œæœ€è¿‘ç‰ˆæœ¬çš„ä¸åŒ"><a href="#å±•ç¤ºæš‚å­˜åŒºã€å·¥ä½œåŒºå’Œæœ€è¿‘ç‰ˆæœ¬çš„ä¸åŒ" class="headerlink" title="å±•ç¤ºæš‚å­˜åŒºã€å·¥ä½œåŒºå’Œæœ€è¿‘ç‰ˆæœ¬çš„ä¸åŒ"></a>å±•ç¤ºæš‚å­˜åŒºã€å·¥ä½œåŒºå’Œæœ€è¿‘ç‰ˆæœ¬çš„ä¸åŒ</h2><p>è¾“å‡º<strong>å·¥ä½œåŒº</strong>ã€<strong>æš‚å­˜åŒº</strong> å’Œæœ¬åœ°æœ€è¿‘çš„ç‰ˆæœ¬ (commit) çš„ different (ä¸åŒ)ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff HEAD</span><br></pre></td></tr></table></figure><h2 id="å¿«é€Ÿåˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯"><a href="#å¿«é€Ÿåˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯" class="headerlink" title="å¿«é€Ÿåˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯"></a>å¿«é€Ÿåˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤å·²ç»åˆå¹¶åˆ°-master-çš„åˆ†æ”¯"><a href="#åˆ é™¤å·²ç»åˆå¹¶åˆ°-master-çš„åˆ†æ”¯" class="headerlink" title="åˆ é™¤å·²ç»åˆå¹¶åˆ° master çš„åˆ†æ”¯"></a>åˆ é™¤å·²ç»åˆå¹¶åˆ° master çš„åˆ†æ”¯</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch --merged master | grep -v <span class="string">&#x27;^\*\|  master&#x27;</span> | xargs -n 1 git branch -d</span><br></pre></td></tr></table></figure><h2 id="å±•ç¤ºæœ¬åœ°åˆ†æ”¯å…³è”è¿œç¨‹ä»“åº“çš„æƒ…å†µ"><a href="#å±•ç¤ºæœ¬åœ°åˆ†æ”¯å…³è”è¿œç¨‹ä»“åº“çš„æƒ…å†µ" class="headerlink" title="å±•ç¤ºæœ¬åœ°åˆ†æ”¯å…³è”è¿œç¨‹ä»“åº“çš„æƒ…å†µ"></a>å±•ç¤ºæœ¬åœ°åˆ†æ”¯å…³è”è¿œç¨‹ä»“åº“çš„æƒ…å†µ</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -vv</span><br></pre></td></tr></table></figure><h2 id="å…³è”è¿œç¨‹åˆ†æ”¯"><a href="#å…³è”è¿œç¨‹åˆ†æ”¯" class="headerlink" title="å…³è”è¿œç¨‹åˆ†æ”¯"></a>å…³è”è¿œç¨‹åˆ†æ”¯</h2><p>å…³è”ä¹‹åï¼Œ<code>git branch -vv</code> å°±å¯ä»¥å±•ç¤ºå…³è”çš„è¿œç¨‹åˆ†æ”¯åäº†ï¼ŒåŒæ—¶æ¨é€åˆ°è¿œç¨‹ä»“åº“ç›´æ¥ï¼š<code>git push</code>ï¼Œä¸éœ€è¦æŒ‡å®šè¿œç¨‹ä»“åº“äº†ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -u origin/mybranch</span><br></pre></td></tr></table></figure><p>æˆ–è€…åœ¨ push æ—¶åŠ ä¸Š <code>-u</code> å‚æ•°</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin/mybranch -u</span><br></pre></td></tr></table></figure><h2 id="åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯"><a href="#åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯" class="headerlink" title="åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯"></a>åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯</h2><p>-r å‚æ•°ç›¸å½“äºï¼šremote</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -r</span><br></pre></td></tr></table></figure><h2 id="åˆ—å‡ºæœ¬åœ°å’Œè¿œç¨‹åˆ†æ”¯"><a href="#åˆ—å‡ºæœ¬åœ°å’Œè¿œç¨‹åˆ†æ”¯" class="headerlink" title="åˆ—å‡ºæœ¬åœ°å’Œè¿œç¨‹åˆ†æ”¯"></a>åˆ—å‡ºæœ¬åœ°å’Œè¿œç¨‹åˆ†æ”¯</h2><p>-a å‚æ•°ç›¸å½“äºï¼šall</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -a</span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯å’Œæœ¬åœ°åˆ†æ”¯çš„å¯¹åº”å…³ç³»"><a href="#æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯å’Œæœ¬åœ°åˆ†æ”¯çš„å¯¹åº”å…³ç³»" class="headerlink" title="æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯å’Œæœ¬åœ°åˆ†æ”¯çš„å¯¹åº”å…³ç³»"></a>æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯å’Œæœ¬åœ°åˆ†æ”¯çš„å¯¹åº”å…³ç³»</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote show origin</span><br></pre></td></tr></table></figure><h2 id="è¿œç¨‹åˆ é™¤äº†åˆ†æ”¯æœ¬åœ°ä¹Ÿæƒ³åˆ é™¤"><a href="#è¿œç¨‹åˆ é™¤äº†åˆ†æ”¯æœ¬åœ°ä¹Ÿæƒ³åˆ é™¤" class="headerlink" title="è¿œç¨‹åˆ é™¤äº†åˆ†æ”¯æœ¬åœ°ä¹Ÿæƒ³åˆ é™¤"></a>è¿œç¨‹åˆ é™¤äº†åˆ†æ”¯æœ¬åœ°ä¹Ÿæƒ³åˆ é™¤</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote prune origin</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æœ¬åœ°åˆ†æ”¯"><a href="#åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æœ¬åœ°åˆ†æ”¯" class="headerlink" title="åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æœ¬åœ°åˆ†æ”¯"></a>åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æœ¬åœ°åˆ†æ”¯</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b &lt;branch-name&gt;</span><br></pre></td></tr></table></figure><h2 id="ä»è¿œç¨‹åˆ†æ”¯ä¸­åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æœ¬åœ°åˆ†æ”¯"><a href="#ä»è¿œç¨‹åˆ†æ”¯ä¸­åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æœ¬åœ°åˆ†æ”¯" class="headerlink" title="ä»è¿œç¨‹åˆ†æ”¯ä¸­åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æœ¬åœ°åˆ†æ”¯"></a>ä»è¿œç¨‹åˆ†æ”¯ä¸­åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æœ¬åœ°åˆ†æ”¯</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b &lt;branch-name&gt; origin/&lt;branch-name&gt;</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤æœ¬åœ°åˆ†æ”¯"><a href="#åˆ é™¤æœ¬åœ°åˆ†æ”¯" class="headerlink" title="åˆ é™¤æœ¬åœ°åˆ†æ”¯"></a>åˆ é™¤æœ¬åœ°åˆ†æ”¯</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -d &lt;local-branchname&gt;</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤è¿œç¨‹åˆ†æ”¯"><a href="#åˆ é™¤è¿œç¨‹åˆ†æ”¯" class="headerlink" title="åˆ é™¤è¿œç¨‹åˆ†æ”¯"></a>åˆ é™¤è¿œç¨‹åˆ†æ”¯</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin --delete &lt;remote-branchname&gt;</span><br></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin :&lt;remote-branchname&gt;</span><br></pre></td></tr></table></figure><h2 id="é‡å‘½åæœ¬åœ°åˆ†æ”¯"><a href="#é‡å‘½åæœ¬åœ°åˆ†æ”¯" class="headerlink" title="é‡å‘½åæœ¬åœ°åˆ†æ”¯"></a>é‡å‘½åæœ¬åœ°åˆ†æ”¯</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -m &lt;new-branch-name&gt;</span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹æ ‡ç­¾"><a href="#æŸ¥çœ‹æ ‡ç­¾" class="headerlink" title="æŸ¥çœ‹æ ‡ç­¾"></a>æŸ¥çœ‹æ ‡ç­¾</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag</span><br></pre></td></tr></table></figure><p>å±•ç¤ºå½“å‰åˆ†æ”¯çš„æœ€è¿‘çš„ tag</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git describe --tags --abbrev=0</span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹æ ‡ç­¾è¯¦ç»†ä¿¡æ¯"><a href="#æŸ¥çœ‹æ ‡ç­¾è¯¦ç»†ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹æ ‡ç­¾è¯¦ç»†ä¿¡æ¯"></a>æŸ¥çœ‹æ ‡ç­¾è¯¦ç»†ä¿¡æ¯</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -ln</span><br></pre></td></tr></table></figure><h2 id="æœ¬åœ°åˆ›å»ºæ ‡ç­¾"><a href="#æœ¬åœ°åˆ›å»ºæ ‡ç­¾" class="headerlink" title="æœ¬åœ°åˆ›å»ºæ ‡ç­¾"></a>æœ¬åœ°åˆ›å»ºæ ‡ç­¾</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag &lt;version-number&gt;</span><br></pre></td></tr></table></figure><p>é»˜è®¤ tag æ˜¯æ‰“åœ¨æœ€è¿‘çš„ä¸€æ¬¡ commit ä¸Šï¼Œå¦‚æœéœ€è¦æŒ‡å®š commit æ‰“ tagï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -a &lt;version-number&gt; -m <span class="string">&quot;v1.0 å‘å¸ƒ(æè¿°)&quot;</span> &lt;commit-id&gt;</span><br></pre></td></tr></table></figure><h2 id="æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“"><a href="#æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“" class="headerlink" title="æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“"></a>æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“</h2><p>é¦–å…ˆè¦ä¿è¯æœ¬åœ°åˆ›å»ºå¥½äº†æ ‡ç­¾æ‰å¯ä»¥æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin &lt;local-version-number&gt;</span><br></pre></td></tr></table></figure><p>ä¸€æ¬¡æ€§æ¨é€æ‰€æœ‰æ ‡ç­¾ï¼ŒåŒæ­¥åˆ°è¿œç¨‹ä»“åº“ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin --tags</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤æœ¬åœ°æ ‡ç­¾"><a href="#åˆ é™¤æœ¬åœ°æ ‡ç­¾" class="headerlink" title="åˆ é™¤æœ¬åœ°æ ‡ç­¾"></a>åˆ é™¤æœ¬åœ°æ ‡ç­¾</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -d &lt;tag-name&gt;</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤è¿œç¨‹æ ‡ç­¾"><a href="#åˆ é™¤è¿œç¨‹æ ‡ç­¾" class="headerlink" title="åˆ é™¤è¿œç¨‹æ ‡ç­¾"></a>åˆ é™¤è¿œç¨‹æ ‡ç­¾</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin --delete tag &lt;tagname&gt;</span><br></pre></td></tr></table></figure><h2 id="åˆ‡å›åˆ°æŸä¸ªæ ‡ç­¾"><a href="#åˆ‡å›åˆ°æŸä¸ªæ ‡ç­¾" class="headerlink" title="åˆ‡å›åˆ°æŸä¸ªæ ‡ç­¾"></a>åˆ‡å›åˆ°æŸä¸ªæ ‡ç­¾</h2><p>ä¸€èˆ¬ä¸Šçº¿ä¹‹å‰éƒ½ä¼šæ‰“ tagï¼Œå°±æ˜¯ä¸ºäº†é˜²æ­¢ä¸Šçº¿åå‡ºç°é—®é¢˜ï¼Œæ–¹ä¾¿å¿«é€Ÿå›é€€åˆ°ä¸Šä¸€ç‰ˆæœ¬ã€‚ä¸‹é¢çš„å‘½ä»¤æ˜¯å›åˆ°æŸä¸€æ ‡ç­¾ä¸‹çš„çŠ¶æ€ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b branch_name tag_name</span><br></pre></td></tr></table></figure><h2 id="æ”¾å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹"><a href="#æ”¾å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹" class="headerlink" title="æ”¾å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹"></a>æ”¾å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout &lt;file-name&gt;</span><br></pre></td></tr></table></figure><p>æ”¾å¼ƒæ‰€æœ‰ä¿®æ”¹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout .</span><br></pre></td></tr></table></figure><h2 id="æ¢å¤åˆ é™¤çš„æ–‡ä»¶"><a href="#æ¢å¤åˆ é™¤çš„æ–‡ä»¶" class="headerlink" title="æ¢å¤åˆ é™¤çš„æ–‡ä»¶"></a>æ¢å¤åˆ é™¤çš„æ–‡ä»¶</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git rev-list -n 1 HEAD -- &lt;file_path&gt; <span class="comment">#å¾—åˆ° deleting_commit</span></span><br><span class="line"></span><br><span class="line">git checkout &lt;deleting_commit&gt;^ -- &lt;file_path&gt; <span class="comment">#å›åˆ°åˆ é™¤æ–‡ä»¶ deleting_commit ä¹‹å‰çš„çŠ¶æ€</span></span><br></pre></td></tr></table></figure><h2 id="ä»¥æ–°å¢ä¸€ä¸ª-commit-çš„æ–¹å¼è¿˜åŸæŸä¸€ä¸ª-commit-çš„ä¿®æ”¹"><a href="#ä»¥æ–°å¢ä¸€ä¸ª-commit-çš„æ–¹å¼è¿˜åŸæŸä¸€ä¸ª-commit-çš„ä¿®æ”¹" class="headerlink" title="ä»¥æ–°å¢ä¸€ä¸ª commit çš„æ–¹å¼è¿˜åŸæŸä¸€ä¸ª commit çš„ä¿®æ”¹"></a>ä»¥æ–°å¢ä¸€ä¸ª commit çš„æ–¹å¼è¿˜åŸæŸä¸€ä¸ª commit çš„ä¿®æ”¹</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git revert &lt;commit-id&gt;</span><br></pre></td></tr></table></figure><h2 id="å›åˆ°æŸä¸ª-commit-çš„çŠ¶æ€ï¼Œå¹¶åˆ é™¤åé¢çš„-commit"><a href="#å›åˆ°æŸä¸ª-commit-çš„çŠ¶æ€ï¼Œå¹¶åˆ é™¤åé¢çš„-commit" class="headerlink" title="å›åˆ°æŸä¸ª commit çš„çŠ¶æ€ï¼Œå¹¶åˆ é™¤åé¢çš„ commit"></a>å›åˆ°æŸä¸ª commit çš„çŠ¶æ€ï¼Œå¹¶åˆ é™¤åé¢çš„ commit</h2><p>å’Œ revert çš„åŒºåˆ«ï¼šreset å‘½ä»¤ä¼šæŠ¹å»æŸä¸ª commit id ä¹‹åçš„æ‰€æœ‰ commit</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git reset &lt;commit-id&gt;  <span class="comment">#é»˜è®¤å°±æ˜¯-mixedå‚æ•°ã€‚</span></span><br><span class="line"></span><br><span class="line">git reset --mixed HEAD^  <span class="comment">#å›é€€è‡³ä¸Šä¸ªç‰ˆæœ¬ï¼Œå®ƒå°†é‡ç½®HEADåˆ°å¦å¤–ä¸€ä¸ªcommit,å¹¶ä¸”é‡ç½®æš‚å­˜åŒºä»¥ä¾¿å’ŒHEADç›¸åŒ¹é…ï¼Œä½†æ˜¯ä¹Ÿåˆ°æ­¤ä¸ºæ­¢ã€‚å·¥ä½œåŒºä¸ä¼šè¢«æ›´æ”¹ã€‚</span></span><br><span class="line"></span><br><span class="line">git reset --soft HEAD~3  <span class="comment">#å›é€€è‡³ä¸‰ä¸ªç‰ˆæœ¬ä¹‹å‰ï¼Œåªå›é€€äº†commitçš„ä¿¡æ¯ï¼Œæš‚å­˜åŒºå’Œå·¥ä½œåŒºä¸å›é€€ä¹‹å‰ä¿æŒä¸€è‡´ã€‚å¦‚æœè¿˜è¦æäº¤ï¼Œç›´æ¥commitå³å¯ Â </span></span><br><span class="line"></span><br><span class="line">git reset --hard &lt;commit-id&gt;  <span class="comment">#å½»åº•å›é€€åˆ°æŒ‡å®šcommit-idçš„çŠ¶æ€ï¼Œæš‚å­˜åŒºå’Œå·¥ä½œåŒºä¹Ÿä¼šå˜ä¸ºæŒ‡å®šcommit-idç‰ˆæœ¬çš„å†…å®¹</span></span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹ä¸Šä¸€ä¸ª-commit-çš„æè¿°"><a href="#ä¿®æ”¹ä¸Šä¸€ä¸ª-commit-çš„æè¿°" class="headerlink" title="ä¿®æ”¹ä¸Šä¸€ä¸ª commit çš„æè¿°"></a>ä¿®æ”¹ä¸Šä¸€ä¸ª commit çš„æè¿°</h2><p>å¦‚æœæš‚å­˜åŒºæœ‰æ”¹åŠ¨ï¼ŒåŒæ—¶ä¹Ÿä¼šå°†æš‚å­˜åŒºçš„æ”¹åŠ¨æäº¤åˆ°ä¸Šä¸€ä¸ª commit</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit --amend</span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹-commit-å†å²"><a href="#æŸ¥çœ‹-commit-å†å²" class="headerlink" title="æŸ¥çœ‹ commit å†å²"></a>æŸ¥çœ‹ commit å†å²</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span></span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹æŸæ®µä»£ç æ˜¯è°å†™çš„"><a href="#æŸ¥çœ‹æŸæ®µä»£ç æ˜¯è°å†™çš„" class="headerlink" title="æŸ¥çœ‹æŸæ®µä»£ç æ˜¯è°å†™çš„"></a>æŸ¥çœ‹æŸæ®µä»£ç æ˜¯è°å†™çš„</h2><p>blame çš„æ„æ€ä¸ºâ€˜è´£æ€ªâ€™ï¼Œä½ æ‡‚çš„ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git blame &lt;file-name&gt;</span><br></pre></td></tr></table></figure><h2 id="æ˜¾ç¤ºæœ¬åœ°æ›´æ–°è¿‡-HEAD-çš„-git-å‘½ä»¤è®°å½•"><a href="#æ˜¾ç¤ºæœ¬åœ°æ›´æ–°è¿‡-HEAD-çš„-git-å‘½ä»¤è®°å½•" class="headerlink" title="æ˜¾ç¤ºæœ¬åœ°æ›´æ–°è¿‡ HEAD çš„ git å‘½ä»¤è®°å½•"></a>æ˜¾ç¤ºæœ¬åœ°æ›´æ–°è¿‡ HEAD çš„ git å‘½ä»¤è®°å½•</h2><p>æ¯æ¬¡æ›´æ–°äº† HEAD çš„ git å‘½ä»¤æ¯”å¦‚ commitã€amendã€cherry-pickã€resetã€revert ç­‰éƒ½ä¼šè¢«è®°å½•ä¸‹æ¥ï¼ˆä¸é™åˆ†æ”¯ï¼‰ï¼Œå°±åƒ shell çš„ history ä¸€æ ·ã€‚<br>è¿™æ ·ä½ å¯ä»¥ reset åˆ°ä»»ä½•ä¸€æ¬¡æ›´æ–°äº† HEAD çš„æ“ä½œä¹‹åï¼Œè€Œä¸ä»…ä»…æ˜¯å›åˆ°å½“å‰åˆ†æ”¯ä¸‹çš„æŸä¸ª commit ä¹‹åçš„çŠ¶æ€ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reflog</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹ä½œè€…å"><a href="#ä¿®æ”¹ä½œè€…å" class="headerlink" title="ä¿®æ”¹ä½œè€…å"></a>ä¿®æ”¹ä½œè€…å</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit --amend --author=<span class="string">&#x27;Author Name &lt;email@address.com&gt;&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹è¿œç¨‹ä»“åº“çš„-url"><a href="#ä¿®æ”¹è¿œç¨‹ä»“åº“çš„-url" class="headerlink" title="ä¿®æ”¹è¿œç¨‹ä»“åº“çš„ url"></a>ä¿®æ”¹è¿œç¨‹ä»“åº“çš„ url</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote set-url origin &lt;URL&gt;</span><br></pre></td></tr></table></figure><h2 id="å¢åŠ è¿œç¨‹ä»“åº“"><a href="#å¢åŠ è¿œç¨‹ä»“åº“" class="headerlink" title="å¢åŠ è¿œç¨‹ä»“åº“"></a>å¢åŠ è¿œç¨‹ä»“åº“</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin &lt;remote-url&gt;</span><br></pre></td></tr></table></figure><h2 id="åˆ—å‡ºæ‰€æœ‰è¿œç¨‹ä»“åº“"><a href="#åˆ—å‡ºæ‰€æœ‰è¿œç¨‹ä»“åº“" class="headerlink" title="åˆ—å‡ºæ‰€æœ‰è¿œç¨‹ä»“åº“"></a>åˆ—å‡ºæ‰€æœ‰è¿œç¨‹ä»“åº“</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote</span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹ä¸¤ä¸ªæ˜ŸæœŸå†…çš„æ”¹åŠ¨"><a href="#æŸ¥çœ‹ä¸¤ä¸ªæ˜ŸæœŸå†…çš„æ”¹åŠ¨" class="headerlink" title="æŸ¥çœ‹ä¸¤ä¸ªæ˜ŸæœŸå†…çš„æ”¹åŠ¨"></a>æŸ¥çœ‹ä¸¤ä¸ªæ˜ŸæœŸå†…çš„æ”¹åŠ¨</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git whatchanged --since=<span class="string">&#x27;2 weeks ago&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="æŠŠ-A-åˆ†æ”¯çš„æŸä¸€ä¸ª-commitï¼Œæ”¾åˆ°-B-åˆ†æ”¯ä¸Š"><a href="#æŠŠ-A-åˆ†æ”¯çš„æŸä¸€ä¸ª-commitï¼Œæ”¾åˆ°-B-åˆ†æ”¯ä¸Š" class="headerlink" title="æŠŠ A åˆ†æ”¯çš„æŸä¸€ä¸ª commitï¼Œæ”¾åˆ° B åˆ†æ”¯ä¸Š"></a>æŠŠ A åˆ†æ”¯çš„æŸä¸€ä¸ª commitï¼Œæ”¾åˆ° B åˆ†æ”¯ä¸Š</h2><p>è¿™ä¸ªè¿‡ç¨‹éœ€è¦ <code>cherry-pick</code> å‘½ä»¤ï¼Œ<span class="exturl" data-url="aHR0cDovL3NnNTUyLml0ZXllLmNvbS9ibG9nLzEzMDA3MTMjYmMyMzY3OTI4">å‚è€ƒ<i class="fa fa-external-link-alt"></i></span></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout &lt;branch-name&gt; &amp;&amp; git cherry-pick &lt;commit-id&gt;</span><br></pre></td></tr></table></figure><h2 id="ç»™-git-å‘½ä»¤èµ·åˆ«å"><a href="#ç»™-git-å‘½ä»¤èµ·åˆ«å" class="headerlink" title="ç»™ git å‘½ä»¤èµ·åˆ«å"></a>ç»™ git å‘½ä»¤èµ·åˆ«å</h2><p>ç®€åŒ–å‘½ä»¤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git config --global <span class="built_in">alias</span>.&lt;handle&gt; &lt;<span class="built_in">command</span>&gt;</span><br><span class="line"></span><br><span class="line">æ¯”å¦‚ï¼šgit status æ”¹æˆ git stï¼Œè¿™æ ·å¯ä»¥ç®€åŒ–å‘½ä»¤</span><br><span class="line"></span><br><span class="line">git config --global alias.st status</span><br></pre></td></tr></table></figure><h2 id="å­˜å‚¨å½“å‰çš„ä¿®æ”¹ï¼Œä½†ä¸ç”¨æäº¤-commit"><a href="#å­˜å‚¨å½“å‰çš„ä¿®æ”¹ï¼Œä½†ä¸ç”¨æäº¤-commit" class="headerlink" title="å­˜å‚¨å½“å‰çš„ä¿®æ”¹ï¼Œä½†ä¸ç”¨æäº¤ commit"></a>å­˜å‚¨å½“å‰çš„ä¿®æ”¹ï¼Œä½†ä¸ç”¨æäº¤ commit</h2><p>è¯¦è§£å¯ä»¥å‚è€ƒ<span class="exturl" data-url="aHR0cDovL3d3dy5saWFveHVlZmVuZy5jb20vd2lraS8wMDEzNzM5NTE2MzA1OTI5NjA2ZGQxODM2MTI0ODU3OGM2N2I4MDY3YzhjMDE3YjAwMC8wMDEzNzYwMjM1OTE3ODc5NGQ5NjY5MjNlNWM0MTM0YmM4YmY5OGRmYjAzYWVhMzAwMA==">å»–é›ªå³°è€å¸ˆçš„ git æ•™ç¨‹<i class="fa fa-external-link-alt"></i></span></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash</span><br></pre></td></tr></table></figure><h2 id="ä¿å­˜å½“å‰çŠ¶æ€ï¼ŒåŒ…æ‹¬-untracked-çš„æ–‡ä»¶"><a href="#ä¿å­˜å½“å‰çŠ¶æ€ï¼ŒåŒ…æ‹¬-untracked-çš„æ–‡ä»¶" class="headerlink" title="ä¿å­˜å½“å‰çŠ¶æ€ï¼ŒåŒ…æ‹¬ untracked çš„æ–‡ä»¶"></a>ä¿å­˜å½“å‰çŠ¶æ€ï¼ŒåŒ…æ‹¬ untracked çš„æ–‡ä»¶</h2><p>untracked æ–‡ä»¶ï¼šæ–°å»ºçš„æ–‡ä»¶</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash -u</span><br></pre></td></tr></table></figure><h2 id="å±•ç¤ºæ‰€æœ‰-stashes"><a href="#å±•ç¤ºæ‰€æœ‰-stashes" class="headerlink" title="å±•ç¤ºæ‰€æœ‰ stashes"></a>å±•ç¤ºæ‰€æœ‰ stashes</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash list</span><br></pre></td></tr></table></figure><h2 id="å›åˆ°æŸä¸ª-stash-çš„çŠ¶æ€"><a href="#å›åˆ°æŸä¸ª-stash-çš„çŠ¶æ€" class="headerlink" title="å›åˆ°æŸä¸ª stash çš„çŠ¶æ€"></a>å›åˆ°æŸä¸ª stash çš„çŠ¶æ€</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash apply &lt;stash@&#123;n&#125;&gt;</span><br></pre></td></tr></table></figure><h2 id="å›åˆ°æœ€åä¸€ä¸ª-stash-çš„çŠ¶æ€ï¼Œå¹¶åˆ é™¤è¿™ä¸ª-stash"><a href="#å›åˆ°æœ€åä¸€ä¸ª-stash-çš„çŠ¶æ€ï¼Œå¹¶åˆ é™¤è¿™ä¸ª-stash" class="headerlink" title="å›åˆ°æœ€åä¸€ä¸ª stash çš„çŠ¶æ€ï¼Œå¹¶åˆ é™¤è¿™ä¸ª stash"></a>å›åˆ°æœ€åä¸€ä¸ª stash çš„çŠ¶æ€ï¼Œå¹¶åˆ é™¤è¿™ä¸ª stash</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash pop</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤æ‰€æœ‰çš„-stash"><a href="#åˆ é™¤æ‰€æœ‰çš„-stash" class="headerlink" title="åˆ é™¤æ‰€æœ‰çš„ stash"></a>åˆ é™¤æ‰€æœ‰çš„ stash</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash clear</span><br></pre></td></tr></table></figure><h2 id="ä»-stash-ä¸­æ‹¿å‡ºæŸä¸ªæ–‡ä»¶çš„ä¿®æ”¹"><a href="#ä»-stash-ä¸­æ‹¿å‡ºæŸä¸ªæ–‡ä»¶çš„ä¿®æ”¹" class="headerlink" title="ä» stash ä¸­æ‹¿å‡ºæŸä¸ªæ–‡ä»¶çš„ä¿®æ”¹"></a>ä» stash ä¸­æ‹¿å‡ºæŸä¸ªæ–‡ä»¶çš„ä¿®æ”¹</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout &lt;stash@&#123;n&#125;&gt; -- &lt;file-path&gt;</span><br></pre></td></tr></table></figure><h2 id="å±•ç¤ºæ‰€æœ‰-tracked-çš„æ–‡ä»¶"><a href="#å±•ç¤ºæ‰€æœ‰-tracked-çš„æ–‡ä»¶" class="headerlink" title="å±•ç¤ºæ‰€æœ‰ tracked çš„æ–‡ä»¶"></a>å±•ç¤ºæ‰€æœ‰ tracked çš„æ–‡ä»¶</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git ls-files -t</span><br></pre></td></tr></table></figure><h2 id="å±•ç¤ºæ‰€æœ‰-untracked-çš„æ–‡ä»¶"><a href="#å±•ç¤ºæ‰€æœ‰-untracked-çš„æ–‡ä»¶" class="headerlink" title="å±•ç¤ºæ‰€æœ‰ untracked çš„æ–‡ä»¶"></a>å±•ç¤ºæ‰€æœ‰ untracked çš„æ–‡ä»¶</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git ls-files --others</span><br></pre></td></tr></table></figure><h2 id="å±•ç¤ºæ‰€æœ‰å¿½ç•¥çš„æ–‡ä»¶"><a href="#å±•ç¤ºæ‰€æœ‰å¿½ç•¥çš„æ–‡ä»¶" class="headerlink" title="å±•ç¤ºæ‰€æœ‰å¿½ç•¥çš„æ–‡ä»¶"></a>å±•ç¤ºæ‰€æœ‰å¿½ç•¥çš„æ–‡ä»¶</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git ls-files --others -i --exclude-standard</span><br></pre></td></tr></table></figure><h2 id="å¼ºåˆ¶åˆ é™¤-untracked-çš„æ–‡ä»¶"><a href="#å¼ºåˆ¶åˆ é™¤-untracked-çš„æ–‡ä»¶" class="headerlink" title="å¼ºåˆ¶åˆ é™¤ untracked çš„æ–‡ä»¶"></a>å¼ºåˆ¶åˆ é™¤ untracked çš„æ–‡ä»¶</h2><p>å¯ä»¥ç”¨æ¥åˆ é™¤æ–°å»ºçš„æ–‡ä»¶ã€‚å¦‚æœä¸æŒ‡å®šæ–‡ä»¶æ–‡ä»¶åï¼Œåˆ™æ¸…ç©ºæ‰€æœ‰å·¥ä½œçš„ untracked æ–‡ä»¶ã€‚<code>clean</code> å‘½ä»¤ï¼Œ<strong>æ³¨æ„ä¸¤ç‚¹</strong>ï¼š</p><ol><li>clean åï¼Œåˆ é™¤çš„æ–‡ä»¶æ— æ³•æ‰¾å›</li><li>ä¸ä¼šå½±å“ tracked çš„æ–‡ä»¶çš„æ”¹åŠ¨ï¼Œåªä¼šåˆ é™¤ untracked çš„æ–‡ä»¶</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clean &lt;file-name&gt; -f</span><br></pre></td></tr></table></figure><h2 id="å¼ºåˆ¶åˆ é™¤-untracked-çš„ç›®å½•"><a href="#å¼ºåˆ¶åˆ é™¤-untracked-çš„ç›®å½•" class="headerlink" title="å¼ºåˆ¶åˆ é™¤ untracked çš„ç›®å½•"></a>å¼ºåˆ¶åˆ é™¤ untracked çš„ç›®å½•</h2><p>å¯ä»¥ç”¨æ¥åˆ é™¤æ–°å»ºçš„ç›®å½•ï¼Œ<strong>æ³¨æ„</strong>:è¿™ä¸ªå‘½ä»¤ä¹Ÿå¯ä»¥ç”¨æ¥åˆ é™¤ untracked çš„æ–‡ä»¶ã€‚è¯¦æƒ…è§ä¸Šä¸€æ¡</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clean &lt;directory-name&gt; -df</span><br></pre></td></tr></table></figure><h2 id="å±•ç¤ºç®€åŒ–çš„-commit-å†å²"><a href="#å±•ç¤ºç®€åŒ–çš„-commit-å†å²" class="headerlink" title="å±•ç¤ºç®€åŒ–çš„ commit å†å²"></a>å±•ç¤ºç®€åŒ–çš„ commit å†å²</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> --pretty=oneline --graph --decorate --all</span><br></pre></td></tr></table></figure><h2 id="æŠŠæŸä¸€ä¸ªåˆ†æ”¯å¯¼å‡ºæˆä¸€ä¸ªæ–‡ä»¶"><a href="#æŠŠæŸä¸€ä¸ªåˆ†æ”¯å¯¼å‡ºæˆä¸€ä¸ªæ–‡ä»¶" class="headerlink" title="æŠŠæŸä¸€ä¸ªåˆ†æ”¯å¯¼å‡ºæˆä¸€ä¸ªæ–‡ä»¶"></a>æŠŠæŸä¸€ä¸ªåˆ†æ”¯å¯¼å‡ºæˆä¸€ä¸ªæ–‡ä»¶</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git bundle create &lt;file&gt; &lt;branch-name&gt;</span><br></pre></td></tr></table></figure><h2 id="ä»åŒ…ä¸­å¯¼å…¥åˆ†æ”¯"><a href="#ä»åŒ…ä¸­å¯¼å…¥åˆ†æ”¯" class="headerlink" title="ä»åŒ…ä¸­å¯¼å…¥åˆ†æ”¯"></a>ä»åŒ…ä¸­å¯¼å…¥åˆ†æ”¯</h2><p>æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œåˆ†æ”¯å†…å®¹å°±æ˜¯ä¸Šé¢ <code>git bundle create</code> å‘½ä»¤å¯¼å‡ºçš„å†…å®¹</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> repo.bundle &lt;repo-dir&gt; -b &lt;branch-name&gt;</span><br></pre></td></tr></table></figure><h2 id="æ‰§è¡Œ-rebase-ä¹‹å‰è‡ªåŠ¨-stash"><a href="#æ‰§è¡Œ-rebase-ä¹‹å‰è‡ªåŠ¨-stash" class="headerlink" title="æ‰§è¡Œ rebase ä¹‹å‰è‡ªåŠ¨ stash"></a>æ‰§è¡Œ rebase ä¹‹å‰è‡ªåŠ¨ stash</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase --autostash</span><br></pre></td></tr></table></figure><h2 id="ä»è¿œç¨‹ä»“åº“æ ¹æ®-IDï¼Œæ‹‰ä¸‹æŸä¸€çŠ¶æ€ï¼Œåˆ°æœ¬åœ°åˆ†æ”¯"><a href="#ä»è¿œç¨‹ä»“åº“æ ¹æ®-IDï¼Œæ‹‰ä¸‹æŸä¸€çŠ¶æ€ï¼Œåˆ°æœ¬åœ°åˆ†æ”¯" class="headerlink" title="ä»è¿œç¨‹ä»“åº“æ ¹æ® IDï¼Œæ‹‰ä¸‹æŸä¸€çŠ¶æ€ï¼Œåˆ°æœ¬åœ°åˆ†æ”¯"></a>ä»è¿œç¨‹ä»“åº“æ ¹æ® IDï¼Œæ‹‰ä¸‹æŸä¸€çŠ¶æ€ï¼Œåˆ°æœ¬åœ°åˆ†æ”¯</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git fetch origin pull/&lt;id&gt;/head:&lt;branch-name&gt;</span><br></pre></td></tr></table></figure><h2 id="è¯¦ç»†å±•ç¤ºä¸€è¡Œä¸­çš„ä¿®æ”¹"><a href="#è¯¦ç»†å±•ç¤ºä¸€è¡Œä¸­çš„ä¿®æ”¹" class="headerlink" title="è¯¦ç»†å±•ç¤ºä¸€è¡Œä¸­çš„ä¿®æ”¹"></a>è¯¦ç»†å±•ç¤ºä¸€è¡Œä¸­çš„ä¿®æ”¹</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff --word-diff</span><br></pre></td></tr></table></figure><h2 id="æ¸…é™¤-gitignore-æ–‡ä»¶ä¸­è®°å½•çš„æ–‡ä»¶"><a href="#æ¸…é™¤-gitignore-æ–‡ä»¶ä¸­è®°å½•çš„æ–‡ä»¶" class="headerlink" title="æ¸…é™¤ gitignore æ–‡ä»¶ä¸­è®°å½•çš„æ–‡ä»¶"></a>æ¸…é™¤ gitignore æ–‡ä»¶ä¸­è®°å½•çš„æ–‡ä»¶</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clean -X -f</span><br></pre></td></tr></table></figure><h2 id="å±•ç¤ºæ‰€æœ‰-alias-å’Œ-configs"><a href="#å±•ç¤ºæ‰€æœ‰-alias-å’Œ-configs" class="headerlink" title="å±•ç¤ºæ‰€æœ‰ alias å’Œ configs"></a>å±•ç¤ºæ‰€æœ‰ alias å’Œ configs</h2><p><strong>æ³¨æ„ï¼š</strong> config åˆ†ä¸ºï¼šå½“å‰ç›®å½•ï¼ˆlocalï¼‰å’Œå…¨å±€ï¼ˆgolbalï¼‰çš„ configï¼Œé»˜è®¤ä¸ºå½“å‰ç›®å½•çš„ config</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --<span class="built_in">local</span> --list (å½“å‰ç›®å½•)</span><br><span class="line">git config --global --list (å…¨å±€)</span><br></pre></td></tr></table></figure><h2 id="å±•ç¤ºå¿½ç•¥çš„æ–‡ä»¶"><a href="#å±•ç¤ºå¿½ç•¥çš„æ–‡ä»¶" class="headerlink" title="å±•ç¤ºå¿½ç•¥çš„æ–‡ä»¶"></a>å±•ç¤ºå¿½ç•¥çš„æ–‡ä»¶</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status --ignored</span><br></pre></td></tr></table></figure><h2 id="commit-å†å²ä¸­æ˜¾ç¤º-Branch1-æœ‰çš„ï¼Œä½†æ˜¯-Branch2-æ²¡æœ‰-commit"><a href="#commit-å†å²ä¸­æ˜¾ç¤º-Branch1-æœ‰çš„ï¼Œä½†æ˜¯-Branch2-æ²¡æœ‰-commit" class="headerlink" title="commit å†å²ä¸­æ˜¾ç¤º Branch1 æœ‰çš„ï¼Œä½†æ˜¯ Branch2 æ²¡æœ‰ commit"></a>commit å†å²ä¸­æ˜¾ç¤º Branch1 æœ‰çš„ï¼Œä½†æ˜¯ Branch2 æ²¡æœ‰ commit</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> Branch1 ^Branch2</span><br></pre></td></tr></table></figure><h2 id="åœ¨-commit-log-ä¸­æ˜¾ç¤º-GPG-ç­¾å"><a href="#åœ¨-commit-log-ä¸­æ˜¾ç¤º-GPG-ç­¾å" class="headerlink" title="åœ¨ commit log ä¸­æ˜¾ç¤º GPG ç­¾å"></a>åœ¨ commit log ä¸­æ˜¾ç¤º GPG ç­¾å</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> --show-signature</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤å…¨å±€è®¾ç½®"><a href="#åˆ é™¤å…¨å±€è®¾ç½®" class="headerlink" title="åˆ é™¤å…¨å±€è®¾ç½®"></a>åˆ é™¤å…¨å±€è®¾ç½®</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global --<span class="built_in">unset</span> &lt;entry-name&gt;</span><br></pre></td></tr></table></figure><h2 id="æ–°å»ºå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯ä¸Šï¼ŒåŒæ—¶è¿™ä¸ªåˆ†æ”¯æ²¡æœ‰ä»»ä½•-commit"><a href="#æ–°å»ºå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯ä¸Šï¼ŒåŒæ—¶è¿™ä¸ªåˆ†æ”¯æ²¡æœ‰ä»»ä½•-commit" class="headerlink" title="æ–°å»ºå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯ä¸Šï¼ŒåŒæ—¶è¿™ä¸ªåˆ†æ”¯æ²¡æœ‰ä»»ä½• commit"></a>æ–°å»ºå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯ä¸Šï¼ŒåŒæ—¶è¿™ä¸ªåˆ†æ”¯æ²¡æœ‰ä»»ä½• commit</h2><p>ç›¸å½“äºä¿å­˜ä¿®æ”¹ï¼Œä½†æ˜¯é‡å†™ commit å†å²</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout --orphan &lt;branch-name&gt;</span><br></pre></td></tr></table></figure><h2 id="å±•ç¤ºä»»æ„åˆ†æ”¯æŸä¸€æ–‡ä»¶çš„å†…å®¹"><a href="#å±•ç¤ºä»»æ„åˆ†æ”¯æŸä¸€æ–‡ä»¶çš„å†…å®¹" class="headerlink" title="å±•ç¤ºä»»æ„åˆ†æ”¯æŸä¸€æ–‡ä»¶çš„å†…å®¹"></a>å±•ç¤ºä»»æ„åˆ†æ”¯æŸä¸€æ–‡ä»¶çš„å†…å®¹</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git show &lt;branch-name&gt;:&lt;file-name&gt;</span><br></pre></td></tr></table></figure><h2 id="clone-ä¸‹æ¥æŒ‡å®šçš„å•ä¸€åˆ†æ”¯"><a href="#clone-ä¸‹æ¥æŒ‡å®šçš„å•ä¸€åˆ†æ”¯" class="headerlink" title="clone ä¸‹æ¥æŒ‡å®šçš„å•ä¸€åˆ†æ”¯"></a>clone ä¸‹æ¥æŒ‡å®šçš„å•ä¸€åˆ†æ”¯</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b &lt;branch-name&gt; --single-branch https://github.com/user/repo.git</span><br></pre></td></tr></table></figure><h2 id="clone-æœ€æ–°ä¸€æ¬¡æäº¤"><a href="#clone-æœ€æ–°ä¸€æ¬¡æäº¤" class="headerlink" title="clone æœ€æ–°ä¸€æ¬¡æäº¤"></a>clone æœ€æ–°ä¸€æ¬¡æäº¤</h2><p>åªä¼š clone æœ€è¿‘ä¸€æ¬¡æäº¤ï¼Œå°†å‡å°‘ clone æ—¶é—´</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --depth=1 https://github.com/user/repo.git</span><br></pre></td></tr></table></figure><h2 id="å¿½ç•¥æŸä¸ªæ–‡ä»¶çš„æ”¹åŠ¨"><a href="#å¿½ç•¥æŸä¸ªæ–‡ä»¶çš„æ”¹åŠ¨" class="headerlink" title="å¿½ç•¥æŸä¸ªæ–‡ä»¶çš„æ”¹åŠ¨"></a>å¿½ç•¥æŸä¸ªæ–‡ä»¶çš„æ”¹åŠ¨</h2><p>å…³é—­ track æŒ‡å®šæ–‡ä»¶çš„æ”¹åŠ¨ï¼Œä¹Ÿå°±æ˜¯ Git å°†ä¸ä¼šåœ¨è®°å½•è¿™ä¸ªæ–‡ä»¶çš„æ”¹åŠ¨</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git update-index --assume-unchanged path/to/file</span><br></pre></td></tr></table></figure><p>æ¢å¤ track æŒ‡å®šæ–‡ä»¶çš„æ”¹åŠ¨</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git update-index --no-assume-unchanged path/to/file</span><br></pre></td></tr></table></figure><h2 id="å¿½ç•¥æ–‡ä»¶çš„æƒé™å˜åŒ–"><a href="#å¿½ç•¥æ–‡ä»¶çš„æƒé™å˜åŒ–" class="headerlink" title="å¿½ç•¥æ–‡ä»¶çš„æƒé™å˜åŒ–"></a>å¿½ç•¥æ–‡ä»¶çš„æƒé™å˜åŒ–</h2><p>ä¸å†å°†æ–‡ä»¶çš„æƒé™å˜åŒ–è§†ä½œæ”¹åŠ¨</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config core.fileMode <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="ä»¥æœ€åæäº¤çš„é¡ºåºåˆ—å‡ºæ‰€æœ‰-Git-åˆ†æ”¯"><a href="#ä»¥æœ€åæäº¤çš„é¡ºåºåˆ—å‡ºæ‰€æœ‰-Git-åˆ†æ”¯" class="headerlink" title="ä»¥æœ€åæäº¤çš„é¡ºåºåˆ—å‡ºæ‰€æœ‰ Git åˆ†æ”¯"></a>ä»¥æœ€åæäº¤çš„é¡ºåºåˆ—å‡ºæ‰€æœ‰ Git åˆ†æ”¯</h2><p>æœ€æ–°çš„æ”¾åœ¨æœ€ä¸Šé¢</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git for-each-ref --sort=-committerdate --format=<span class="string">&#x27;%(refname:short)&#x27;</span> refs/heads/</span><br></pre></td></tr></table></figure><h2 id="åœ¨-commit-log-ä¸­æŸ¥æ‰¾ç›¸å…³å†…å®¹"><a href="#åœ¨-commit-log-ä¸­æŸ¥æ‰¾ç›¸å…³å†…å®¹" class="headerlink" title="åœ¨ commit log ä¸­æŸ¥æ‰¾ç›¸å…³å†…å®¹"></a>åœ¨ commit log ä¸­æŸ¥æ‰¾ç›¸å…³å†…å®¹</h2><p>é€šè¿‡ grep æŸ¥æ‰¾ï¼Œgiven-textï¼šæ‰€éœ€è¦æŸ¥æ‰¾çš„å­—æ®µ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> --all --grep=<span class="string">&#x27;&lt;given-text&gt;&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="æŠŠæš‚å­˜åŒºçš„æŒ‡å®š-file-æ”¾åˆ°å·¥ä½œåŒºä¸­"><a href="#æŠŠæš‚å­˜åŒºçš„æŒ‡å®š-file-æ”¾åˆ°å·¥ä½œåŒºä¸­" class="headerlink" title="æŠŠæš‚å­˜åŒºçš„æŒ‡å®š file æ”¾åˆ°å·¥ä½œåŒºä¸­"></a>æŠŠæš‚å­˜åŒºçš„æŒ‡å®š file æ”¾åˆ°å·¥ä½œåŒºä¸­</h2><p>ä¸æ·»åŠ å‚æ•°ï¼Œé»˜è®¤æ˜¯ <code>-mixed</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset &lt;file-name&gt;</span><br></pre></td></tr></table></figure><h2 id="å¼ºåˆ¶æ¨é€"><a href="#å¼ºåˆ¶æ¨é€" class="headerlink" title="å¼ºåˆ¶æ¨é€"></a>å¼ºåˆ¶æ¨é€</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push -f &lt;remote-name&gt; &lt;branch-name&gt;</span><br></pre></td></tr></table></figure><h2 id="git-é…ç½®-http-å’Œ-socks-ä»£ç†"><a href="#git-é…ç½®-http-å’Œ-socks-ä»£ç†" class="headerlink" title="git é…ç½® http å’Œ socks ä»£ç†"></a>git é…ç½® http å’Œ socks ä»£ç†</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config --global https.proxy <span class="string">&#x27;http://127.0.0.1:8001&#x27;</span>   <span class="comment"># é€‚ç”¨äº privoxy å°† socks åè®®è½¬ä¸º http åè®®çš„ http ç«¯å£</span></span><br><span class="line">git config --global http.proxy <span class="string">&#x27;http://127.0.0.1:8001&#x27;</span></span><br><span class="line">git config --global socks.proxy <span class="string">&quot;127.0.0.1:1080&quot;</span></span><br></pre></td></tr></table></figure><h2 id="git-é…ç½®-ssh-ä»£ç†"><a href="#git-é…ç½®-ssh-ä»£ç†" class="headerlink" title="git é…ç½® ssh ä»£ç†"></a>git é…ç½® ssh ä»£ç†</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ cat ~/.ssh/config</span><br><span class="line">Host gitlab.com</span><br><span class="line">ProxyCommand nc -X 5 -x 127.0.0.1:1080 %h %p    <span class="comment"># ç›´æ¥ä½¿ç”¨ shadowsocks æä¾›çš„ socks5 ä»£ç†ç«¯å£</span></span><br><span class="line"></span><br><span class="line">Host github.com</span><br><span class="line">ProxyCommand nc -X 5 -x 127.0.0.1:1080 %h %p    </span><br></pre></td></tr></table></figure><h2 id="è„‘å›¾"><a href="#è„‘å›¾" class="headerlink" title="è„‘å›¾"></a>è„‘å›¾</h2><p><img src="https://up-img.yonghong.tech/pic/2021/11/26-21-00-git-aLqUed.png" alt="git"></p><h2 id="ä¼˜é›…çš„Commitä¿¡æ¯"><a href="#ä¼˜é›…çš„Commitä¿¡æ¯" class="headerlink" title="ä¼˜é›…çš„Commitä¿¡æ¯"></a>ä¼˜é›…çš„Commitä¿¡æ¯</h2><p>ä½¿ç”¨<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9ibG9iL21hc3Rlci9ERVZFTE9QRVJTLm1kIy1naXQtY29tbWl0LWd1aWRlbGluZXM=">Angularå›¢é˜Ÿæäº¤è§„èŒƒ<i class="fa fa-external-link-alt"></i></span></p><p>ä¸»è¦æœ‰ä»¥ä¸‹ç»„æˆ</p><ul><li>æ ‡é¢˜è¡Œ: å¿…å¡«, æè¿°ä¸»è¦ä¿®æ”¹ç±»å‹å’Œå†…å®¹</li><li>ä¸»é¢˜å†…å®¹: æè¿°ä¸ºä»€ä¹ˆä¿®æ”¹, åšäº†ä»€ä¹ˆæ ·çš„ä¿®æ”¹, ä»¥åŠå¼€å‘çš„æ€è·¯ç­‰ç­‰</li><li>é¡µè„šæ³¨é‡Š: æ”¾ Breaking Changes æˆ– Closed Issues</li></ul><p>å¸¸ç”¨çš„ä¿®æ”¹é¡¹</p><ul><li>type: commit çš„ç±»å‹</li><li>feat: æ–°ç‰¹æ€§</li><li>fix: ä¿®æ”¹é—®é¢˜</li><li>refactor: ä»£ç é‡æ„</li><li>docs: æ–‡æ¡£ä¿®æ”¹</li><li>style: ä»£ç æ ¼å¼ä¿®æ”¹, æ³¨æ„ä¸æ˜¯ css ä¿®æ”¹</li><li>test: æµ‹è¯•ç”¨ä¾‹ä¿®æ”¹</li><li>chore: å…¶ä»–ä¿®æ”¹, æ¯”å¦‚æ„å»ºæµç¨‹, ä¾èµ–ç®¡ç†.</li><li>scope: commit å½±å“çš„èŒƒå›´, æ¯”å¦‚: route, component, utils, buildâ€¦</li><li>subject: commit çš„æ¦‚è¿°</li><li>body: commit å…·ä½“ä¿®æ”¹å†…å®¹, å¯ä»¥åˆ†ä¸ºå¤šè¡Œ</li><li>footer: ä¸€äº›å¤‡æ³¨, é€šå¸¸æ˜¯ BREAKING CHANGE æˆ–ä¿®å¤çš„ bug çš„é“¾æ¥.</li></ul><h2 id="commitå·¥å…·"><a href="#commitå·¥å…·" class="headerlink" title="commitå·¥å…·"></a>commitå·¥å…·</h2><p>å¯ä»¥ä½¿ç”¨<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2NvbW1pdGl6ZW4vY3otY2xp">cz-cli<i class="fa fa-external-link-alt"></i></span>å·¥å…·ä»£æ›¿ <code>git commit</code></p><p>å…¨å±€å®‰è£…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install -g commitizen cz-conventional-changelog</span><br><span class="line"></span><br><span class="line">echo &#x27;&#123; &quot;path&quot;: &quot;cz-conventional-changelog&quot; &#125;&#x27; &gt; ~/.czrc</span><br></pre></td></tr></table></figure><p>å…¨å±€å®‰è£…åä½¿ç”¨ <code>git cz</code> ä»£æ›¿ <code>git commit</code>å°±å¯ä»¥äº†,å¦‚ä¸‹å›¾</p><p><img src="https://up-img.yonghong.tech/pic/2021/11/26-21-00-gitcz-GhI1WK.png" alt="gitcz"></p><p><strong><a href="#%E7%9B%AE%E5%BD%95">â¬† è¿”å›é¡¶éƒ¨</a></strong></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly9naXRodWIuY29tLzUyMXh1ZXdlaWhhbi9naXQtdGlwcw==&quot;&gt;https://github.com/521xueweihan/git-tips&lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Git æ˜¯ä¸€ä¸ª â€œåˆ†å¸ƒå¼ç‰ˆæœ¬ç®¡ç†å·¥å…·â€ï¼Œç®€å•çš„ç†è§£ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼šå¤§å®¶åœ¨å†™ä¸œè¥¿çš„æ—¶å€™éƒ½ç”¨è¿‡ â€œå›æ’¤â€ è¿™ä¸ªåŠŸèƒ½ï¼Œä½†æ˜¯å›æ’¤åªèƒ½å›æ’¤å‡ æ­¥ï¼Œå‡å¦‚æƒ³è¦æ‰¾å›æˆ‘ä¸‰å¤©ä¹‹å‰çš„ä¿®æ”¹ï¼Œå…‰ç”¨ â€œå›æ’¤â€ æ˜¯æ‰¾ä¸å›æ¥çš„ã€‚è€Œ â€œç‰ˆæœ¬ç®¡ç†å·¥å…·â€ èƒ½è®°å½•æ¯æ¬¡çš„ä¿®æ”¹ï¼Œåªè¦æäº¤åˆ°ç‰ˆæœ¬ä»“åº“ï¼Œä½ å°±å¯ä»¥æ‰¾åˆ°ä¹‹å‰ä»»ä½•æ—¶åˆ»çš„çŠ¶æ€ï¼ˆæ–‡æœ¬çŠ¶æ€ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢çš„å†…å®¹å°±æ˜¯åˆ—ä¸¾äº†å¸¸ç”¨çš„ Git å‘½ä»¤å’Œä¸€äº›å°æŠ€å·§ï¼Œå¯ä»¥é€šè¿‡ â€œé¡µé¢å†…æŸ¥æ‰¾â€ çš„æ–¹å¼è¿›è¡Œå¿«é€ŸæŸ¥è¯¢ï¼š&lt;code&gt;Ctrl/Command+f&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å¼€å·å¿…è¯»&quot;&gt;&lt;a href=&quot;#å¼€å·å¿…è¯»&quot; class=&quot;headerlink&quot; title=&quot;å¼€å·å¿…è¯»&quot;&gt;&lt;/a&gt;å¼€å·å¿…è¯»&lt;/h2&gt;&lt;p&gt;&lt;em&gt;å¦‚æœä¹‹å‰æœªä½¿ç”¨è¿‡ Gitï¼Œå¯ä»¥å­¦ä¹  &lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly9yb2dlcmR1ZGxlci5naXRodWIuaW8vZ2l0LWd1aWRlL2luZGV4LnpoLmh0bWw=&quot;&gt;Git å°ç™½æ•™ç¨‹&lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/span&gt;å…¥é—¨&lt;/em&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¸€å®šè¦å…ˆæµ‹è¯•å‘½ä»¤çš„æ•ˆæœå&lt;/strong&gt;ï¼Œå†ç”¨äºå·¥ä½œç¯å¢ƒä¸­ï¼Œä»¥é˜²é€ æˆä¸èƒ½å¼¥è¡¥çš„åæœï¼&lt;strong&gt;åˆ°æ—¶å€™åˆ«æ‹¿ç€ç åˆ€æ¥æ‰¾æˆ‘&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;æ‰€æœ‰çš„å‘½ä»¤éƒ½åœ¨&lt;code&gt;git version 2.7.4 (Apple Git-66)&lt;/code&gt;ä¸‹æµ‹è¯•é€šè¿‡&lt;/li&gt;
&lt;li&gt;ç»Ÿä¸€æ¦‚å¿µï¼š&lt;ul&gt;
&lt;li&gt;å·¥ä½œåŒºï¼šæ”¹åŠ¨ï¼ˆå¢åˆ æ–‡ä»¶å’Œå†…å®¹ï¼‰&lt;/li&gt;
&lt;li&gt;æš‚å­˜åŒºï¼šè¾“å…¥å‘½ä»¤ï¼š&lt;code&gt;git add æ”¹åŠ¨çš„æ–‡ä»¶å&lt;/code&gt;ï¼Œæ­¤æ¬¡æ”¹åŠ¨å°±æ”¾åˆ°äº† â€˜æš‚å­˜åŒºâ€™&lt;/li&gt;
&lt;li&gt;æœ¬åœ°ä»“åº“(ç®€ç§°ï¼šæœ¬åœ°)ï¼šè¾“å…¥å‘½ä»¤ï¼š&lt;code&gt;git commit æ­¤æ¬¡ä¿®æ”¹çš„æè¿°&lt;/code&gt;ï¼Œæ­¤æ¬¡æ”¹åŠ¨å°±æ”¾åˆ°äº† â€™æœ¬åœ°ä»“åº“â€™ï¼Œæ¯ä¸ª commitï¼Œæˆ‘å«å®ƒä¸ºä¸€ä¸ª â€˜ç‰ˆæœ¬â€™ã€‚&lt;/li&gt;
&lt;li&gt;è¿œç¨‹ä»“åº“(ç®€ç§°ï¼šè¿œç¨‹)ï¼šè¾“å…¥å‘½ä»¤ï¼š&lt;code&gt;git push è¿œç¨‹ä»“åº“&lt;/code&gt;ï¼Œæ­¤æ¬¡æ”¹åŠ¨å°±æ”¾åˆ°äº† â€˜è¿œç¨‹ä»“åº“â€™ï¼ˆGitHub ç­‰)&lt;/li&gt;
&lt;li&gt;commit-idï¼šè¾“å‡ºå‘½ä»¤ï¼š&lt;code&gt;git log&lt;/code&gt;ï¼Œæœ€ä¸Šé¢é‚£è¡Œ &lt;code&gt;commit xxxxxx&lt;/code&gt;ï¼Œåé¢çš„å­—ç¬¦ä¸²å°±æ˜¯ commit-id&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¦‚æœå–œæ¬¢è¿™ä¸ªé¡¹ç›®ï¼Œæ¬¢è¿ Starã€æäº¤ Prã€&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly9naXRodWIuY29tLzUyMXh1ZXdlaWhhbi9naXQtdGlwcy9pc3N1ZXM=&quot;&gt;åé¦ˆé—®é¢˜&lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/span&gt;ğŸ˜Š&lt;/li&gt;
&lt;/ol&gt;</summary>
    
    
    
    <category term="æŠ€å·§" scheme="http://yonghong.tech/categories/%E6%8A%80%E5%B7%A7/"/>
    
    
    <category term="æŠ€å·§" scheme="http://yonghong.tech/tags/%E6%8A%80%E5%B7%A7/"/>
    
    <category term="é€ŸæŸ¥" scheme="http://yonghong.tech/tags/%E9%80%9F%E6%9F%A5/"/>
    
    <category term="git" scheme="http://yonghong.tech/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>Docker Cheat Sheet</title>
    <link href="http://yonghong.tech/tips/docker-cheat-sheet/"/>
    <id>http://yonghong.tech/tips/docker-cheat-sheet/</id>
    <published>2021-11-25T14:24:00.000Z</published>
    <updated>2021-11-25T14:24:00.000Z</updated>
    
    <content type="html"><![CDATA[<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3dzYXJnZW50L2RvY2tlci1jaGVhdC1zaGVldA==">https://github.com/wsargent/docker-cheat-sheet<i class="fa fa-external-link-alt"></i></span></p><h2 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><ul><li><a href="#%E4%B8%BA%E4%BD%95%E4%BD%BF%E7%94%A8-docker">ä¸ºä½•ä½¿ç”¨ Docker</a></li><li><a href="#%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83">ç³»ç»Ÿç¯å¢ƒ(Prerequisites)</a></li><li><a href="#%E5%AE%89%E8%A3%85">å®‰è£…(Installation)</a></li><li><a href="#%E5%AE%B9%E5%99%A8container">å®¹å™¨(Containers)</a></li><li><a href="#%E9%95%9C%E5%83%8Fimages">é•œåƒ(Images)</a></li><li><a href="#%E7%BD%91%E7%BB%9Cnetworks">ç½‘ç»œ(Networks)</a></li><li><a href="#%E4%BB%93%E7%AE%A1%E4%B8%AD%E5%BF%83%E5%92%8C%E4%BB%93%E5%BA%93registry--repository">ä»“ç®¡ä¸­å¿ƒå’Œä»“åº“(Registry &amp; Repository)</a></li><li><a href="#dockerfile">Dockerfile</a></li><li><a href="#%E5%B1%82layers">å±‚(Layers)</a></li><li><a href="#%E9%93%BE%E6%8E%A5links">é“¾æ¥(Links)</a></li><li><a href="#%E5%8D%B7%E6%A0%87volumes">å·æ ‡(Volumes)</a></li><li><a href="#%E6%9A%B4%E9%9C%B2%E7%AB%AF%E5%8F%A3exposing-ports">æš´éœ²ç«¯å£(Exposing Ports)</a></li><li><a href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">æœ€ä½³å®è·µ(Best Practices)</a></li><li><a href="#%E5%AE%89%E5%85%A8security">å®‰å…¨(security)</a></li><li><a href="#%E5%B0%8F%E8%B4%B4%E5%A3%AB">å°è´´å£«(Tips)</a></li><li><a href="#%E8%B4%A1%E7%8C%AE%E6%89%8B%E5%86%8Ccontributing">è´¡çŒ®æ‰‹å†Œ(Contributing)</a></li></ul><span id="more"></span><h2 id="ä¸ºä½•ä½¿ç”¨-Docker"><a href="#ä¸ºä½•ä½¿ç”¨-Docker" class="headerlink" title="ä¸ºä½•ä½¿ç”¨ Docker"></a>ä¸ºä½•ä½¿ç”¨ Docker</h2><p>ã€Œé€šè¿‡ Dockerï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨ä»»ä½•è¯­è¨€ä»»ä½•å·¥å…·åˆ›å»ºä»»ä½•åº”ç”¨ã€‚â€œDockerizedâ€ çš„åº”ç”¨æ˜¯å®Œå…¨å¯ç§»æ¤çš„ï¼Œèƒ½åœ¨ä»»ä½•åœ°æ–¹è¿è¡Œ - ä¸ç®¡æ˜¯åŒäº‹çš„ OS X å’Œ Windows ç¬”è®°æœ¬ï¼Œæˆ–æ˜¯åœ¨äº‘ç«¯è¿è¡Œçš„ Ubuntu QA æœåŠ¡ï¼Œè¿˜æ˜¯åœ¨è™šæ‹Ÿæœºè¿è¡Œçš„ Red Hat äº§å“æ•°æ®ä¸­å¿ƒã€‚</p><p>Docker Hub ä¸Šæœ‰ 13000+ çš„åº”ç”¨ï¼Œå¼€å‘è€…å¯ä»¥ä»ä¸­é€‰å–ä¸€ä¸ªè¿›è¡Œå¿«é€Ÿæ‰©å±•å¼€å‘ã€‚Docker è·Ÿè¸ªç®¡ç†å˜æ›´å’Œä¾èµ–å…³ç³»ï¼Œè®©ç³»ç»Ÿç®¡ç†å‘˜èƒ½æ›´å®¹æ˜“ç†è§£å¼€å‘äººå‘˜æ˜¯å¦‚ä½•è®©åº”ç”¨è¿è½¬èµ·æ¥çš„ã€‚è€Œå¼€å‘è€…å¯ä»¥é€šè¿‡ Docker Hub çš„å…±æœ‰/ç§æœ‰ä»“åº“ï¼Œæ„å»ºä»–ä»¬çš„è‡ªåŠ¨åŒ–ç¼–è¯‘ï¼Œä¸å…¶ä»–åˆä½œè€…å…±äº«æˆæœã€‚</p><p>Docker å¸®åŠ©å¼€å‘è€…æ›´å¿«åœ°æ„å»ºå’Œå‘å¸ƒé«˜è´¨é‡çš„åº”ç”¨ã€‚ã€â€”â€” <span class="exturl" data-url="aHR0cHM6Ly93d3cuZG9ja2VyLmNvbS93aGF0LWRvY2tlci8jY29weTE=">ä»€ä¹ˆæ˜¯ Docker<i class="fa fa-external-link-alt"></i></span></p><h2 id="ç³»ç»Ÿç¯å¢ƒ"><a href="#ç³»ç»Ÿç¯å¢ƒ" class="headerlink" title="ç³»ç»Ÿç¯å¢ƒ"></a>ç³»ç»Ÿç¯å¢ƒ</h2><p>æˆ‘ç”¨çš„æ˜¯ <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3JvYmJ5cnVzc2VsbC9vaC1teS16c2g=">Oh My Zsh<i class="fa fa-external-link-alt"></i></span> å’Œ <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3JvYmJ5cnVzc2VsbC9vaC1teS16c2gvd2lraS9QbHVnaW5zI2RvY2tlcg==">Docker æ’ä»¶<i class="fa fa-external-link-alt"></i></span>ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨è¡¥å…¨ Docker å‘½ä»¤ã€‚ä½ çš„ç¯å¢ƒå¯èƒ½æœ‰æ‰€ä¸åŒã€‚</p><h3 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h3><p>Docker å¯¹äº Linux å†…æ ¸ç‰ˆæœ¬çš„ <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL2luc3RhbGxhdGlvbi9iaW5hcmllcy8jY2hlY2sta2VybmVsLWRlcGVuZGVuY2llcw==">æœ€ä½è¦æ±‚<i class="fa fa-external-link-alt"></i></span> ä¸º <code>3.10.x</code>ã€‚</p><h3 id="MacOS"><a href="#MacOS" class="headerlink" title="MacOS"></a>MacOS</h3><p>10.8ã€ŒMountain Lionã€æˆ–æ›´æ–°ç‰ˆæœ¬ã€‚</p><h3 id="æ£€æŸ¥ç‰ˆæœ¬"><a href="#æ£€æŸ¥ç‰ˆæœ¬" class="headerlink" title="æ£€æŸ¥ç‰ˆæœ¬"></a>æ£€æŸ¥ç‰ˆæœ¬</h3><p>æ—¶åˆ»å…³æ³¨ä½ å½“å‰æ­£åœ¨ä½¿ç”¨çš„ Docker ç‰ˆæœ¬æ˜¯ååˆ†é‡è¦çš„ï¼Œè¿™èƒ½å¤Ÿå¸®åŠ©ä½ äº†è§£å¯ç”¨çš„ç‰¹æ€§ã€‚åŒæ—¶ï¼Œå¯ä»¥è®©ä½ åœ¨æŸ¥æ‰¾é•œåƒæ—¶é€‰æ‹©ä½¿ç”¨çš„ç‰ˆæœ¬ã€‚æ¥ä¸‹æ¥è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•æ“ä½œã€‚</p><ul><li><a href="https://docs.docker.com/engine/reference/commandline/version/"><code>docker version</code></a> æŸ¥çœ‹ä½ æ­£åœ¨è¿è¡Œçš„ Docker ç‰ˆæœ¬ã€‚</li></ul><p>è·å– Docker æœåŠ¡ç‰ˆæœ¬ï¼š</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">$ docker version --format &#x27;</span><span class="template-variable">&#123;&#123;<span class="name">.Server.Version</span>&#125;&#125;</span><span class="xml">&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">1.8.0</span></span><br></pre></td></tr></table></figure><p>ä½ ä¹Ÿå¯ä»¥è¾“å‡ºåŸå§‹çš„ JSON æ•°æ®ï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker <span class="built_in">version</span> <span class="comment">--format &#x27;&#123;&#123;json .&#125;&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line">&#123;<span class="string">&quot;Client&quot;</span>:&#123;<span class="string">&quot;Version&quot;</span>:<span class="string">&quot;1.8.0&quot;</span>,<span class="string">&quot;ApiVersion&quot;</span>:<span class="string">&quot;1.20&quot;</span>,<span class="string">&quot;GitCommit&quot;</span>:<span class="string">&quot;f5bae0a&quot;</span>,<span class="string">&quot;GoVersion&quot;</span>:<span class="string">&quot;go1.4.2&quot;</span>,<span class="string">&quot;Os&quot;</span>:<span class="string">&quot;linux&quot;</span>,<span class="string">&quot;Arch&quot;</span>:<span class="string">&quot;am&quot;</span>&#125;</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><h3 id="Linux-1"><a href="#Linux-1" class="headerlink" title="Linux"></a>Linux</h3><p>Docker å®˜æ–¹æä¾›äº†å¿«é€Ÿã€æ˜“ç”¨çš„å®‰è£…è„šæœ¬ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sSL http<span class="variable">s:</span>//<span class="built_in">get</span>.docker.<span class="keyword">com</span>/ | <span class="keyword">sh</span></span><br></pre></td></tr></table></figure><p>å¦‚æœä½ ä¸æƒ³æ‰§è¡Œä¸€ä¸ªä¸æ˜ä¸ç™½çš„ Shell è„šæœ¬ï¼Œé‚£ä¹ˆè¯·çœ‹ <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL2luc3RhbGxhdGlvbi9saW51eC8=">å®‰è£…è¯´æ˜<i class="fa fa-external-link-alt"></i></span>ï¼Œé€‰æ‹©ä½ åœ¨ç”¨çš„å‘è¡Œç‰ˆæœ¬ã€‚</p><p>å¦‚æœä½ æ˜¯ä¸€ä¸ª Docker è¶…æ–°æ‰‹ï¼Œé‚£ä¹ˆä½ åº”å½“å…ˆå»çœ‹çœ‹ <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL2dldHN0YXJ0ZWQv">ç³»åˆ—æ•™ç¨‹<i class="fa fa-external-link-alt"></i></span>ã€‚</p><h3 id="macOS"><a href="#macOS" class="headerlink" title="macOS"></a>macOS</h3><p>ä¸‹è½½å¹¶å®‰è£… <span class="exturl" data-url="aHR0cHM6Ly93d3cuZG9ja2VyLmNvbS9jb21tdW5pdHktZWRpdGlvbg==">Docker Community Edition<i class="fa fa-external-link-alt"></i></span>ã€‚å¦‚æœä½ åœ¨ä½¿ç”¨ Homebrew-Caskï¼Œåªéœ€åœ¨å‘½ä»¤è¡Œè¾“å…¥ <code>brew cask install docker</code> å³å¯ã€‚ä¸‹è½½å®‰è£… <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vdG9vbGJveC9vdmVydmlldy8=">Docker Toolbox<i class="fa fa-external-link-alt"></i></span> äº¦å¯ã€‚<span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZG9ja2VyLWZvci1tYWMv">Docker For Mac<i class="fa fa-external-link-alt"></i></span> å¾ˆèµï¼Œä½†æ˜¯å®ƒçš„å®‰è£…è¿‡ç¨‹ä¸ VirtualBox ä¸å¤ªä¸€æ ·ã€‚è¯¦æƒ…è¯·æŸ¥é˜… <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZG9ja2VyLWZvci1tYWMvZG9ja2VyLXRvb2xib3gv">æ¯”è¾ƒ<i class="fa fa-external-link-alt"></i></span>ã€‚</p><blockquote><p><strong>æ³¨æ„</strong>ï¼šDocker Toolbox å·²ç»è¿‡æ—¶ã€‚ä½ åº”å½“ä½¿ç”¨ Docker Community Editionï¼Œè¯¦è§ <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vdG9vbGJveC9vdmVydmlldy8=">Docker Toolbox<i class="fa fa-external-link-alt"></i></span></p></blockquote><p>å®‰è£…å¥½ Docker Community Edition åï¼Œç‚¹å‡» Launchpad å†…çš„ Docker å›¾æ ‡ã€‚æ¥ç€å³å¯å¯åŠ¨å®¹å™¨äº†ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="builtin-name">run</span> hello-world</span><br></pre></td></tr></table></figure><p>å¥½äº†ï¼Œç°åœ¨ä½ æœ‰äº†ä¸€ä¸ªè¿è¡Œä¸­çš„ Docker å®¹å™¨äº†ã€‚</p><h2 id="å®¹å™¨-Container"><a href="#å®¹å™¨-Container" class="headerlink" title="å®¹å™¨(Container)"></a>å®¹å™¨(Container)</h2><p><span class="exturl" data-url="aHR0cDovL2V0aGVyZWFsbWluZC5jb20vYmFzaWNzLWRvY2tlci1jb250YWluZXJzLWh5cGVydmlzb3JzLWNvcmVvcy8=">å…³äº Docker è¿›ç¨‹éš”ç¦»çš„åŸºç¡€<i class="fa fa-external-link-alt"></i></span>ã€‚å®¹å™¨ (Container) ä¹‹äºè™šæ‹Ÿæœº (Virtual Machine) å°±å¥½æ¯”çº¿ç¨‹ä¹‹äºè¿›ç¨‹ã€‚æˆ–è€…ä½ å¯ä»¥æŠŠä»–ä»¬æƒ³æˆæ˜¯ã€Œåƒäº†ç±»å›ºé†‡çš„ chrootsã€ã€‚</p><h3 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h3><ul><li><a href="https://docs.docker.com/engine/reference/commandline/create"><code>docker create</code></a> åˆ›å»ºå®¹å™¨ä½†ä¸å¯åŠ¨å®ƒã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/rename/"><code>docker rename</code></a> ç”¨äºé‡å‘½åå®¹å™¨ã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/run"><code>docker run</code></a> ä¸€é”®åˆ›å»ºå¹¶åŒæ—¶å¯åŠ¨è¯¥å®¹å™¨ã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/rm"><code>docker rm</code></a> åˆ é™¤å®¹å™¨ã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/update/"><code>docker update</code></a> è°ƒæ•´å®¹å™¨çš„èµ„æºé™åˆ¶ã€‚</li></ul><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸ä½¿ç”¨ä»»ä½•å‘½ä»¤è¡Œé€‰é¡¹å¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼Œè¯¥å®¹å™¨å°†ä¼šç«‹å³å¯åŠ¨å¹¶åœæ­¢ã€‚è‹¥éœ€ä¿æŒå…¶è¿è¡Œï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>docker run -td container_id</code> å‘½ä»¤ã€‚é€‰é¡¹ <code>-t</code> è¡¨ç¤ºåˆ†é…ä¸€ä¸ª pseudo-TTY ä¼šè¯ï¼Œ<code>-d</code> è¡¨ç¤ºè‡ªåŠ¨å°†å®¹å™¨ä¸ç»ˆç«¯åˆ†ç¦»ï¼ˆä¹Ÿå°±æ˜¯è¯´åœ¨åå°è¿è¡Œå®¹å™¨ï¼Œå¹¶è¾“å‡ºå®¹å™¨ IDï¼‰ã€‚</p><p>å¦‚æœä½ éœ€è¦ä¸€ä¸ªä¸´æ—¶å®¹å™¨ï¼Œå¯ä½¿ç”¨ <code>docker run --rm</code> ä¼šåœ¨å®¹å™¨åœæ­¢ä¹‹ååˆ é™¤å®ƒã€‚</p><p>å¦‚æœä½ éœ€è¦æ˜ å°„å®¿ä¸»æœº (host) çš„ç›®å½•åˆ° Docker å®¹å™¨å†…ï¼Œå¯ä½¿ç”¨ <code>docker run -v $HOSTDIR:$DOCKERDIR</code>ã€‚è¯¦è§ <a href="#%E5%8D%B7%E6%A0%87volumes">å·æ ‡(Volumes)</a> ä¸€èŠ‚ã€‚</p><p>å¦‚æœä½ æƒ³åŒæ—¶åˆ é™¤ä¸å®¹å™¨ç›¸å…³è”çš„å·æ ‡ï¼Œé‚£ä¹ˆåœ¨åˆ é™¤å®¹å™¨çš„æ—¶å€™å¿…é¡»åŒ…å« <code>-v</code> é€‰é¡¹ï¼Œåƒè¿™æ · <code>docker rm -v</code>ã€‚</p><p>ä» Docker 1.10 èµ·ï¼Œå…¶å†…ç½®ä¸€å¥—å„å®¹å™¨ç‹¬ç«‹çš„ <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL2FkbWluL2xvZ2dpbmcvb3ZlcnZpZXcv">æ—¥å¿—å¼•æ“<i class="fa fa-external-link-alt"></i></span>ï¼Œæ¯ä¸ªå®¹å™¨å¯ä»¥ç‹¬ç«‹ä½¿ç”¨ã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>docker run --log-driver=syslog</code> æ¥è‡ªå®šä¹‰æ—¥å¿—å¼•æ“ï¼ˆä¾‹å¦‚ä»¥ä¸Šçš„ <code>syslog</code>ï¼‰ã€‚</p><h3 id="å¯åŠ¨å’Œåœæ­¢"><a href="#å¯åŠ¨å’Œåœæ­¢" class="headerlink" title="å¯åŠ¨å’Œåœæ­¢"></a>å¯åŠ¨å’Œåœæ­¢</h3><ul><li><a href="https://docs.docker.com/engine/reference/commandline/start"><code>docker start</code></a> å¯åŠ¨å·²å­˜åœ¨çš„å®¹å™¨ã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/stop"><code>docker stop</code></a> åœæ­¢è¿è¡Œä¸­çš„å®¹å™¨ã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/restart"><code>docker restart</code></a> é‡å¯å®¹å™¨ã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/pause/"><code>docker pause</code></a> æš‚åœè¿è¡Œä¸­çš„å®¹å™¨ï¼Œå°†å…¶ã€Œå†»ç»“ã€åœ¨å½“å‰çŠ¶æ€ã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/unpause/"><code>docker unpause</code></a> ç»“æŸå®¹å™¨æš‚åœçŠ¶æ€ã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/wait"><code>docker wait</code></a> é˜»å¡åœ°ç­‰å¾…æŸä¸ªè¿è¡Œä¸­çš„å®¹å™¨ç›´åˆ°åœæ­¢ã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/kill"><code>docker kill</code></a> å‘è¿è¡Œä¸­çš„å®¹å™¨å‘é€ SIGKILL æŒ‡ä»¤ã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/attach"><code>docker attach</code></a> è¿æ¥åˆ°è¿è¡Œä¸­çš„å®¹å™¨ã€‚</li></ul><p>å¦‚æœä½ æƒ³å°†å®¹å™¨çš„ç«¯å£ (ports) æš´éœ²è‡³å®¿ä¸»æœºï¼Œè¯·è§ <a href="#%E6%9A%B4%E9%9C%B2%E7%AB%AF%E5%8F%A3exposing-ports">æš´éœ²ç«¯å£</a> ä¸€èŠ‚ã€‚</p><p>å…³äº Docker å®ä¾‹å´©æºƒåçš„é‡å¯ç­–ç•¥ï¼Œè¯¦è§ <span class="exturl" data-url="aHR0cDovL2NvbnRhaW5lcjQyLmNvbS8yMDE0LzA5LzMwL2RvY2tlci1yZXN0YXJ0LXBvbGljaWVzLw==">æœ¬æ–‡<i class="fa fa-external-link-alt"></i></span>ã€‚</p><h4 id="CPU-é™åˆ¶"><a href="#CPU-é™åˆ¶" class="headerlink" title="CPU é™åˆ¶"></a>CPU é™åˆ¶</h4><p>ä½ å¯ä»¥é™åˆ¶ CPU èµ„æºå ç”¨ï¼Œæ— è®ºæ˜¯æŒ‡å®šç™¾åˆ†æ¯”ï¼Œæˆ–æ˜¯ç‰¹å®šæ ¸å¿ƒæ•°ã€‚</p><p>ä¾‹å¦‚ï¼Œä½ å¯ä»¥è®¾ç½® <a href="https://docs.docker.com/engine/reference/run/#/cpu-share-constraint"><code>cpu-shares</code></a>ã€‚è¯¥é…ç½®çœ‹èµ·æ¥æœ‰ç‚¹å¥‡æ€ª â€“ 1024 è¡¨ç¤º 100% CPUï¼Œå› æ­¤å¦‚æœä½ å¸Œæœ›å®¹å™¨ä½¿ç”¨æ‰€æœ‰ CPU å†…æ ¸çš„ 50%ï¼Œåº”å°†å…¶è®¾ç½®ä¸º 512ï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">run</span> -ti <span class="comment">--c 512 agileek/cpuset-test</span></span><br></pre></td></tr></table></figure><p>æ›´å¤šä¿¡æ¯è¯·å‚é˜… <span class="exturl" data-url="aHR0cHM6Ly9nb2xkbWFubi5wbC9ibG9nLzIwMTQvMDkvMTEvcmVzb3VyY2UtbWFuYWdlbWVudC1pbi1kb2NrZXIvI19jcHU=">https://goldmann.pl/blog/2014/09/11/resource-management-in-docker/#_cpu<i class="fa fa-external-link-alt"></i></span>ã€‚</p><p>é€šè¿‡ <a href="https://docs.docker.com/engine/reference/run/#/cpuset-constraint"><code>cpuset-cpus</code></a> å¯ä½¿ç”¨ç‰¹å®š CPU å†…æ ¸ã€‚</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="builtin-name">run</span> -ti <span class="attribute">--cpuset-cpus</span>=0,4,6 agileek/cpuset-test</span><br></pre></td></tr></table></figure><p>è¯·å‚é˜… <span class="exturl" data-url="aHR0cHM6Ly9hZ2lsZWVrLmdpdGh1Yi5pby9kb2NrZXIvMjAxNC8wOC8wNi9kb2NrZXItY3B1c2V0Lw==">https://agileek.github.io/docker/2014/08/06/docker-cpuset/<i class="fa fa-external-link-alt"></i></span> è·å–æ›´å¤šç»†èŠ‚ä»¥åŠä¸€äº›ä¸é”™çš„è§†é¢‘ã€‚</p><p>æ³¨æ„ï¼ŒDocker åœ¨å®¹å™¨å†…ä»ç„¶èƒ½å¤Ÿ <strong>çœ‹åˆ°</strong> å…¨éƒ¨ CPU â€“ å®ƒä»…ä»…æ˜¯ä¸ä½¿ç”¨å…¨éƒ¨è€Œå·²ã€‚è¯·å‚é˜… <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RvY2tlci9kb2NrZXIvaXNzdWVzLzIwNzcw">https://github.com/docker/docker/issues/20770<i class="fa fa-external-link-alt"></i></span> è·å–æ›´å¤šç»†èŠ‚ã€‚</p><h4 id="å†…å­˜é™åˆ¶"><a href="#å†…å­˜é™åˆ¶" class="headerlink" title="å†…å­˜é™åˆ¶"></a>å†…å­˜é™åˆ¶</h4><p>åŒæ ·ï¼Œäº¦å¯ç»™ Docker è®¾ç½® <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9ydW4vIy91c2VyLW1lbW9yeS1jb25zdHJhaW50cw==">å†…å­˜é™åˆ¶<i class="fa fa-external-link-alt"></i></span>ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker</span> run -it -m <span class="number">300</span>M ubuntu:<span class="number">14</span>.<span class="number">04</span> /bin/bash</span><br></pre></td></tr></table></figure><h4 id="èƒ½åŠ›-Capabilities"><a href="#èƒ½åŠ›-Capabilities" class="headerlink" title="èƒ½åŠ›(Capabilities)"></a>èƒ½åŠ›(Capabilities)</h4><p>Linux çš„ Capability å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>cap-add</code> å’Œ <code>cap-drop</code> è®¾ç½®ã€‚è¯·å‚é˜… <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9ydW4vIy9ydW50aW1lLXByaXZpbGVnZS1hbmQtbGludXgtY2FwYWJpbGl0aWVz">https://docs.docker.com/engine/reference/run/#/runtime-privilege-and-linux-capabilities<i class="fa fa-external-link-alt"></i></span> è·å–æ›´å¤šç»†èŠ‚ã€‚è¿™æœ‰åŠ©äºæé«˜å®‰å…¨æ€§ã€‚</p><p>å¦‚éœ€è¦æŒ‚è½½åŸºäº FUSE çš„æ–‡ä»¶ç³»ç»Ÿï¼Œä½ éœ€è¦ç»“åˆ <code>--cap-add</code> å’Œ <code>--device</code> ä½¿ç”¨ï¼š</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run <span class="params">--rm</span> -it <span class="params">--cap-add</span> SYS_ADMIN <span class="params">--device</span> <span class="string">/dev/fuse</span> sshfs</span><br></pre></td></tr></table></figure><p>æˆäºˆå¯¹æŸä¸ªè®¾å¤‡çš„è®¿é—®æƒé™ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="builtin-name">run</span> -it <span class="attribute">--device</span>=/dev/ttyUSB0 debian bash</span><br></pre></td></tr></table></figure><p>æˆäºˆå¯¹æ‰€æœ‰è®¾å¤‡çš„è®¿é—®æƒé™ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --privileged -v <span class="regexp">/dev/</span>bus<span class="regexp">/usb:/</span>dev<span class="regexp">/bus/u</span>sb debian bash</span><br></pre></td></tr></table></figure><p>æœ‰å…³å®¹å™¨ç‰¹æƒçš„æ›´å¤šä¿¡æ¯è¯·å‚é˜… <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9ydW4vIy9ydW50aW1lLXByaXZpbGVnZS1hbmQtbGludXgtY2FwYWJpbGl0aWVz">æœ¬æ–‡<i class="fa fa-external-link-alt"></i></span>ã€‚</p><h3 id="ä¿¡æ¯"><a href="#ä¿¡æ¯" class="headerlink" title="ä¿¡æ¯"></a>ä¿¡æ¯</h3><ul><li><a href="https://docs.docker.com/engine/reference/commandline/ps"><code>docker ps</code></a> æŸ¥çœ‹è¿è¡Œä¸­çš„æ‰€æœ‰å®¹å™¨ã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/logs"><code>docker logs</code></a> ä»å®¹å™¨ä¸­è¯»å–æ—¥å¿—ã€‚ï¼ˆä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰æ—¥å¿—é©±åŠ¨ï¼Œä¸è¿‡åœ¨ 1.10 ä¸­ï¼Œå®ƒåªæ”¯æŒ <code>json-file</code> å’Œ <code>journald</code>ï¼‰ã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/inspect"><code>docker inspect</code></a> æŸ¥çœ‹æŸä¸ªå®¹å™¨çš„æ‰€æœ‰ä¿¡æ¯ï¼ˆåŒ…æ‹¬ IP åœ°å€ï¼‰ã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/events"><code>docker events</code></a> ä»å®¹å™¨ä¸­è·å–äº‹ä»¶ (events)ã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/port"><code>docker port</code></a> æŸ¥çœ‹å®¹å™¨çš„å…¬å¼€ç«¯å£ã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/top"><code>docker top</code></a> æŸ¥çœ‹å®¹å™¨ä¸­æ´»åŠ¨è¿›ç¨‹ã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/stats"><code>docker stats</code></a> æŸ¥çœ‹å®¹å™¨çš„èµ„æºä½¿ç”¨é‡ç»Ÿè®¡ä¿¡æ¯ã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/diff"><code>docker diff</code></a> æŸ¥çœ‹å®¹å™¨æ–‡ä»¶ç³»ç»Ÿä¸­å­˜åœ¨æ”¹åŠ¨çš„æ–‡ä»¶ã€‚</li></ul><p><code>docker ps -a</code> å°†æ˜¾ç¤ºæ‰€æœ‰å®¹å™¨ï¼ŒåŒ…æ‹¬è¿è¡Œä¸­å’Œå·²åœæ­¢çš„ã€‚</p><p><code>docker stats --all</code> åŒæ ·å°†æ˜¾ç¤ºæ‰€æœ‰å®¹å™¨ï¼Œé»˜è®¤ä»…æ˜¾ç¤ºè¿è¡Œä¸­çš„å®¹å™¨ã€‚</p><h3 id="å¯¼å…¥-å¯¼å‡º"><a href="#å¯¼å…¥-å¯¼å‡º" class="headerlink" title="å¯¼å…¥ / å¯¼å‡º"></a>å¯¼å…¥ / å¯¼å‡º</h3><ul><li><a href="https://docs.docker.com/engine/reference/commandline/cp"><code>docker cp</code></a> åœ¨å®¹å™¨å’Œæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¹‹é—´å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•ã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/export"><code>docker export</code></a> å°†å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿæ‰“åŒ…ä¸ºå½’æ¡£æ–‡ä»¶æµ (tarball archive stream) å¹¶è¾“å‡ºè‡³æ ‡å‡†è¾“å‡º (STDOUT)ã€‚</li></ul><h3 id="æ‰§è¡Œå‘½ä»¤"><a href="#æ‰§è¡Œå‘½ä»¤" class="headerlink" title="æ‰§è¡Œå‘½ä»¤"></a>æ‰§è¡Œå‘½ä»¤</h3><ul><li><a href="https://docs.docker.com/engine/reference/commandline/exec"><code>docker exec</code></a> åœ¨å®¹å™¨å†…æ‰§è¡Œå‘½ä»¤ã€‚</li></ul><p>ä¾‹å¦‚ï¼Œè¿›å…¥æ­£åœ¨è¿è¡Œçš„ <code>foo</code> å®¹å™¨ï¼Œå¹¶è¿æ¥ (attach) åˆ°ä¸€ä¸ªæ–°çš„ Shell è¿›ç¨‹ï¼š<code>docker exec -it foo /bin/bash</code>ã€‚</p><h2 id="é•œåƒ-Images"><a href="#é•œåƒ-Images" class="headerlink" title="é•œåƒ(Images)"></a>é•œåƒ(Images)</h2><p>é•œåƒæ˜¯ <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3VuZGVyc3RhbmRpbmctZG9ja2VyLyNob3ctZG9lcy1hLWRvY2tlci1pbWFnZS13b3Jr">Docker å®¹å™¨çš„æ¨¡æ¿<i class="fa fa-external-link-alt"></i></span>ã€‚</p><h3 id="ç”Ÿå‘½å‘¨æœŸ-1"><a href="#ç”Ÿå‘½å‘¨æœŸ-1" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h3><ul><li><a href="https://docs.docker.com/engine/reference/commandline/images"><code>docker images</code></a> æŸ¥çœ‹æ‰€æœ‰é•œåƒã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/import"><code>docker import</code></a> ä»å½’æ¡£æ–‡ä»¶åˆ›å»ºé•œåƒã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/build"><code>docker build</code></a> ä» Dockerfile åˆ›å»ºé•œåƒã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/commit"><code>docker commit</code></a> ä¸ºå®¹å™¨åˆ›å»ºé•œåƒï¼Œå¦‚æœå®¹å™¨æ­£åœ¨è¿è¡Œåˆ™ä¼šä¸´æ—¶æš‚åœã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/rmi"><code>docker rmi</code></a> åˆ é™¤é•œåƒã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/load"><code>docker load</code></a> ä»æ ‡å‡†è¾“å…¥ (STDIN) åŠ è½½å½’æ¡£åŒ… (tar archive) ä½œä¸ºé•œåƒï¼ŒåŒ…æ‹¬é•œåƒæœ¬èº«å’Œæ ‡ç­¾ (tags, 0.7 èµ·)ã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/save"><code>docker save</code></a> å°†é•œåƒæ‰“åŒ…ä¸ºå½’æ¡£åŒ…ï¼Œå¹¶è¾“å‡ºè‡³æ ‡å‡†è¾“å‡º (STDOUT)ï¼ŒåŒ…æ‹¬æ‰€æœ‰çš„çˆ¶å±‚ã€æ ‡ç­¾å’Œç‰ˆæœ¬ (parent layers, tags, versions, 0.7 èµ·)ã€‚</li></ul><h3 id="å…¶å®ƒä¿¡æ¯"><a href="#å…¶å®ƒä¿¡æ¯" class="headerlink" title="å…¶å®ƒä¿¡æ¯"></a>å…¶å®ƒä¿¡æ¯</h3><ul><li><a href="https://docs.docker.com/engine/reference/commandline/history"><code>docker history</code></a> æŸ¥çœ‹é•œåƒçš„å†å²è®°å½•ã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/tag"><code>docker tag</code></a> ç»™é•œåƒæ‰“æ ‡ç­¾å‘½åï¼ˆæœ¬åœ°æˆ–è€…ä»“åº“å‡å¯ï¼‰ã€‚</li></ul><h3 id="æ¸…ç†"><a href="#æ¸…ç†" class="headerlink" title="æ¸…ç†"></a>æ¸…ç†</h3><p>è™½ç„¶ä½ å¯ä»¥ç”¨ <code>docker rmi</code> å‘½ä»¤æ¥åˆ é™¤æŒ‡å®šçš„é•œåƒï¼Œä¸è¿‡æœ‰ä¸ªåä¸º <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3Nwb3RpZnkvZG9ja2VyLWdj">docker-gc<i class="fa fa-external-link-alt"></i></span> çš„å·¥å…·ï¼Œå®ƒå¯ä»¥ä»¥ä¸€ç§å®‰å…¨çš„æ–¹å¼ï¼Œæ¸…ç†æ‰é‚£äº›ä¸å†è¢«ä»»ä½•å®¹å™¨ä½¿ç”¨çš„é•œåƒã€‚Docker 1.13 èµ·ï¼Œä½¿ç”¨ <code>docker image prune</code> äº¦å¯åˆ é™¤æœªä½¿ç”¨çš„é•œåƒã€‚å‚è§ <a href="#%E6%B8%85%E7%90%86">æ¸…ç†</a>ã€‚</p><h3 id="åŠ è½½-ä¿å­˜é•œåƒ"><a href="#åŠ è½½-ä¿å­˜é•œåƒ" class="headerlink" title="åŠ è½½ / ä¿å­˜é•œåƒ"></a>åŠ è½½ / ä¿å­˜é•œåƒ</h3><p>ä»æ–‡ä»¶ä¸­åŠ è½½é•œåƒï¼š</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">load</span> &lt; my_image.tar.gz</span><br></pre></td></tr></table></figure><p>ä¿å­˜æ—¢æœ‰é•œåƒï¼š</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker save my_image:my_tag <span class="string">| gzip &gt; my_image.tar.gz</span></span><br></pre></td></tr></table></figure><h3 id="å¯¼å…¥-å¯¼å‡ºå®¹å™¨"><a href="#å¯¼å…¥-å¯¼å‡ºå®¹å™¨" class="headerlink" title="å¯¼å…¥ / å¯¼å‡ºå®¹å™¨"></a>å¯¼å…¥ / å¯¼å‡ºå®¹å™¨</h3><p>ä»æ–‡ä»¶ä¸­å¯¼å…¥å®¹å™¨é•œåƒï¼š</p><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">cat</span> my_container.tar.gz | docker <span class="keyword">import</span> - my_image:my_tag</span><br></pre></td></tr></table></figure><p>å¯¼å‡ºæ—¢æœ‰å®¹å™¨ï¼š</p><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">docker</span> ex<span class="keyword">port</span> my_container | gzip &gt; my_container.tar.gz</span><br></pre></td></tr></table></figure><h3 id="åŠ è½½å·²ä¿å­˜çš„é•œåƒ-ä¸-å¯¼å…¥å·²å¯¼å‡ºä¸ºé•œåƒçš„å®¹å™¨-çš„ä¸åŒ"><a href="#åŠ è½½å·²ä¿å­˜çš„é•œåƒ-ä¸-å¯¼å…¥å·²å¯¼å‡ºä¸ºé•œåƒçš„å®¹å™¨-çš„ä¸åŒ" class="headerlink" title="åŠ è½½å·²ä¿å­˜çš„é•œåƒ ä¸ å¯¼å…¥å·²å¯¼å‡ºä¸ºé•œåƒçš„å®¹å™¨ çš„ä¸åŒ"></a>åŠ è½½å·²ä¿å­˜çš„é•œåƒ ä¸ å¯¼å…¥å·²å¯¼å‡ºä¸ºé•œåƒçš„å®¹å™¨ çš„ä¸åŒ</h3><p>é€šè¿‡ <code>load</code> å‘½ä»¤æ¥åŠ è½½é•œåƒï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒï¼Œå¹¶ç»§æ‰¿åŸé•œåƒçš„æ‰€æœ‰å†å²ã€‚<br>é€šè¿‡ <code>import</code> å°†å®¹å™¨ä½œä¸ºé•œåƒå¯¼å…¥ï¼Œä¹Ÿä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒï¼Œä½†å¹¶ä¸åŒ…å«åŸé•œåƒçš„å†å²ï¼Œå› æ­¤ä¼šæ¯”ä½¿ç”¨ <code>load</code> æ–¹å¼ç”Ÿæˆçš„é•œåƒæ›´å°ã€‚</p><h2 id="ç½‘ç»œ-Networks"><a href="#ç½‘ç»œ-Networks" class="headerlink" title="ç½‘ç»œ(Networks)"></a>ç½‘ç»œ(Networks)</h2><p>Docker å…·å¤‡ <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3VzZXJndWlkZS9uZXR3b3JraW5nLw==">ç½‘ç»œ<i class="fa fa-external-link-alt"></i></span> åŠŸèƒ½ã€‚æˆ‘å¹¶ä¸æ˜¯å¾ˆäº†è§£å®ƒï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªæ‰©å±•æœ¬æ–‡çš„å¥½åœ°æ–¹ã€‚æ–‡æ¡£ <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3VzZXJndWlkZS9uZXR3b3JraW5nL3dvcmstd2l0aC1uZXR3b3Jrcy8=">ä½¿ç”¨ç½‘ç»œ<i class="fa fa-external-link-alt"></i></span> æŒ‡å‡ºï¼Œè¿™æ˜¯ä¸€ç§æ— éœ€æš´éœ²ç«¯å£å³å¯å®ç° Docker å®¹å™¨é—´é€šä¿¡çš„å¥½æ–¹æ³•ã€‚</p><h3 id="ç”Ÿå‘½å‘¨æœŸ-2"><a href="#ç”Ÿå‘½å‘¨æœŸ-2" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h3><ul><li><a href="https://docs.docker.com/engine/reference/commandline/network_create/"><code>docker network create</code></a></li><li><a href="https://docs.docker.com/engine/reference/commandline/network_rm/"><code>docker network rm</code></a></li></ul><h3 id="å…¶å®ƒä¿¡æ¯-1"><a href="#å…¶å®ƒä¿¡æ¯-1" class="headerlink" title="å…¶å®ƒä¿¡æ¯"></a>å…¶å®ƒä¿¡æ¯</h3><ul><li><a href="https://docs.docker.com/engine/reference/commandline/network_ls/"><code>docker network ls</code></a></li><li><a href="https://docs.docker.com/engine/reference/commandline/network_inspect/"><code>docker network inspect</code></a></li></ul><h3 id="å»ºç«‹è¿æ¥"><a href="#å»ºç«‹è¿æ¥" class="headerlink" title="å»ºç«‹è¿æ¥"></a>å»ºç«‹è¿æ¥</h3><ul><li><a href="https://docs.docker.com/engine/reference/commandline/network_connect/"><code>docker network connect</code></a></li><li><a href="https://docs.docker.com/engine/reference/commandline/network_disconnect/"><code>docker network disconnect</code></a></li></ul><p>ä½ å¯ä»¥ <span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmplc3NmcmF6LmNvbS9wb3N0L2lwcy1mb3ItYWxsLXRoZS10aGluZ3Mv">ä¸ºå®¹å™¨æŒ‡å®š IP åœ°å€<i class="fa fa-external-link-alt"></i></span>ï¼š</p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ä½ è‡ªå·±çš„å­ç½‘å’Œç½‘å…³åˆ›å»ºä¸€ä¸ªæ¡¥æ¥ç½‘ç»œ</span></span><br><span class="line"><span class="string">docker</span> <span class="string">network</span> <span class="string">create</span> <span class="built_in">--subnet</span> <span class="string">203</span>.<span class="string">0</span>.<span class="string">113</span>.<span class="string">0</span>/<span class="string">24</span> <span class="built_in">--gateway</span> <span class="string">203</span>.<span class="string">0</span>.<span class="string">113</span>.<span class="string">254</span> <span class="string">iptastic</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span><span class="comment"># åŸºäºä»¥ä¸Šåˆ›å»ºçš„ç½‘ç»œï¼Œè¿è¡Œä¸€ä¸ª Nginx å®¹å™¨å¹¶æŒ‡å®š IP</span></span><br><span class="line">$ <span class="string">docker</span> <span class="string">run</span> <span class="built_in">--rm</span> -<span class="string">it</span> <span class="built_in">--net</span> <span class="string">iptastic</span> <span class="built_in">--ip</span> <span class="string">203</span>.<span class="string">0</span>.<span class="string">113</span>.<span class="string">2</span> <span class="string">nginx</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span><span class="comment"># åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨ CURL è®¿é—®è¿™ä¸ª IPï¼ˆå‡è®¾è¯¥ IP ä¸ºå…¬ç½‘ï¼‰</span></span><br><span class="line">$ <span class="string">curl</span> <span class="string">203</span>.<span class="string">0</span>.<span class="string">113</span>.<span class="string">2</span></span><br></pre></td></tr></table></figure><h2 id="ä»“ç®¡ä¸­å¿ƒå’Œä»“åº“-Registry-amp-Repository"><a href="#ä»“ç®¡ä¸­å¿ƒå’Œä»“åº“-Registry-amp-Repository" class="headerlink" title="ä»“ç®¡ä¸­å¿ƒå’Œä»“åº“(Registry &amp; Repository)"></a>ä»“ç®¡ä¸­å¿ƒå’Œä»“åº“(Registry &amp; Repository)</h2><p>ä»“åº“ (repository) æ˜¯ <em>è¢«æ‰˜ç®¡(hosted)</em> çš„å·²å‘½åé•œåƒ (tagged images) çš„é›†åˆï¼Œè¿™ç»„é•œåƒç”¨äºæ„å»ºå®¹å™¨æ–‡ä»¶ç³»ç»Ÿã€‚</p><p>ä»“ç®¡ä¸­å¿ƒ (registry) åˆ™æ˜¯ <em>æ‰˜ç®¡æœåŠ¡(host)</em> â€“ ç”¨äºå­˜å‚¨ä»“åº“å¹¶æä¾› HTTP APIï¼Œä»¥ä¾¿ <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3R1dG9yaWFscy9kb2NrZXJyZXBvcy8=">ç®¡ç†ä»“åº“çš„ä¸Šä¼ å’Œä¸‹è½½<i class="fa fa-external-link-alt"></i></span>ã€‚</p><p>Docker å®˜æ–¹æ‰˜ç®¡ç€è‡ªå·±çš„ <span class="exturl" data-url="aHR0cHM6Ly9odWIuZG9ja2VyLmNvbS8=">ä»“ç®¡ä¸­å¿ƒ<i class="fa fa-external-link-alt"></i></span>ï¼ŒåŒ…å«ç€æ•°é‡ä¼—å¤šçš„ä»“åº“ã€‚ä¸è¿‡è¯è™½å¦‚æ­¤ï¼Œè¿™ä¸ªä»“ç®¡ä¸­å¿ƒ <span class="exturl" data-url="aHR0cHM6Ly90aXRhbm91cy5jb20vcG9zdHMvZG9ja2VyLWluc2VjdXJpdHk=">å¹¶æ²¡æœ‰å¾ˆå¥½åœ°éªŒè¯é•œåƒ<i class="fa fa-external-link-alt"></i></span>ï¼Œæ‰€ä»¥å¦‚æœä½ æ‹…å¿ƒå®‰å…¨é—®é¢˜çš„è¯ï¼Œè¯·å°½é‡é¿å…ä½¿ç”¨å®ƒã€‚</p><ul><li><a href="https://docs.docker.com/engine/reference/commandline/login"><code>docker login</code></a> ç™»å…¥ä»“ç®¡ä¸­å¿ƒã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/logout"><code>docker logout</code></a> ç™»å‡ºä»“ç®¡ä¸­å¿ƒã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/search"><code>docker search</code></a> ä»ä»“ç®¡ä¸­å¿ƒæ£€ç´¢é•œåƒã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/pull"><code>docker pull</code></a> ä»ä»“ç®¡ä¸­å¿ƒæ‹‰å–é•œåƒåˆ°æœ¬åœ°ã€‚</li><li><a href="https://docs.docker.com/engine/reference/commandline/push"><code>docker push</code></a> ä»æœ¬åœ°æ¨é€é•œåƒåˆ°ä»“ç®¡ä¸­å¿ƒã€‚</li></ul><h3 id="æœ¬åœ°ä»“ç®¡ä¸­å¿ƒ"><a href="#æœ¬åœ°ä»“ç®¡ä¸­å¿ƒ" class="headerlink" title="æœ¬åœ°ä»“ç®¡ä¸­å¿ƒ"></a>æœ¬åœ°ä»“ç®¡ä¸­å¿ƒ</h3><p>ä½ å¯ä»¥ä½¿ç”¨ <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RvY2tlci9kaXN0cmlidXRpb24=">docker distribution<i class="fa fa-external-link-alt"></i></span> é¡¹ç›®æ­å»ºæœ¬åœ°çš„ä»“ç®¡ä¸­å¿ƒï¼Œè¯¦æƒ…å‚é˜… <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RvY2tlci9kb2NrZXIuZ2l0aHViLmlvL2Jsb2IvbWFzdGVyL3JlZ2lzdHJ5L2RlcGxveWluZy5tZA==">æœ¬åœ°å‘å¸ƒ (local deploy)<i class="fa fa-external-link-alt"></i></span> çš„ä»‹ç»ã€‚</p><p>ç§‘å­¦ä¸Šç½‘åï¼Œä¹Ÿå¯ä»¥çœ‹çœ‹ <span class="exturl" data-url="aHR0cHM6Ly9ncm91cHMuZ29vZ2xlLmNvbS9hL2RvY2tlcnByb2plY3Qub3JnL2ZvcnVtLyMhZm9ydW0vZGlzdHJpYnV0aW9u">Google+ Group<i class="fa fa-external-link-alt"></i></span>ã€‚</p><h2 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h2><p>å½“ä½ æ‰§è¡Œ <code>docker build</code> æ—¶ï¼ŒDocker å°†ä¼šæ ¹æ® <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9idWlsZGVyLw==">é…ç½®æ–‡ä»¶<i class="fa fa-external-link-alt"></i></span> å¯åŠ¨ Docker å®¹å™¨ã€‚è¿œä¼˜äºä½¿ç”¨ <code>docker commit</code>ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€äº›ç¼–å†™ Dockerfile çš„å¸¸ç”¨ç¼–è¾‘å™¨ï¼Œå¹¶é“¾æ¥åˆ°é€‚é…çš„è¯­æ³•é«˜äº®æ¨¡å—ï¸°</p><ul><li>å¦‚æœä½ åœ¨ä½¿ç”¨ <span class="exturl" data-url="aHR0cDovL2plZGl0Lm9yZy8=">jEdit<i class="fa fa-external-link-alt"></i></span>ï¼Œä½ å¯ä»¥ä½¿ç”¨æˆ‘å¼€å‘çš„ Dockerfile <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3dzYXJnZW50L2plZGl0LWRvY2tlci1tb2Rl">è¯­æ³•é«˜äº®æ¨¡å—<i class="fa fa-external-link-alt"></i></span>ã€‚</li><li><span class="exturl" data-url="aHR0cHM6Ly9wYWNrYWdlY29udHJvbC5pby9wYWNrYWdlcy9Eb2NrZXJmaWxlJTIwU3ludGF4JTIwSGlnaGxpZ2h0aW5n">Sublime Text 2<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9hdG9tLmlvL3BhY2thZ2VzL2xhbmd1YWdlLWRvY2tlcg==">Atom<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2VrYWxpbmluL0RvY2tlcmZpbGUudmlt">Vim<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3Nwb3RpZnkvZG9ja2VyZmlsZS1tb2Rl">Emacs<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RvY2tlci9kb2NrZXIvdHJlZS9tYXN0ZXIvY29udHJpYi9zeW50YXgvdGV4dG1hdGU=">TextMate<i class="fa fa-external-link-alt"></i></span></li><li>æ›´å¤šä¿¡æ¯è¯·å‚é˜… <span class="exturl" data-url="aHR0cHM6Ly9kb21laWRlLmdpdGh1Yi5pby8=">Docker é‡ä¸Š IDE<i class="fa fa-external-link-alt"></i></span></li></ul><h3 id="æŒ‡ä»¤"><a href="#æŒ‡ä»¤" class="headerlink" title="æŒ‡ä»¤"></a>æŒ‡ä»¤</h3><ul><li><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9idWlsZGVyLyNkb2NrZXJpZ25vcmUtZmlsZQ==">.dockerignore<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9idWlsZGVyLyNmcm9t">FROM<i class="fa fa-external-link-alt"></i></span> ä¸ºå…¶ä»–æŒ‡ä»¤è®¾ç½®åŸºç¡€é•œåƒ (Base Image)ã€‚</li><li><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9idWlsZGVyLyNtYWludGFpbmVyLWRlcHJlY2F0ZWQ=">MAINTAINER (deprecated - use LABEL instead)<i class="fa fa-external-link-alt"></i></span> ä¸ºç”Ÿæˆçš„é•œåƒè®¾ç½®ä½œè€…å­—æ®µã€‚</li><li><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9idWlsZGVyLyNydW4=">RUN<i class="fa fa-external-link-alt"></i></span> åœ¨å½“å‰é•œåƒçš„åŸºç¡€ä¸Šç”Ÿæˆä¸€ä¸ªæ–°å±‚å¹¶æ‰§è¡Œå‘½ä»¤ã€‚</li><li><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9idWlsZGVyLyNjbWQ=">CMD<i class="fa fa-external-link-alt"></i></span> è®¾ç½®å®¹å™¨é»˜è®¤æ‰§è¡Œå‘½ä»¤ã€‚</li><li><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9idWlsZGVyLyNleHBvc2U=">EXPOSE<i class="fa fa-external-link-alt"></i></span> å‘ŠçŸ¥ Docker å®¹å™¨åœ¨è¿è¡Œæ—¶æ‰€è¦ç›‘å¬çš„ç½‘ç»œç«¯å£ã€‚æ³¨æ„ï¼šå¹¶æ²¡æœ‰å®é™…ä¸Šå°†ç«¯å£è®¾ç½®ä¸ºå¯è®¿é—®ã€‚</li><li><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9idWlsZGVyLyNlbnY=">ENV<i class="fa fa-external-link-alt"></i></span> è®¾ç½®ç¯å¢ƒå˜é‡ã€‚</li><li><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9idWlsZGVyLyNhZGQ=">ADD<i class="fa fa-external-link-alt"></i></span> å°†æ–‡ä»¶ã€ç›®å½•æˆ–è¿œç¨‹æ–‡ä»¶å¤åˆ¶åˆ°å®¹å™¨ä¸­ã€‚ç¼“å­˜æ— æ•ˆã€‚è¯·å°½é‡ç”¨ <code>COPY</code> ä»£æ›¿ <code>ADD</code>ã€‚</li><li><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9idWlsZGVyLyNjb3B5">COPY<i class="fa fa-external-link-alt"></i></span> å°†æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹å¤åˆ¶åˆ°å®¹å™¨ä¸­ã€‚æ³¨æ„ï¼šå°†ä½¿ç”¨ ROOT ç”¨æˆ·å¤åˆ¶æ–‡ä»¶ï¼Œæ•…æ— è®º USER / WORKDIR æŒ‡ä»¤å¦‚ä½•é…ç½®ï¼Œä½ éƒ½éœ€è¦æ‰‹åŠ¨ä¿®æ”¹å…¶æ‰€æœ‰è€…ï¼ˆ<code>chown</code>ï¼‰ï¼Œ<code>ADD</code> ä¹Ÿæ˜¯ä¸€æ ·ã€‚</li><li><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9idWlsZGVyLyNlbnRyeXBvaW50">ENTRYPOINT<i class="fa fa-external-link-alt"></i></span> å°†å®¹å™¨è®¾ä¸ºå¯æ‰§è¡Œçš„ã€‚</li><li><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9idWlsZGVyLyN2b2x1bWU=">VOLUME<i class="fa fa-external-link-alt"></i></span> åœ¨å®¹å™¨å†…éƒ¨åˆ›å»ºæŒ‚è½½ç‚¹ (mount point) æŒ‡å‘å¤–éƒ¨æŒ‚è½½çš„å·æ ‡æˆ–å…¶ä»–å®¹å™¨ã€‚</li><li><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9idWlsZGVyLyN1c2Vy">USER<i class="fa fa-external-link-alt"></i></span> è®¾ç½®éšåæ‰§è¡Œ RUN / CMD / ENTRYPOINT å‘½ä»¤çš„ç”¨æˆ·åã€‚</li><li><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9idWlsZGVyLyN3b3JrZGly">WORKDIR<i class="fa fa-external-link-alt"></i></span> è®¾ç½®å·¥ä½œç›®å½• (working directory)ã€‚</li><li><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9idWlsZGVyLyNhcmc=">ARG<i class="fa fa-external-link-alt"></i></span> å®šä¹‰ç¼–è¯‘æ—¶ (build-time) å˜é‡ã€‚</li><li><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9idWlsZGVyLyNvbmJ1aWxk">ONBUILD<i class="fa fa-external-link-alt"></i></span> æ·»åŠ è§¦å‘æŒ‡ä»¤ï¼Œå½“è¯¥é•œåƒè¢«ä½œä¸ºå…¶ä»–é•œåƒçš„åŸºç¡€é•œåƒæ—¶è¯¥æŒ‡ä»¤ä¼šè¢«è§¦å‘ã€‚</li><li><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9idWlsZGVyLyNzdG9wc2lnbmFs">STOPSIGNAL<i class="fa fa-external-link-alt"></i></span> è®¾ç½®åœæ­¢å®¹å™¨æ—¶ï¼Œå‘å®¹å™¨å†…å‘é€çš„ç³»ç»Ÿè°ƒç”¨ä¿¡å· (system call signal)ã€‚</li><li><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vY29uZmlnL2xhYmVscy1jdXN0b20tbWV0YWRhdGEv">LABEL<i class="fa fa-external-link-alt"></i></span> å°†é”®å€¼å¯¹å…ƒæ•°æ® (key/value metadata) åº”ç”¨åˆ°é•œåƒã€å®¹å™¨æˆ–æ˜¯å®ˆæŠ¤è¿›ç¨‹ã€‚</li></ul><h3 id="æ•™ç¨‹"><a href="#æ•™ç¨‹" class="headerlink" title="æ•™ç¨‹"></a>æ•™ç¨‹</h3><ul><li><span class="exturl" data-url="aHR0cDovL2ZsdXg3LmNvbS9ibG9ncy9kb2NrZXIvZG9ja2VyLXR1dG9yaWFsLXNlcmllcy1wYXJ0LTMtYXV0b21hdGlvbi1pcy10aGUtd29yZC11c2luZy1kb2NrZXJmaWxlLw==">Flux7â€™s Dockerfile Tutorial<i class="fa fa-external-link-alt"></i></span></li></ul><h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><ul><li><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9idWlsZGVyLyNkb2NrZXJmaWxlLWV4YW1wbGVz">Examples<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3VzZXJndWlkZS9lbmctaW1hZ2UvZG9ja2VyZmlsZV9iZXN0LXByYWN0aWNlcy8=">Best practices for writing Dockerfiles<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cDovL2Nyb3NieW1pY2hhZWwuY29tLw==">Michael Crosby<i class="fa fa-external-link-alt"></i></span> è¿˜æœ‰æ›´å¤šçš„ <span class="exturl" data-url="aHR0cDovL2Nyb3NieW1pY2hhZWwuY29tL2RvY2tlcmZpbGUtYmVzdC1wcmFjdGljZXMuaHRtbA==">Dockerfiles best practices<i class="fa fa-external-link-alt"></i></span> / <span class="exturl" data-url="aHR0cDovL2Nyb3NieW1pY2hhZWwuY29tL2RvY2tlcmZpbGUtYmVzdC1wcmFjdGljZXMtdGFrZS0yLmh0bWw=">take 2<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cDovL2pvbmF0aGFuLmJlcmdrbm9mZi5jb20vam91cm5hbC9idWlsZGluZy1nb29kLWRvY2tlci1pbWFnZXM=">Building Good Docker Images<i class="fa fa-external-link-alt"></i></span> / <span class="exturl" data-url="aHR0cDovL2pvbmF0aGFuLmJlcmdrbm9mZi5jb20vam91cm5hbC9idWlsZGluZy1iZXR0ZXItZG9ja2VyLWltYWdlcw==">Building Better Docker Images<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9zcGVha2VyZGVjay5jb20vZ2FyZXRoci9tYW5hZ2luZy1jb250YWluZXItY29uZmlndXJhdGlvbi13aXRoLW1ldGFkYXRh">Managing Container Configuration with Metadata<i class="fa fa-external-link-alt"></i></span></li></ul><h2 id="å±‚-Layers"><a href="#å±‚-Layers" class="headerlink" title="å±‚(Layers)"></a>å±‚(Layers)</h2><p>Docker çš„ç‰ˆæœ¬åŒ–æ–‡ä»¶ç³»ç»Ÿæ˜¯åŸºäºå±‚çš„ã€‚å°±åƒ <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3VzZXJndWlkZS9zdG9yYWdlZHJpdmVyL2ltYWdlc2FuZGNvbnRhaW5lcnMv">Git çš„æäº¤æˆ–æ–‡ä»¶å˜æ›´ç³»ç»Ÿ<i class="fa fa-external-link-alt"></i></span> ä¸€æ ·ã€‚</p><h2 id="é“¾æ¥-Links"><a href="#é“¾æ¥-Links" class="headerlink" title="é“¾æ¥(Links)"></a>é“¾æ¥(Links)</h2><p>é“¾æ¥ (links) <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vdXNlcmd1aWRlL2RvY2tlcmxpbmtzLw==">é€šè¿‡ TCP/IP ç«¯å£<i class="fa fa-external-link-alt"></i></span> å®ç° Docker å®¹å™¨ä¹‹é—´çš„é€šè®¯ã€‚<span class="exturl" data-url="aHR0cHM6Ly9ibG9ncy5hdGxhc3NpYW4uY29tLzIwMTMvMTEvZG9ja2VyLWFsbC10aGUtdGhpbmdzLWF0LWF0bGFzc2lhbi1hdXRvbWF0aW9uLWFuZC13aXJpbmcv">Atlassian<i class="fa fa-external-link-alt"></i></span> å±•ç¤ºäº†å¯ç”¨çš„ä¾‹å­ã€‚ä½ è¿˜å¯ä»¥ <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3VzZXJndWlkZS9uZXR3b3JraW5nL2RlZmF1bHRfbmV0d29yay9kb2NrZXJsaW5rcy8jL3VwZGF0aW5nLXRoZS1ldGNob3N0cy1maWxl">é€šè¿‡ä¸»æœºå (hostname) é“¾æ¥<i class="fa fa-external-link-alt"></i></span>ã€‚</p><p>åœ¨æŸç§æ„ä¹‰ä¸Šæ¥è¯´ï¼Œè¯¥ç‰¹æ€§å·²ç»è¢« <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vbmV0d29yay8=">è‡ªå®šä¹‰ç½‘ç»œ<i class="fa fa-external-link-alt"></i></span> æ‰€æ›¿ä»£ã€‚</p><p>æ³¨æ„: å¦‚æœä½ å¸Œæœ›å®¹å™¨ä¹‹é—´<strong>åª</strong>é€šè¿‡é“¾æ¥è¿›è¡Œé€šè®¯ï¼Œåœ¨å¯åŠ¨ Docker å®ˆæŠ¤è¿›ç¨‹æ—¶ï¼Œè¯·ä½¿ç”¨ <code>-icc=false</code> æ¥ç¦ç”¨å†…éƒ¨è¿›ç¨‹é€šè®¯ã€‚</p><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªåä¸º CONTAINER çš„å®¹å™¨ï¼ˆé€šè¿‡ <code>docker run --name CONTAINER</code> æŒ‡å®šï¼‰å¹¶ä¸”åœ¨ Dockerfile ä¸­ï¼Œæš´éœ²äº†ä¸€ä¸ªç«¯å£:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">EXPOSE</span> <span class="number">1337</span></span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œæˆ‘ä»¬åˆ›å»ºå¦å¤–ä¸€ä¸ªåä¸º LINKED çš„å®¹å™¨:</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">run</span> -d <span class="comment">--link CONTAINER:ALIAS --name LINKED user/wordpress</span></span><br></pre></td></tr></table></figure><p>ç„¶å CONTAINER æš´éœ²çš„ç«¯å£å’Œåˆ«åå°†ä¼šä»¥å¦‚ä¸‹çš„ç¯å¢ƒå˜é‡å‡ºç°åœ¨ LINKED ä¸­:</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"><span class="meta-keyword">$ALIAS</span>_PORT_1337_TCP_PORT</span></span><br><span class="line"><span class="meta"><span class="meta-keyword">$ALIAS</span>_PORT_1337_TCP_ADDR</span></span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆä½ ä¾¿å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥è¿æ¥å®ƒäº†ã€‚</p><p>ä½¿ç”¨ <code>docker rm --link</code> å³å¯åˆ é™¤é“¾æ¥ã€‚</p><p>é€šå¸¸ï¼ŒDocker å®¹å™¨ï¼ˆäº¦å¯ç†è§£ä¸ºã€ŒæœåŠ¡ã€ï¼‰ä¹‹é—´çš„é“¾æ¥ï¼Œæ˜¯ã€ŒæœåŠ¡å‘ç°ã€çš„ä¸€ä¸ªå­é›†ã€‚å¦‚æœä½ æ‰“ç®—åœ¨ç”Ÿäº§ä¸­å¤§è§„æ¨¡ä½¿ç”¨ Dockerï¼Œè¿™å°†æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ã€‚è¯·å‚é˜…<span class="exturl" data-url="aHR0cHM6Ly93d3cuZGlnaXRhbG9jZWFuLmNvbS9jb21tdW5pdHkvdHV0b3JpYWxzL3RoZS1kb2NrZXItZWNvc3lzdGVtLXNlcnZpY2UtZGlzY292ZXJ5LWFuZC1kaXN0cmlidXRlZC1jb25maWd1cmF0aW9uLXN0b3Jlcw==">The Docker Ecosystem: Service Discovery and Distributed Configuration Stores<i class="fa fa-external-link-alt"></i></span> è·å–æ›´å¤šä¿¡æ¯ã€‚</p><h2 id="å·æ ‡-Volumes"><a href="#å·æ ‡-Volumes" class="headerlink" title="å·æ ‡(Volumes)"></a>å·æ ‡(Volumes)</h2><p>Docker çš„å·æ ‡ (volumes) æ˜¯ <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3R1dG9yaWFscy9kb2NrZXJ2b2x1bWVzLw==">ç‹¬ç«‹çš„æ–‡ä»¶ç³»ç»Ÿ<i class="fa fa-external-link-alt"></i></span>ã€‚å®ƒä»¬å¹¶éå¿…é¡»è¿æ¥åˆ°ç‰¹å®šçš„å®¹å™¨ä¸Šã€‚</p><h3 id="ç”Ÿå‘½å‘¨æœŸ-3"><a href="#ç”Ÿå‘½å‘¨æœŸ-3" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h3><ul><li><a href="https://docs.docker.com/engine/reference/commandline/volume_create/"><code>docker volume create</code></a></li><li><a href="https://docs.docker.com/engine/reference/commandline/volume_rm/"><code>docker volume rm</code></a></li></ul><h3 id="ä¿¡æ¯-1"><a href="#ä¿¡æ¯-1" class="headerlink" title="ä¿¡æ¯"></a>ä¿¡æ¯</h3><ul><li><a href="https://docs.docker.com/engine/reference/commandline/volume_ls/"><code>docker volume ls</code></a></li><li><a href="https://docs.docker.com/engine/reference/commandline/volume_inspect/"><code>docker volume inspect</code></a></li></ul><p>å·æ ‡åœ¨ä¸èƒ½ä½¿ç”¨é“¾æ¥ï¼ˆåªæœ‰ TCP/IPï¼‰çš„æƒ…å†µä¸‹éå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰ä¸¤ä¸ª Docker å®ä¾‹éœ€è¦é€šè®¯å¹¶åœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šç•™ä¸‹è®°å½•ã€‚</p><p>ä½ å¯ä»¥ä¸€æ¬¡æ€§å°†å…¶æŒ‚è½½åˆ°å¤šä¸ª docker å®¹å™¨ä¸Šï¼Œé€šè¿‡ <code>docker run --volumes-from</code>ã€‚</p><p>å› ä¸ºå·æ ‡æ˜¯ç‹¬ç«‹çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒä»¬é€šå¸¸è¢«ç”¨äºå­˜å‚¨å„å®¹å™¨ä¹‹é—´çš„ç¬æ—¶çŠ¶æ€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯ä»¥é…ç½®ä¸€ä¸ªæ— çŠ¶æ€ä¸´æ—¶å®¹å™¨ï¼Œå…³æ‰ä¹‹åï¼Œå½“ä½ æœ‰ç¬¬äºŒä¸ªè¿™ç§ä¸´æ—¶å®¹å™¨å®ä¾‹çš„æ—¶å€™ï¼Œä½ å¯ä»¥ä»ä¸Šä¸€æ¬¡ä¿å­˜çš„çŠ¶æ€ç»§ç»­æ‰§è¡Œã€‚</p><p>æŸ¥çœ‹ <span class="exturl" data-url="aHR0cDovL2Nyb3NieW1pY2hhZWwuY29tL2FkdmFuY2VkLWRvY2tlci12b2x1bWVzLmh0bWw=">å·æ ‡è¿›é˜¶<i class="fa fa-external-link-alt"></i></span> æ¥è·å–æ›´å¤šç»†èŠ‚ã€‚<span class="exturl" data-url="aHR0cDovL2NvbnRhaW5lcjQyLmNvbS8yMDE0LzExLzAzL2RvY2tlci1pbmRlcHRoLXZvbHVtZXMv">Container42<i class="fa fa-external-link-alt"></i></span> éå¸¸æœ‰ç”¨ã€‚</p><p>ä½ å¯ä»¥ <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3R1dG9yaWFscy9kb2NrZXJ2b2x1bWVzLyNtb3VudC1hLWhvc3QtZGlyZWN0b3J5LWFzLWEtZGF0YS12b2x1bWU=">å°†å®¿ä¸» MacOS çš„æ–‡ä»¶å¤¹æ˜ å°„ä¸º Docker å·æ ‡<i class="fa fa-external-link-alt"></i></span>ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -v <span class="regexp">/Users/</span>wsargent<span class="regexp">/myapp/</span>src:/src</span><br></pre></td></tr></table></figure><p>ä½ ä¹Ÿå¯ä»¥ç”¨è¿œç¨‹ NFS å·æ ‡ï¼Œå¦‚æœä½ è§‰å¾—ä½  <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3R1dG9yaWFscy9kb2NrZXJ2b2x1bWVzLyMvbW91bnQtYS1zaGFyZWQtc3RvcmFnZS12b2x1bWUtYXMtYS1kYXRhLXZvbHVtZQ==">æœ‰è¶³å¤Ÿå‹‡æ°”<i class="fa fa-external-link-alt"></i></span>ã€‚</p><p>è¿˜å¯ä»¥è€ƒè™‘è¿è¡Œä¸€ä¸ªçº¯æ•°æ®å®¹å™¨ï¼Œåƒ <span class="exturl" data-url="aHR0cDovL2NvbnRhaW5lcjQyLmNvbS8yMDEzLzEyLzE2L3BlcnNpc3RlbnQtdm9sdW1lcy13aXRoLWRvY2tlci1jb250YWluZXItYXMtdm9sdW1lLXBhdHRlcm4v">è¿™é‡Œ<i class="fa fa-external-link-alt"></i></span> æ‰€è¯´çš„é‚£æ ·ï¼Œæä¾›å¯ç§»æ¤æ•°æ®ã€‚</p><p>è®°å¾—ï¼Œ<a href="#%E5%B0%86%E6%96%87%E4%BB%B6%E6%8C%82%E8%BD%BD%E4%B8%BA%E5%8D%B7%E6%A0%87">æ–‡ä»¶ä¹Ÿå¯ä»¥è¢«æŒ‚è½½ä¸ºå·æ ‡</a>ã€‚</p><h2 id="æš´éœ²ç«¯å£-Exposing-ports"><a href="#æš´éœ²ç«¯å£-Exposing-ports" class="headerlink" title="æš´éœ²ç«¯å£(Exposing ports)"></a>æš´éœ²ç«¯å£(Exposing ports)</h2><p>é€šè¿‡å®¿ä¸»å®¹å™¨æš´éœ²è¾“å…¥ç«¯å£ç›¸å½“ <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9ydW4vI2V4cG9zZS1pbmNvbWluZy1wb3J0cw==">ç¹çä½†æœ‰æ•ˆçš„<i class="fa fa-external-link-alt"></i></span>ã€‚</p><p>ä¾‹å¦‚ä½¿ç”¨ <code>-p</code> å°†å®¹å™¨ç«¯å£æ˜ å°„åˆ°å®¿ä¸»ç«¯å£ä¸Šï¼ˆåªä½¿ç”¨æœ¬åœ°ä¸»æœº (localhost) æ¥å£ï¼‰ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="builtin-name">run</span> -p 127.0.0.1:<span class="variable">$HOSTPORT</span>:<span class="variable">$CONTAINERPORT</span> --name CONTAINER -t someimage</span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥ä½¿ç”¨ <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9idWlsZGVyLyNleHBvc2U=">EXPOSE<i class="fa fa-external-link-alt"></i></span> å‘ŠçŸ¥ Dockerï¼Œè¯¥å®¹å™¨åœ¨è¿è¡Œæ—¶ç›‘å¬æŒ‡å®šçš„ç«¯å£ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPOSE <span class="tag">&lt;<span class="name">CONTAINERPORT</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯æ³¨æ„ EXPOSE å¹¶ä¸ä¼šç›´æ¥æš´éœ²ç«¯å£ï¼Œä½ éœ€è¦ç”¨å‚æ•° <code>-p</code> ã€‚æ¯”å¦‚è¯´ä½ è¦åœ¨ localhost ä¸Šæš´éœ²å®¹å™¨çš„ç«¯å£:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -t nat -A DOCKER -<span class="keyword">p</span> tcp --dport <span class="symbol">&lt;LOCALHOSTPORT&gt;</span> -<span class="keyword">j</span> DNAT --<span class="keyword">to</span>-destination <span class="symbol">&lt;CONTAINERIP&gt;</span>:<span class="symbol">&lt;PORT&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æ˜¯åœ¨ Virtualbox ä¸­è¿è¡Œ Dockerï¼Œé‚£ä¹ˆä½ éœ€è¦é…ç½®ç«¯å£è½¬å‘ (forward the port)ã€‚ä½¿ç”¨ <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLnZhZ3JhbnR1cC5jb20vdjIvbmV0d29ya2luZy9mb3J3YXJkZWRfcG9ydHMuaHRtbA==">forwarded_port<i class="fa fa-external-link-alt"></i></span> åœ¨ Vagrantfile ä¸Šé…ç½®æš´éœ²çš„ç«¯å£èŒƒå›´ï¼Œè¿™æ ·ä½ å°±å¯ä»¥åŠ¨æ€åœ°æ˜ å°„äº†ï¼š</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Vagrant.configure(VAGRANTFILE_API_VERSION) <span class="built_in">do</span> |<span class="type">config</span>|<span class="type"></span></span><br><span class="line"><span class="type">  ...</span></span><br><span class="line"><span class="type"></span></span><br><span class="line"><span class="type">  (49000</span>.<span class="number">.49900</span>).each <span class="built_in">do</span> |<span class="type">port</span>|<span class="type"></span></span><br><span class="line"><span class="type">    config</span>.vm.network :forwarded_port, :host =&gt; port, :guest =&gt; port</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  ...</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>å¦‚æœä½ å¿˜è®°äº†å°†ä»€ä¹ˆç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºä¸Šçš„è¯ï¼Œå¯ä½¿ç”¨ <code>docker port</code> æŸ¥çœ‹ï¼š</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">port</span> CONTAINER <span class="variable">$CONTAINERPORT</span></span><br></pre></td></tr></table></figure><h2 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h2><p>è¿™é‡Œæœ‰ä¸€äº›æœ€ä½³å®è·µï¼Œä»¥åŠäº‰è®ºç„¦ç‚¹ï¼š</p><ul><li><span class="exturl" data-url="aHR0cDovL2dyZWdvcnlzem9yYy5jb20vYmxvZy8yMDE0LzEwLzE2L3RoZS1yYWJiaXQtaG9sZS1vZi11c2luZy1kb2NrZXItaW4tYXV0b21hdGVkLXRlc3RzLw==">The Rabbit Hole of Using Docker in Automated Tests<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9icmlkZ2V0a3JvbWhvdXQ=">Bridget Kromhout<i class="fa fa-external-link-alt"></i></span> has a useful blog post on <span class="exturl" data-url="aHR0cDovL3N5c2FkdmVudC5ibG9nc3BvdC5jby51ay8yMDE0LzEyL2RheS0xLWRvY2tlci1pbi1wcm9kdWN0aW9uLXJlYWxpdHktbm90Lmh0bWw=">running Docker in production<i class="fa fa-external-link-alt"></i></span> at Dramafever.  </li><li>Thereâ€™s also a best practices <span class="exturl" data-url="aHR0cDovL2RldmVsb3BlcnMubHlzdC5jb20vZGV2b3BzLzIwMTQvMTIvMDgvZG9ja2VyLw==">blog post<i class="fa fa-external-link-alt"></i></span> from Lyst.</li><li><span class="exturl" data-url="aHR0cHM6Ly9lbmdpbmVlcmluZy5zYWxlc2ZvcmNlaXEuY29tLzIwMTMvMTEvMDUvYS1kb2NrZXItZGV2LWVudmlyb25tZW50LWluLTI0LWhvdXJzLXBhcnQtMi1vZi0yLmh0bWw=">A Docker Dev Environment in 24 Hours!<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly90ZXJzZXN5c3RlbXMuY29tLzIwMTMvMTEvMjAvYnVpbGRpbmctYS1kZXZlbG9wbWVudC1lbnZpcm9ubWVudC13aXRoLWRvY2tlci8=">Building a Development Environment With Docker<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9zYW1zYWZmcm9uLmNvbS9hcmNoaXZlLzIwMTMvMTEvMDcvZGlzY291cnNlLWluLWEtZG9ja2VyLWNvbnRhaW5lcg==">Discourse in a Docker Container<i class="fa fa-external-link-alt"></i></span></li></ul><h2 id="å®‰å…¨-Security"><a href="#å®‰å…¨-Security" class="headerlink" title="å®‰å…¨(Security)"></a>å®‰å…¨(Security)</h2><p>è¿™èŠ‚å‡†å¤‡è®¨è®ºä¸€äº›å…³äº Docker å®‰å…¨æ€§çš„é—®é¢˜ã€‚Docker å®˜æ–¹æ–‡æ¡£ <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vYXJ0aWNsZXMvc2VjdXJpdHkv">å®‰å…¨<i class="fa fa-external-link-alt"></i></span> é¡µé¢è®²è¿°äº†æ›´å¤šç»†èŠ‚ã€‚</p><p>é¦–å…ˆç¬¬ä¸€ä»¶äº‹ï¼šDocker æ˜¯æœ‰ root æƒé™çš„ã€‚å¦‚æœä½ åœ¨ <code>docker</code> ç»„ï¼Œé‚£ä¹ˆä½ å°±æœ‰ <span class="exturl" data-url="aHR0cHM6Ly93ZWIuYXJjaGl2ZS5vcmcvd2ViLzIwMTYxMjI2MjExNzU1L2h0dHA6Ly9yZXZlbnRsb3YuY29tL2Fkdmlzb3JpZXMvdXNpbmctdGhlLWRvY2tlci1jb21tYW5kLXRvLXJvb3QtdGhlLWhvc3Q=">root æƒé™<i class="fa fa-external-link-alt"></i></span>ã€‚å¦‚æœä½ å°† Docker çš„ Unix Socket æš´éœ²ç»™å®¹å™¨ï¼Œæ„å‘³ç€ä½ èµ‹äºˆäº†å®¹å™¨ <span class="exturl" data-url="aHR0cHM6Ly93d3cubHZoLmlvL3Bvc3RzL2RvbnQtZXhwb3NlLXRoZS1kb2NrZXItc29ja2V0LW5vdC1ldmVuLXRvLWEtY29udGFpbmVyLw==">å®¿ä¸»æœº root æƒé™<i class="fa fa-external-link-alt"></i></span>ã€‚</p><p>Docker ä¸åº”å½“ä½œä¸ºå”¯ä¸€çš„é˜²å¾¡æªæ–½ã€‚ä½ åº”å½“ä½¿å…¶æ›´åŠ å®‰å…¨å¯é ã€‚</p><p>ä¸ºäº†æ›´å¥½åœ°ç†è§£å®¹å™¨æš´éœ²äº†ä»€ä¹ˆï¼Œå¯å‚é˜…ç”± <span class="exturl" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9keW5fX18=">Aaron Grattafiori<i class="fa fa-external-link-alt"></i></span> ç¼–å†™çš„ <span class="exturl" data-url="aHR0cHM6Ly93d3cubmNjZ3JvdXAudHJ1c3QvZ2xvYmFsYXNzZXRzL291ci1yZXNlYXJjaC91cy93aGl0ZXBhcGVycy8yMDE2L2FwcmlsL25jY19ncm91cF91bmRlcnN0YW5kaW5nX2hhcmRlbmluZ19saW51eF9jb250YWluZXJzLTEtMS5wZGY=">Understanding and Hardening Linux Containers<i class="fa fa-external-link-alt"></i></span>ã€‚è¿™æ˜¯ä¸€ä¸ªå®Œæ•´å…¨é¢ä¸”åŒ…å«å¤§é‡é“¾æ¥å’Œè„šæ³¨çš„å®¹å™¨é—®é¢˜æŒ‡å—ï¼Œä»‹ç»äº†è®¸å¤šæœ‰ç”¨çš„å†…å®¹ã€‚å³ä½¿ä½ å·²ç»åŠ å›ºè¿‡å®¹å™¨ï¼Œä»¥ä¸‹çš„å®‰å…¨æç¤ºä¾ç„¶ååˆ†æœ‰å¸®åŠ©ï¼Œä½†å¹¶ä¸èƒ½ä»£æ›¿ç†è§£çš„è¿‡ç¨‹ã€‚</p><h3 id="å®‰å…¨æç¤º"><a href="#å®‰å…¨æç¤º" class="headerlink" title="å®‰å…¨æç¤º"></a>å®‰å…¨æç¤º</h3><p>ä¸ºäº†æœ€å¤§çš„å®‰å…¨æ€§ï¼Œä½ åº”å½“è€ƒè™‘åœ¨è™šæ‹Ÿæœºä¸Šè¿è¡Œ Dockerã€‚è¿™æ˜¯ç›´æ¥ä» Docker å®‰å…¨å›¢é˜Ÿæ‹¿æ¥çš„èµ„æ–™ â€“ <span class="exturl" data-url="aHR0cDovL3d3dy5zbGlkZXNoYXJlLm5ldC9qcGV0YXp6by9saW51eC1jb250YWluZXJzLWx4Yy1kb2NrZXItYW5kLXNlY3VyaXR5">slides<i class="fa fa-external-link-alt"></i></span> / <span class="exturl" data-url="aHR0cDovL3d3dy5wcm9qZWN0YXRvbWljLmlvL2Jsb2cvMjAxNC8wOC9pcy1pdC1zYWZlLWEtbG9vay1hdC1kb2NrZXItYW5kLXNlY3VyaXR5LWZyb20tbGludXhjb24v">notes<i class="fa fa-external-link-alt"></i></span>ã€‚ä¹‹åï¼Œå¯ä½¿ç”¨ AppArmorã€seccompã€SELinuxã€grsec ç­‰æ¥ <span class="exturl" data-url="aHR0cDovL2xpbnV4LWF1ZGl0LmNvbS9kb2NrZXItc2VjdXJpdHktYmVzdC1wcmFjdGljZXMtZm9yLXlvdXItdmVzc2VsLWFuZC1jb250YWluZXJzLw==">é™åˆ¶å®¹å™¨çš„æƒé™<i class="fa fa-external-link-alt"></i></span>ã€‚æ›´å¤šç»†èŠ‚ï¼Œè¯·æŸ¥é˜… <span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmRvY2tlci5jb20vMjAxNi8wMi9kb2NrZXItZW5naW5lLTEtMTAtc2VjdXJpdHkv">Docker 1.10 security features<i class="fa fa-external-link-alt"></i></span>ã€‚</p><p>Docker é•œåƒ ID å±äº <span class="exturl" data-url="aHR0cHM6Ly9tZWRpdW0uY29tL0BxdWF5aW8veW91ci1kb2NrZXItaW1hZ2UtaWRzLWFyZS1zZWNyZXRzLWFuZC1pdHMtdGltZS15b3UtdHJlYXRlZC10aGVtLXRoYXQtd2F5LWY1NWU5ZjE0YzFhNA==">æ•æ„Ÿä¿¡æ¯<i class="fa fa-external-link-alt"></i></span> æ‰€ä»¥å®ƒä¸åº”è¯¥å‘å¤–ç•Œå…¬å¼€ã€‚è¯·å°†å®ƒä»¬å½“ä½œå¯†ç æ¥å¯¹å¾…ã€‚</p><p>é˜…è¯»ç”± <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2tvbnN0cnVrdG9pZA==">Thomas SjÃ¶gren<i class="fa fa-external-link-alt"></i></span> ç¼–å†™çš„ <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2tvbnN0cnVrdG9pZC9Eb2NrZXIvYmxvYi9tYXN0ZXIvU2VjdXJpdHkvQ2hlYXRTaGVldC5hZG9j">Docker Security Cheat Sheet<i class="fa fa-external-link-alt"></i></span>ï¼šå…³äºåŠ å›ºå®¹å™¨çš„ä¸é”™çš„å»ºè®®ã€‚</p><p>æŸ¥çœ‹ <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RvY2tlci9kb2NrZXItYmVuY2gtc2VjdXJpdHk=">Docker å®‰å…¨æµ‹è¯•è„šæœ¬<i class="fa fa-external-link-alt"></i></span>ï¼Œä¸‹è½½ <span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmRvY2tlci5jb20vMjAxNS8wNS91bmRlcnN0YW5kaW5nLWRvY2tlci1zZWN1cml0eS1hbmQtYmVzdC1wcmFjdGljZXMv">æœ€ä½³å®è·µç™½çš®ä¹¦<i class="fa fa-external-link-alt"></i></span>ã€‚</p><p>ä½ åº”å½“è¿œç¦»ä½¿ç”¨éç¨³å®šç‰ˆæœ¬ grsecurity / pax çš„å†…æ ¸ï¼Œæ¯”å¦‚ <span class="exturl" data-url="aHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQWxwaW5lX0xpbnV4">Alpine Linux<i class="fa fa-external-link-alt"></i></span>ã€‚å¦‚æœåœ¨äº§å“ä¸­ç”¨äº† grsecurityï¼Œé‚£ä¹ˆä½ åº”è¯¥è€ƒè™‘ä½¿ç”¨æœ‰ <span class="exturl" data-url="aHR0cHM6Ly9ncnNlY3VyaXR5Lm5ldC9idXNpbmVzc19zdXBwb3J0LnBocA==">å•†ä¸šæ”¯æŒ<i class="fa fa-external-link-alt"></i></span> çš„ <span class="exturl" data-url="aHR0cHM6Ly9ncnNlY3VyaXR5Lm5ldC9hbm5vdW5jZS5waHA=">ç¨³å®šç‰ˆæœ¬<i class="fa fa-external-link-alt"></i></span>ï¼Œå°±åƒä½ å¯¹å¾… RedHat é‚£æ ·ã€‚è™½ç„¶è¦ $200 æ¯æœˆï¼Œä½†å¯¹äºä½ çš„è¿ç»´é¢„ç®—æ¥è¯´ä¸å€¼ä¸€æã€‚</p><p>ä» Docker 1.11 å¼€å§‹ï¼Œä½ å¯ä»¥è½»æ¾çš„é™åˆ¶åœ¨å®¹å™¨ä¸­å¯ç”¨çš„è¿›ç¨‹æ•°ï¼Œä»¥é˜²æ­¢ fork ç‚¸å¼¹ã€‚ è¿™è¦æ±‚ Linux å†…æ ¸ &gt;= 4.3ï¼Œå¹¶ä¸”è¦åœ¨å†…æ ¸é…ç½®ä¸­æ‰“å¼€ CGROUP_PIDS=yã€‚</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="builtin-name">run</span> <span class="attribute">--pids-limit</span>=64</span><br></pre></td></tr></table></figure><p>åŒæ—¶ï¼Œä½ ä¹Ÿå¯ä»¥é™åˆ¶è¿›ç¨‹å†è·å–æ–°æƒé™ã€‚è¯¥åŠŸèƒ½æ˜¯ Linux å†…æ ¸ä» 3.5 ç‰ˆæœ¬å¼€å§‹å°±æ‹¥æœ‰çš„ã€‚ä½ å¯ä»¥ä» <span class="exturl" data-url="aHR0cDovL3d3dy5wcm9qZWN0YXRvbWljLmlvL2Jsb2cvMjAxNi8wMy9uby1uZXctcHJpdnMtZG9ja2VyLw==">è¿™ç¯‡åšå®¢<i class="fa fa-external-link-alt"></i></span> ä¸­é˜…è¯»åˆ°æ›´å¤šå…³äºè¿™æ–¹é¢çš„å†…å®¹ã€‚</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="builtin-name">run</span> <span class="attribute">--security-opt</span>=<span class="literal">no</span>-new-privileges</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹å†…å®¹æ‘˜é€‰è‡ª <span class="exturl" data-url="aHR0cDovL2NvbnRhaW5lci1zb2x1dGlvbnMuY29tL2lzLWRvY2tlci1zYWZlLWZvci1wcm9kdWN0aW9uLw==">Container Solutions<i class="fa fa-external-link-alt"></i></span> çš„ <span class="exturl" data-url="aHR0cDovL2NvbnRhaW5lci1zb2x1dGlvbnMuY29tL2NvbnRlbnQvdXBsb2Fkcy8yMDE1LzA2LzE1LjA2LjE1X0RvY2tlckNoZWF0U2hlZXRfQTIucGRm">Docker Security Cheat Sheet<i class="fa fa-external-link-alt"></i></span>ï¼ˆPDF ç‰ˆæœ¬ï¼Œéš¾ä»¥ä½¿ç”¨ï¼Œæ•…å¤åˆ¶è‡³æ­¤ï¼‰ï¼š</p><p>å…³é—­å†…éƒ¨è¿›ç¨‹é€šè®¯ï¼š</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">docker</span> <span class="literal">-</span><span class="comment">d</span> --<span class="comment">icc=false</span> --<span class="comment">iptables</span></span><br></pre></td></tr></table></figure><p>è®¾ç½®å®¹å™¨ä¸ºåªè¯»ï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">run</span> <span class="comment">--read-only</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡ hashsum æ¥éªŒè¯å·æ ‡ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker</span> pull debian@sha<span class="number">256</span>:a<span class="number">25306</span>f<span class="number">3850</span>e<span class="number">1</span>bd<span class="number">44541976</span>aa<span class="number">7</span>b<span class="number">5</span>fd<span class="number">0</span>a<span class="number">29</span>be</span><br></pre></td></tr></table></figure><p>è®¾ç½®å·æ ‡ä¸ºåªè¯»ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -v $(<span class="keyword">pwd</span>)/secret<span class="variable">s:</span>/secret<span class="variable">s:ro</span> debian</span><br></pre></td></tr></table></figure><p>åœ¨ Dockerfile ä¸­å®šä¹‰ç”¨æˆ·å¹¶ä»¥è¯¥ç”¨æˆ·è¿è¡Œï¼Œé¿å…åœ¨å®¹å™¨ä¸­ä»¥ ROOT èº«ä»½æ“ä½œï¼š</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RUN groupadd -r <span class="keyword">user</span> <span class="title">&amp;&amp; useradd</span> -r -g <span class="keyword">user</span> <span class="title">user</span></span><br><span class="line"><span class="keyword">USER</span> <span class="title">user</span></span><br></pre></td></tr></table></figure><h3 id="ç”¨æˆ·å‘½åç©ºé—´-User-Namespaces"><a href="#ç”¨æˆ·å‘½åç©ºé—´-User-Namespaces" class="headerlink" title="ç”¨æˆ·å‘½åç©ºé—´(User Namespaces)"></a>ç”¨æˆ·å‘½åç©ºé—´(User Namespaces)</h3><p>è¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨ <span class="exturl" data-url="aHR0cHM6Ly9zM2hoLndvcmRwcmVzcy5jb20vMjAxMy8wNy8xOS9jcmVhdGluZy1hbmQtdXNpbmctY29udGFpbmVycy13aXRob3V0LXByaXZpbGVnZS8=">ç”¨æˆ·å‘½åç©ºé—´<i class="fa fa-external-link-alt"></i></span> â€“ è‡ª 1.10 ç‰ˆæœ¬èµ·å·²å†…ç½®ï¼Œä½†é»˜è®¤å¹¶æœªå¯ç”¨ã€‚</p><p>è¦åœ¨ Ubuntu 15.10 ä¸­å¯ç”¨ç”¨æˆ·å‘½åç©ºé—´ (remap the userns)ï¼Œè¯· <span class="exturl" data-url="aHR0cHM6Ly9yYWVzZW5lLmdpdGh1Yi5pby9ibG9nLzIwMTYvMDIvMDQvRG9ja2VyLVVzZXItTmFtZXNwYWNlcy8=">è·Ÿç€è¿™ç¯‡åšå®¢çš„ä¾‹å­<i class="fa fa-external-link-alt"></i></span> æ¥åšã€‚</p><h3 id="å®‰å…¨ç›¸å…³è§†é¢‘"><a href="#å®‰å…¨ç›¸å…³è§†é¢‘" class="headerlink" title="å®‰å…¨ç›¸å…³è§†é¢‘"></a>å®‰å…¨ç›¸å…³è§†é¢‘</h3><ul><li><span class="exturl" data-url="aHR0cHM6Ly95b3V0dS5iZS8wNExPdU1nTmo5VQ==">Using Docker Safely<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly95b3V0dS5iZS9LbXhPWG1QaFpiaw==">Securing your applications using Docker<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly95b3V0dS5iZS9hOWxFOVVycjZBUQ==">Container security: Do containers actually contain?<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1pTjZRYnN6QjFSOA==">Linux Containers: Future or Fantasy?<i class="fa fa-external-link-alt"></i></span></li></ul><h3 id="å®‰å…¨è·¯çº¿å›¾"><a href="#å®‰å…¨è·¯çº¿å›¾" class="headerlink" title="å®‰å…¨è·¯çº¿å›¾"></a>å®‰å…¨è·¯çº¿å›¾</h3><p>Docker çš„è·¯çº¿å›¾æåˆ°å…³äº <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RvY2tlci9kb2NrZXIvYmxvYi9tYXN0ZXIvUk9BRE1BUC5tZCMxMS1zZWN1cml0eQ==">seccomp çš„æ”¯æŒ<i class="fa fa-external-link-alt"></i></span>ã€‚<br>ä¸€ä¸ªåä¸º <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2pmcmF6ZWxsZS9iYW5l">bane<i class="fa fa-external-link-alt"></i></span> çš„ AppArmor ç­–ç•¥ç”Ÿæˆå™¨æ­£åœ¨å®ç° <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RvY2tlci9kb2NrZXIvaXNzdWVzLzE3MTQy">å®‰å…¨é…ç½®æ–‡ä»¶<i class="fa fa-external-link-alt"></i></span>ã€‚</p><h2 id="å°è´´å£«"><a href="#å°è´´å£«" class="headerlink" title="å°è´´å£«"></a>å°è´´å£«</h2><p>é“¾æ¥ï¼š</p><ul><li><span class="exturl" data-url="aHR0cDovL3Nzc3NsaWRlLmNvbS9zcGVha2VyZGVjay5jb20vYm1vcmVhcnR5LzE1LWRvY2tlci10aXBzLWluLTUtbWludXRlcw==">15 Docker Tips in 5 minutes<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9jb2RlZnJlc2guaW8vYmxvZy9ldmVyeWRheS1oYWNrcy1kb2NrZXIv">CodeFresh Everyday Hacks Docker<i class="fa fa-external-link-alt"></i></span></li></ul><h3 id="æ¸…ç†-1"><a href="#æ¸…ç†-1" class="headerlink" title="æ¸…ç†"></a>æ¸…ç†</h3><p>æœ€æ–°çš„ <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RvY2tlci9kb2NrZXIvcHVsbC8yNjEwOA==">æ•°æ®ç®¡ç†å‘½ä»¤<i class="fa fa-external-link-alt"></i></span> å·²åœ¨ Docker 1.13 å®ç°ï¼š</p><ul><li><code>docker system prune</code></li><li><code>docker volume prune</code></li><li><code>docker network prune</code></li><li><code>docker container prune</code></li><li><code>docker image prune</code></li></ul><h3 id="df-å‘½ä»¤"><a href="#df-å‘½ä»¤" class="headerlink" title="df å‘½ä»¤"></a>df å‘½ä»¤</h3><p><code>docker system df</code> å°†æ˜¾ç¤ºå½“å‰ Docker å„éƒ¨åˆ†å ç”¨çš„ç£ç›˜ç©ºé—´ã€‚</p><h3 id="Heredoc-å£°æ˜-Docker-å®¹å™¨"><a href="#Heredoc-å£°æ˜-Docker-å®¹å™¨" class="headerlink" title="Heredoc å£°æ˜ Docker å®¹å™¨"></a>Heredoc å£°æ˜ Docker å®¹å™¨</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker build -t htop - &lt;&lt; EOF</span><br><span class="line"><span class="keyword">FROM</span> alpine</span><br><span class="line"><span class="builtin-name">RUN</span> apk --no-cache <span class="builtin-name">add</span> htop</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><h3 id="æœ€è¿‘ä¸€æ¬¡çš„å®¹å™¨-ID"><a href="#æœ€è¿‘ä¸€æ¬¡çš„å®¹å™¨-ID" class="headerlink" title="æœ€è¿‘ä¸€æ¬¡çš„å®¹å™¨ ID"></a>æœ€è¿‘ä¸€æ¬¡çš„å®¹å™¨ ID</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alias <span class="attribute">dl</span>=<span class="string">&#x27;docker ps -l -q&#x27;</span></span><br><span class="line">docker <span class="builtin-name">run</span> ubuntu echo hello world</span><br><span class="line">docker commit $(dl) helloworld</span><br></pre></td></tr></table></figure><h3 id="å¸¦å‘½ä»¤çš„æäº¤ï¼ˆéœ€è¦-Dockerfileï¼‰"><a href="#å¸¦å‘½ä»¤çš„æäº¤ï¼ˆéœ€è¦-Dockerfileï¼‰" class="headerlink" title="å¸¦å‘½ä»¤çš„æäº¤ï¼ˆéœ€è¦ Dockerfileï¼‰"></a>å¸¦å‘½ä»¤çš„æäº¤ï¼ˆéœ€è¦ Dockerfileï¼‰</h3><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker commit -<span class="built_in">run</span>=&#x27;&#123;<span class="string">&quot;Cmd&quot;</span>:[<span class="string">&quot;postgres&quot;</span>, <span class="string">&quot;-too -many -opts&quot;</span>]&#125;&#x27; $(dl) postgres</span><br></pre></td></tr></table></figure><h3 id="è·å–-IP-åœ°å€"><a href="#è·å–-IP-åœ°å€" class="headerlink" title="è·å– IP åœ°å€"></a>è·å– IP åœ°å€</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">inspect</span> $(dl) | <span class="keyword">grep</span> -wm1 IPAddress | cut -d <span class="string">&#x27;&quot;&#x27;</span> -f <span class="number">4</span></span><br></pre></td></tr></table></figure><p>æˆ–ä½¿ç”¨ <span class="exturl" data-url="aHR0cHM6Ly9zdGVkb2xhbi5naXRodWIuaW8vanEv">jq<i class="fa fa-external-link-alt"></i></span>:</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect $(dl) | jq -r <span class="string">&#x27;.[0].NetworkSettings.IPAddress&#x27;</span></span><br></pre></td></tr></table></figure><p>æˆ–ä½¿ç”¨ <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL3JlZmVyZW5jZS9jb21tYW5kbGluZS9pbnNwZWN0">go æ¨¡æ¿<i class="fa fa-external-link-alt"></i></span>ï¼š</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">docker inspect -f &#x27;</span><span class="template-variable">&#123;&#123; <span class="name">.NetworkSettings.IPAddress</span> &#125;&#125;</span><span class="xml">&#x27; <span class="tag">&lt;<span class="name">container_name</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>æˆ–åœ¨é€šè¿‡ Dockerfile æ„å»ºé•œåƒæ—¶ï¼Œé€šè¿‡æ„å»ºå‚æ•° (build argument) ä¼ å…¥ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">DOCKER_HOST_IP</span>=`ifconfig | grep -E <span class="string">&quot;([0-9]&#123;1,3&#125;\.)&#123;3&#125;[0-9]&#123;1,3&#125;&quot;</span> | grep -v 127.0.0.1 | awk <span class="string">&#x27;&#123; print $2 &#125;&#x27;</span> | cut -f2 -d: | head -n1`</span><br><span class="line">echo DOCKER_HOST_IP = <span class="variable">$DOCKER_HOST_IP</span></span><br><span class="line">docker build \</span><br><span class="line">  --build-arg <span class="attribute">ARTIFACTORY_ADDRESS</span>=<span class="variable">$DOCKER_HOST_IP</span> </span><br><span class="line">  -t sometag \</span><br><span class="line">  some-directory/</span><br></pre></td></tr></table></figure><h3 id="è·å–ç«¯å£æ˜ å°„"><a href="#è·å–ç«¯å£æ˜ å°„" class="headerlink" title="è·å–ç«¯å£æ˜ å°„"></a>è·å–ç«¯å£æ˜ å°„</h3><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">docker inspect -f &#x27;</span><span class="template-variable">&#123;&#123;<span class="name">range</span> $p, $conf <span class="attr">:</span>= .NetworkSettings.Ports&#125;&#125;</span><span class="xml"> </span><span class="template-variable">&#123;&#123;<span class="name">$p</span>&#125;&#125;</span><span class="xml"> -&gt; </span><span class="template-variable">&#123;&#123;(<span class="name">index</span> $conf <span class="number">0</span>).HostPort&#125;&#125;</span><span class="xml"> </span><span class="template-variable">&#123;&#123;<span class="name">end</span>&#125;&#125;</span><span class="xml">&#x27; <span class="tag">&lt;<span class="name">containername</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h3 id="é€šè¿‡æ­£åˆ™åŒ¹é…å®¹å™¨"><a href="#é€šè¿‡æ­£åˆ™åŒ¹é…å®¹å™¨" class="headerlink" title="é€šè¿‡æ­£åˆ™åŒ¹é…å®¹å™¨"></a>é€šè¿‡æ­£åˆ™åŒ¹é…å®¹å™¨</h3><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="constructor">$(<span class="params">docker</span> <span class="params">ps</span> -<span class="params">a</span> | <span class="params">grep</span> <span class="string">&quot;REGEXP_PATTERN&quot;</span> | <span class="params">cut</span> -<span class="params">f1</span> -<span class="params">d</span><span class="string">&quot; &quot;</span>)</span>; <span class="keyword">do</span> echo $i; <span class="keyword">done</span>`</span><br></pre></td></tr></table></figure><h3 id="è·å–ç¯å¢ƒå˜é‡é…ç½®"><a href="#è·å–ç¯å¢ƒå˜é‡é…ç½®" class="headerlink" title="è·å–ç¯å¢ƒå˜é‡é…ç½®"></a>è·å–ç¯å¢ƒå˜é‡é…ç½®</h3><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">run</span> <span class="comment">--rm ubuntu env</span></span><br></pre></td></tr></table></figure><h3 id="å¼ºè¡Œç»ˆæ­¢è¿è¡Œä¸­çš„å®¹å™¨"><a href="#å¼ºè¡Œç»ˆæ­¢è¿è¡Œä¸­çš„å®¹å™¨" class="headerlink" title="å¼ºè¡Œç»ˆæ­¢è¿è¡Œä¸­çš„å®¹å™¨"></a>å¼ºè¡Œç»ˆæ­¢è¿è¡Œä¸­çš„å®¹å™¨</h3><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker kill <span class="constructor">$(<span class="params">docker</span> <span class="params">ps</span> -<span class="params">q</span>)</span></span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤æ‰€æœ‰å®¹å™¨ï¼ˆå¼ºè¡Œåˆ é™¤ï¼æ— è®ºå®¹å™¨è¿è¡Œæˆ–åœæ­¢ï¼‰"><a href="#åˆ é™¤æ‰€æœ‰å®¹å™¨ï¼ˆå¼ºè¡Œåˆ é™¤ï¼æ— è®ºå®¹å™¨è¿è¡Œæˆ–åœæ­¢ï¼‰" class="headerlink" title="åˆ é™¤æ‰€æœ‰å®¹å™¨ï¼ˆå¼ºè¡Œåˆ é™¤ï¼æ— è®ºå®¹å™¨è¿è¡Œæˆ–åœæ­¢ï¼‰"></a>åˆ é™¤æ‰€æœ‰å®¹å™¨ï¼ˆå¼ºè¡Œåˆ é™¤ï¼æ— è®ºå®¹å™¨è¿è¡Œæˆ–åœæ­¢ï¼‰</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">rm</span> <span class="operator">-f</span> <span class="variable">$</span>(docker <span class="built_in">ps</span> <span class="literal">-qa</span>)</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤æ—§å®¹å™¨"><a href="#åˆ é™¤æ—§å®¹å™¨" class="headerlink" title="åˆ é™¤æ—§å®¹å™¨"></a>åˆ é™¤æ—§å®¹å™¨</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker</span> ps -a | grep <span class="string">&#x27;weeks ago&#x27;</span> | awk <span class="string">&#x27;&#123;print <span class="variable">$1</span>&#125;&#x27;</span> | xargs docker rm</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤å·²åœæ­¢çš„å®¹å™¨"><a href="#åˆ é™¤å·²åœæ­¢çš„å®¹å™¨" class="headerlink" title="åˆ é™¤å·²åœæ­¢çš„å®¹å™¨"></a>åˆ é™¤å·²åœæ­¢çš„å®¹å™¨</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">rm</span> <span class="literal">-v</span> `docker <span class="built_in">ps</span> <span class="literal">-a</span> <span class="literal">-q</span> <span class="operator">-f</span> status=exited`</span><br></pre></td></tr></table></figure><h3 id="åœæ­¢å¹¶åˆ é™¤å®¹å™¨"><a href="#åœæ­¢å¹¶åˆ é™¤å®¹å™¨" class="headerlink" title="åœæ­¢å¹¶åˆ é™¤å®¹å™¨"></a>åœæ­¢å¹¶åˆ é™¤å®¹å™¨</h3><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop <span class="constructor">$(<span class="params">docker</span> <span class="params">ps</span> -<span class="params">aq</span>)</span><span class="operator"> &amp;&amp; </span>docker rm -v <span class="constructor">$(<span class="params">docker</span> <span class="params">ps</span> -<span class="params">aq</span>)</span></span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤æ— ç”¨-dangling-çš„é•œåƒ"><a href="#åˆ é™¤æ— ç”¨-dangling-çš„é•œåƒ" class="headerlink" title="åˆ é™¤æ— ç”¨ (dangling) çš„é•œåƒ"></a>åˆ é™¤æ— ç”¨ (dangling) çš„é•œåƒ</h3><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi <span class="constructor">$(<span class="params">docker</span> <span class="params">images</span> -<span class="params">q</span> -<span class="params">f</span> <span class="params">dangling</span>=<span class="params">true</span>)</span></span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤æ‰€æœ‰é•œåƒ"><a href="#åˆ é™¤æ‰€æœ‰é•œåƒ" class="headerlink" title="åˆ é™¤æ‰€æœ‰é•œåƒ"></a>åˆ é™¤æ‰€æœ‰é•œåƒ</h3><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi <span class="constructor">$(<span class="params">docker</span> <span class="params">images</span> -<span class="params">q</span>)</span></span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤æ— ç”¨-dangling-çš„å·æ ‡"><a href="#åˆ é™¤æ— ç”¨-dangling-çš„å·æ ‡" class="headerlink" title="åˆ é™¤æ— ç”¨ (dangling) çš„å·æ ‡"></a>åˆ é™¤æ— ç”¨ (dangling) çš„å·æ ‡</h3><p>Docker 1.9 ç‰ˆæœ¬èµ·ï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume rm <span class="constructor">$(<span class="params">docker</span> <span class="params">volume</span> <span class="params">ls</span> -<span class="params">q</span> -<span class="params">f</span> <span class="params">dangling</span>=<span class="params">true</span>)</span></span><br></pre></td></tr></table></figure><p>1.9.0 ä¸­ï¼Œå‚æ•° <code>dangling=false</code> å±…ç„¶ <em>æ²¡</em> ç”¨ - å®ƒä¼šè¢«å¿½ç•¥ç„¶ååˆ—å‡ºæ‰€æœ‰çš„å·æ ‡ã€‚</p><h3 id="æŸ¥çœ‹é•œåƒä¾èµ–"><a href="#æŸ¥çœ‹é•œåƒä¾èµ–" class="headerlink" title="æŸ¥çœ‹é•œåƒä¾èµ–"></a>æŸ¥çœ‹é•œåƒä¾èµ–</h3><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images -viz <span class="string">| dot -Tpng -o docker.png</span></span><br></pre></td></tr></table></figure><h3 id="Docker-å®¹å™¨ç˜¦èº«"><a href="#Docker-å®¹å™¨ç˜¦èº«" class="headerlink" title="Docker å®¹å™¨ç˜¦èº«"></a>Docker å®¹å™¨ç˜¦èº«</h3><ul><li>åœ¨æŸå±‚ (RUN layer) æ¸…ç† APT</li></ul><p>è¿™åº”å½“å’Œå…¶ä»– apt å‘½ä»¤åœ¨åŒä¸€å±‚ä¸­å®Œæˆã€‚<br>å¦åˆ™ï¼Œå‰é¢çš„å±‚å°†ä¼šä¿æŒåŸæœ‰ä¿¡æ¯ï¼Œè€Œä½ çš„é•œåƒåˆ™ä¾æ—§è‡ƒè‚¿ã€‚</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RUN &#123;apt commands&#125; \</span><br><span class="line">  &amp;&amp; apt-get clean \  </span><br><span class="line">  &amp;&amp; rm -rf <span class="regexp">/var/</span>lib<span class="regexp">/apt/</span>lists<span class="regexp">/* /</span>tmp<span class="regexp">/* /</span>var<span class="regexp">/tmp/</span>*</span><br></pre></td></tr></table></figure><ul><li><p>å‹ç¼©é•œåƒ</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ID=<span class="constructor">$(<span class="params">docker</span> <span class="params">run</span> -<span class="params">d</span> <span class="params">image</span>-<span class="params">name</span> <span class="operator">/</span><span class="params">bin</span><span class="operator">/</span><span class="params">bash</span>)</span></span><br><span class="line">docker export $ID <span class="pattern-match">| docker import â€“ flat-image-name</span></span><br></pre></td></tr></table></figure></li><li><p>å¤‡ä»½</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ID=<span class="constructor">$(<span class="params">docker</span> <span class="params">run</span> -<span class="params">d</span> <span class="params">image</span>-<span class="params">name</span> <span class="operator">/</span><span class="params">bin</span><span class="operator">/</span><span class="params">bash</span>)</span></span><br><span class="line">(docker export $ID <span class="pattern-match">| gzip -c &gt; image.tgz)</span></span><br><span class="line"><span class="pattern-match">gzip -dc image.tgz | docker import - flat-image-name</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="ç›‘è§†è¿è¡Œä¸­å®¹å™¨çš„ç³»ç»Ÿèµ„æºåˆ©ç”¨ç‡"><a href="#ç›‘è§†è¿è¡Œä¸­å®¹å™¨çš„ç³»ç»Ÿèµ„æºåˆ©ç”¨ç‡" class="headerlink" title="ç›‘è§†è¿è¡Œä¸­å®¹å™¨çš„ç³»ç»Ÿèµ„æºåˆ©ç”¨ç‡"></a>ç›‘è§†è¿è¡Œä¸­å®¹å™¨çš„ç³»ç»Ÿèµ„æºåˆ©ç”¨ç‡</h3><p>æ£€æŸ¥æŸä¸ªå®¹å™¨çš„ CPUã€å†…å­˜ä»¥åŠç½‘ç»œ I/O ä½¿ç”¨æƒ…å†µï¼Œä½ å¯ä»¥ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stats <span class="tag">&lt;<span class="name">container</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æŒ‰ ID åˆ—å‡ºæ‰€æœ‰å®¹å™¨ï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stats <span class="constructor">$(<span class="params">docker</span> <span class="params">ps</span> -<span class="params">q</span>)</span></span><br></pre></td></tr></table></figure><p>æŒ‰åç§°åˆ—å‡ºæ‰€æœ‰å®¹å™¨ï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stats <span class="constructor">$(<span class="params">docker</span> <span class="params">ps</span> --<span class="params">format</span> &#x27;&#123;&#123;.Names&#125;&#125;&#x27;)</span></span><br></pre></td></tr></table></figure><p>æŒ‰æŒ‡å®šé•œåƒåç§°åˆ—å‡ºæ‰€æœ‰å®¹å™¨ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">ps</span> <span class="literal">-a</span> <span class="operator">-f</span> ancestor=ubuntu</span><br></pre></td></tr></table></figure><p>åˆ é™¤æ‰€æœ‰æœªæ ‡ç­¾å‘½å (untagged) çš„å®¹å™¨ï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi <span class="constructor">$(<span class="params">docker</span> <span class="params">images</span> | <span class="params">grep</span> â€œ^â€ | <span class="params">awk</span> &#x27;&#123;<span class="params">split</span>($0,<span class="params">a</span>,<span class="string">&quot; &quot;</span>)</span>; print a<span class="literal">[<span class="number">3</span>]</span>&#125;&#x27;)</span><br></pre></td></tr></table></figure><p>é€šè¿‡æ­£åˆ™åŒ¹é…åˆ é™¤æŒ‡å®šå®¹å™¨ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">ps</span> <span class="literal">-a</span> | grep wildfly | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | xargs docker <span class="built_in">rm</span> <span class="operator">-f</span></span><br></pre></td></tr></table></figure><p>åˆ é™¤æ‰€æœ‰å·²é€€å‡º (exited) çš„å®¹å™¨ï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm -f <span class="constructor">$(<span class="params">docker</span> <span class="params">ps</span> -<span class="params">a</span> | <span class="params">grep</span> Exit | <span class="params">awk</span> &#x27;&#123; <span class="params">print</span> $1 &#125;&#x27;)</span></span><br></pre></td></tr></table></figure><h3 id="å°†æ–‡ä»¶æŒ‚è½½ä¸ºå·æ ‡"><a href="#å°†æ–‡ä»¶æŒ‚è½½ä¸ºå·æ ‡" class="headerlink" title="å°†æ–‡ä»¶æŒ‚è½½ä¸ºå·æ ‡"></a>å°†æ–‡ä»¶æŒ‚è½½ä¸ºå·æ ‡</h3><p>æ–‡ä»¶ä¹Ÿå¯ä»¥è¢«æŒ‚è½½ä¸ºå·æ ‡ã€‚ä¾‹å¦‚ä½ å¯ä»¥ä»…ä»…æ³¨å…¥å•ä¸ªé…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä»å®¹å™¨å¤åˆ¶æ–‡ä»¶</span></span><br><span class="line">docker run --rm httpd cat /usr/<span class="built_in">local</span>/apache2/conf/httpd.conf &gt; httpd.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¼–è¾‘æ–‡ä»¶</span></span><br><span class="line">vim httpd.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‚è½½ä¿®æ”¹åçš„é…ç½®å¯åŠ¨å®¹å™¨</span></span><br><span class="line">docker run --rm -ti -v <span class="string">&quot;<span class="variable">$PWD</span>/httpd.conf:/usr/local/apache2/conf/httpd.conf:ro&quot;</span> -p <span class="string">&quot;80:80&quot;</span> httpd</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly9naXRodWIuY29tL3dzYXJnZW50L2RvY2tlci1jaGVhdC1zaGVldA==&quot;&gt;https://github.com/wsargent/docker-cheat-sheet&lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;ç›®å½•&quot;&gt;&lt;a href=&quot;#ç›®å½•&quot; class=&quot;headerlink&quot; title=&quot;ç›®å½•&quot;&gt;&lt;/a&gt;ç›®å½•&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%E4%B8%BA%E4%BD%95%E4%BD%BF%E7%94%A8-docker&quot;&gt;ä¸ºä½•ä½¿ç”¨ Docker&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83&quot;&gt;ç³»ç»Ÿç¯å¢ƒ(Prerequisites)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%AE%89%E8%A3%85&quot;&gt;å®‰è£…(Installation)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%AE%B9%E5%99%A8container&quot;&gt;å®¹å™¨(Containers)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E9%95%9C%E5%83%8Fimages&quot;&gt;é•œåƒ(Images)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E7%BD%91%E7%BB%9Cnetworks&quot;&gt;ç½‘ç»œ(Networks)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E4%BB%93%E7%AE%A1%E4%B8%AD%E5%BF%83%E5%92%8C%E4%BB%93%E5%BA%93registry--repository&quot;&gt;ä»“ç®¡ä¸­å¿ƒå’Œä»“åº“(Registry &amp;amp; Repository)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#dockerfile&quot;&gt;Dockerfile&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%B1%82layers&quot;&gt;å±‚(Layers)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E9%93%BE%E6%8E%A5links&quot;&gt;é“¾æ¥(Links)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%8D%B7%E6%A0%87volumes&quot;&gt;å·æ ‡(Volumes)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E6%9A%B4%E9%9C%B2%E7%AB%AF%E5%8F%A3exposing-ports&quot;&gt;æš´éœ²ç«¯å£(Exposing Ports)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5&quot;&gt;æœ€ä½³å®è·µ(Best Practices)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%AE%89%E5%85%A8security&quot;&gt;å®‰å…¨(security)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%B0%8F%E8%B4%B4%E5%A3%AB&quot;&gt;å°è´´å£«(Tips)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E8%B4%A1%E7%8C%AE%E6%89%8B%E5%86%8Ccontributing&quot;&gt;è´¡çŒ®æ‰‹å†Œ(Contributing)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="æŠ€å·§" scheme="http://yonghong.tech/categories/%E6%8A%80%E5%B7%A7/"/>
    
    
    <category term="æŠ€å·§" scheme="http://yonghong.tech/tags/%E6%8A%80%E5%B7%A7/"/>
    
    <category term="é€ŸæŸ¥" scheme="http://yonghong.tech/tags/%E9%80%9F%E6%9F%A5/"/>
    
    <category term="Docker" scheme="http://yonghong.tech/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>é€ŸæŸ¥</title>
    <link href="http://yonghong.tech/tips/cheat-sheet/"/>
    <id>http://yonghong.tech/tips/cheat-sheet/</id>
    <published>2021-11-24T14:24:00.000Z</published>
    <updated>2021-11-24T14:24:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‘½ä»¤é€ŸæŸ¥"><a href="#å‘½ä»¤é€ŸæŸ¥" class="headerlink" title="å‘½ä»¤é€ŸæŸ¥"></a>å‘½ä»¤é€ŸæŸ¥</h2><h3 id="adb"><a href="#adb" class="headerlink" title="adb"></a>adb</h3><ul><li>å®‰è£…  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb -s device-name install demo.apk</span><br></pre></td></tr></table></figure></li><li>è·å–æ‰‹æœºå±æ€§  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb -s device-name shell getprop</span><br></pre></td></tr></table></figure></li><li>è·å–æ‰‹æœºmodel  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb -s device-name shell getprop | grep product</span><br></pre></td></tr></table></figure></li><li>è®¾ç½®ä»£ç†  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb shell settings put global http_proxy ip:port</span><br><span class="line">adb shell settings put global https_proxy ip:port</span><br></pre></td></tr></table></figure></li><li>æ¸…é™¤ä»£ç†  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb shell settings put global http_proxy :0</span><br><span class="line">adb shell settings put global https_proxy :0</span><br></pre></td></tr></table></figure></li></ul><span id="more"></span><h3 id="ffmpeg"><a href="#ffmpeg" class="headerlink" title="ffmpeg"></a>ffmpeg</h3><ul><li>è½¬ç   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i input.mp4 -profile:v baseline -level 3.0 output.mp4</span><br></pre></td></tr></table></figure></li><li>è§†é¢‘æŒ‰å¸§è½¬å›¾ç‰‡  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i input.mp4 -f image2 <span class="built_in">test</span>/%05d.jpeg</span><br></pre></td></tr></table></figure></li></ul><h3 id="ffprobe"><a href="#ffprobe" class="headerlink" title="ffprobe"></a>ffprobe</h3><ul><li>æŸ¥çœ‹è§†é¢‘æ ¼å¼  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffprobe input.mp4 -show_streams -show_format -v quiet</span><br></pre></td></tr></table></figure></li></ul><h3 id="gradle"><a href="#gradle" class="headerlink" title="gradle"></a>gradle</h3><ul><li>ç”Ÿæˆ gradlew  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gradle wrapper</span><br></pre></td></tr></table></figure></li><li>gradlew ä¿®æ”¹ç‰ˆæœ¬  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew wrapper --gradle-version 7.2</span><br></pre></td></tr></table></figure></li><li>gradlew æ‰§è¡Œ  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew :ModuleName:taskName</span><br></pre></td></tr></table></figure></li></ul><h3 id="git"><a href="#git" class="headerlink" title="git"></a>git</h3><ul><li>git æµ…å…‹éš†  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b branchName remote-url --single-branch</span><br></pre></td></tr></table></figure></li><li>git clone åªcloneä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶ä¸”è¿˜èƒ½checkoutè¿œç«¯åˆ†æ”¯  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --filter=blob:none --no-checkout</span><br></pre></td></tr></table></figure></li></ul><h2 id="Android-ç‰ˆæœ¬å·"><a href="#Android-ç‰ˆæœ¬å·" class="headerlink" title="Android ç‰ˆæœ¬å·"></a>Android ç‰ˆæœ¬å·</h2><table><thead><tr><th>åç§°</th><th>ç‰ˆæœ¬å·</th><th>å‘è¡Œæ—¥æœŸ</th><th>APIç­‰çº§</th><th>å®‰å…¨æ€§æ›´æ–°çŠ¶æ€</th></tr></thead><tbody><tr><td>Android Jelly Bean</td><td>4.1 â€“ 4.3.1</td><td>2012å¹´7æœˆ9æ—¥</td><td>16 â€“ 18</td><td>ä¸æ”¯æŒ</td></tr><tr><td>Android KitKat</td><td>4.4 â€“ 4.4.4</td><td>2013å¹´10æœˆ31æ—¥</td><td>19 â€“ 20</td><td>ä¸æ”¯æŒ</td></tr><tr><td>Android Lollipop</td><td>5.0 â€“ 5.1.1</td><td>2014å¹´11æœˆ12æ—¥</td><td>21 â€“ 22</td><td>ä¸æ”¯æŒ</td></tr><tr><td>Android Marshmallow</td><td>6.0 â€“ 6.0.1</td><td>2015å¹´10æœˆ5æ—¥</td><td>23</td><td>ä¸æ”¯æŒ</td></tr><tr><td>Android Nougat</td><td>7.0 â€“ 7.1.2</td><td>2016å¹´8æœˆ22æ—¥</td><td>24 â€“ 25</td><td>ä¸æ”¯æŒ</td></tr><tr><td>Android Oreo</td><td>8.0 â€“ 8.1</td><td>2017å¹´8æœˆ21æ—¥</td><td>26 â€“ 27</td><td>æ”¯æŒ</td></tr><tr><td>Android Pie</td><td>9</td><td>2018å¹´8æœˆ6æ—¥</td><td>28</td><td>æ”¯æŒ</td></tr><tr><td>Android 10</td><td>10</td><td>2019å¹´9æœˆ3æ—¥</td><td>29</td><td>æ”¯æŒ</td></tr><tr><td>Android 11</td><td>11</td><td>2020å¹´9æœˆ8æ—¥</td><td>30</td><td>æ”¯æŒ</td></tr><tr><td>Android 12</td><td>12</td><td>2021å¹´10æœˆ4æ—¥</td><td>31</td><td>æ”¯æŒ</td></tr></tbody></table>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‘½ä»¤é€ŸæŸ¥&quot;&gt;&lt;a href=&quot;#å‘½ä»¤é€ŸæŸ¥&quot; class=&quot;headerlink&quot; title=&quot;å‘½ä»¤é€ŸæŸ¥&quot;&gt;&lt;/a&gt;å‘½ä»¤é€ŸæŸ¥&lt;/h2&gt;&lt;h3 id=&quot;adb&quot;&gt;&lt;a href=&quot;#adb&quot; class=&quot;headerlink&quot; title=&quot;adb&quot;&gt;&lt;/a&gt;adb&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;å®‰è£…  &lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;adb -s device-name install demo.apk&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;è·å–æ‰‹æœºå±æ€§  &lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;adb -s device-name shell getprop&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;è·å–æ‰‹æœºmodel  &lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;adb -s device-name shell getprop | grep product&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;è®¾ç½®ä»£ç†  &lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;adb shell settings put global http_proxy ip:port&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;adb shell settings put global https_proxy ip:port&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;æ¸…é™¤ä»£ç†  &lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;adb shell settings put global http_proxy :0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;adb shell settings put global https_proxy :0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="æŠ€å·§" scheme="http://yonghong.tech/categories/%E6%8A%80%E5%B7%A7/"/>
    
    
    <category term="æŠ€å·§" scheme="http://yonghong.tech/tags/%E6%8A%80%E5%B7%A7/"/>
    
    <category term="é€ŸæŸ¥" scheme="http://yonghong.tech/tags/%E9%80%9F%E6%9F%A5/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚æœä½ åœ¨ä»¥ä¸‹ç½‘ç«™è¿˜æ‰¾ä¸åˆ°ä¹¦çš„è¯ï¼Œå°±è¿˜æ˜¯èŠ±é’±ä¹°å§</title>
    <link href="http://yonghong.tech/tips/search-book/"/>
    <id>http://yonghong.tech/tips/search-book/</id>
    <published>2021-11-23T14:24:00.000Z</published>
    <updated>2021-11-23T14:24:00.000Z</updated>
    
    <content type="html"><![CDATA[<table><thead><tr><th>ç½‘ç«™</th><th>é“¾æ¥</th></tr></thead><tbody><tr><td>Z-Library</td><td><span class="exturl" data-url="aHR0cHM6Ly8xbGliLmVkdWNhdGlvbi8=">https://1lib.education<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>LoreFree</td><td><span class="exturl" data-url="aHR0cHM6Ly9lYm9vazIubG9yZWZyZWUuY29tLw==">https://ebook2.lorefree.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>é¸ æ‘©æœç´¢</td><td><span class="exturl" data-url="aHR0cHM6Ly93d3cuaml1bW9kaWFyeS5jb20v">https://www.jiumodiary.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>ç†ŠçŒ«æœä¹¦</td><td><span class="exturl" data-url="aHR0cHM6Ly9lYm9vay5ibGlua29sLmNvbS8=">https://ebook.blinkol.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>æ¬ä¹¦åŒ  è®¡ç®—æœºç±»å›¾ä¹¦</td><td><span class="exturl" data-url="aHR0cDovL3d3dy5iYW5zaHVqaWFuZy5jbi8=">http://www.banshujiang.cn<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>JavaçŸ¥è¯†åˆ†äº«ç½‘ è®¡ç®—æœºç±»å›¾ä¹¦</td><td><span class="exturl" data-url="aHR0cDovL3d3dy5qYXZhMTIzNC5jb20v">http://www.java1234.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>ç å†œä¹‹å®¶ è®¡ç®—æœºç±»å›¾ä¹¦</td><td><span class="exturl" data-url="aHR0cHM6Ly93d3cueHo1NzcuY29tLw==">https://www.xz577.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>å¸ƒå®¢æ–°çŸ¥ è®¡ç®—æœºç±»å›¾ä¹¦</td><td>Githubï¼š<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2l4aW56aGk=">https://github.com/ixinzhi<i class="fa fa-external-link-alt"></i></span> <span class="exturl" data-url="aHR0cDovL2l0LWVib29rcy5mbHlnb24ubmV0Lw==">http://it-ebooks.flygon.net<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>free-programming-books Free Ebook Foundationçš„å…è´¹è®¡ç®—æœºç±»å›¾ä¹¦</td><td><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0Vib29rRm91bmRhdGlvbi9mcmVlLXByb2dyYW1taW5nLWJvb2tz">https://github.com/EbookFoundation/free-programming-books<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>å…è´¹ç¼–ç¨‹ä¸­æ–‡ä¹¦ç±ç´¢å¼•</td><td><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2p1c3RqYXZhYy9mcmVlLXByb2dyYW1taW5nLWJvb2tzLXpoL19DTg==">https://github.com/justjavac/free-programming-books-zh\_CN<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>ç¼–ç¨‹éšæƒ³çš„ç”µå­ä¹¦æ¸…å•</td><td><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3Byb2dyYW10aGluay9ib29rcw==">https://github.com/programthink/books<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>SaltTiger æœ€æ–°å‡ºç‰ˆçš„æŠ€æœ¯ç±»è‹±æ–‡åŸç‰ˆä¹¦</td><td><span class="exturl" data-url="aHR0cHM6Ly9zYWx0dGlnZXIuY29tLw==">https://salttiger.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>ITå›¾ä¹¦ è®¡ç®—æœºç±»å›¾ä¹¦</td><td><span class="exturl" data-url="aHR0cHM6Ly9pdGJvb29rLmNvbS8=">https://itboook.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>SoBooks</td><td><span class="exturl" data-url="aHR0cHM6Ly9zb2Jvb2tzLmNjLw==">https://sobooks.cc<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>Aibooks.cc</td><td><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWlib29rcy5jYy8=">https://www.aibooks.cc<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>ç›¸è¯†ç”µå­ä¹¦</td><td><span class="exturl" data-url="aHR0cDovL3d3dy54aWFuZ3NoaTEyMy5jb20v">http://www.xiangshi123.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>çŸ¥è¯†åº“</td><td><span class="exturl" data-url="aHR0cHM6Ly9ib29rLnpoaXNoaWtvby5jb20v">https://book.zhishikoo.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>ä¹¦å•ç½‘</td><td><span class="exturl" data-url="aHR0cHM6Ly93d3cuc2h1ZGFuLnZpcC8=">https://www.shudan.vip<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>è‹¦ç“œä¹¦ç›˜</td><td><span class="exturl" data-url="aHR0cHM6Ly93d3cua2dib29rLmNvbS8=">https://www.kgbook.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>æŒä¸Šä¹¦è‹‘</td><td><span class="exturl" data-url="aHR0cHM6Ly93d3cuc29lcHViLmNvbS8=">https://www.soepub.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>çŸ¥è½©è—ä¹¦</td><td><span class="exturl" data-url="aHR0cDovL3d3dy56eGNzLm1lLw==">http://www.zxcs.me<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>ç‚¹ç‚¹æ–‡åº“</td><td><span class="exturl" data-url="aHR0cHM6Ly93d3cudG9ycmVudC5vcmcuY24vYmQ=">https://www.torrent.org.cn/bd<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>æ·˜é“¾å®¢</td><td><span class="exturl" data-url="aHR0cDovL3d3dy50b3BsaW5rcy5jYy9z">http://www.toplinks.cc/s<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>åº“é—®æœç´¢</td><td><span class="exturl" data-url="aHR0cDovL3d3dy5rb292aW4uY29tLw==">http://www.koovin.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>owllook å‚ç›´å°è¯´æœç´¢å¼•æ“</td><td><span class="exturl" data-url="aHR0cHM6Ly93d3cub3dsb29rLmNvbS5jbi8=">https://www.owlook.com.cn<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>ä¸­å›½å“²å­¦ä¹¦ç”µå­åŒ–è®¡åˆ’</td><td><span class="exturl" data-url="aHR0cHM6Ly9jdGV4dC5vcmcvemhz">https://ctext.org/zhs<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>ä¹¦æ ¼</td><td><span class="exturl" data-url="aHR0cHM6Ly9uZXcuc2h1Z2Uub3JnLw==">https://new.shuge.org<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>å¤ç±ç½‘</td><td><span class="exturl" data-url="aHR0cDovL2Jvb2tpbmxpZmUubmV0Lw==">http://bookinlife.net<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>å¤ç±é¦†</td><td><span class="exturl" data-url="aHR0cHM6Ly93d3cuZ3VqaWd1YW4uY29tLw==">https://www.gujiguan.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>ä¸­å›½å›½å®¶æ•°å­—å›¾ä¹¦é¦†</td><td><span class="exturl" data-url="aHR0cDovL2ZpbmQubmxjLmNuLw==">http://find.nlc.cn<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>è‡ºç£å¤§å­¸åœ–æ›¸é¤¨</td><td><span class="exturl" data-url="aHR0cDovL250dS5wcmltby5leGxpYnJpc2dyb3VwLmNvbS8=">http://ntu.primo.exlibrisgroup.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>ç§‘å­¦æ–‡åº“ ç§‘å­¦å‡ºç‰ˆç¤¾å…è´¹æ•™ç¨‹ï¼Œä¸‹è½½éœ€è¦æ•™è‚²ç½‘IP</td><td><span class="exturl" data-url="aHR0cHM6Ly9ib29rLnNjaWVuY2VyZWFkaW5nLmNuLw==">https://book.sciencereading.cn<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>é«˜æ•™ä¹¦è‹‘ é«˜æ•™å‡ºç‰ˆç¤¾å…è´¹æ•™ç¨‹</td><td><span class="exturl" data-url="aHR0cHM6Ly9lYm9vay5oZXAuY29tLmNuL2Vib29rcy9pbmRleC5odG1s">https://ebook.hep.com.cn/ebooks/index.html<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>æ™¨æ›¦ç§‘æŠ€å›¢é˜Ÿæ•°å­—å›¾ä¹¦é¦† çŸ¥ç½‘/ä¸‡æ–¹/ç»´æ™®èµ„æºå…è´¹ä¸‹è½½</td><td><span class="exturl" data-url="aHR0cHM6Ly93d3cucmVhZGVyc3RlYW0uY29tLw==">https://www.readersteam.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>äº’åŠ©è”ç›Ÿ å…¨å›½å›¾ä¹¦é¦†å‚è€ƒå’¨è¯¢è”ç›Ÿä¹¦ç±äº’åŠ©æŸ¥è¯¢</td><td><span class="exturl" data-url="aHR0cHM6Ly93d3cucmVhZGVyc3RlYW0uY29tLw==">https://www.readersteam.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>å…¨å›½å›¾ä¹¦é¦†å‚è€ƒå’¨è¯¢è”ç›Ÿ é…åˆ å›¾ä¹¦äº’åŠ© æ²¹çŒ´è„šæœ¬ï¼Œå¯ä½ä»·è´­ä¹°PDFæ–‡æ¡£</td><td><span class="exturl" data-url="aHR0cDovL3d3dy51Y2Rycy5zdXBlcmxpYi5uZXQv">http://www.ucdrs.superlib.net<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>å›½å®¶ä¸­å°å­¦ç½‘ç»œäº‘å¹³å° æ•™è‚²éƒ¨æä¾›çš„å…è´¹åå¸ˆç½‘è¯¾ï¼Œæ¶µç›–å°å­¦åˆä¸­é«˜ä¸­</td><td><span class="exturl" data-url="aHR0cHM6Ly95a3QuZWR1eXVuLmNuLw==">https://ykt.eduyun.cn<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>åŒ—äº¬å¤§å­¦å‡ºç‰ˆç¤¾ åŒ—äº¬å¤§å­¦å‡ºç‰ˆç¤¾ç¬¬å…­äº‹ä¸šéƒ¨å…è´¹æ•™ç¨‹</td><td><span class="exturl" data-url="aHR0cHM6Ly9wdXA2Lnl1bnpoYW4zNjUuY29tLw==">https://pup6.yunzhan365.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>PDFä¹‹å®¶ PDFå›¾ä¹¦ä¸‹è½½</td><td><span class="exturl" data-url="aHR0cDovL3BkZnpqLmNuLw==">http://pdfzj.cn<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>é›…ä¹¦ PDFå›¾ä¹¦ä¸‹è½½</td><td><span class="exturl" data-url="aHR0cHM6Ly95YWJvb2sub3JnLw==">https://yabook.org<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>pdfèµ„æºç½‘</td><td><span class="exturl" data-url="aHR0cDovL3BkZi4wMTh6eS5jb20v">http://pdf.018zy.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>ä¹¦è¡Œå¤©ä¸‹ PDFå›¾ä¹¦ä¸‹è½½ï¼Œæœç´¢åŠŸèƒ½éš¾ç”¨</td><td><span class="exturl" data-url="aHR0cHM6Ly93d3cuc3hwZGYuY29tLw==">https://www.sxpdf.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>çˆ±æ‚¦è¯»ç½‘ Kindleå›¾ä¹¦</td><td><span class="exturl" data-url="aHR0cHM6Ly93d3cuaXlkLndhbmcv">https://www.iyd.wang<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>åƒç§‹ä¹¦åœ¨</td><td><span class="exturl" data-url="aHR0cHM6Ly93d3cucXFzenouY29tLw==">https://www.qqszz.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>è¯»ä¹¦è¾¾äºº</td><td><span class="exturl" data-url="aHR0cDovL3d3dy5kdXNodWRhcmVuLmNvbS8=">http://www.dushudaren.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>ç³å®ä¹¦å±‹</td><td><span class="exturl" data-url="aHR0cHM6Ly9saW5iYW9zaHV3dS5jb20v">https://linbaoshuwu.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>é˜…è¯»é“¾</td><td><span class="exturl" data-url="aHR0cHM6Ly93d3cueXVlZHUucHJvLw==">https://www.yuedu.pro<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>Aibooks.club</td><td><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWlib29rcy5jbHViLw==">https://www.aibooks.club<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>å¶ä¹¦</td><td><span class="exturl" data-url="aHR0cHM6Ly9vYm9vay5jYy8=">https://obook.cc<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>èŠ’æœè¯»ä¹¦</td><td><span class="exturl" data-url="aHR0cDovL2RpdW14LmNvbS8=">http://diumx.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>ä¹¦å•</td><td><span class="exturl" data-url="aHR0cHM6Ly9lYm9va2xpc3QubW9iaS8=">https://ebooklist.mobi<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>519èµ„æºç½‘</td><td><span class="exturl" data-url="aHR0cHM6Ly93d3cuNTE5LmJlc3Qv">https://www.519.best<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>78ä¹¦åº“</td><td><span class="exturl" data-url="aHR0cDovL3d3dy43OGJvb2tzLmNvbS8=">http://www.78books.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>å¥½è¯»</td><td><span class="exturl" data-url="aHR0cDovL2hhb2Rvby5uZXQv">http://haodoo.net<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>Vol.moe Kindleæ¼«ç”»ä¸‹è½½åŠåœ¨çº¿è§‚çœ‹</td><td><span class="exturl" data-url="aHR0cHM6Ly92b2wubW9lLw==">https://vol.moe<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>æ¨ä¹¦</td><td><span class="exturl" data-url="aHR0cDovL3d3dy50dWlsaXcuY29tLw==">http://www.tuiliw.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>è“æ–‡èµ„æºåº“</td><td><span class="exturl" data-url="aHR0cHM6Ly93d3cuYmx1ZXN0ZXAuY2MvYm9va3M=">https://www.bluestep.cc/books<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>è¥¿ä¸œç½‘</td><td><span class="exturl" data-url="aHR0cDovL3hpZG9uZy5uZXQv">http://xidong.net<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>é™æ€ä¹¦å±‹</td><td><span class="exturl" data-url="aHR0cHM6Ly9ib29rLnRpbnluZXdzLm9yZy8=">https://book.tinynews.org<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>Kindleå§</td><td><span class="exturl" data-url="aHR0cHM6Ly93d3cua2luZGxlOC5jYy8=">https://www.kindle8.cc<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>ä¸‰æ— ä¹¦èˆ</td><td><span class="exturl" data-url="aHR0cHM6Ly9zd3BkZi5jb20v">https://swpdf.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>ebook22</td><td><span class="exturl" data-url="aHR0cDovL2Vib29rMjIuY29tLw==">http://ebook22.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>ä¹¦è¡Œä¸‡é‡Œ</td><td><span class="exturl" data-url="aHR0cHM6Ly93d3cuZ3BkZi5uZXQv">https://www.gpdf.net<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>ç²¾å“ä¸‹è½½ç«™ PDFå›¾ä¹¦</td><td><span class="exturl" data-url="aHR0cDovL3d3dy5qOXAuY29tL2NsYXNzL3IvXzE2L18xLmh0bWw=">http://www.j9p.com/class/r\_16\_1.html<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>è„šæœ¬ä¹‹å®¶ è®¡ç®—æœºç±»å›¾ä¹¦</td><td><span class="exturl" data-url="aHR0cHM6Ly93d3cuamI1MS5uZXQvYm9va3M=">https://www.jb51.net/books<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>çœ‹åŒ»å­¦ åŒ»å­¦ç±»ç”µå­ä¹¦</td><td><span class="exturl" data-url="aHR0cDovL3d3dy5rYW55aXh1ZS5jb20v">http://www.kanyixue.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>å¿ƒæƒ…ç½‘ å¿ƒç†å­¦å›¾ä¹¦åœ¨çº¿è§‚çœ‹</td><td><span class="exturl" data-url="aHR0cDovL3d3dy5peGlucWluZy5jb20v">http://www.ixinqing.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>æˆ‘çˆ±ç”µå­ä¹¦</td><td><span class="exturl" data-url="aHR0cHM6Ly93d3cuNTJkb2MuY29tLw==">https://www.52doc.com<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>ç²¾å“ç”µå­ä¹¦</td><td><span class="exturl" data-url="aHR0cHM6Ly9keWxhbmJhaTguZ2l0aHViLmlvL2lkZWFodWI=">https://dylanbai8.github.io/ideahub<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>å¯å¯è§‚å¯Ÿ</td><td><span class="exturl" data-url="aHR0cDovL2Jvb2suY29jb3Rhby5jbi8=">http://book.cocotao.cn<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>æˆ‘çˆ±ä¹¦ç± ä¸‹è½½æ–‡ä»¶ä»¥ç½‘ç›˜æ–‡ä»¶å¤¹å½¢å¼æä¾›</td><td><span class="exturl" data-url="aHR0cDovL3d3dy41MmJvb2subWUv">http://www.52book.me<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>ä¸ƒé‡Œé¦™</td><td><span class="exturl" data-url="aHR0cDovL2x4cW5zeXMuY29tL3BkZg==">http://lxqnsys.com/pdf<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>Pdfdrive</td><td><span class="exturl" data-url="aHR0cHM6Ly93d3cucGRmZHJpdmUuY29tLw==">https://www.pdfdrive.com/<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>é˜¿é‡Œäº‘æœç´¢</td><td><span class="exturl" data-url="aHR0cDovL2FsaXl1bnNoYXJlLmNuOjgwMDAvdC9ib29r">http://aliyunshare.cn:8000/t/book<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>ä¸ªäººäº‘ç›˜</td><td><span class="exturl" data-url="aHR0cHM6Ly9vZC5nb3RveGkuY29tL3N1bl8xdGJfZnVuL0Jvb2tzLw==">https://od.gotoxi.com/sun_1tb_fun/Books/<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>66books</td><td><span class="exturl" data-url="aHR0cDovL3d3dy42NmJvb2tzLmNuLw==">http://www.66books.cn/<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>Zure</td><td><span class="exturl" data-url="aHR0cHM6Ly96dXJlLmZ1bi8=">https://zure.fun/<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>Aibook</td><td><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWlib29rcy5jbHViLw==">https://www.aibooks.club/<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>Enjing</td><td><span class="exturl" data-url="aHR0cHM6Ly93d3cuZW5qaW5nLmNvbS8=">https://www.enjing.com/<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>Ebook</td><td><span class="exturl" data-url="aHR0cHM6Ly93d3cuZWJvb2tjbi5jb20v">https://www.ebookcn.com/<i class="fa fa-external-link-alt"></i></span></td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç½‘ç«™&lt;/th&gt;
&lt;th&gt;é“¾æ¥&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;Z-Library&lt;/td&gt;
&lt;td&gt;&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly8xbG</summary>
      
    
    
    
    <category term="æŠ€å·§" scheme="http://yonghong.tech/categories/%E6%8A%80%E5%B7%A7/"/>
    
    
    <category term="æŠ€å·§" scheme="http://yonghong.tech/tags/%E6%8A%80%E5%B7%A7/"/>
    
    <category term="æœä¹¦" scheme="http://yonghong.tech/tags/%E6%90%9C%E4%B9%A6/"/>
    
    <category term="ç”µå­ä¹¦" scheme="http://yonghong.tech/tags/%E7%94%B5%E5%AD%90%E4%B9%A6/"/>
    
  </entry>
  
  <entry>
    <title>Google è¯„åˆ†å¡</title>
    <link href="http://yonghong.tech/2021/11/google-skill-level/"/>
    <id>http://yonghong.tech/2021/11/google-skill-level/</id>
    <published>2021-11-22T14:24:00.000Z</published>
    <updated>2021-11-22T14:24:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>Googleè¯„åˆ†å¡çš„æ¥è‡ªGoogleçš„SREã€‚ä¸ºäº†ä¿è¯ç¨³å®šå¯é çš„æœåŠ¡ï¼ŒGoogleç»„å»ºäº†ä¸€æ”¯ä¸“ä¸šçš„å›¢é˜Ÿæ¥è´Ÿè´£è¿è¡Œåç«¯æœåŠ¡ï¼Œå‚ä¸çš„å·¥ç¨‹å¸ˆæœ‰ä¸€ä¸ªå…±åŒçš„åå­—ï¼šSite Reliability Engineerã€‚</p><p>å¯¹æ­¤ï¼Œèµ„æ·±Google SRE Chris Jonesç­‰äººè”åˆæ’°å†™äº†ã€ŠGoogle SRE: How Google runs production systemsã€‹ï¼Œé¦–æ¬¡å‘å¤–ç•Œè§£å¯†äº†è°·æ­Œçš„ç”Ÿäº§ç¯å¢ƒï¼Œä¸­æ–‡åå­—å«ã€ŠSREï¼šGoogleè¿ç»´è§£å¯†ã€‹ã€‚</p><p>æ­£æ˜¯åœ¨è¯¥ä¹¦ä¸­æåˆ°äº†ä¸Šé¢æ‰€è¯´çš„â€œGoogleè¯„åˆ†å¡â€ã€‚ä¸‹é¢æ¥çœ‹çœ‹è¿™11ä¸ªç­‰çº§åˆ°åº•æ˜¯å¦‚ä½•åˆ’åˆ†çš„ï¼š</p><span id="more"></span><h2 id="è¯„åˆ†å¡"><a href="#è¯„åˆ†å¡" class="headerlink" title="è¯„åˆ†å¡"></a>è¯„åˆ†å¡</h2><p>0ï¼šyou are unfamiliar with the subject area.</p><p>0ï¼šä¸ç†Ÿæ‚‰çš„é¢†åŸŸã€‚ä¹Ÿå°±æ˜¯è¯´å¯¹ç›¸å…³çš„é¢†åŸŸå‡ ä¹ä¸€æ— æ‰€çŸ¥ã€‚</p><p>1ï¼šyou can read/understand the most fundamental aspects of the subject area.</p><p>1ï¼šå¯ä»¥è¯»æ‡‚æˆ–ç†è§£ç›¸å…³é¢†åŸŸçš„å¤§å¤šæ•°åŸºç¡€çŸ¥è¯†ã€‚</p><p>2ï¼šability to implement small changes,understand basic principles and able to figure out additional details with minimal help.</p><p>2ï¼šèƒ½å¤Ÿå®ç°ä¸€äº›å°çš„æ”¹åŠ¨ï¼Œç†è§£åŸºæœ¬åŸç†ï¼Œèƒ½å¤Ÿåœ¨ç®€å•çš„å¸®åŠ©ä¸‹æ‰¾å‡ºæ›´å¤šçš„ç»†èŠ‚ã€‚</p><p>3ï¼šbasic proficiency in a subject area without relying on help.</p><p>3ï¼šåŸºæœ¬ç²¾é€šç›¸å…³æŠ€æœ¯é¢†åŸŸï¼Œå®Œå…¨ä¸éœ€è¦åˆ«äººçš„å¸®åŠ©ã€‚</p><p>4ï¼šyou are comfortable with the subject area and all routine work on it.</p><p>4ï¼šå¯¹ç›¸å…³æŠ€æœ¯é¢†åŸŸéå¸¸ç†Ÿæ‚‰å’Œèˆ’é€‚ï¼Œå¯ä»¥åº”å¯¹å’Œå®Œæˆæ‰€æœ‰çš„æ—¥å¸¸å·¥ä½œã€‚</p><p>For software areas - ability to develop medium programs using all basic language features w/o book, awareness of more esoteric features (with book).</p><p>å¯¹äºè½¯ä»¶é¢†åŸŸï¼Œæœ‰èƒ½åŠ›å¼€å‘ä¸­ç­‰è§„æ¨¡çš„ç¨‹åºï¼Œèƒ½å¤Ÿç†Ÿç»ƒå’ŒæŒæ¡å¹¶ä½¿ç”¨æ‰€æœ‰çš„è¯­è¨€ç‰¹æ€§ï¼Œè€Œä¸éœ€è¦ç¿»ä¹¦ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ‰¾åˆ°æ‰€æœ‰çš„å†·çŸ¥è¯†ã€‚</p><p>For systems areas - understanding of many fundamentals of networking and systems administration, ability to run a small network of systems including recovery, debugging and nontrivial troubleshooting that relies on the knowledge of internals.</p><p>å¯¹äºç³»ç»Ÿé¢†åŸŸï¼Œäº†è§£å¾ˆå¤šç½‘ç»œå’Œç³»ç»Ÿç®¡ç†çš„åŸºç¡€çŸ¥è¯†ï¼Œèƒ½å¤Ÿè¿è¡Œä¸€ä¸ªå°å‹çš„ç³»ç»Ÿç½‘ç»œï¼ŒåŒ…æ‹¬æ¢å¤ã€è°ƒè¯•å’Œä¾èµ–äºå†…éƒ¨çŸ¥è¯†çš„é‡è¦æ•…éšœæ’é™¤ã€‚</p><p>5ï¼šan even lower degree of reliance on reference materials. Deeper skills in a field or specific technology in the subject area.</p><p>5ï¼šå¯¹å‚è€ƒèµ„æ–™çš„ä¾èµ–ç¨‹åº¦æ›´ä½ã€‚åœ¨æŸä¸€é¢†åŸŸæˆ–æŸä¸€ç‰¹å®šæŠ€æœ¯é¢†åŸŸæœ‰è¾ƒæ·±çš„æŠ€èƒ½ã€‚</p><p>6ï¼šability to develop large programs and systems from scratch. Understanding of low level details and internals. Ability to design/deploy most large, distributed systems from scratch.</p><p>6ï¼šèƒ½å¤Ÿä»é›¶å¼€å‘å¤§å‹ç¨‹åºå’Œç³»ç»Ÿã€‚æŒæ¡åº•å±‚ç»†èŠ‚å’Œå†…åœ¨åŸç†ã€‚èƒ½å¤Ÿè®¾è®¡å’Œéƒ¨ç½²å¤§å¤šæ•°å¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿã€‚</p><p>7ï¼šyou understand and make use of most lesser known language features, technologies, and associated internals. Ability to automate significant amounts of systems administration.</p><p>7ï¼šç†è§£å¹¶åˆ©ç”¨é«˜çº§è¯­è¨€ç‰¹æ€§ã€æŠ€æœ¯å’Œç›¸å…³çš„å†…åœ¨åŸç†ï¼Œå¯ä»¥ä»æ ¹æœ¬ä¸Šå®ç°å¤§é‡ç³»ç»Ÿç®¡ç†å’Œè¿ç»´å·¥ä½œçš„è‡ªåŠ¨åŒ–ã€‚</p><p>8ï¼šdeep understanding of corner cases, esoteric features, protocols and systems including â€œtheory of operationâ€. Demonstrated ability to design, deploy and own very critical or large infrastructure, build accompanying automation.</p><p>8ï¼šå¯¹äºä¸€äº›è¾¹è§’å’Œæ™¦æ¶©çš„æŠ€æœ¯ã€åè®®å’Œç³»ç»Ÿå·¥ä½œåŸç†æœ‰æ·±å…¥çš„ç†è§£å’Œç»éªŒã€‚èƒ½å¤Ÿè®¾è®¡ã€éƒ¨ç½²å¹¶è´Ÿè´£éå¸¸å…³é”®ã€è§„æ¨¡å¾ˆå¤§çš„åŸºç¡€è®¾æ–½ï¼Œå¹¶èƒ½å¤Ÿæ„å»ºç›¸åº”çš„è‡ªåŠ¨åŒ–è®¾æ–½ã€‚</p><p>9ï¼šcould have written the book about the subject area but didnâ€™t; works with standards committees on defining new standards and methodologies.</p><p>9ï¼šèƒ½å¤Ÿåœ¨è¯¥æŠ€æœ¯é¢†åŸŸå‡ºä¸€æœ¬ç»å…¸çš„ä¹¦ã€‚å¹¶å’Œæ ‡å‡†å§”å‘˜ä¼šçš„äººä¸€èµ·åˆ¶å®šç›¸å…³çš„æŠ€æœ¯æ ‡å‡†å’Œæ–¹æ³•ã€‚</p><p>10ï¼šwrote the book on the subject area (there actually has to be a book). Recognized industry expert in the field, might have invented it.</p><p>10ï¼šåœ¨è¯¥é¢†åŸŸå†™è¿‡ä¸€æœ¬ä¹¦ï¼Œè¢«ä¸šå†…å°Šä¸ºä¸“å®¶ï¼Œå¹¶æ˜¯è¯¥æŠ€æœ¯çš„å‘æ˜äººã€‚</p><h2 id="è¯„åˆ†é¢†åŸŸ"><a href="#è¯„åˆ†é¢†åŸŸ" class="headerlink" title="è¯„åˆ†é¢†åŸŸ"></a>è¯„åˆ†é¢†åŸŸ</h2><ul><li>TCP/IP Networkingï¼ˆç½‘ç»œç›¸å…³ï¼‰</li><li>Unix/Linux internalsï¼ˆlinuxå†…æ ¸ï¼‰</li><li>Unix/Linux Systems administrationï¼ˆlinuxç³»ç»Ÿè¿ç»´ï¼‰</li><li>Algorithms and Data Structuresï¼ˆç®—æ³•å’Œæ•°æ®ç»“æ„ï¼‰</li><li>C</li><li>C++</li><li>Python</li><li>Java</li><li>Perl</li><li>Go</li><li>Shell Scripting ï¼ˆè„šæœ¬ï¼‰</li><li>SQL and/or Database Adminï¼ˆsqlå’Œæ•°æ®åº“ç®¡ç†ï¼‰</li><li>People Managementï¼ˆäººäº‹ç®¡ç†ï¼‰</li><li>Project Managementï¼ˆé¡¹ç›®ç®¡ç†ï¼‰</li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;Googleè¯„åˆ†å¡çš„æ¥è‡ªGoogleçš„SREã€‚ä¸ºäº†ä¿è¯ç¨³å®šå¯é çš„æœåŠ¡ï¼ŒGoogleç»„å»ºäº†ä¸€æ”¯ä¸“ä¸šçš„å›¢é˜Ÿæ¥è´Ÿè´£è¿è¡Œåç«¯æœåŠ¡ï¼Œå‚ä¸çš„å·¥ç¨‹å¸ˆæœ‰ä¸€ä¸ªå…±åŒçš„åå­—ï¼šSite Reliability Engineerã€‚&lt;/p&gt;
&lt;p&gt;å¯¹æ­¤ï¼Œèµ„æ·±Google SRE Chris Jonesç­‰äººè”åˆæ’°å†™äº†ã€ŠGoogle SRE: How Google runs production systemsã€‹ï¼Œé¦–æ¬¡å‘å¤–ç•Œè§£å¯†äº†è°·æ­Œçš„ç”Ÿäº§ç¯å¢ƒï¼Œä¸­æ–‡åå­—å«ã€ŠSREï¼šGoogleè¿ç»´è§£å¯†ã€‹ã€‚&lt;/p&gt;
&lt;p&gt;æ­£æ˜¯åœ¨è¯¥ä¹¦ä¸­æåˆ°äº†ä¸Šé¢æ‰€è¯´çš„â€œGoogleè¯„åˆ†å¡â€ã€‚ä¸‹é¢æ¥çœ‹çœ‹è¿™11ä¸ªç­‰çº§åˆ°åº•æ˜¯å¦‚ä½•åˆ’åˆ†çš„ï¼š&lt;/p&gt;</summary>
    
    
    
    
    <category term="Google" scheme="http://yonghong.tech/tags/Google/"/>
    
  </entry>
  
  <entry>
    <title>Android Studio æŠ€å·§</title>
    <link href="http://yonghong.tech/tips/android-studio/"/>
    <id>http://yonghong.tech/tips/android-studio/</id>
    <published>2021-11-18T14:24:00.000Z</published>
    <updated>2021-11-18T14:24:00.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Local-Changes-æ ‡ç­¾é¡µ"><a href="#Local-Changes-æ ‡ç­¾é¡µ" class="headerlink" title="Local Changes æ ‡ç­¾é¡µ"></a>Local Changes æ ‡ç­¾é¡µ</h3><p>æ‰“å¼€ Preferences/Version Control/Commit ï¼Œå°† Use non-modal commit interface é€‰é¡¹ å–æ¶ˆå‹¾é€‰ å³å¯ã€‚</p><span id="more"></span><h3 id="æ—¥æœŸæ ¼å¼è°ƒæ•´"><a href="#æ—¥æœŸæ ¼å¼è°ƒæ•´" class="headerlink" title="æ—¥æœŸæ ¼å¼è°ƒæ•´"></a>æ—¥æœŸæ ¼å¼è°ƒæ•´</h3><p>æ‰“å¼€ Preferences/Appearacnce &amp; Behavior/System Settings/Date Formatsï¼Œå°†æ—¥æœŸæ ¼å¼è®¾ç½®ä¸º yyyy/MM/dd </p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;Local-Changes-æ ‡ç­¾é¡µ&quot;&gt;&lt;a href=&quot;#Local-Changes-æ ‡ç­¾é¡µ&quot; class=&quot;headerlink&quot; title=&quot;Local Changes æ ‡ç­¾é¡µ&quot;&gt;&lt;/a&gt;Local Changes æ ‡ç­¾é¡µ&lt;/h3&gt;&lt;p&gt;æ‰“å¼€ Preferences/Version Control/Commit ï¼Œå°† Use non-modal commit interface é€‰é¡¹ å–æ¶ˆå‹¾é€‰ å³å¯ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="æŠ€å·§" scheme="http://yonghong.tech/categories/%E6%8A%80%E5%B7%A7/"/>
    
    
    <category term="Android Studio" scheme="http://yonghong.tech/tags/Android-Studio/"/>
    
    <category term="Android" scheme="http://yonghong.tech/tags/Android/"/>
    
    <category term="æŠ€å·§" scheme="http://yonghong.tech/tags/%E6%8A%80%E5%B7%A7/"/>
    
  </entry>
  
  <entry>
    <title>macOS è£…æœºæ¸…å•</title>
    <link href="http://yonghong.tech/tips/mac-install-list/"/>
    <id>http://yonghong.tech/tips/mac-install-list/</id>
    <published>2021-11-15T14:24:00.000Z</published>
    <updated>2021-11-15T14:24:00.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="è¾“å…¥æ³•"><a href="#è¾“å…¥æ³•" class="headerlink" title="è¾“å…¥æ³•"></a>è¾“å…¥æ³•</h3><p>æœç‹—è¾“å…¥æ³•ï¼š<span class="exturl" data-url="aHR0cHM6Ly9waW55aW4uc29nb3UuY29tL21hYy8=">https://pinyin.sogou.com/mac/<i class="fa fa-external-link-alt"></i></span></p><h3 id="iTerm2"><a href="#iTerm2" class="headerlink" title="iTerm2"></a>iTerm2</h3><p><span class="exturl" data-url="aHR0cHM6Ly9pdGVybTIuY29tLw==">https://iterm2.com/<i class="fa fa-external-link-alt"></i></span></p><span id="more"></span><h3 id="omyzsh"><a href="#omyzsh" class="headerlink" title="omyzsh"></a>omyzsh</h3><p><span class="exturl" data-url="aHR0cHM6Ly9vaG15ei5zaC8=">https://ohmyz.sh/<i class="fa fa-external-link-alt"></i></span></p><h3 id="homebrew"><a href="#homebrew" class="headerlink" title="homebrew"></a>homebrew</h3><p><span class="exturl" data-url="aHR0cHM6Ly9icmV3LnNoLw==">https://brew.sh/<i class="fa fa-external-link-alt"></i></span></p><h3 id="JDK"><a href="#JDK" class="headerlink" title="JDK"></a>JDK</h3><p>jenvï¼š</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">brew install <span class="symbol">openjdk@</span><span class="number">8</span></span><br><span class="line">brew install <span class="symbol">openjdk@</span><span class="number">11</span></span><br><span class="line"></span><br><span class="line">/usr/libexec/java_home -V</span><br></pre></td></tr></table></figure><h3 id="nodejs"><a href="#nodejs" class="headerlink" title="nodejs"></a>nodejs</h3><p>nvmï¼š</p><h3 id="æµè§ˆå™¨"><a href="#æµè§ˆå™¨" class="headerlink" title="æµè§ˆå™¨"></a>æµè§ˆå™¨</h3><p>Edgeï¼š<span class="exturl" data-url="aHR0cHM6Ly93d3cubWljcm9zb2Z0LmNvbS96aC1jbi9lZGdl">https://www.microsoft.com/zh-cn/edge<i class="fa fa-external-link-alt"></i></span></p><p>Chromeï¼š<span class="exturl" data-url="aHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9jaHJvbWUv">https://www.google.com/chrome/<i class="fa fa-external-link-alt"></i></span></p><h3 id="èŠå¤©-åŠå…¬å·¥å…·"><a href="#èŠå¤©-åŠå…¬å·¥å…·" class="headerlink" title="èŠå¤©/åŠå…¬å·¥å…·"></a>èŠå¤©/åŠå…¬å·¥å…·</h3><p>å¾®ä¿¡ï¼š<span class="exturl" data-url="aHR0cHM6Ly93ZWl4aW4ucXEuY29tLw==">https://weixin.qq.com/<i class="fa fa-external-link-alt"></i></span></p><p>ä¼ä¸šå¾®ä¿¡ï¼š<span class="exturl" data-url="aHR0cHM6Ly93b3JrLndlaXhpbi5xcS5jb20v">https://work.weixin.qq.com/<i class="fa fa-external-link-alt"></i></span></p><p>é’‰é’‰ï¼š<span class="exturl" data-url="aHR0cHM6Ly93d3cuZGluZ3RhbGsuY29tLw==">https://www.dingtalk.com/<i class="fa fa-external-link-alt"></i></span></p><p>é£ä¹¦ï¼š<span class="exturl" data-url="aHR0cHM6Ly93d3cuZmVpc2h1LmNuLw==">https://www.feishu.cn/<i class="fa fa-external-link-alt"></i></span></p><p>è…¾è®¯ä¼šè®®ï¼š<span class="exturl" data-url="aHR0cHM6Ly9tZWV0aW5nLnRlbmNlbnQuY29tLw==">https://meeting.tencent.com/<i class="fa fa-external-link-alt"></i></span></p><p>officeï¼š<span class="exturl" data-url="aHR0cHM6Ly9uZXh0Lml0ZWxseW91LmNuLw==">https://next.itellyou.cn/<i class="fa fa-external-link-alt"></i></span></p><h3 id="è§£å‹å·¥å…·"><a href="#è§£å‹å·¥å…·" class="headerlink" title="è§£å‹å·¥å…·"></a>è§£å‹å·¥å…·</h3><p>kekaï¼š<span class="exturl" data-url="aHR0cHM6Ly93d3cua2VrYS5pby9lbi8=">https://www.keka.io/en/<i class="fa fa-external-link-alt"></i></span></p><p>The Unarchiverï¼š<span class="exturl" data-url="aHR0cHM6Ly90aGV1bmFyY2hpdmVyLmNvbS8=">https://theunarchiver.com/<i class="fa fa-external-link-alt"></i></span></p><h3 id="ç³»ç»Ÿå·¥å…·"><a href="#ç³»ç»Ÿå·¥å…·" class="headerlink" title="ç³»ç»Ÿå·¥å…·"></a>ç³»ç»Ÿå·¥å…·</h3><p>è…¾è®¯æŸ æª¬ï¼š<span class="exturl" data-url="aHR0cHM6Ly9sZW1vbi5xcS5jb20v">https://lemon.qq.com/<i class="fa fa-external-link-alt"></i></span></p><p>é˜²æ¯å± Sleep Control Centerï¼šApp Store</p><h3 id="å¼€å‘å·¥å…·"><a href="#å¼€å‘å·¥å…·" class="headerlink" title="å¼€å‘å·¥å…·"></a>å¼€å‘å·¥å…·</h3><p>JetBrains Toolboxï¼š<span class="exturl" data-url="aHR0cHM6Ly93d3cuamV0YnJhaW5zLmNvbS90b29sYm94LWFwcC8=">https://www.jetbrains.com/toolbox-app/<i class="fa fa-external-link-alt"></i></span></p><p>vscodeï¼š<span class="exturl" data-url="aHR0cHM6Ly9jb2RlLnZpc3VhbHN0dWRpby5jb20v">https://code.visualstudio.com/<i class="fa fa-external-link-alt"></i></span></p><p>postmanï¼š<span class="exturl" data-url="aHR0cHM6Ly93d3cucG9zdG1hbi5jb20v">https://www.postman.com/<i class="fa fa-external-link-alt"></i></span></p><p>SwitchHostsï¼š<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL29sZGovU3dpdGNoSG9zdHMvcmVsZWFzZXM=">https://github.com/oldj/SwitchHosts/releases<i class="fa fa-external-link-alt"></i></span></p><h3 id="Markdown"><a href="#Markdown" class="headerlink" title="Markdown"></a>Markdown</h3><p>Typoraï¼š<span class="exturl" data-url="aHR0cHM6Ly90eXBvcmEuaW8v">https://typora.io/<i class="fa fa-external-link-alt"></i></span></p><h3 id="ç”»å›¾"><a href="#ç”»å›¾" class="headerlink" title="ç”»å›¾"></a>ç”»å›¾</h3><p>drawioï¼š<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2pncmFwaC9kcmF3aW8tZGVza3RvcC9yZWxlYXNlcw==">https://github.com/jgraph/drawio-desktop/releases<i class="fa fa-external-link-alt"></i></span></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;è¾“å…¥æ³•&quot;&gt;&lt;a href=&quot;#è¾“å…¥æ³•&quot; class=&quot;headerlink&quot; title=&quot;è¾“å…¥æ³•&quot;&gt;&lt;/a&gt;è¾“å…¥æ³•&lt;/h3&gt;&lt;p&gt;æœç‹—è¾“å…¥æ³•ï¼š&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly9waW55aW4uc29nb3UuY29tL21hYy8=&quot;&gt;https://pinyin.sogou.com/mac/&lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&quot;iTerm2&quot;&gt;&lt;a href=&quot;#iTerm2&quot; class=&quot;headerlink&quot; title=&quot;iTerm2&quot;&gt;&lt;/a&gt;iTerm2&lt;/h3&gt;&lt;p&gt;&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly9pdGVybTIuY29tLw==&quot;&gt;https://iterm2.com/&lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="æŠ€å·§" scheme="http://yonghong.tech/categories/%E6%8A%80%E5%B7%A7/"/>
    
    
    <category term="æŠ€å·§" scheme="http://yonghong.tech/tags/%E6%8A%80%E5%B7%A7/"/>
    
    <category term="macOS" scheme="http://yonghong.tech/tags/macOS/"/>
    
  </entry>
  
  <entry>
    <title>mac é”®ç›˜å»¶è¿Ÿçªç„¶å¢é«˜</title>
    <link href="http://yonghong.tech/2021/10/mac-keyboard/"/>
    <id>http://yonghong.tech/2021/10/mac-keyboard/</id>
    <published>2021-09-27T14:24:00.000Z</published>
    <updated>2021-09-27T14:24:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ç³»ç»Ÿèœå•æ æˆ–è€…æ§åˆ¶ä¸­å¿ƒæ‰¾åˆ°ä½ çš„è“ç‰™å›¾æ ‡ã€‚ä¸‹å›¾ä¸­æœ€å·¦è¾¹å°±æ˜¯è“ç‰™ï¼Œæœ€å³è¾¹æ˜¯æ§åˆ¶ä¸­å¿ƒã€‚ç‚¹å‡»æ§åˆ¶ä¸­å¿ƒï¼Œå°±èƒ½æ˜¾ç¤ºè“ç‰™ã€‚</p><p>æŒ‰ä¸‹ shift+option çš„åŒæ—¶ï¼Œç‚¹å‡»è“ç‰™ã€‚ä¼šå‡ºç°å‡ ä¸ªéšè—é€‰é¡¹ã€‚é€‰æ‹©â€œæ¢å¤è¿æ¥è‹¹æœè®¾å¤‡çš„å‡ºå‚è®¾ç½®â€ã€‚ </p><p><img src="https://up-img.yonghong.tech/pic/2021/11/18-20-50-%E6%88%AA%E5%B1%8F2021-09-27%20%E4%B8%8B%E5%8D%889.51.05-HaJhAi.png" alt="è“ç‰™è®¾ç½®"></p><span id="more"></span><p>å†è¿æ¥ä½ çš„Keyboardã€‚å°±å¥½äº†ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨ç³»ç»Ÿèœå•æ æˆ–è€…æ§åˆ¶ä¸­å¿ƒæ‰¾åˆ°ä½ çš„è“ç‰™å›¾æ ‡ã€‚ä¸‹å›¾ä¸­æœ€å·¦è¾¹å°±æ˜¯è“ç‰™ï¼Œæœ€å³è¾¹æ˜¯æ§åˆ¶ä¸­å¿ƒã€‚ç‚¹å‡»æ§åˆ¶ä¸­å¿ƒï¼Œå°±èƒ½æ˜¾ç¤ºè“ç‰™ã€‚&lt;/p&gt;
&lt;p&gt;æŒ‰ä¸‹ shift+option çš„åŒæ—¶ï¼Œç‚¹å‡»è“ç‰™ã€‚ä¼šå‡ºç°å‡ ä¸ªéšè—é€‰é¡¹ã€‚é€‰æ‹©â€œæ¢å¤è¿æ¥è‹¹æœè®¾å¤‡çš„å‡ºå‚è®¾ç½®â€ã€‚ &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://up-img.yonghong.tech/pic/2021/11/18-20-50-%E6%88%AA%E5%B1%8F2021-09-27%20%E4%B8%8B%E5%8D%889.51.05-HaJhAi.png&quot; alt=&quot;è“ç‰™è®¾ç½®&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="macOS" scheme="http://yonghong.tech/categories/macOS/"/>
    
    
    <category term="macOS" scheme="http://yonghong.tech/tags/macOS/"/>
    
  </entry>
  
  <entry>
    <title>IDEA æŠ€å·§</title>
    <link href="http://yonghong.tech/tips/idea/"/>
    <id>http://yonghong.tech/tips/idea/</id>
    <published>2021-08-02T14:24:00.000Z</published>
    <updated>2021-08-02T14:24:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="properties-æ–‡ä»¶-Unicode-è½¬ä¸­æ–‡"><a href="#properties-æ–‡ä»¶-Unicode-è½¬ä¸­æ–‡" class="headerlink" title="properties æ–‡ä»¶ Unicode è½¬ä¸­æ–‡"></a>properties æ–‡ä»¶ Unicode è½¬ä¸­æ–‡</h2><ul><li>Preference -&gt; Editor -&gt; File Encodings -&gt; Properties Files (*.properties) </li><li>å‹¾é€‰ä¸Š Transparent native-to-ascii conversion</li></ul><h2 id="è°ƒæ•´-import-å¤šä¸ªç±»æ—¶ä¸å˜æˆ-import"><a href="#è°ƒæ•´-import-å¤šä¸ªç±»æ—¶ä¸å˜æˆ-import" class="headerlink" title="è°ƒæ•´ import å¤šä¸ªç±»æ—¶ä¸å˜æˆ import *"></a>è°ƒæ•´ import å¤šä¸ªç±»æ—¶ä¸å˜æˆ import *</h2><ul><li>Preference -&gt; Editor -&gt; Code Style -&gt; Java -&gt; Imports </li><li>Class count to use import with â€œ*â€</li><li>Names count to use static import with â€œ*â€</li><li>è¿™ä¸¤ä¸ªæ•°å€¼è°ƒå¤§åˆ° 999</li></ul><span id="more"></span><h2 id="å…³é—­XMLä¸­SQLçš„é»„è‰²èƒŒæ™¯"><a href="#å…³é—­XMLä¸­SQLçš„é»„è‰²èƒŒæ™¯" class="headerlink" title="å…³é—­XMLä¸­SQLçš„é»„è‰²èƒŒæ™¯"></a>å…³é—­XMLä¸­SQLçš„é»„è‰²èƒŒæ™¯</h2><ul><li>Preference -&gt; Editor -&gt; Inspections -&gt; SQL </li><li>å–æ¶ˆå‹¾é€‰ No data sources configured å’Œ SQL dialect detection</li></ul><p><img src="https://up-img.yonghong.tech/pic/2021/08/03-15-20-xhH8ST-vf3mKv.jpg" alt="pic"></p><h2 id="æ ¼å¼åŒ–ä»£ç "><a href="#æ ¼å¼åŒ–ä»£ç " class="headerlink" title="æ ¼å¼åŒ–ä»£ç "></a>æ ¼å¼åŒ–ä»£ç </h2><ul><li>æ ¼å¼åŒ–æ•´ä¸ªæ–‡ä»¶ï¼ŒâŒ˜ + âŒ¥ + L</li><li>æ ¼å¼åŒ–é€‰ä¸­åŒºåŸŸï¼Œé€‰ä¸­æŒ‡å®šåŒºåŸŸåï¼ŒâŒ˜ + âŒ¥ + L</li></ul><h2 id="è¡¥å…¨æ–¹æ³•è°ƒç”¨çš„è¿”å›å€¼"><a href="#è¡¥å…¨æ–¹æ³•è°ƒç”¨çš„è¿”å›å€¼" class="headerlink" title="è¡¥å…¨æ–¹æ³•è°ƒç”¨çš„è¿”å›å€¼"></a>è¡¥å…¨æ–¹æ³•è°ƒç”¨çš„è¿”å›å€¼</h2><p>å…‰æ ‡æ”¾åœ¨è°ƒç”¨çš„æ–¹æ³•åä¸Šï¼ŒâŒ˜ + âŒ¥ + V </p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;properties-æ–‡ä»¶-Unicode-è½¬ä¸­æ–‡&quot;&gt;&lt;a href=&quot;#properties-æ–‡ä»¶-Unicode-è½¬ä¸­æ–‡&quot; class=&quot;headerlink&quot; title=&quot;properties æ–‡ä»¶ Unicode è½¬ä¸­æ–‡&quot;&gt;&lt;/a&gt;properties æ–‡ä»¶ Unicode è½¬ä¸­æ–‡&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Preference -&amp;gt; Editor -&amp;gt; File Encodings -&amp;gt; Properties Files (*.properties) &lt;/li&gt;
&lt;li&gt;å‹¾é€‰ä¸Š Transparent native-to-ascii conversion&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;è°ƒæ•´-import-å¤šä¸ªç±»æ—¶ä¸å˜æˆ-import&quot;&gt;&lt;a href=&quot;#è°ƒæ•´-import-å¤šä¸ªç±»æ—¶ä¸å˜æˆ-import&quot; class=&quot;headerlink&quot; title=&quot;è°ƒæ•´ import å¤šä¸ªç±»æ—¶ä¸å˜æˆ import *&quot;&gt;&lt;/a&gt;è°ƒæ•´ import å¤šä¸ªç±»æ—¶ä¸å˜æˆ import *&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Preference -&amp;gt; Editor -&amp;gt; Code Style -&amp;gt; Java -&amp;gt; Imports &lt;/li&gt;
&lt;li&gt;Class count to use import with â€œ*â€&lt;/li&gt;
&lt;li&gt;Names count to use static import with â€œ*â€&lt;/li&gt;
&lt;li&gt;è¿™ä¸¤ä¸ªæ•°å€¼è°ƒå¤§åˆ° 999&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="æŠ€å·§" scheme="http://yonghong.tech/categories/%E6%8A%80%E5%B7%A7/"/>
    
    
    <category term="æŠ€å·§" scheme="http://yonghong.tech/tags/%E6%8A%80%E5%B7%A7/"/>
    
    <category term="IDEA" scheme="http://yonghong.tech/tags/IDEA/"/>
    
  </entry>
  
  <entry>
    <title>Android å¸¸ç”¨å¸ƒå±€</title>
    <link href="http://yonghong.tech/2021/07/android-layout/"/>
    <id>http://yonghong.tech/2021/07/android-layout/</id>
    <published>2021-07-31T14:24:00.000Z</published>
    <updated>2021-07-31T14:24:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="LinearLayout-çº¿æ€§å¸ƒå±€"><a href="#LinearLayout-çº¿æ€§å¸ƒå±€" class="headerlink" title="LinearLayout çº¿æ€§å¸ƒå±€"></a>LinearLayout çº¿æ€§å¸ƒå±€</h2><p>å¸¸ç”¨å±æ€§</p><ul><li>orientationï¼šå¸ƒå±€æ€»ç»„ä»¶çš„æ’åˆ—æ–¹å¼ verticalã€horizontal</li><li>gravityï¼šç»„ä»¶æ‰€åŒ…å«çš„ç»„ä»¶çš„æ’åˆ—æ–¹å¼</li><li>layout_gravityï¼šç»„ä»¶åœ¨çˆ¶å®¹å™¨é‡Œçš„æ’åˆ—æ–¹å¼</li><li>backgroundï¼šèƒŒæ™¯</li><li>dividerï¼šåˆ†å‰²çº¿</li><li>showDividersï¼šåˆ†å‰²çº¿æ‰€åœ¨ä½ç½®ï¼šnone, beginning, end, middle</li><li>dividerPaddingï¼šè®¾ç½®åˆ†å‰²çº¿çš„ padding</li><li>layout_weightï¼šæƒé‡ï¼Œåˆ†é…å‰©ä½™ç©ºé—´</li></ul><span id="more"></span><h2 id="RelativeLayout-ç›¸å¯¹å¸ƒå±€"><a href="#RelativeLayout-ç›¸å¯¹å¸ƒå±€" class="headerlink" title="RelativeLayout ç›¸å¯¹å¸ƒå±€"></a>RelativeLayout ç›¸å¯¹å¸ƒå±€</h2><p>æ ¹æ®çˆ¶å®¹å™¨å®šä½</p><ul><li>android:layout_alignParentStart</li><li>android:layout_alignParentEnd</li><li>android:layout_alignParentTop</li><li>android:layout_alignParentBottom</li><li>android:layout_centerHorizontal</li><li>android:layout_centerVertical</li><li>android:layout_centerInParent</li></ul><p>æ ¹æ®å…„å¼Ÿç»„ä»¶å®šä½</p><ul><li><p>android:layout_toStartOf</p></li><li><p>android:layout_toEndOf</p></li><li><p>android:layout_above</p></li><li><p>android:layout_below</p></li><li><p>android:layout_alignStart</p></li><li><p>android:layout_alignEnd</p></li><li><p>android:layout_alignTop</p></li><li><p>android:layout_alignBottom</p><p>marginï¼šç»„ä»¶ä¸çˆ¶å®¹å™¨çš„è¾¹è·</p></li><li><p>android:layout_margin</p></li><li><p>android:layout_marginStart</p></li><li><p>android:layout_marginEnd</p></li><li><p>android:layout_marginTop</p></li><li><p>android:layout_marginBottom</p></li></ul><p>paddingï¼šç»„ä»¶å†…éƒ¨çš„è¾¹è·</p><ul><li>android:padding</li><li>android:paddingStart</li><li>android:paddingEnd</li><li>android:paddingTop</li><li>android:paddingBottom</li></ul><h2 id="FrameLayout-å¸§å¸ƒå±€"><a href="#FrameLayout-å¸§å¸ƒå±€" class="headerlink" title="FrameLayout å¸§å¸ƒå±€"></a>FrameLayout å¸§å¸ƒå±€</h2><p>å¸¸ç”¨å±æ€§ï¼š</p><ul><li>android:foreground=â€@drawable/ceshiâ€</li><li>android:foregroundGravity=â€right|bottomâ€</li></ul><h2 id="TableLayout-è¡¨æ ¼å¸ƒå±€"><a href="#TableLayout-è¡¨æ ¼å¸ƒå±€" class="headerlink" title="TableLayout è¡¨æ ¼å¸ƒå±€"></a>TableLayout è¡¨æ ¼å¸ƒå±€</h2><p>å¸¸ç”¨å±æ€§</p><ul><li>android:collapseColumns   éšè—</li><li>android:stretchColumns    æ‹‰ä¼¸</li><li>android:shrinkColumns     æ”¶ç¼©</li></ul><p>å­æ§ä»¶å±æ€§</p><ul><li>android:layout_column     æ˜¾ç¤ºåœ¨ç¬¬å‡ åˆ—</li><li>android:layout_span       æ¨ªå‘è·¨å‡ åˆ—</li></ul><h2 id="GridLayout-ç½‘æ ¼å¸ƒå±€"><a href="#GridLayout-ç½‘æ ¼å¸ƒå±€" class="headerlink" title="GridLayout ç½‘æ ¼å¸ƒå±€"></a>GridLayout ç½‘æ ¼å¸ƒå±€</h2><p>å¸¸ç”¨å±æ€§</p><ul><li>android:orientation </li><li>android:columnCount</li><li>android:rowCount</li></ul><p>å­æ§ä»¶å±æ€§</p><ul><li>android:layout_gravity fillã€center</li><li>android:layout_column</li><li>android:layout_columnSpan</li><li>android:layout_columnWeight</li><li>android:layout_row</li><li>android:layout_rowSpan</li><li>android:layout_rowWeight</li></ul><h2 id="ConstraintLayout-çº¦æŸå¸ƒå±€"><a href="#ConstraintLayout-çº¦æŸå¸ƒå±€" class="headerlink" title="ConstraintLayout çº¦æŸå¸ƒå±€"></a>ConstraintLayout çº¦æŸå¸ƒå±€</h2><p><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vdHJhaW5pbmcvY29uc3RyYWludC1sYXlvdXQ/aGw9emgtY24=">https://developer.android.com/training/constraint-layout?hl=zh-cn<i class="fa fa-external-link-alt"></i></span></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;LinearLayout-çº¿æ€§å¸ƒå±€&quot;&gt;&lt;a href=&quot;#LinearLayout-çº¿æ€§å¸ƒå±€&quot; class=&quot;headerlink&quot; title=&quot;LinearLayout çº¿æ€§å¸ƒå±€&quot;&gt;&lt;/a&gt;LinearLayout çº¿æ€§å¸ƒå±€&lt;/h2&gt;&lt;p&gt;å¸¸ç”¨å±æ€§&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;orientationï¼šå¸ƒå±€æ€»ç»„ä»¶çš„æ’åˆ—æ–¹å¼ verticalã€horizontal&lt;/li&gt;
&lt;li&gt;gravityï¼šç»„ä»¶æ‰€åŒ…å«çš„ç»„ä»¶çš„æ’åˆ—æ–¹å¼&lt;/li&gt;
&lt;li&gt;layout_gravityï¼šç»„ä»¶åœ¨çˆ¶å®¹å™¨é‡Œçš„æ’åˆ—æ–¹å¼&lt;/li&gt;
&lt;li&gt;backgroundï¼šèƒŒæ™¯&lt;/li&gt;
&lt;li&gt;dividerï¼šåˆ†å‰²çº¿&lt;/li&gt;
&lt;li&gt;showDividersï¼šåˆ†å‰²çº¿æ‰€åœ¨ä½ç½®ï¼šnone, beginning, end, middle&lt;/li&gt;
&lt;li&gt;dividerPaddingï¼šè®¾ç½®åˆ†å‰²çº¿çš„ padding&lt;/li&gt;
&lt;li&gt;layout_weightï¼šæƒé‡ï¼Œåˆ†é…å‰©ä½™ç©ºé—´&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="Android" scheme="http://yonghong.tech/categories/Android/"/>
    
    
    <category term="Android" scheme="http://yonghong.tech/tags/Android/"/>
    
    <category term="å¸ƒå±€" scheme="http://yonghong.tech/tags/%E5%B8%83%E5%B1%80/"/>
    
    <category term="Layout" scheme="http://yonghong.tech/tags/Layout/"/>
    
    <category term="LinearLayout" scheme="http://yonghong.tech/tags/LinearLayout/"/>
    
    <category term="RelativeLayout" scheme="http://yonghong.tech/tags/RelativeLayout/"/>
    
    <category term="FrameLayout" scheme="http://yonghong.tech/tags/FrameLayout/"/>
    
    <category term="TableLayout" scheme="http://yonghong.tech/tags/TableLayout/"/>
    
    <category term="GridLayout" scheme="http://yonghong.tech/tags/GridLayout/"/>
    
    <category term="ConstraintLayout" scheme="http://yonghong.tech/tags/ConstraintLayout/"/>
    
  </entry>
  
  <entry>
    <title>Android å¸¸ç”¨ç»„ä»¶</title>
    <link href="http://yonghong.tech/2021/07/android-widget/"/>
    <id>http://yonghong.tech/2021/07/android-widget/</id>
    <published>2021-07-30T14:24:00.000Z</published>
    <updated>2021-07-30T14:24:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="TextView"><a href="#TextView" class="headerlink" title="TextView"></a>TextView</h2><p>TextView åŸºç¡€å±æ€§</p><ul><li>layout_widthï¼šç»„ä»¶å®½åº¦</li><li>layout_heightï¼šç»„ä»¶é«˜åº¦</li><li>idï¼šä¸º TextView ç»„ä»¶è®¾ç½®ä¸€ä¸ª id</li><li>textï¼šè®¾ç½®æ˜¾ç¤ºæ–‡æœ¬çš„å†…å®¹</li><li>textColorï¼šè®¾ç½®å­—ä½“é¢œè‰²</li><li>textStyleï¼šè®¾ç½®å­—ä½“é£æ ¼ï¼šä¸‰ç§å¯é€‰å€¼ï¼šnormal, bold, italic</li><li>textSizeï¼šå­—ä½“å¤§å°ï¼Œå•ä½ä¸€èˆ¬æ˜¯ç”¨ sp</li><li>backgroundï¼šæ§ä»¶çš„èƒŒæ™¯é¢œè‰²ï¼Œå¯ä»¥ç†è§£ä¸ºå¡«å……æ•´ä¸ªæ§ä»¶é¢œè‰²ï¼Œå¯ä»¥æ˜¯å›¾ç‰‡</li><li>gravityï¼šè®¾ç½®æ§ä»¶ä¸­å†…å®¹å¯¹é½æ–¹å‘</li></ul><span id="more"></span><p>å¸¦é˜´å½±çš„TextView</p><ul><li>shadowColorï¼šè®¾ç½®é˜´å½±çš„é¢œè‰²å€¼</li><li>shadowRadiusï¼šè®¾ç½®é˜´å½±çš„æ¨¡ç³Šåº¦</li><li>shadowDxï¼šè®¾ç½®æ°´å¹³åç§»</li><li>shadowDyï¼šè®¾ç½®å‚ç›´åç§»</li></ul><p>è·‘é©¬ç¯æ•ˆæœTextView</p><ul><li>singleLineï¼šè®¾ç½®å†…å®¹å•è¡Œæ˜¾ç¤º</li><li>focusableï¼šæ˜¯å¦å¯ä»¥è·å¾—ç„¦ç‚¹</li><li>focusableInTouchModeï¼šåœ¨è§¦æ‘¸æ¨¡å¼ä¸‹æ˜¯å¦å¯ä»¥è·å¾—ç„¦ç‚¹</li><li>ellipsizeï¼šåœ¨å“ªé‡Œçœç•¥æ–‡æœ¬</li><li>marqueeRepeatLimitï¼šå­—å¹•åŠ¨ç”»é‡å¤æ¬¡æ•°</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;TextView</span><br><span class="line">    android:id=&quot;@+id/tv_one&quot;</span><br><span class="line">    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:ellipsize=&quot;marquee&quot;</span><br><span class="line">    android:focusable=&quot;true&quot;</span><br><span class="line">    android:focusableInTouchMode=&quot;true&quot;</span><br><span class="line">    android:marqueeRepeatLimit=&quot;marquee_forever&quot;</span><br><span class="line">    android:singleLine=&quot;true&quot;</span><br><span class="line">    android:text=&quot;@string/tv_one&quot;&gt;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">requestFocus</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">TextView</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Button"><a href="#Button" class="headerlink" title="Button"></a>Button</h2><p>ç»§æ‰¿ TextView</p><p>ä¸‰å±‚</p><ul><li>foregroundï¼šå‰æ™¯è‰²ã€å‰æ™¯å›¾ç‰‡</li><li>textï¼šæ–‡å­—å†…å®¹</li><li>backgroundï¼šèƒŒæ™¯è‰²ã€èƒŒæ™¯å›¾ç‰‡</li></ul><p>äº‹ä»¶å¤„ç†</p><ul><li>ç‚¹å‡»äº‹ä»¶ï¼šonClickListenerï¼ŒæŠ¬èµ·æ—¶è§¦å‘</li><li>é•¿æŒ‰äº‹ä»¶ï¼šonLongClickListenerï¼ŒæŒ‰ä¸‹æŒ‡å®šæ—¶é•¿åè§¦å‘</li><li>è§¦æ‘¸äº‹ä»¶ï¼šonTouchListener<ul><li>æŒ‰ä¸‹(ACTION_DOWN, 0)</li><li>æŠ¬èµ·(ACTION_UP, 1)</li><li>ç§»åŠ¨(ACTION_MOVE, 2)</li></ul></li></ul><h2 id="StateListDrawable"><a href="#StateListDrawable" class="headerlink" title="StateListDrawable"></a>StateListDrawable</h2><p>StateListDrawable æ˜¯ Drawable èµ„æºçš„ä¸€ç§ï¼Œå¯ä»¥æ ¹æ®ä¸åŒçš„çŠ¶æ€ï¼Œè®¾ç½®ä¸åŒçš„å›¾ç‰‡æ•ˆæœï¼Œå…³é”®èŠ‚ç‚¹ <code>&lt;selector&gt;</code>ï¼Œæˆ‘ä»¬åªéœ€è¦å°† Button çš„ background å±æ€§è®¾ç½®ä¸ºè¯¥ drawable èµ„æºå³å¯</p><p>å¸¸ç”¨å±æ€§</p><ul><li>drawableï¼šå¼•ç”¨çš„ Drawable èµ„æº</li><li>state_focusedï¼šæ˜¯å¦è·å¾—ç„¦ç‚¹</li><li>state_pressedï¼šæ§ä»¶æ˜¯å¦è¢«æŒ‰ä¸‹</li><li>state_enabledï¼šæ§ä»¶æ˜¯å¦å¯ç”¨</li><li>state_selectedï¼šæ§ä»¶æ˜¯å¤Ÿè¢«é€‰æ‹©ï¼Œé’ˆå¯¹æœ‰æ»šåŠ¨çš„æƒ…å†µ</li><li>state_checkedï¼šæ§ä»¶æ˜¯å¦è¢«å‹¾é€‰</li><li>state_checkableï¼šæ§ä»¶å¯å¦è¢«å‹¾é€‰</li><li>state_window_focusedï¼šæ˜¯å¦è·å¾—çª—å£ç„¦ç‚¹</li><li>state_activeï¼šæ§ä»¶æ˜¯å¦å¤„äºæ´»è·ƒçŠ¶æ€</li><li>state_singleï¼šæ§ä»¶åŒ…å«å¤šä¸ªå­æ§ä»¶æ—¶ï¼Œç¡®å®šæ˜¯å¦åªæ˜¾ç¤ºä¸€ä¸ªæ§ä»¶</li><li>state_firstï¼šæ§ä»¶åŒ…å«å¤šä¸ªå­æ§ä»¶æ—¶ï¼Œç¡®å®šç¬¬ä¸€ä¸ªæ§ä»¶æ˜¯å¦å¤„äºæ˜¾ç¤ºçŠ¶æ€</li><li>state_middleï¼šæ§ä»¶åŒ…å«å¤šä¸ªå­æ§ä»¶æ—¶ï¼Œç¡®å®šä¸­é—´ä¸€ä¸ªæ§ä»¶æ˜¯å¦å¤„äºæ˜¾ç¤ºçŠ¶æ€</li><li>state_lastï¼šæ§ä»¶åŒ…å«å¤šä¸ªå­æ§ä»¶æ—¶ï¼Œç¡®å®šæœ€åä¸€ä¸ªæ§ä»¶æ˜¯å¦å¤„äºæ˜¾ç¤ºçŠ¶æ€</li></ul><h2 id="EditText"><a href="#EditText" class="headerlink" title="EditText"></a>EditText</h2><p>ç»§æ‰¿ TextView</p><p>å¸¸ç”¨å±æ€§</p><ul><li>hintï¼šè¾“å…¥æç¤º</li><li>textColorHintï¼šè¾“å…¥æç¤ºæ–‡å­—é¢œè‰²</li><li>inputTypeï¼šè¾“å…¥ç±»å‹</li><li>drawableXxxxï¼šåœ¨è¾“å…¥æ¡†çš„æŒ‡å®šæ–¹ä½æ·»åŠ å›¾ç‰‡</li><li>drawablePaddingï¼šè®¾ç½®å›¾ç‰‡ä¸æ–‡å­—é—´è·</li><li>paddingï¼šè®¾ç½®å†…å®¹ä¸è¾¹æ¡†è¾¹è·</li><li>backgroundï¼šèƒŒæ™¯è‰²</li></ul><h2 id="ImageView"><a href="#ImageView" class="headerlink" title="ImageView"></a>ImageView</h2><p>å¸¸ç”¨å±æ€§</p><ul><li>srcï¼šè®¾ç½®å›¾ç‰‡èµ„æº</li><li>scaleTypeï¼šè®¾ç½®å›¾ç‰‡ç¼©æ”¾ç±»å‹</li><li>maxHeightï¼šæœ€å¤§é«˜åº¦</li><li>maxWidthï¼šæœ€å¤§å®½åº¦</li><li>adjustViewBoundsï¼šè°ƒæ•´Viewçš„ç•Œé™</li></ul><p>ç¼©æ”¾ç±»å‹</p><ul><li>fitStartï¼šä¿æŒå®½é«˜æ¯”ç¼©æ”¾å›¾ç‰‡ï¼Œç¼©æ”¾å®Œæˆååœ¨ ImageView çš„å·¦ä¸Šè§’</li><li>fitCenterï¼šé»˜è®¤ï¼Œä¿æŒå®½é«˜æ¯”ç¼©æ”¾å›¾ç‰‡ï¼Œç¼©æ”¾åæ”¾äºä¸­é—´</li><li>fitEndï¼šä¿æŒå®½é«˜æ¯”ç¼©æ”¾å›¾ç‰‡ï¼Œç¼©æ”¾ååœ¨ ImageView çš„å³ä¸‹è§’ </li><li>fitXYï¼šå¯¹å›¾åƒçš„çºµæ¨ªæ–¹å‘è¿›è¡Œç‹¬ç«‹ç¼©æ”¾ï¼Œä½¿å¾—å›¾ç‰‡å®Œå…¨é€‚åº” ImageViewï¼Œä½†æ˜¯å›¾ç‰‡å®½é«˜æ¯”å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–</li><li>centerï¼šä¿æŒåŸå›¾å¤§å°ï¼Œæ˜¾ç¤ºåœ¨ ImageView ä¸­å¿ƒï¼Œå½“åŸå›¾å¤§äº ImageView çš„ sizeï¼Œä¼šè¿›è¡Œé€‚å½“è£å‰ª</li><li>centerCropï¼šä¿æŒå®½é«˜æ¯”ç¼©æ”¾å›¾ç‰‡ï¼Œç›´åˆ°å®Œå…¨è¦†ç›– ImageViewï¼Œå¯èƒ½ä¼šå‡ºç°å›¾ç‰‡æ˜¾ç¤ºçš„ä¸å®Œå…¨</li><li>centerInsideï¼šä¿æŒå®½é«˜æ¯”ç¼©æ”¾å›¾ç‰‡ï¼Œç›´åˆ° ImageView èƒ½å¤Ÿå®Œå…¨çš„æ˜¾ç¤ºå›¾ç‰‡</li><li>matrixï¼šä¸æ”¹å˜åŸå›¾å¤§å°ï¼Œä» ImageView å·¦ä¸Šè§’å¼€å§‹ç»˜åˆ¶åŸå›¾ï¼Œè¶…å‡ºéƒ¨åˆ†åšè£å‰ªå¤„ç†</li></ul><h2 id="ProgressBar"><a href="#ProgressBar" class="headerlink" title="ProgressBar"></a>ProgressBar</h2><p>å¸¸ç”¨å±æ€§</p><ul><li>maxï¼šè¿›åº¦æ¡çš„æœ€å¤§å€¼</li><li>progressï¼šè¿›åº¦æ¡å·²å®Œæˆè¿›åº¦</li><li>indeterminateï¼šå¦‚æœè®¾ç½®æˆ trueï¼Œåˆ™è¿›åº¦æ¡ä¸ç²¾ç¡®æ˜¾ç¤ºè¿›åº¦</li><li>style=â€?android:attr/progressBarStyleHorizontalâ€ï¼šæ°´å¹³è¿›åº¦æ¡</li></ul><h2 id="Notification"><a href="#Notification" class="headerlink" title="Notification"></a>Notification</h2><ul><li>NotificationManager manager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);</li><li>NotificationChannelï¼ˆBuild.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Oï¼‰</li><li>NotificationCompat.Builder()</li><li>Notification</li><li>PendingIntent</li></ul><p>é€šçŸ¥é‡è¦ç¨‹åº¦è®¾ç½®</p><ul><li>IMPORTANCE_NONEï¼šå…³é—­é€šçŸ¥</li><li>IMPORTANCE_MINï¼šå¼€å¯é€šçŸ¥ï¼Œä¸ä¼šå¼¹å‡ºï¼Œæ²¡æœ‰æç¤ºéŸ³ï¼ŒçŠ¶æ€æ æ— æ˜¾ç¤º</li><li>IMPORTANCE_LOWï¼šå¼€å¯é€šçŸ¥ï¼Œä¸ä¼šå¼¹å‡ºï¼Œæ²¡æœ‰æç¤ºéŸ³ï¼ŒçŠ¶æ€æ æ˜¾ç¤º</li><li>IMPORTANCE_DEFAULTï¼šå¼€å¯é€šçŸ¥ï¼Œä¸ä¼šå¼¹å‡ºï¼Œæœ‰æç¤ºéŸ³ï¼ŒçŠ¶æ€æ æ˜¾ç¤º</li><li>IMPORTANCE_HIGHï¼šå¼€å¯é€šçŸ¥ï¼Œä¼šå¼¹å‡ºï¼Œæœ‰æç¤ºéŸ³ï¼ŒçŠ¶æ€æ æ˜¾ç¤º</li></ul><p>å¸¸ç”¨å±æ€§</p><ul><li>.setContentTitle() æ ‡é¢˜</li><li>.setContentText()  å†…å®¹</li><li>.setSmallIcon()    å°å›¾ç‰‡ ä½¿ç”¨ alpha å›¾å±‚</li><li>.setLargeIcon()    å¤§å›¾ç‰‡ Bitmap</li><li>.setColor()        å°å›¾æ ‡é¢œè‰² Color.parseColor(â€œ#ff0000â€)</li><li>.setContentIntent() è·³è½¬æ„å›¾ PendingIntent</li><li>.setAutoCancel()    è‡ªåŠ¨æ¸…é™¤é€šçŸ¥</li><li>.setWhen()         é€šçŸ¥åˆ›å»ºæ—¶é—´</li></ul><h2 id="Toolbar"><a href="#Toolbar" class="headerlink" title="Toolbar"></a>Toolbar</h2><p>å¸¸ç”¨å±æ€§</p><ul><li>id</li><li>layout_width</li><li>layout_height=â€?attr/actionBarSizeâ€</li><li>title</li><li>titleMarginStart</li><li>titleTextColor</li><li>subtitle</li><li>subtitleTextColor</li><li>background</li><li>logo</li><li>navigationIcon</li><li>layout_height=â€wrap_contentâ€</li><li>android:layout_gravity=â€centerâ€</li></ul><h2 id="AlertDialog"><a href="#AlertDialog" class="headerlink" title="AlertDialog"></a>AlertDialog</h2><p>å¸¸ç”¨å±æ€§</p><ul><li>.setIcon()</li><li>.setTitle()</li><li>.setMessage()</li><li>.setView()     è‡ªå®šä¹‰å¸ƒå±€</li><li>.setPositiveButton()</li><li>.setNegativeButton()</li><li>.setNeutralButton()</li></ul><h2 id="PopUpWindow"><a href="#PopUpWindow" class="headerlink" title="PopUpWindow"></a>PopUpWindow</h2><ul><li>contentView</li><li>width</li><li>height</li><li>focusable</li><li>showAsDropDown</li><li>dismiss</li><li>touchable</li><li>outsideTouchable</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">View popupView = getLayoutInflater().inflate(R.layout.popup_view, <span class="keyword">null</span>);</span><br><span class="line">PopupWindow popupWindow = <span class="keyword">new</span> PopupWindow(popupView, ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT, <span class="keyword">true</span>);</span><br><span class="line">popupWindow.showAsDropDown(view);</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;TextView&quot;&gt;&lt;a href=&quot;#TextView&quot; class=&quot;headerlink&quot; title=&quot;TextView&quot;&gt;&lt;/a&gt;TextView&lt;/h2&gt;&lt;p&gt;TextView åŸºç¡€å±æ€§&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;layout_widthï¼šç»„ä»¶å®½åº¦&lt;/li&gt;
&lt;li&gt;layout_heightï¼šç»„ä»¶é«˜åº¦&lt;/li&gt;
&lt;li&gt;idï¼šä¸º TextView ç»„ä»¶è®¾ç½®ä¸€ä¸ª id&lt;/li&gt;
&lt;li&gt;textï¼šè®¾ç½®æ˜¾ç¤ºæ–‡æœ¬çš„å†…å®¹&lt;/li&gt;
&lt;li&gt;textColorï¼šè®¾ç½®å­—ä½“é¢œè‰²&lt;/li&gt;
&lt;li&gt;textStyleï¼šè®¾ç½®å­—ä½“é£æ ¼ï¼šä¸‰ç§å¯é€‰å€¼ï¼šnormal, bold, italic&lt;/li&gt;
&lt;li&gt;textSizeï¼šå­—ä½“å¤§å°ï¼Œå•ä½ä¸€èˆ¬æ˜¯ç”¨ sp&lt;/li&gt;
&lt;li&gt;backgroundï¼šæ§ä»¶çš„èƒŒæ™¯é¢œè‰²ï¼Œå¯ä»¥ç†è§£ä¸ºå¡«å……æ•´ä¸ªæ§ä»¶é¢œè‰²ï¼Œå¯ä»¥æ˜¯å›¾ç‰‡&lt;/li&gt;
&lt;li&gt;gravityï¼šè®¾ç½®æ§ä»¶ä¸­å†…å®¹å¯¹é½æ–¹å‘&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="Android" scheme="http://yonghong.tech/categories/Android/"/>
    
    
    <category term="Android" scheme="http://yonghong.tech/tags/Android/"/>
    
    <category term="æ§ä»¶" scheme="http://yonghong.tech/tags/%E6%8E%A7%E4%BB%B6/"/>
    
    <category term="Widget" scheme="http://yonghong.tech/tags/Widget/"/>
    
    <category term="TextView" scheme="http://yonghong.tech/tags/TextView/"/>
    
    <category term="Button" scheme="http://yonghong.tech/tags/Button/"/>
    
    <category term="EditText" scheme="http://yonghong.tech/tags/EditText/"/>
    
    <category term="ImageView" scheme="http://yonghong.tech/tags/ImageView/"/>
    
    <category term="ProgressBar" scheme="http://yonghong.tech/tags/ProgressBar/"/>
    
    <category term="Notification" scheme="http://yonghong.tech/tags/Notification/"/>
    
    <category term="Toolbar" scheme="http://yonghong.tech/tags/Toolbar/"/>
    
    <category term="AlertDialog" scheme="http://yonghong.tech/tags/AlertDialog/"/>
    
    <category term="PopUpWindow" scheme="http://yonghong.tech/tags/PopUpWindow/"/>
    
  </entry>
  
  <entry>
    <title>Android Runtime (ART) å’Œ Dalvik</title>
    <link href="http://yonghong.tech/2021/07/android-runtime-dalvik/"/>
    <id>http://yonghong.tech/2021/07/android-runtime-dalvik/</id>
    <published>2021-07-29T12:00:00.000Z</published>
    <updated>2021-07-29T12:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>Android Runtime (ART) æ˜¯ Android ä¸Šçš„åº”ç”¨å’Œéƒ¨åˆ†ç³»ç»ŸæœåŠ¡ä½¿ç”¨çš„æ‰˜ç®¡å¼è¿è¡Œæ—¶ã€‚ART åŠå…¶å‰èº« Dalvik æœ€åˆæ˜¯ä¸“ä¸º Android é¡¹ç›®æ‰“é€ çš„ã€‚ä½œä¸ºè¿è¡Œæ—¶çš„ ART å¯æ‰§è¡Œ Dalvik å¯æ‰§è¡Œæ–‡ä»¶å¹¶éµå¾ª Dex å­—èŠ‚ç è§„èŒƒã€‚</p><p>ART å’Œ Dalvik æ˜¯è¿è¡Œ Dex å­—èŠ‚ç çš„å…¼å®¹è¿è¡Œæ—¶ï¼Œå› æ­¤é’ˆå¯¹ Dalvik å¼€å‘çš„åº”ç”¨ä¹Ÿèƒ½åœ¨ ART ç¯å¢ƒä¸­è¿ä½œã€‚ä¸è¿‡ï¼ŒDalvik é‡‡ç”¨çš„ä¸€äº›æŠ€æœ¯å¹¶ä¸é€‚ç”¨äº ARTã€‚æœ‰å…³æœ€é‡è¦é—®é¢˜çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…<span class="exturl" data-url="aHR0cDovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9ndWlkZS9wcmFjdGljZXMvdmVyaWZ5aW5nLWFwcHMtYXJ0Lmh0bWw/aGw9emgtY24=">åœ¨ Android Runtime (ART) ä¸ŠéªŒè¯åº”ç”¨è¡Œä¸º<i class="fa fa-external-link-alt"></i></span>ã€‚</p><span id="more"></span><p>å‚è€ƒï¼š<span class="exturl" data-url="aHR0cHM6Ly9zb3VyY2UuYW5kcm9pZC5jb20vZGV2aWNlcy90ZWNoL2RhbHZpaz9obD16aC1jbg==">https://source.android.com/devices/tech/dalvik?hl=zh-cn<i class="fa fa-external-link-alt"></i></span></p><h2 id="ART-åŠŸèƒ½"><a href="#ART-åŠŸèƒ½" class="headerlink" title="ART åŠŸèƒ½"></a>ART åŠŸèƒ½</h2><p>ä»¥ä¸‹æ˜¯ ART å®ç°çš„ä¸€äº›ä¸»è¦åŠŸèƒ½ã€‚</p><h3 id="é¢„å…ˆ-AOT-ç¼–è¯‘"><a href="#é¢„å…ˆ-AOT-ç¼–è¯‘" class="headerlink" title="é¢„å…ˆ (AOT) ç¼–è¯‘"></a>é¢„å…ˆ (AOT) ç¼–è¯‘</h3><p>ART å¼•å…¥äº†é¢„å…ˆç¼–è¯‘æœºåˆ¶ï¼Œå¯æé«˜åº”ç”¨çš„æ€§èƒ½ã€‚ART è¿˜å…·æœ‰æ¯” Dalvik æ›´ä¸¥æ ¼çš„å®‰è£…æ—¶éªŒè¯ã€‚</p><p>åœ¨å®‰è£…æ—¶ï¼ŒART ä½¿ç”¨è®¾å¤‡è‡ªå¸¦çš„ <strong>dex2oat</strong> å·¥å…·æ¥ç¼–è¯‘åº”ç”¨ã€‚æ­¤å®ç”¨å·¥å…·æ¥å— <span class="exturl" data-url="aHR0cHM6Ly9zb3VyY2UuYW5kcm9pZC5jb20vZGV2aWNlcy90ZWNoL2RhbHZpay9kZXgtZm9ybWF0P2hsPXpoLWNu">DEX<i class="fa fa-external-link-alt"></i></span> æ–‡ä»¶ä½œä¸ºè¾“å…¥ï¼Œå¹¶ä¸ºç›®æ ‡è®¾å¤‡ç”Ÿæˆç»è¿‡ç¼–è¯‘çš„åº”ç”¨å¯æ‰§è¡Œæ–‡ä»¶ã€‚è¯¥å·¥å…·åº”èƒ½å¤Ÿé¡ºåˆ©ç¼–è¯‘æ‰€æœ‰æœ‰æ•ˆçš„ DEX æ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œä¸€äº›åå¤„ç†å·¥å…·ä¼šç”Ÿæˆæ— æ•ˆæ–‡ä»¶ï¼ŒDalvik å¯ä»¥æ¥å—è¿™äº›æ–‡ä»¶ï¼Œä½† ART æ— æ³•ç¼–è¯‘è¿™äº›æ–‡ä»¶ã€‚å¦‚éœ€äº†è§£è¯¦æƒ…ï¼Œè¯·å‚é˜…<span class="exturl" data-url="aHR0cDovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9ndWlkZS9wcmFjdGljZXMvdmVyaWZ5aW5nLWFwcHMtYXJ0Lmh0bWw/aGw9emgtY24jR0NfTWlncmF0aW9u">å¤„ç†åƒåœ¾å›æ”¶é—®é¢˜<i class="fa fa-external-link-alt"></i></span>ã€‚</p><h3 id="åƒåœ¾å›æ”¶æ–¹é¢çš„ä¼˜åŒ–"><a href="#åƒåœ¾å›æ”¶æ–¹é¢çš„ä¼˜åŒ–" class="headerlink" title="åƒåœ¾å›æ”¶æ–¹é¢çš„ä¼˜åŒ–"></a>åƒåœ¾å›æ”¶æ–¹é¢çš„ä¼˜åŒ–</h3><p>åƒåœ¾å›æ”¶ (GC) ä¼šè€—è´¹å¤§é‡èµ„æºï¼Œè¿™å¯èƒ½æœ‰æŸäºåº”ç”¨æ€§èƒ½ï¼Œå¯¼è‡´æ˜¾ç¤ºä¸ç¨³å®šã€ç•Œé¢å“åº”é€Ÿåº¦ç¼“æ…¢ä»¥åŠå…¶ä»–é—®é¢˜ã€‚ART é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼å¯¹åƒåœ¾å›æ”¶åšäº†ä¼˜åŒ–ï¼š</p><ul><li>å¤§å¤šé‡‡ç”¨å¹¶å‘è®¾è®¡ï¼Œå…·æœ‰ä¸€æ¬¡ GC æš‚åœ</li><li>å¹¶å‘å¤åˆ¶ï¼Œå¯å‡å°‘åå°å†…å­˜ä½¿ç”¨å’Œç¢ç‰‡</li><li>GC æš‚åœçš„æ—¶é—´ä¸å—å †å¤§å°å½±å“</li><li>åœ¨æ¸…ç†æœ€è¿‘åˆ†é…çš„çŸ­æ—¶å¯¹è±¡è¿™ç§ç‰¹æ®Šæƒ…å†µä¸­ï¼Œå›æ”¶å™¨çš„æ€» GC æ—¶é—´æ›´çŸ­</li><li>ä¼˜åŒ–äº†åƒåœ¾å›æ”¶çš„å·¥æ•ˆï¼Œèƒ½å¤Ÿæ›´åŠ åŠæ—¶åœ°è¿›è¡Œå¹¶è¡Œåƒåœ¾å›æ”¶ï¼Œè¿™ä½¿å¾— <a href="http://developer.android.com/tools/debugging/debugging-memory.html?hl=zh-cn#LogMessages"><code>GC_FOR_ALLOC</code></a> äº‹ä»¶åœ¨å…¸å‹ç”¨ä¾‹ä¸­æä¸ºç½•è§</li></ul><h3 id="å¼€å‘å’Œè°ƒè¯•æ–¹é¢çš„ä¼˜åŒ–"><a href="#å¼€å‘å’Œè°ƒè¯•æ–¹é¢çš„ä¼˜åŒ–" class="headerlink" title="å¼€å‘å’Œè°ƒè¯•æ–¹é¢çš„ä¼˜åŒ–"></a>å¼€å‘å’Œè°ƒè¯•æ–¹é¢çš„ä¼˜åŒ–</h3><p>ART æä¾›äº†å¤§é‡åŠŸèƒ½æ¥ä¼˜åŒ–åº”ç”¨å¼€å‘å’Œè°ƒè¯•ã€‚</p><h4 id="æ”¯æŒé‡‡æ ·åˆ†æå™¨"><a href="#æ”¯æŒé‡‡æ ·åˆ†æå™¨" class="headerlink" title="æ”¯æŒé‡‡æ ·åˆ†æå™¨"></a>æ”¯æŒé‡‡æ ·åˆ†æå™¨</h4><p>ä¸€ç›´ä»¥æ¥ï¼Œå¼€å‘è€…éƒ½ä½¿ç”¨ <span class="exturl" data-url="aHR0cDovL2RldmVsb3Blci5hbmRyb2lkLmNvbS90b29scy9oZWxwL3RyYWNldmlldy5odG1sP2hsPXpoLWNu">Traceview<i class="fa fa-external-link-alt"></i></span> å·¥å…·ï¼ˆç”¨äºè·Ÿè¸ªåº”ç”¨æ‰§è¡Œæƒ…å†µï¼‰ä½œä¸ºåˆ†æå™¨ã€‚è™½ç„¶ Traceview å¯æä¾›æœ‰ç”¨çš„ä¿¡æ¯ï¼Œä½†æ¯æ¬¡æ–¹æ³•è°ƒç”¨äº§ç”Ÿçš„å¼€é”€ä¼šå¯¼è‡´ Dalvik åˆ†æç»“æœå‡ºç°åå·®ï¼Œè€Œä¸”ä½¿ç”¨è¯¥å·¥å…·æ˜æ˜¾ä¼šå½±å“è¿è¡Œæ—¶æ€§èƒ½ã€‚</p><p>ART æ·»åŠ äº†å¯¹æ²¡æœ‰è¿™äº›é™åˆ¶çš„ä¸“ç”¨é‡‡æ ·åˆ†æå™¨çš„æ”¯æŒï¼Œå› è€Œå¯æ›´å‡†ç¡®åœ°äº†è§£åº”ç”¨æ‰§è¡Œæƒ…å†µï¼Œè€Œä¸ä¼šæ˜æ˜¾å‡æ…¢é€Ÿåº¦ã€‚KitKat ç‰ˆæœ¬ä¸º Dalvik çš„ Traceview æ·»åŠ äº†é‡‡æ ·æ”¯æŒã€‚</p><h4 id="æ”¯æŒæ›´å¤šè°ƒè¯•åŠŸèƒ½"><a href="#æ”¯æŒæ›´å¤šè°ƒè¯•åŠŸèƒ½" class="headerlink" title="æ”¯æŒæ›´å¤šè°ƒè¯•åŠŸèƒ½"></a>æ”¯æŒæ›´å¤šè°ƒè¯•åŠŸèƒ½</h4><p>ART æ”¯æŒè®¸å¤šæ–°çš„è°ƒè¯•é€‰é¡¹ï¼Œç‰¹åˆ«æ˜¯ä¸ç›‘æ§å’Œåƒåœ¾å›æ”¶ç›¸å…³çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ï¼š</p><ul><li>æŸ¥çœ‹å †æ ˆè·Ÿè¸ªä¸­ä¿ç•™äº†å“ªäº›é”ï¼Œç„¶åè·³è½¬åˆ°æŒæœ‰é”çš„çº¿ç¨‹ã€‚</li><li>è¯¢é—®æŒ‡å®šç±»çš„å½“å‰æ´»åŠ¨çš„å®ä¾‹æ•°ã€è¯·æ±‚æŸ¥çœ‹å®ä¾‹ï¼Œä»¥åŠæŸ¥çœ‹ä½¿å¯¹è±¡ä¿æŒæœ‰æ•ˆçŠ¶æ€çš„å‚è€ƒã€‚</li><li>è¿‡æ»¤ç‰¹å®šå®ä¾‹çš„äº‹ä»¶ï¼ˆå¦‚æ–­ç‚¹ï¼‰ã€‚</li><li>æŸ¥çœ‹æ–¹æ³•é€€å‡ºï¼ˆä½¿ç”¨â€œmethod-exitâ€äº‹ä»¶ï¼‰æ—¶è¿”å›çš„å€¼ã€‚</li><li>è®¾ç½®å­—æ®µè§‚å¯Ÿç‚¹ï¼Œä»¥åœ¨è®¿é—®å’Œ/æˆ–ä¿®æ”¹ç‰¹å®šå­—æ®µæ—¶æš‚åœç¨‹åºæ‰§è¡Œã€‚</li></ul><h4 id="ä¼˜åŒ–äº†å¼‚å¸¸å’Œå´©æºƒæŠ¥å‘Šä¸­çš„è¯Šæ–­è¯¦ç»†ä¿¡æ¯"><a href="#ä¼˜åŒ–äº†å¼‚å¸¸å’Œå´©æºƒæŠ¥å‘Šä¸­çš„è¯Šæ–­è¯¦ç»†ä¿¡æ¯" class="headerlink" title="ä¼˜åŒ–äº†å¼‚å¸¸å’Œå´©æºƒæŠ¥å‘Šä¸­çš„è¯Šæ–­è¯¦ç»†ä¿¡æ¯"></a>ä¼˜åŒ–äº†å¼‚å¸¸å’Œå´©æºƒæŠ¥å‘Šä¸­çš„è¯Šæ–­è¯¦ç»†ä¿¡æ¯</h4><p>å½“å‘ç”Ÿè¿è¡Œæ—¶å¼‚å¸¸æ—¶ï¼ŒART ä¼šä¸ºæ‚¨æä¾›å°½å¯èƒ½å¤šçš„ä¸Šä¸‹æ–‡å’Œè¯¦ç»†ä¿¡æ¯ã€‚ART ä¼šæä¾› <code>java.lang.ClassCastException</code>ã€<code>java.lang.ClassNotFoundException</code> å’Œ <code>java.lang.NullPointerException</code> çš„æ›´å¤šå¼‚å¸¸è¯¦ç»†ä¿¡æ¯ã€‚ï¼ˆè¾ƒé«˜ç‰ˆæœ¬çš„ Dalvik ä¼šæä¾› <code>java.lang.ArrayIndexOutOfBoundsException</code> å’Œ <code>java.lang.ArrayStoreException</code> çš„æ›´å¤šå¼‚å¸¸è¯¦ç»†ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯ç°åœ¨åŒ…æ‹¬æ•°ç»„å¤§å°å’Œè¶Šç•Œåç§»é‡ï¼›ART ä¹Ÿæä¾›è¿™ç±»ä¿¡æ¯ã€‚ï¼‰</p><p>ä¾‹å¦‚ï¼Œ<code>java.lang.NullPointerException</code> ç°åœ¨ä¼šæ˜¾ç¤ºæœ‰å…³åº”ç”¨å°è¯•å¤„ç† null æŒ‡é’ˆæ—¶æ‰€æ‰§è¡Œæ“ä½œçš„ä¿¡æ¯ï¼Œä¾‹å¦‚åº”ç”¨å°è¯•å†™å…¥çš„å­—æ®µæˆ–å°è¯•è°ƒç”¨çš„æ–¹æ³•ã€‚ä¸€äº›å…¸å‹ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">java.lang.NullPointerException: Attempt <span class="keyword">to</span> <span class="keyword">write</span> <span class="keyword">to</span> field <span class="string">&#x27;int</span></span><br><span class="line"><span class="string">android.accessibilityservice.AccessibilityServiceInfo.flags&#x27;</span> <span class="keyword">on</span> a null object</span><br><span class="line"><span class="keyword">reference</span></span><br><span class="line">java.lang.NullPointerException: Attempt <span class="keyword">to</span> invoke <span class="keyword">virtual</span> <span class="function"><span class="keyword">method</span></span></span><br><span class="line"><span class="function">&#x27;<span class="title">java</span>.<span class="title">lang</span>.<span class="title">String</span> <span class="title">java</span>.<span class="title">lang</span>.<span class="title">Object</span>.<span class="title">toString</span><span class="params">()</span>&#x27; <span class="title">on</span> <span class="title">a</span> <span class="title">null</span> <span class="title">object</span> <span class="title">reference</span></span></span><br></pre></td></tr></table></figure><p>ART è¿˜é€šè¿‡çº³å…¥ Java å’ŒåŸç”Ÿå †æ ˆä¿¡æ¯ï¼Œåœ¨åº”ç”¨åŸç”Ÿä»£ç å´©æºƒæŠ¥å‘Šä¸­æä¾›æ›´å®ç”¨çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</p><h2 id="Android-8-0-ä¸­çš„-ART-åŠŸèƒ½æ”¹è¿›"><a href="#Android-8-0-ä¸­çš„-ART-åŠŸèƒ½æ”¹è¿›" class="headerlink" title="Android 8.0 ä¸­çš„ ART åŠŸèƒ½æ”¹è¿›"></a>Android 8.0 ä¸­çš„ ART åŠŸèƒ½æ”¹è¿›</h2><p>åœ¨ Android 8.0 ç‰ˆæœ¬ä¸­ï¼ŒAndroid Runtime (ART) æœ‰äº†æå¤§æ”¹è¿›ã€‚ä¸‹é¢çš„åˆ—è¡¨æ€»ç»“äº†è®¾å¤‡åˆ¶é€ å•†å¯ä»¥åœ¨ ART ä¸­è·å¾—çš„å¢å¼ºåŠŸèƒ½ã€‚</p><h3 id="å¹¶å‘å‹ç¼©å¼åƒåœ¾å›æ”¶å™¨"><a href="#å¹¶å‘å‹ç¼©å¼åƒåœ¾å›æ”¶å™¨" class="headerlink" title="å¹¶å‘å‹ç¼©å¼åƒåœ¾å›æ”¶å™¨"></a>å¹¶å‘å‹ç¼©å¼åƒåœ¾å›æ”¶å™¨</h3><p>æ­£å¦‚ Google åœ¨ Google I/O å¤§ä¼šä¸Šæ‰€å®£å¸ƒçš„é‚£æ ·ï¼ŒART åœ¨ Android 8.0 ä¸­æä¾›äº†æ–°çš„å¹¶å‘å‹ç¼©å¼åƒåœ¾å›æ”¶å™¨ (GC)ã€‚è¯¥å›æ”¶å™¨ä¼šåœ¨æ¯æ¬¡æ‰§è¡Œ GC æ—¶ä»¥åŠåº”ç”¨æ­£åœ¨è¿è¡Œæ—¶å¯¹å †è¿›è¡Œå‹ç¼©ï¼Œä¸”ä»…åœ¨å¤„ç†çº¿ç¨‹æ ¹æ—¶çŸ­æš‚åœé¡¿ä¸€æ¬¡ã€‚è¯¥å›æ”¶å™¨å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p><ul><li>GC å§‹ç»ˆä¼šå¯¹å †è¿›è¡Œå‹ç¼©ï¼šå †çš„å¤§å°å¹³å‡æ¯” Android 7.0 ä¸­çš„å° 32%ã€‚</li><li>å¾—ç›Šäºå‹ç¼©ï¼Œç³»ç»Ÿç°å¯å®ç°çº¿ç¨‹å±€éƒ¨ç¢°æ’æŒ‡é’ˆå¯¹è±¡åˆ†é…ï¼šåˆ†é…é€Ÿåº¦æ¯” Android 7.0 ä¸­çš„å¿« 70%ã€‚</li><li>H2 åŸºå‡†çš„åœé¡¿æ¬¡æ•°æ¯” Android 7.0 GC çš„å°‘ 85%ã€‚</li><li>åœé¡¿æ¬¡æ•°ä¸å†éšå †çš„å¤§å°è€Œå˜åŒ–ï¼Œåº”ç”¨åœ¨ä½¿ç”¨è¾ƒå¤§çš„å †æ—¶ä¹Ÿæ— éœ€æ‹…å¿ƒé€ æˆå¡é¡¿ã€‚</li><li>GC å®ç°ç»†èŠ‚ - è¯»å–å±éšœï¼š<ul><li>è¯»å–å±éšœæ˜¯åœ¨è¯»å–æ¯ä¸ªå¯¹è±¡å­—æ®µæ—¶æ‰€åšçš„å°‘é‡å·¥ä½œã€‚</li><li>å®ƒä»¬åœ¨ç¼–è¯‘å™¨ä¸­ç»è¿‡äº†ä¼˜åŒ–ï¼Œä½†å¯èƒ½ä¼šå‡æ…¢æŸäº›ç”¨ä¾‹çš„é€Ÿåº¦ã€‚</li></ul></li></ul><h3 id="å¾ªç¯ä¼˜åŒ–"><a href="#å¾ªç¯ä¼˜åŒ–" class="headerlink" title="å¾ªç¯ä¼˜åŒ–"></a>å¾ªç¯ä¼˜åŒ–</h3><p>åœ¨ Android 8.0 ç‰ˆæœ¬ä¸­ï¼ŒART é‡‡å–äº†å¤šç§å¾ªç¯ä¼˜åŒ–æªæ–½ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><ul><li>æ¶ˆé™¤è¾¹ç•Œæ£€æŸ¥<ul><li>é™æ€ï¼šåœ¨ç¼–è¯‘æ—¶è¯æ˜èŒƒå›´ä½äºè¾¹ç•Œå†…</li><li>åŠ¨æ€ï¼šè¿è¡Œæ—¶æµ‹è¯•ç¡®ä¿å¾ªç¯å§‹ç»ˆä½äºè¾¹ç•Œå†…ï¼ˆå¦åˆ™ä¸è¿›è¡Œä¼˜åŒ–ï¼‰</li></ul></li><li>æ¶ˆé™¤å½’çº³å˜é‡<ul><li>ç§»é™¤æ— ç”¨å½’çº³</li><li>ç”¨å°é—­å¼è¡¨è¾¾å¼æ›¿æ¢ä»…åœ¨å¾ªç¯åä½¿ç”¨çš„å½’çº³</li></ul></li><li>æ¶ˆé™¤å¾ªç¯ä¸»ä½“å†…çš„æ— ç”¨ä»£ç ï¼Œç§»é™¤æ•´ä¸ªæ­»å¾ªç¯</li><li>å¼ºåº¦é™ä½</li><li>å¾ªç¯è½¬æ¢ï¼šé€†è½¬ã€äº¤æ¢ã€æ‹†åˆ†ã€å±•å¼€ã€å•æ¨¡ç­‰</li><li>SIMDizationï¼ˆä¹Ÿç§°ä¸ºçŸ¢é‡åŒ–ï¼‰</li></ul><p>å¾ªç¯ä¼˜åŒ–å™¨ä½äº ART ç¼–è¯‘å™¨ä¸­ä¸€ä¸ªç‹¬ç«‹çš„ä¼˜åŒ–ç¯èŠ‚ä¸­ã€‚å¤§å¤šæ•°å¾ªç¯ä¼˜åŒ–ä¸å…¶ä»–æ–¹é¢çš„ä¼˜åŒ–å’Œç®€åŒ–ç±»ä¼¼ã€‚é‡‡ç”¨æ¯”å¹³æ—¶æ›´å¤æ‚çš„æ–¹å¼è¿›è¡Œä¸€äº›é‡å†™ CFG çš„ä¼˜åŒ–æ—¶ä¼šé¢ä¸´æŒ‘æˆ˜ï¼Œå› ä¸ºå¤§å¤šæ•° CFG å®ç”¨å·¥å…·ï¼ˆè¯·å‚é˜… nodes.hï¼‰éƒ½ä¾§é‡äºæ„å»ºè€Œä¸æ˜¯é‡å†™ CFGã€‚</p><h3 id="ç±»å±‚æ¬¡ç»“æ„åˆ†æ"><a href="#ç±»å±‚æ¬¡ç»“æ„åˆ†æ" class="headerlink" title="ç±»å±‚æ¬¡ç»“æ„åˆ†æ"></a>ç±»å±‚æ¬¡ç»“æ„åˆ†æ</h3><p>åœ¨ Android 8.0 ä¸­ï¼ŒART ä¼šä½¿ç”¨ç±»å±‚æ¬¡ç»“æ„åˆ†æ (CHA)ï¼Œè¿™æ˜¯ä¸€ç§ç¼–è¯‘å™¨ä¼˜åŒ–ï¼Œå¯æ ¹æ®å¯¹ç±»å±‚æ¬¡ç»“æ„çš„åˆ†æç»“æœï¼Œå°†è™šæ‹Ÿè°ƒç”¨å»è™šæ‹ŸåŒ–ä¸ºç›´æ¥è°ƒç”¨ã€‚è™šæ‹Ÿè°ƒç”¨ä»£ä»·é«˜æ˜‚ï¼Œå› ä¸ºå®ƒä»¬å›´ç»• vtable æŸ¥æ‰¾æ¥å®ç°ï¼Œä¸”ä¼šå ç”¨å‡ ä¸ªä¾èµ–è´Ÿè½½ã€‚å¦å¤–ï¼Œè™šæ‹Ÿè°ƒç”¨ä¹Ÿä¸èƒ½å†…åµŒã€‚</p><p>ä»¥ä¸‹æ˜¯å¯¹ç›¸å…³å¢å¼ºåŠŸèƒ½çš„æ€»ç»“ï¼š</p><ul><li>åŠ¨æ€å•ä¸€å®ç°æ–¹æ³•çŠ¶æ€æ›´æ–° - åœ¨ç±»å…³è”æ—¶é—´ç»“æŸæ—¶ï¼Œå¦‚æœ vtable å·²è¢«å¡«å……ï¼ŒART ä¼šæŒ‰æ¡ç›®å¯¹è¶…ç±»çš„ vtable è¿›è¡Œæ¯”è¾ƒã€‚</li><li>ç¼–è¯‘å™¨ä¼˜åŒ– - ç¼–è¯‘å™¨ä¼šåˆ©ç”¨æŸç§æ–¹æ³•çš„å•ä¸€å®ç°ä¿¡æ¯ã€‚å¦‚æœæ–¹æ³• A.foo è®¾ç½®äº†å•ä¸€å®ç°æ ‡è®°ï¼Œåˆ™ç¼–è¯‘å™¨ä¼šå°†è™šæ‹Ÿè°ƒç”¨å»è™šæ‹ŸåŒ–ä¸ºç›´æ¥è°ƒç”¨ï¼Œå¹¶å€Ÿæ­¤è¿›ä¸€æ­¥å°è¯•å†…åµŒç›´æ¥è°ƒç”¨ã€‚</li><li>å·²ç¼–è¯‘ä»£ç æ— æ•ˆ - å¦å¤–ï¼Œåœ¨ç±»å…³è”æ—¶é—´ç»“æŸæ—¶ï¼Œå¦‚æœå•ä¸€å®ç°ä¿¡æ¯å·²æ›´æ–°ï¼Œä¸”æ–¹æ³• A.foo ä¹‹å‰æ‹¥æœ‰å•ä¸€å®ç°ï¼Œä½†è¯¥çŠ¶æ€ç°å·²å˜ä¸ºæ— æ•ˆï¼Œåˆ™ä¾èµ–æ–¹æ³• A.foo æ‹¥æœ‰å•ä¸€å®ç°è¿™ä¸€å‡è®¾çš„æ‰€æœ‰å·²ç¼–è¯‘ä»£ç éƒ½éœ€è¦å˜ä¸ºæ— æ•ˆä»£ç ã€‚</li><li>å»ä¼˜åŒ– - å¯¹äºå †æ ˆä¸Šå·²ç¼–è¯‘çš„æœ‰æ•ˆä»£ç ï¼Œç³»ç»Ÿä¼šå¯åŠ¨å»ä¼˜åŒ–åŠŸèƒ½ï¼Œä»¥å¼ºåˆ¶ä½¿å·²ç¼–è¯‘æ— æ•ˆä»£ç è¿›å…¥è§£é‡Šå™¨æ¨¡å¼ï¼Œä»è€Œç¡®ä¿æ­£ç¡®æ€§ã€‚ç³»ç»Ÿä¼šé‡‡ç”¨ç»“åˆäº†åŒæ­¥å’Œå¼‚æ­¥å»ä¼˜åŒ–çš„å…¨æ–°å»ä¼˜åŒ–æœºåˆ¶ã€‚</li></ul><h3 id="oat-æ–‡ä»¶ä¸­çš„å†…åµŒç¼“å­˜"><a href="#oat-æ–‡ä»¶ä¸­çš„å†…åµŒç¼“å­˜" class="headerlink" title=".oat æ–‡ä»¶ä¸­çš„å†…åµŒç¼“å­˜"></a>.oat æ–‡ä»¶ä¸­çš„å†…åµŒç¼“å­˜</h3><p>ART ç°åœ¨é‡‡ç”¨å†…åµŒç¼“å­˜ï¼Œå¹¶å¯¹æœ‰è¶³å¤Ÿæ•°æ®å¯ç”¨çš„è°ƒç”¨ç«™ç‚¹è¿›è¡Œä¼˜åŒ–ã€‚å†…åµŒç¼“å­˜åŠŸèƒ½ä¼šå°†é¢å¤–çš„è¿è¡Œæ—¶ä¿¡æ¯è®°å½•åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼Œå¹¶åˆ©ç”¨è¿™ç±»ä¿¡æ¯å°†åŠ¨æ€ä¼˜åŒ–æ·»åŠ åˆ°é¢„å…ˆç¼–è¯‘ä¸­ã€‚</p><h3 id="Dexlayout"><a href="#Dexlayout" class="headerlink" title="Dexlayout"></a>Dexlayout</h3><p>Dexlayout æ˜¯åœ¨ Android 8.0 ä¸­å¼•å…¥çš„ä¸€ä¸ªåº“ï¼Œç”¨äºåˆ†æ dex æ–‡ä»¶ï¼Œå¹¶æ ¹æ®é…ç½®æ–‡ä»¶å¯¹å…¶è¿›è¡Œé‡æ–°æ’åºã€‚Dexlayout æ—¨åœ¨ä½¿ç”¨è¿è¡Œæ—¶é…ç½®ä¿¡æ¯ï¼Œåœ¨è®¾å¤‡çš„ç©ºé—²ç»´æŠ¤ç¼–è¯‘æœŸé—´å¯¹ dex æ–‡ä»¶çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œé‡æ–°æ’åºã€‚é€šè¿‡å°†ç»å¸¸ä¸€èµ·è®¿é—®çš„éƒ¨åˆ† dex æ–‡ä»¶é›†ä¸­åœ¨ä¸€èµ·ï¼Œç¨‹åºå¯ä»¥å› æ”¹è¿›æ–‡ä»¶ä½ç½®è€Œæ‹¥æœ‰æ›´å¥½çš„å†…å­˜è®¿é—®æ¨¡å¼ï¼Œä»è€ŒèŠ‚çœ RAM å¹¶ç¼©çŸ­å¯åŠ¨æ—¶é—´ã€‚</p><p>ç”±äºé…ç½®æ–‡ä»¶ä¿¡æ¯ç›®å‰ä»…åœ¨è¿è¡Œåº”ç”¨åå¯ç”¨ï¼Œå› æ­¤ç³»ç»Ÿä¼šåœ¨ç©ºé—²ç»´æŠ¤æœŸé—´å°† dexlayout é›†æˆåˆ° dex2oat çš„è®¾å¤‡ç¼–è¯‘ä¸­ã€‚</p><h3 id="Dex-ç¼“å­˜ç§»é™¤"><a href="#Dex-ç¼“å­˜ç§»é™¤" class="headerlink" title="Dex ç¼“å­˜ç§»é™¤"></a>Dex ç¼“å­˜ç§»é™¤</h3><p>åœ¨ Android 7.0 åŠæ›´ä½ç‰ˆæœ¬ä¸­ï¼ŒDexCache å¯¹è±¡æ‹¥æœ‰å››ä¸ªå¤§å‹æ•°ç»„ï¼Œä¸ DexFile ä¸­ç‰¹å®šå…ƒç´ çš„æ•°é‡æˆæ­£æ¯”ï¼Œå³ï¼š</p><ul><li>å­—ç¬¦ä¸²ï¼ˆæ¯ä¸ª DexFile::StringId ä¸€ä¸ªå¼•ç”¨ï¼‰ï¼Œ</li><li>ç±»å‹ï¼ˆæ¯ä¸ª DexFile::TypeId ä¸€ä¸ªå¼•ç”¨ï¼‰ï¼Œ</li><li>æ–¹æ³•ï¼ˆæ¯ä¸ª DexFile::MethodId ä¸€ä¸ªåŸç”ŸæŒ‡é’ˆï¼‰ï¼Œ</li><li>å­—æ®µï¼ˆæ¯ä¸ª DexFile::FieldId ä¸€ä¸ªåŸç”ŸæŒ‡é’ˆï¼‰ã€‚</li></ul><p>è¿™äº›æ•°ç»„ç”¨äºå¿«é€Ÿæ£€ç´¢æˆ‘ä»¬ä»¥å‰è§£æçš„å¯¹è±¡ã€‚åœ¨ Android 8.0 ä¸­ï¼Œé™¤æ–¹æ³•æ•°ç»„å¤–ï¼Œæ‰€æœ‰æ•°ç»„éƒ½å·²ç§»é™¤ã€‚</p><h3 id="è§£é‡Šå™¨æ€§èƒ½"><a href="#è§£é‡Šå™¨æ€§èƒ½" class="headerlink" title="è§£é‡Šå™¨æ€§èƒ½"></a>è§£é‡Šå™¨æ€§èƒ½</h3><p>åœ¨ Android 7.0 ç‰ˆæœ¬ä¸­ï¼Œé€šè¿‡å¼•å…¥ mterpï¼ˆä¸€ç§è§£é‡Šå™¨ï¼Œå…·æœ‰ä»¥æ±‡ç¼–è¯­è¨€ç¼–å†™çš„æ ¸å¿ƒæå–/è§£ç /è§£é‡Šæœºåˆ¶ï¼‰ï¼Œè§£é‡Šå™¨æ€§èƒ½å¾—ä»¥æ˜¾è‘—æå‡ã€‚Mterp æ¨¡ä»¿äº†å¿«é€Ÿ Dalvik è§£é‡Šå™¨ï¼Œå¹¶æ”¯æŒ armã€arm64ã€x86ã€x86_64ã€mips å’Œ mips64ã€‚å¯¹äºè®¡ç®—ä»£ç è€Œè¨€ï¼ŒART çš„ Mterp å¤§è‡´ç›¸å½“äº Dalvik çš„å¿«é€Ÿè§£é‡Šå™¨ã€‚ä¸è¿‡ï¼Œæœ‰æ—¶å€™ï¼Œå®ƒçš„é€Ÿåº¦å¯èƒ½ä¼šæ˜¾è‘—å˜æ…¢ï¼Œç”šè‡³æ€¥å‰§å˜æ…¢ï¼š</p><ol><li>è°ƒç”¨æ€§èƒ½ã€‚</li><li>å­—ç¬¦ä¸²æ“ä½œå’Œ Dalvik ä¸­å…¶ä»–è¢«è§†ä¸ºå†…åµŒå‡½æ•°çš„é«˜é¢‘ç”¨æˆ·æ–¹æ³•ã€‚</li><li>å †æ ˆå†…å­˜ä½¿ç”¨é‡è¾ƒé«˜ã€‚</li></ol><p>Android 8.0 è§£å†³äº†è¿™äº›é—®é¢˜ã€‚</p><h3 id="è¯¦ç»†äº†è§£å†…åµŒ"><a href="#è¯¦ç»†äº†è§£å†…åµŒ" class="headerlink" title="è¯¦ç»†äº†è§£å†…åµŒ"></a>è¯¦ç»†äº†è§£å†…åµŒ</h3><p>ä» Android 6.0 å¼€å§‹ï¼ŒART å¯ä»¥å†…åµŒåŒä¸€ä¸ª dex æ–‡ä»¶ä¸­çš„ä»»ä½•è°ƒç”¨ï¼Œä½†åªèƒ½å†…åµŒæ¥è‡ªå…¶ä»– dex æ–‡ä»¶çš„å¶æ–¹æ³•ã€‚æ­¤é¡¹é™åˆ¶å…·æœ‰ä»¥ä¸‹ä¸¤ä¸ªåŸå› ï¼š</p><ol><li>ä»å…¶ä»– dex æ–‡ä»¶è¿›è¡Œå†…åµŒè¦æ±‚ä½¿ç”¨è¯¥ dex æ–‡ä»¶çš„ dex ç¼“å­˜ï¼Œè¿™ä¸åŒä¸€ä¸ª dex æ–‡ä»¶å†…åµŒï¼ˆåªéœ€é‡å¤ä½¿ç”¨è°ƒç”¨æ–¹çš„ dex ç¼“å­˜ï¼‰æœ‰æ‰€ä¸åŒã€‚å·²ç¼–è¯‘ä»£ç ä¸­éœ€è¦å…·æœ‰ dex ç¼“å­˜ï¼Œä»¥ä¾¿æ‰§è¡Œä¸€ç³»åˆ—æŒ‡ä»¤ï¼Œä¾‹å¦‚é™æ€è°ƒç”¨ã€å­—ç¬¦ä¸²åŠ è½½æˆ–ç±»åŠ è½½ã€‚</li><li>å †æ ˆæ˜ å°„åªå¯¹å½“å‰ dex æ–‡ä»¶ä¸­çš„æ–¹æ³•ç´¢å¼•è¿›è¡Œç¼–ç ã€‚</li></ol><p>ä¸ºäº†åº”å¯¹è¿™äº›é™åˆ¶ï¼ŒAndroid 8.0 åšå‡ºäº†ä»¥ä¸‹æ”¹è¿›ï¼š</p><ol><li>ä»å·²ç¼–è¯‘ä»£ç ä¸­ç§»é™¤ dex ç¼“å­˜è®¿é—®ï¼ˆå¦è¯·å‚é˜…â€œDex ç¼“å­˜ç§»é™¤â€éƒ¨åˆ†ï¼‰</li><li>æ‰©å±•å †æ ˆæ˜ å°„ç¼–ç ã€‚</li></ol><h3 id="åŒæ­¥æ–¹é¢çš„æ”¹è¿›"><a href="#åŒæ­¥æ–¹é¢çš„æ”¹è¿›" class="headerlink" title="åŒæ­¥æ–¹é¢çš„æ”¹è¿›"></a>åŒæ­¥æ–¹é¢çš„æ”¹è¿›</h3><p>ART å›¢é˜Ÿè°ƒæ•´äº† MonitorEnter/MonitorExit ä»£ç è·¯å¾„ï¼Œå¹¶å‡å°‘äº†æˆ‘ä»¬å¯¹ ARMv8 ä¸Šä¼ ç»Ÿå†…å­˜å±éšœçš„ä¾èµ–ï¼Œå°½å¯èƒ½å°†å…¶æ›¿æ¢ä¸ºè¾ƒæ–°çš„ï¼ˆè·å–/é‡Šæ”¾ï¼‰æŒ‡ä»¤ã€‚</p><h3 id="æ›´å¿«é€Ÿçš„åŸç”Ÿæ–¹æ³•"><a href="#æ›´å¿«é€Ÿçš„åŸç”Ÿæ–¹æ³•" class="headerlink" title="æ›´å¿«é€Ÿçš„åŸç”Ÿæ–¹æ³•"></a>æ›´å¿«é€Ÿçš„åŸç”Ÿæ–¹æ³•</h3><p>ä½¿ç”¨ <a href="https://android.googlesource.com/platform/libcore/+/master/dalvik/src/main/java/dalvik/annotation/optimization/FastNative.java"><code>@FastNative</code></a> å’Œ <a href="https://android.googlesource.com/platform/libcore/+/master/dalvik/src/main/java/dalvik/annotation/optimization/CriticalNative.java"><code>@CriticalNative</code></a> æ³¨è§£å¯ä»¥æ›´å¿«é€Ÿåœ°å¯¹ Java åŸç”Ÿæ¥å£ (JNI) è¿›è¡ŒåŸç”Ÿè°ƒç”¨ã€‚è¿™äº›å†…ç½®çš„ ART è¿è¡Œæ—¶ä¼˜åŒ–å¯ä»¥åŠ å¿« JNI è½¬æ¢é€Ÿåº¦ï¼Œå¹¶å–ä»£äº†ç°å·²å¼ƒç”¨çš„ !bang JNI æ ‡è®°ã€‚è¿™äº›æ³¨è§£å¯¹éåŸç”Ÿæ–¹æ³•æ²¡æœ‰ä»»ä½•å½±å“ï¼Œå¹¶ä¸”ä»…é€‚ç”¨äº <code>bootclasspath</code> ä¸Šçš„å¹³å° Java è¯­è¨€ä»£ç ï¼ˆæ—  Play å•†åº—æ›´æ–°ï¼‰ã€‚</p><p><code>@FastNative</code> æ³¨è§£æ”¯æŒéé™æ€æ–¹æ³•ã€‚å¦‚æœæŸç§æ–¹æ³•å°† <code>jobject</code> ä½œä¸ºå‚æ•°æˆ–è¿”å›å€¼è¿›è¡Œè®¿é—®ï¼Œè¯·ä½¿ç”¨æ­¤æ³¨è§£ã€‚</p><p>åˆ©ç”¨ <code>@CriticalNative</code> æ³¨è§£ï¼Œå¯æ›´å¿«é€Ÿåœ°è¿è¡ŒåŸç”Ÿæ–¹æ³•ï¼Œä½†å­˜åœ¨ä»¥ä¸‹é™åˆ¶ï¼š</p><ul><li>æ–¹æ³•å¿…é¡»æ˜¯é™æ€æ–¹æ³• - æ²¡æœ‰å‚æ•°ã€è¿”å›å€¼æˆ–éšå¼ <code>this</code> çš„å¯¹è±¡ã€‚</li><li>ä»…å°†åŸºå…ƒç±»å‹ä¼ é€’ç»™åŸç”Ÿæ–¹æ³•ã€‚</li><li>åŸç”Ÿæ–¹æ³•åœ¨å…¶å‡½æ•°å®šä¹‰ä¸­ä¸ä½¿ç”¨ <code>JNIEnv</code> å’Œ <code>jclass</code> å‚æ•°ã€‚</li><li>æ–¹æ³•å¿…é¡»ä½¿ç”¨ <code>RegisterNatives</code> è¿›è¡Œæ³¨å†Œï¼Œè€Œä¸æ˜¯ä¾é åŠ¨æ€ JNI é“¾æ¥ã€‚</li></ul><p><code>@FastNative</code> å’Œ <code>@CriticalNative</code> æ³¨è§£åœ¨æ‰§è¡ŒåŸç”Ÿæ–¹æ³•æ—¶ä¼šåœç”¨åƒåœ¾å›æ”¶ã€‚ä¸è¦ä¸é•¿æ—¶é—´è¿è¡Œçš„æ–¹æ³•ä¸€èµ·ä½¿ç”¨ï¼ŒåŒ…æ‹¬é€šå¸¸å¾ˆå¿«ä½†ä¸€èˆ¬ä¸å—é™åˆ¶çš„æ–¹æ³•ã€‚</p><p>åœé¡¿åƒåœ¾å›æ”¶å¯èƒ½ä¼šå¯¼è‡´æ­»é”ã€‚å¦‚æœé”å°šæœªå¾—åˆ°æœ¬åœ°é‡Šæ”¾ï¼ˆå³å°šæœªè¿”å›å—ç®¡ç†ä»£ç ï¼‰ï¼Œè¯·å‹¿åœ¨åŸç”Ÿå¿«é€Ÿè°ƒç”¨æœŸé—´è·å–é”ã€‚æ­¤è¦æ±‚ä¸é€‚ç”¨äºå¸¸è§„çš„ JNI è°ƒç”¨ï¼Œå› ä¸º ART å°†æ­£æ‰§è¡Œçš„åŸç”Ÿä»£ç è§†ä¸ºå·²æš‚åœçš„çŠ¶æ€ã€‚</p><p><code>@FastNative</code> å¯ä»¥ä½¿åŸç”Ÿæ–¹æ³•çš„æ€§èƒ½æå‡é«˜è¾¾ 3 å€ï¼Œè€Œ <code>@CriticalNative</code> å¯ä»¥ä½¿åŸç”Ÿæ–¹æ³•çš„æ€§èƒ½æå‡é«˜è¾¾ 5 å€ã€‚ä¾‹å¦‚ï¼Œåœ¨ Nexus 6P è®¾å¤‡ä¸Šæµ‹é‡çš„ JNI è½¬æ¢å¦‚ä¸‹ï¼š</p><table><thead><tr><th align="left">Java åŸç”Ÿæ¥å£ (JNI) è°ƒç”¨</th><th align="left">æ‰§è¡Œæ—¶é—´ï¼ˆä»¥çº³ç§’è®¡ï¼‰</th></tr></thead><tbody><tr><td align="left">å¸¸è§„ JNI</td><td align="left">115</td></tr><tr><td align="left">!bang JNI</td><td align="left">60</td></tr><tr><td align="left"><code>@FastNative</code></td><td align="left">35</td></tr><tr><td align="left"><code>@CriticalNative</code></td><td align="left">25</td></tr></tbody></table><h2 id="è°ƒè¯•-ART-åƒåœ¾å›æ”¶"><a href="#è°ƒè¯•-ART-åƒåœ¾å›æ”¶" class="headerlink" title="è°ƒè¯• ART åƒåœ¾å›æ”¶"></a>è°ƒè¯• ART åƒåœ¾å›æ”¶</h2><p>æœ¬é¡µä»‹ç»äº†å¦‚ä½•è°ƒè¯• Android è¿è¡Œæ—¶ (ART) åƒåœ¾å›æ”¶ (GC) çš„æ­£ç¡®æ€§å’Œæ€§èƒ½é—®é¢˜ã€‚æ­¤å¤–ï¼Œè¿˜è¯´æ˜äº†å¦‚ä½•ä½¿ç”¨ GC éªŒè¯é€‰é¡¹ã€ç¡®å®šåº”å¯¹ GC éªŒè¯å¤±è´¥çš„è§£å†³æ–¹æ¡ˆï¼Œä»¥åŠè¡¡é‡å¹¶è§£å†³ GC æ€§èƒ½é—®é¢˜ã€‚</p><p>å¦‚éœ€ä½¿ç”¨ ARTï¼Œè¯·å‚é˜…æ­¤ <span class="exturl" data-url="aHR0cHM6Ly9zb3VyY2UuYW5kcm9pZC5jb20vZGV2aWNlcy90ZWNoL2RhbHZpaz9obD16aC1jbg==">ART å’Œ Dalvik<i class="fa fa-external-link-alt"></i></span> éƒ¨åˆ†ä¸­ä»‹ç»çš„å†…å®¹ï¼Œä»¥åŠ <span class="exturl" data-url="aHR0cHM6Ly9zb3VyY2UuYW5kcm9pZC5jb20vZGV2aWNlcy90ZWNoL2RhbHZpay9kZXgtZm9ybWF0P2hsPXpoLWNu">Dalvik å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼<i class="fa fa-external-link-alt"></i></span>ã€‚å¦‚éœ€è·å¾—éªŒè¯åº”ç”¨è¡Œä¸ºæ–¹é¢çš„å…¶ä»–å¸®åŠ©ï¼Œè¯·å‚é˜…<span class="exturl" data-url="aHR0cDovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9ndWlkZS9wcmFjdGljZXMvdmVyaWZ5aW5nLWFwcHMtYXJ0P2hsPXpoLWNu">åœ¨ Android Runtime (ART) ä¸ŠéªŒè¯åº”ç”¨è¡Œä¸º<i class="fa fa-external-link-alt"></i></span>ã€‚</p><h3 id="ART-GC-æ¦‚è§ˆ"><a href="#ART-GC-æ¦‚è§ˆ" class="headerlink" title="ART GC æ¦‚è§ˆ"></a>ART GC æ¦‚è§ˆ</h3><p>ART æœ‰å¤šä¸ªä¸åŒçš„ GC æ–¹æ¡ˆï¼Œæ¶‰åŠè¿è¡Œä¸åŒçš„åƒåœ¾å›æ”¶å™¨ã€‚ä» Android 8 (Oreo) å¼€å§‹ï¼Œé»˜è®¤æ–¹æ¡ˆæ˜¯å¹¶å‘å¤åˆ¶ (CC)ã€‚å¦ä¸€ä¸ª GC æ–¹æ¡ˆæ˜¯å¹¶å‘æ ‡è®°æ¸…é™¤ (CMS)ã€‚</p><p>å¹¶å‘å¤åˆ¶ GC çš„ä¸€äº›ä¸»è¦ç‰¹æ€§åŒ…æ‹¬ï¼š</p><ul><li>CC æ”¯æŒä½¿ç”¨åä¸ºâ€œRegionTLABâ€çš„è§¦ç¢°æŒ‡é’ˆåˆ†é…å™¨ã€‚æ­¤åˆ†é…å™¨å¯ä»¥å‘æ¯ä¸ªåº”ç”¨çº¿ç¨‹åˆ†é…ä¸€ä¸ªçº¿ç¨‹æœ¬åœ°åˆ†é…ç¼“å†²åŒº (TLAB)ï¼Œè¿™æ ·ï¼Œåº”ç”¨çº¿ç¨‹åªéœ€è§¦ç¢°â€œæ ˆé¡¶â€æŒ‡é’ˆï¼Œè€Œæ— éœ€ä»»ä½•åŒæ­¥æ“ä½œï¼Œå³å¯ä»å…¶ TLAB ä¸­å°†å¯¹è±¡åˆ†é…å‡ºå»ã€‚</li><li>CC é€šè¿‡åœ¨ä¸æš‚åœåº”ç”¨çº¿ç¨‹çš„æƒ…å†µä¸‹å¹¶å‘å¤åˆ¶å¯¹è±¡æ¥æ‰§è¡Œå †ç¢ç‰‡æ•´ç†ã€‚è¿™æ˜¯åœ¨è¯»å–å±éšœçš„å¸®åŠ©ä¸‹å®ç°çš„ï¼Œè¯»å–å±éšœä¼šæ‹¦æˆªæ¥è‡ªå †çš„å¼•ç”¨è¯»å–ï¼Œæ— éœ€åº”ç”¨å¼€å‘è€…è¿›è¡Œä»»ä½•å¹²é¢„ã€‚</li><li>GC åªæœ‰ä¸€æ¬¡å¾ˆçŸ­çš„æš‚åœï¼Œå¯¹äºå †å¤§å°è€Œè¨€ï¼Œè¯¥æ¬¡æš‚åœåœ¨æ—¶é—´ä¸Šæ˜¯ä¸€ä¸ªå¸¸é‡ã€‚</li><li>åœ¨ Android 10 åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼ŒCC ä¼šæ‰©å±•ä¸ºåˆ†ä»£ GCã€‚å®ƒæ”¯æŒè½»æ¾å›æ”¶å­˜ç•™æœŸè¾ƒçŸ­çš„å¯¹è±¡ï¼Œè¿™ç±»å¯¹è±¡é€šå¸¸å¾ˆå¿«ä¾¿ä¼šæ— æ³•è®¿é—®ã€‚è¿™æœ‰åŠ©äºæé«˜ GC ååé‡ï¼Œå¹¶æ˜¾è‘—å»¶è¿Ÿæ‰§è¡Œå…¨å † GC çš„éœ€è¦ã€‚</li></ul><p>ART ä»ç„¶æ”¯æŒçš„å¦ä¸€ä¸ª GC æ–¹æ¡ˆæ˜¯ CMSã€‚æ­¤ GC æ–¹æ¡ˆè¿˜æ”¯æŒå‹ç¼©ï¼Œä½†ä¸æ˜¯ä»¥å¹¶å‘æ–¹å¼ã€‚åœ¨åº”ç”¨è¿›å…¥åå°ä¹‹å‰ï¼Œå®ƒä¼šé¿å…æ‰§è¡Œå‹ç¼©ï¼Œåº”ç”¨è¿›å…¥åå°åï¼Œå®ƒä¼šæš‚åœåº”ç”¨çº¿ç¨‹ä»¥æ‰§è¡Œå‹ç¼©ã€‚å¦‚æœå¯¹è±¡åˆ†é…å› ç¢ç‰‡è€Œå¤±è´¥ï¼Œä¹Ÿå¿…é¡»æ‰§è¡Œå‹ç¼©æ“ä½œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåº”ç”¨å¯èƒ½ä¼šåœ¨ä¸€æ®µæ—¶é—´å†…æ²¡æœ‰å“åº”ã€‚</p><p>ç”±äº CMS å¾ˆå°‘è¿›è¡Œå‹ç¼©ï¼Œå› æ­¤ç©ºé—²å¯¹è±¡å¯èƒ½ä¼šä¸è¿ç»­ã€‚CMS ä½¿ç”¨ä¸€ä¸ªåä¸º RosAlloc çš„åŸºäºç©ºé—²åˆ—è¡¨çš„åˆ†é…å™¨ã€‚ä¸ RegionTLAB ç›¸æ¯”ï¼Œè¯¥åˆ†é…å™¨çš„åˆ†é…æˆæœ¬è¾ƒé«˜ã€‚æœ€åï¼Œç”±äºå†…éƒ¨ç¢ç‰‡ï¼ŒJava å †çš„ CMS å†…å­˜ç”¨é‡å¯èƒ½ä¼šé«˜äº CC å†…å­˜ç”¨é‡ã€‚</p><h3 id="GC-éªŒè¯å’Œæ€§èƒ½é€‰é¡¹"><a href="#GC-éªŒè¯å’Œæ€§èƒ½é€‰é¡¹" class="headerlink" title="GC éªŒè¯å’Œæ€§èƒ½é€‰é¡¹"></a>GC éªŒè¯å’Œæ€§èƒ½é€‰é¡¹</h3><h4 id="æ›´æ”¹-GC-ç±»å‹"><a href="#æ›´æ”¹-GC-ç±»å‹" class="headerlink" title="æ›´æ”¹ GC ç±»å‹"></a>æ›´æ”¹ GC ç±»å‹</h4><p>åŸå§‹è®¾å¤‡åˆ¶é€ å•† (OEM) å¯ä»¥æ›´æ”¹ GC ç±»å‹ã€‚å¦‚éœ€è¿›è¡Œæ›´æ”¹ï¼Œéœ€è¦åœ¨æ„å»ºæ—¶è®¾ç½® <code>ART_USE_READ_BARRIER</code> ç¯å¢ƒå˜é‡ã€‚é»˜è®¤å€¼ä¸º trueï¼Œè¿™ä¼šå¯ç”¨ CC å›æ”¶å™¨ï¼Œå› ä¸ºè¯¥å›æ”¶å™¨ä½¿ç”¨è¯»å–å±éšœã€‚å¯¹äº CMSï¼Œæ­¤å˜é‡åº”æ˜ç¡®è®¾ç½®ä¸º falseã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨ Android 10 åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼ŒCC å›æ”¶å™¨åœ¨åˆ†ä»£æ¨¡å¼ä¸‹è¿è¡Œã€‚å¦‚éœ€åœç”¨åˆ†ä»£æ¨¡å¼ï¼Œå¯ä»¥ä½¿ç”¨ <code>-Xgc:nogenerational_cc</code> å‘½ä»¤è¡Œå‚æ•°ã€‚æˆ–è€…ï¼Œä¹Ÿå¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼è®¾ç½®ç³»ç»Ÿå±æ€§ï¼š</p><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">adb</span> shell setprop dalvik.vm.gc<span class="keyword">type</span> nogenerational_cc</span><br></pre></td></tr></table></figure><p>CMS å›æ”¶å™¨å§‹ç»ˆåœ¨åˆ†ä»£æ¨¡å¼ä¸‹è¿è¡Œã€‚</p><h4 id="éªŒè¯å †"><a href="#éªŒè¯å †" class="headerlink" title="éªŒè¯å †"></a>éªŒè¯å †</h4><p>å †éªŒè¯å¯èƒ½æ˜¯è°ƒè¯• GC ç›¸å…³é”™è¯¯æˆ–å †æŸåçš„æœ€æœ‰ç”¨çš„ GC é€‰é¡¹ã€‚å¯ç”¨å †éªŒè¯ä¼šä½¿ GC åœ¨åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸­åœ¨å‡ ä¸ªç‚¹æ£€æŸ¥å †çš„æ­£ç¡®æ€§ã€‚å †éªŒè¯çš„é€‰é¡¹ä¸æ›´æ”¹ GC ç±»å‹çš„ç›¸åŒã€‚å¯ç”¨åï¼Œå †éªŒè¯æµç¨‹ä¼šéªŒè¯æ ¹ï¼Œå¹¶ç¡®ä¿å¯è®¿é—®å¯¹è±¡ä»…å¼•ç”¨äº†å…¶ä»–å¯è®¿é—®å¯¹è±¡ã€‚æ‚¨å¯ä»¥é€šè¿‡ä¼ å…¥ä»¥ä¸‹ <code>-Xgc</code> å€¼æ¥å¯ç”¨ GC éªŒè¯ï¼š</p><ul><li>å¯ç”¨åï¼Œ<code>[no]preverify</code> å°†åœ¨å¯åŠ¨ GC ä¹‹å‰æ‰§è¡Œå †éªŒè¯ã€‚</li><li>å¯ç”¨åï¼Œ<code>[no]presweepingverify</code> å°†åœ¨å¼€å§‹åƒåœ¾å›æ”¶å™¨æ¸…é™¤è¿‡ç¨‹ä¹‹å‰æ‰§è¡Œå †éªŒè¯ã€‚</li><li>å¯ç”¨åï¼Œ<code>[no]postverify</code> å°†åœ¨ GC å®Œæˆæ¸…é™¤ä¹‹åæ‰§è¡Œå †éªŒè¯ã€‚</li><li><code>[no]preverify_rosalloc</code>ã€<code>[no]postsweepingverify_rosalloc</code> å’Œ <code>[no]postverify_rosalloc</code> æ˜¯é™„åŠ  GC é€‰é¡¹ï¼Œä»…éªŒè¯ RosAlloc å†…éƒ¨è®°å½•çš„çŠ¶æ€ã€‚å› æ­¤ï¼Œå®ƒä»¬ä»…é€‚ç”¨äºä½¿ç”¨ RosAlloc åˆ†é…å™¨çš„ CMS å›æ”¶å™¨ã€‚éªŒè¯çš„ä¸»è¦å†…å®¹æ˜¯ï¼Œé­”æ³•å€¼æ˜¯å¦ä¸é¢„æœŸå¸¸é‡åŒ¹é…ï¼Œä»¥åŠå¯ç”¨å†…å­˜å—æ˜¯å¦å·²å…¨éƒ¨åœ¨ <code>free_page_runs_</code> æ˜ å°„ä¸­æ³¨å†Œã€‚</li></ul><h3 id="æ€§èƒ½"><a href="#æ€§èƒ½" class="headerlink" title="æ€§èƒ½"></a>æ€§èƒ½</h3><p>è¡¡é‡ GC æ€§èƒ½çš„å·¥å…·ä¸»è¦æœ‰ä¸¤ä¸ªï¼šGC æ—¶åºè½¬å‚¨å’Œ Systraceã€‚Systrace è¿˜æœ‰ä¸€ä¸ªé«˜çº§ç‰ˆæœ¬ï¼Œç§°ä¸º Perfettoã€‚å¦‚éœ€è¡¡é‡ GC æ€§èƒ½é—®é¢˜ï¼Œç›´è§‚çš„æ–¹æ³•æ˜¯ä½¿ç”¨ Systrace å’Œ Perfetto ç¡®å®šå“ªäº› GC ä¼šå¯¼è‡´é•¿æ—¶é—´æš‚åœæˆ–æŠ¢å åº”ç”¨çº¿ç¨‹ã€‚å°½ç®¡ ART GC ç»è¿‡å¤šå¹´å‘å±•å·²å¾—åˆ°æ˜¾è‘—æ”¹è¿›ï¼Œä½†ä¸è‰¯æ›´æ”¹å™¨è¡Œä¸ºï¼ˆä¾‹å¦‚è¿‡åº¦åˆ†é…ï¼‰ä»ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜</p><h4 id="å›æ”¶ç­–ç•¥"><a href="#å›æ”¶ç­–ç•¥" class="headerlink" title="å›æ”¶ç­–ç•¥"></a>å›æ”¶ç­–ç•¥</h4><p>CC GC é€šè¿‡è¿è¡Œæ–°ç”Ÿä»£ GC æˆ–å…¨å † GC æ¥å›æ”¶åƒåœ¾ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œæ–°ç”Ÿä»£ GC çš„è¿è¡Œé¢‘ç‡æ›´é«˜ã€‚GC ä¼šä¸€ç›´æ‰§è¡Œæ–°ç”Ÿä»£ CC å›æ”¶ï¼Œç›´åˆ°åˆšç»“æŸçš„å›æ”¶å‘¨æœŸçš„ååé‡ï¼ˆè®¡ç®—å…¬å¼æ˜¯ï¼šé‡Šæ”¾çš„å­—èŠ‚æ•°é™¤ä»¥ GC æŒç»­ç§’æ•°ï¼‰å°äºå…¨å † CC å›æ”¶çš„å¹³å‡ååé‡ã€‚å‘ç”Ÿè¿™ç§æƒ…å†µæ—¶ï¼Œå°†ä¸ºä¸‹ä¸€æ¬¡å¹¶å‘ GC é€‰æ‹©å…¨å † CCï¼ˆè€Œä¸æ˜¯æ–°ç”Ÿä»£ CCï¼‰ã€‚å…¨å †å›æ”¶å®Œæˆåï¼Œä¸‹ä¸€æ¬¡ GC å°†åˆ‡æ¢å›æ–°ç”Ÿä»£ CCã€‚æ–°ç”Ÿä»£ CC åœ¨å®Œæˆåä¸ä¼šè°ƒæ•´å †å ç”¨ç©ºé—´é™åˆ¶ï¼Œè¿™æ˜¯æ­¤ç­–ç•¥å‘æŒ¥ä½œç”¨çš„ä¸€ä¸ªå…³é”®å› ç´ ã€‚è¿™ä½¿å¾—æ–°ç”Ÿä»£ CC è¿è¡Œå¾—è¶Šæ¥è¶Šé¢‘ç¹ï¼Œç›´åˆ°ååé‡ä½äºå…¨å † CCï¼Œæœ€ç»ˆå¯¼è‡´å †å¢å¤§ã€‚</p><h4 id="ä½¿ç”¨-SIGQUIT-è·å–-GC-æ€§èƒ½ä¿¡æ¯"><a href="#ä½¿ç”¨-SIGQUIT-è·å–-GC-æ€§èƒ½ä¿¡æ¯" class="headerlink" title="ä½¿ç”¨ SIGQUIT è·å– GC æ€§èƒ½ä¿¡æ¯"></a>ä½¿ç”¨ SIGQUIT è·å– GC æ€§èƒ½ä¿¡æ¯</h4><p>å¦‚éœ€è·å¾—åº”ç”¨çš„ GC æ€§èƒ½æ—¶åºï¼Œè¯·å°† <code>SIGQUIT</code> å‘é€åˆ°å·²åœ¨è¿è¡Œçš„åº”ç”¨ï¼Œæˆ–è€…åœ¨å¯åŠ¨å‘½ä»¤è¡Œç¨‹åºæ—¶å°† <code>-XX:DumpGCPerformanceOnShutdown</code> ä¼ é€’ç»™ <code>dalvikvm</code>ã€‚å½“åº”ç”¨è·å¾— ANR è¯·æ±‚ä¿¡å· (<code>SIGQUIT</code>) æ—¶ï¼Œä¼šè½¬å‚¨ä¸å…¶é”å®šã€çº¿ç¨‹å †æ ˆå’Œ GC æ€§èƒ½ç›¸å…³çš„ä¿¡æ¯ã€‚</p><p>å¦‚éœ€è·å¾— GC æ—¶åºè½¬å‚¨ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell <span class="keyword">kill</span> -<span class="keyword">S</span> <span class="keyword">QUIT</span> PID</span><br></pre></td></tr></table></figure><p>è¿™ä¼šåœ¨ <code>/data/anr/</code> ä¸­åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼ˆåç§°ä¸­ä¼šåŒ…å«æ—¥æœŸå’Œæ—¶é—´ï¼Œä¾‹å¦‚ anr_2020-07-13-19-23-39-817ï¼‰ã€‚æ­¤æ–‡ä»¶åŒ…å«ä¸€äº› ANR è½¬å‚¨ä¿¡æ¯ä»¥åŠ GC æ—¶åºã€‚æ‚¨å¯ä»¥é€šè¿‡æœç´¢â€œDumping cumulative Gc timingsâ€ï¼ˆè½¬å‚¨ç´¯è®¡ GC æ—¶åºï¼‰æ¥ç¡®å®š GC æ—¶åºã€‚è¿™äº›æ—¶åºä¼šæ˜¾ç¤ºä¸€äº›éœ€è¦å…³æ³¨çš„å†…å®¹ï¼ŒåŒ…æ‹¬æ¯ä¸ª GC ç±»å‹çš„é˜¶æ®µå’Œæš‚åœæ—¶é—´çš„ç›´æ–¹å›¾ä¿¡æ¯ã€‚æš‚åœä¿¡æ¯é€šå¸¸æ¯”è¾ƒé‡è¦ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">young</span> concurrent copying paused:Sum: <span class="number">5</span>.<span class="number">491</span>ms <span class="number">99</span>% C.I. <span class="number">1</span>.<span class="number">464</span>ms-<span class="number">2</span>.<span class="number">133</span>ms Avg: <span class="number">1</span>.<span class="number">830</span>ms Max: <span class="number">2</span>.<span class="number">133</span>ms</span><br></pre></td></tr></table></figure><p>æœ¬ç¤ºä¾‹ä¸­æ˜¾ç¤ºå¹³å‡æš‚åœæ—¶é—´ä¸º 1.83 æ¯«ç§’ï¼Œè¯¥å€¼åº”è¯¥è¶³å¤Ÿä½ï¼Œåœ¨å¤§å¤šæ•°åº”ç”¨ä¸­ä¸ä¼šå¯¼è‡´ä¸¢å¸§ï¼Œå› æ­¤æ‚¨ä¸å¿…æ‹…å¿ƒã€‚</p><p>éœ€è¦å…³æ³¨çš„å¦ä¸€ä¸ªæ–¹é¢æ˜¯æŒ‚èµ·æ—¶é—´ï¼ŒæŒ‚èµ·æ—¶é—´æµ‹é‡åœ¨ GC è¦æ±‚æŸä¸ªçº¿ç¨‹æŒ‚èµ·åï¼Œè¯¥çº¿ç¨‹åˆ°è¾¾æŒ‚èµ·ç‚¹æ‰€éœ€çš„æ—¶é—´ã€‚æ­¤æ—¶é—´åŒ…å«åœ¨ GC æš‚åœæ—¶é—´ä¸­ï¼Œæ‰€ä»¥å¯¹äºç¡®å®šé•¿æ—¶é—´æš‚åœæ˜¯ç”± GC ç¼“æ…¢è¿˜æ˜¯çº¿ç¨‹æŒ‚èµ·ç¼“æ…¢é€ æˆçš„å¾ˆæœ‰ç”¨ã€‚ä»¥ä¸‹æ˜¯ Nexus 5 ä¸Šçš„æ­£å¸¸æŒ‚èµ·æ—¶é—´ç¤ºä¾‹ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">suspend</span> <span class="literal">all</span> histogram:Sum: <span class="number">1</span>.<span class="number">513</span>ms <span class="number">99</span>% C.I. <span class="number">3</span>us-<span class="number">546</span>.<span class="number">560</span>us Avg: <span class="number">47</span>.<span class="number">281</span>us Max: <span class="number">601</span>us</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰å…¶ä»–ä¸€äº›éœ€è¦å…³æ³¨çš„æ–¹é¢ï¼ŒåŒ…æ‹¬æ€»è€—æ—¶å’Œ GC ååé‡ã€‚ç¤ºä¾‹ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Total</span> time spent in GC: <span class="number">502</span>.<span class="number">251</span>ms</span><br><span class="line"><span class="attribute">Mean</span> GC size throughput: <span class="number">92</span>MB/s</span><br><span class="line"><span class="attribute">Mean</span> GC object throughput: <span class="number">1</span>.<span class="number">54702</span>e+<span class="number">06</span> objects/s</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ç¤ºä¾‹è¯´æ˜äº†å¦‚ä½•è½¬å‚¨å·²åœ¨è¿è¡Œçš„åº”ç”¨çš„ GC æ—¶åºï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">adb</span> shell kill -s QUIT PID</span><br><span class="line"><span class="attribute">adb</span> pull /data/anr/anr_<span class="number">2020</span>-<span class="number">07</span>-<span class="number">13</span>-<span class="number">19</span>-<span class="number">23</span>-<span class="number">39</span>-<span class="number">817</span></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼ŒGC æ—¶åºåœ¨ <code>anr_2020-07-13-19-23-39-817</code> ä¸­ã€‚ä»¥ä¸‹æ˜¯ Google åœ°å›¾çš„è¾“å‡ºç¤ºä¾‹ï¼š</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">Start</span> <span class="variable">Dumping</span> <span class="variable">histograms</span> <span class="variable">for</span> <span class="number">2195</span> <span class="variable">iterations</span> <span class="variable">for</span> <span class="variable">concurrent</span> <span class="variable">copying</span></span><br><span class="line"><span class="variable">MarkingPhase</span><span class="operator">:</span>   <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">258.127</span><span class="variable">s</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">58.854</span><span class="variable">ms</span><span class="operator">-</span><span class="number">352.575</span><span class="variable">ms</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">117.651</span><span class="variable">ms</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">641.940</span><span class="variable">ms</span></span><br><span class="line"><span class="variable">ScanCardsForSpace</span><span class="operator">:</span>      <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">85.966</span><span class="variable">s</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">15.121</span><span class="variable">ms</span><span class="operator">-</span><span class="number">112.080</span><span class="variable">ms</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">39.164</span><span class="variable">ms</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">662.555</span><span class="variable">ms</span></span><br><span class="line"><span class="variable">ScanImmuneSpaces</span><span class="operator">:</span>       <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">79.066</span><span class="variable">s</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">7.614</span><span class="variable">ms</span><span class="operator">-</span><span class="number">57.658</span><span class="variable">ms</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">18.014</span><span class="variable">ms</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">546.276</span><span class="variable">ms</span></span><br><span class="line"><span class="variable">ProcessMarkStack</span><span class="operator">:</span>       <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">49.308</span><span class="variable">s</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">6.439</span><span class="variable">ms</span><span class="operator">-</span><span class="number">81.640</span><span class="variable">ms</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">22.464</span><span class="variable">ms</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">638.448</span><span class="variable">ms</span></span><br><span class="line"><span class="variable">ClearFromSpace</span><span class="operator">:</span> <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">35.068</span><span class="variable">s</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">6.522</span><span class="variable">ms</span><span class="operator">-</span><span class="number">40.040</span><span class="variable">ms</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">15.976</span><span class="variable">ms</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">633.665</span><span class="variable">ms</span></span><br><span class="line"><span class="variable">SweepSystemWeaks</span><span class="operator">:</span>       <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">14.209</span><span class="variable">s</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">3.224</span><span class="variable">ms</span><span class="operator">-</span><span class="number">15.210</span><span class="variable">ms</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">6.473</span><span class="variable">ms</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">201.738</span><span class="variable">ms</span></span><br><span class="line"><span class="variable">CaptureThreadRootsForMarking</span><span class="operator">:</span>   <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">11.067</span><span class="variable">s</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">0.835</span><span class="variable">ms</span><span class="operator">-</span><span class="number">13.902</span><span class="variable">ms</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">5.044</span><span class="variable">ms</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">25.565</span><span class="variable">ms</span></span><br><span class="line"><span class="variable">VisitConcurrentRoots</span><span class="operator">:</span>   <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">8.588</span><span class="variable">s</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">1.260</span><span class="variable">ms</span><span class="operator">-</span><span class="number">8.547</span><span class="variable">ms</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">1.956</span><span class="variable">ms</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">231.593</span><span class="variable">ms</span></span><br><span class="line"><span class="variable">ProcessReferences</span><span class="operator">:</span>      <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">7.868</span><span class="variable">s</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">0.002</span><span class="variable">ms</span><span class="operator">-</span><span class="number">8.336</span><span class="variable">ms</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">1.792</span><span class="variable">ms</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">17.376</span><span class="variable">ms</span></span><br><span class="line"><span class="variable">EnqueueFinalizerReferences</span><span class="operator">:</span>     <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">3.976</span><span class="variable">s</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">0.691</span><span class="variable">ms</span><span class="operator">-</span><span class="number">8.005</span><span class="variable">ms</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">1.811</span><span class="variable">ms</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">16.540</span><span class="variable">ms</span></span><br><span class="line"><span class="variable">GrayAllDirtyImmuneObjects</span><span class="operator">:</span>      <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">3.721</span><span class="variable">s</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">0.622</span><span class="variable">ms</span><span class="operator">-</span><span class="number">6.702</span><span class="variable">ms</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">1.695</span><span class="variable">ms</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">14.893</span><span class="variable">ms</span></span><br><span class="line"><span class="variable">SweepLargeObjects</span><span class="operator">:</span>      <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">3.202</span><span class="variable">s</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">0.032</span><span class="variable">ms</span><span class="operator">-</span><span class="number">6.388</span><span class="variable">ms</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">1.458</span><span class="variable">ms</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">549.851</span><span class="variable">ms</span></span><br><span class="line"><span class="variable">FlipOtherThreads</span><span class="operator">:</span>       <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">2.265</span><span class="variable">s</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">0.487</span><span class="variable">ms</span><span class="operator">-</span><span class="number">3.702</span><span class="variable">ms</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">1.031</span><span class="variable">ms</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">6.327</span><span class="variable">ms</span></span><br><span class="line"><span class="variable">VisitNonThreadRoots</span><span class="operator">:</span>    <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">1.883</span><span class="variable">s</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">45</span><span class="variable">us</span><span class="operator">-</span><span class="number">3207.333</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">429.210</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">27524</span><span class="variable">us</span></span><br><span class="line"><span class="variable">InitializePhase</span><span class="operator">:</span>        <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">1.624</span><span class="variable">s</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">231.171</span><span class="variable">us</span><span class="operator">-</span><span class="number">2751.250</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">740.220</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">6961</span><span class="variable">us</span></span><br><span class="line"><span class="variable">ForwardSoftReferences</span><span class="operator">:</span>  <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">1.071</span><span class="variable">s</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">215.113</span><span class="variable">us</span><span class="operator">-</span><span class="number">2175.625</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">488.362</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">7441</span><span class="variable">us</span></span><br><span class="line"><span class="variable">ReclaimPhase</span><span class="operator">:</span>   <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">490.854</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">32.029</span><span class="variable">us</span><span class="operator">-</span><span class="number">6373.807</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">223.623</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">362851</span><span class="variable">us</span></span><br><span class="line"><span class="variable">EmptyRBMarkBitStack</span><span class="operator">:</span>    <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">479.736</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">11</span><span class="variable">us</span><span class="operator">-</span><span class="number">3202.500</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">218.558</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">13652</span><span class="variable">us</span></span><br><span class="line"><span class="variable">CopyingPhase</span><span class="operator">:</span>   <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">399.163</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">24</span><span class="variable">us</span><span class="operator">-</span><span class="number">4602.500</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">181.851</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">22865</span><span class="variable">us</span></span><br><span class="line"><span class="variable">ThreadListFlip</span><span class="operator">:</span> <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">295.609</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">15</span><span class="variable">us</span><span class="operator">-</span><span class="number">2134.999</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">134.673</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">13578</span><span class="variable">us</span></span><br><span class="line"><span class="variable">ResumeRunnableThreads</span><span class="operator">:</span>  <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">238.329</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">5</span><span class="variable">us</span><span class="operator">-</span><span class="number">2351.250</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">108.578</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">10539</span><span class="variable">us</span></span><br><span class="line"><span class="variable">ResumeOtherThreads</span><span class="operator">:</span>     <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">207.915</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">1.072</span><span class="variable">us</span><span class="operator">-</span><span class="number">3602.499</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">94.722</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">14179</span><span class="variable">us</span></span><br><span class="line"><span class="variable">RecordFree</span><span class="operator">:</span>     <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">188.009</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">64</span><span class="variable">us</span><span class="operator">-</span><span class="number">312.812</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">85.653</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">2709</span><span class="variable">us</span></span><br><span class="line"><span class="variable">MarkZygoteLargeObjects</span><span class="operator">:</span> <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">133.301</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">12</span><span class="variable">us</span><span class="operator">-</span><span class="number">734.999</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">60.729</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">10169</span><span class="variable">us</span></span><br><span class="line"><span class="variable">MarkStackAsLive</span><span class="operator">:</span>        <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">127.554</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">13</span><span class="variable">us</span><span class="operator">-</span><span class="number">417.083</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">58.111</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">1728</span><span class="variable">us</span></span><br><span class="line"><span class="variable">FlipThreadRoots</span><span class="operator">:</span>        <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">126.119</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">1.028</span><span class="variable">us</span><span class="operator">-</span><span class="number">3202.499</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">57.457</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">11412</span><span class="variable">us</span></span><br><span class="line"><span class="variable">SweepAllocSpace</span><span class="operator">:</span>        <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">117.761</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">24</span><span class="variable">us</span><span class="operator">-</span><span class="number">400.624</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">53.649</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">1541</span><span class="variable">us</span></span><br><span class="line"><span class="variable">SwapBitmaps</span><span class="operator">:</span>    <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">56.301</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">10</span><span class="variable">us</span><span class="operator">-</span><span class="number">125.312</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">25.649</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">1475</span><span class="variable">us</span></span><br><span class="line"><span class="punctuation">(</span><span class="variable">Paused</span><span class="punctuation">)</span><span class="variable">GrayAllNewlyDirtyImmuneObjects</span><span class="operator">:</span> <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">33.047</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">9</span><span class="variable">us</span><span class="operator">-</span><span class="number">49.931</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">15.055</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">72</span><span class="variable">us</span></span><br><span class="line"><span class="punctuation">(</span><span class="variable">Paused</span><span class="punctuation">)</span><span class="variable">SetFromSpace</span><span class="operator">:</span>   <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">11.651</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">2</span><span class="variable">us</span><span class="operator">-</span><span class="number">49.772</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">5.307</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">71</span><span class="variable">us</span></span><br><span class="line"><span class="punctuation">(</span><span class="variable">Paused</span><span class="punctuation">)</span><span class="variable">FlipCallback</span><span class="operator">:</span>   <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">7.693</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">2</span><span class="variable">us</span><span class="operator">-</span><span class="number">32</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">3.504</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">32</span><span class="variable">us</span></span><br><span class="line"><span class="punctuation">(</span><span class="variable">Paused</span><span class="punctuation">)</span><span class="variable">ClearCards</span><span class="operator">:</span>     <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">6.371</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">250</span><span class="variable">ns</span><span class="operator">-</span><span class="number">49753</span><span class="variable">ns</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">207</span><span class="variable">ns</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">188000</span><span class="variable">ns</span></span><br><span class="line"><span class="variable">Sweep</span><span class="operator">:</span>  <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">5.793</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">1</span><span class="variable">us</span><span class="operator">-</span><span class="number">49.818</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">2.639</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">93</span><span class="variable">us</span></span><br><span class="line"><span class="variable">UnBindBitmaps</span><span class="operator">:</span>  <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">5.255</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">1</span><span class="variable">us</span><span class="operator">-</span><span class="number">31</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">2.394</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">31</span><span class="variable">us</span></span><br><span class="line"><span class="variable">Done</span> <span class="variable">Dumping</span> <span class="variable">histograms</span></span><br><span class="line"><span class="variable">concurrent</span> <span class="variable">copying</span> <span class="variable">paused</span><span class="operator">:</span>      <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">315.249</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">49</span><span class="variable">us</span><span class="operator">-</span><span class="number">1378.125</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">143.621</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">7722</span><span class="variable">us</span></span><br><span class="line"><span class="variable">concurrent</span> <span class="variable">copying</span> <span class="variable">freed</span><span class="operator">-</span><span class="variable">bytes</span><span class="operator">:</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">34</span><span class="variable">MB</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">54</span><span class="variable">MB</span> <span class="built_in">Min</span><span class="operator">:</span> <span class="number">2062</span><span class="variable">KB</span></span><br><span class="line"><span class="variable">Freed</span><span class="operator">-</span><span class="variable">bytes</span> <span class="variable">histogram</span><span class="operator">:</span> <span class="number">0</span><span class="operator">:</span><span class="number">4</span><span class="operator">,</span><span class="number">5120</span><span class="operator">:</span><span class="number">5</span><span class="operator">,</span><span class="number">10240</span><span class="operator">:</span><span class="number">19</span><span class="operator">,</span><span class="number">15360</span><span class="operator">:</span><span class="number">69</span><span class="operator">,</span><span class="number">20480</span><span class="operator">:</span><span class="number">167</span><span class="operator">,</span><span class="number">25600</span><span class="operator">:</span><span class="number">364</span><span class="operator">,</span><span class="number">30720</span><span class="operator">:</span><span class="number">529</span><span class="operator">,</span><span class="number">35840</span><span class="operator">:</span><span class="number">405</span><span class="operator">,</span><span class="number">40960</span><span class="operator">:</span><span class="number">284</span><span class="operator">,</span><span class="number">46080</span><span class="operator">:</span><span class="number">311</span><span class="operator">,</span><span class="number">51200</span><span class="operator">:</span><span class="number">38</span></span><br><span class="line"><span class="variable">concurrent</span> <span class="variable">copying</span> <span class="variable">total</span> <span class="variable">time</span><span class="operator">:</span> <span class="number">569.947</span><span class="variable">s</span> <span class="variable">mean</span> <span class="variable">time</span><span class="operator">:</span> <span class="number">259.657</span><span class="variable">ms</span></span><br><span class="line"><span class="variable">concurrent</span> <span class="variable">copying</span> <span class="variable">freed</span><span class="operator">:</span> <span class="number">1453160493</span> <span class="variable">objects</span> <span class="variable">with</span> <span class="variable">total</span> <span class="variable">size</span> <span class="number">74</span><span class="variable">GB</span></span><br><span class="line"><span class="variable">concurrent</span> <span class="variable">copying</span> <span class="variable">throughput</span><span class="operator">:</span> <span class="number">2.54964</span><span class="variable">e</span><span class="operator">+</span><span class="number">06</span><span class="operator">/</span><span class="variable">s</span> <span class="operator">/</span> <span class="number">134</span><span class="variable">MB</span><span class="operator">/</span><span class="variable">s</span>  <span class="variable">per</span> <span class="variable">cpu</span><span class="operator">-</span><span class="variable">time</span><span class="operator">:</span> <span class="number">157655668</span><span class="operator">/</span><span class="variable">s</span> <span class="operator">/</span> <span class="number">150</span><span class="variable">MB</span><span class="operator">/</span><span class="variable">s</span></span><br><span class="line"><span class="variable">Average</span> <span class="variable">major</span> <span class="variable">GC</span> <span class="variable">reclaim</span> <span class="variable">bytes</span> <span class="variable">ratio</span> <span class="number">0.486928</span> <span class="variable">over</span> <span class="number">2195</span> <span class="variable">GC</span> <span class="variable">cycles</span></span><br><span class="line"><span class="variable">Average</span> <span class="variable">major</span> <span class="variable">GC</span> <span class="variable">copied</span> <span class="variable">live</span> <span class="variable">bytes</span> <span class="variable">ratio</span> <span class="number">0.0894662</span> <span class="variable">over</span> <span class="number">2199</span> <span class="variable">major</span> <span class="variable">GCs</span></span><br><span class="line"><span class="variable">Cumulative</span> <span class="variable">bytes</span> <span class="variable">moved</span> <span class="number">6586367960</span></span><br><span class="line"><span class="variable">Cumulative</span> <span class="variable">objects</span> <span class="variable">moved</span> <span class="number">127490240</span></span><br><span class="line"><span class="variable">Peak</span> <span class="variable">regions</span> <span class="variable">allocated</span> <span class="number">376</span> <span class="punctuation">(</span><span class="number">94</span><span class="variable">MB</span><span class="punctuation">)</span> <span class="operator">/</span> <span class="number">2048</span> <span class="punctuation">(</span><span class="number">512</span><span class="variable">MB</span><span class="punctuation">)</span></span><br><span class="line"><span class="variable">Start</span> <span class="variable">Dumping</span> <span class="variable">histograms</span> <span class="variable">for</span> <span class="number">685</span> <span class="variable">iterations</span> <span class="variable">for</span> <span class="variable">young</span> <span class="variable">concurrent</span> <span class="variable">copying</span></span><br><span class="line"><span class="variable">ScanCardsForSpace</span><span class="operator">:</span>      <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">26.288</span><span class="variable">s</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">8.617</span><span class="variable">ms</span><span class="operator">-</span><span class="number">77.759</span><span class="variable">ms</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">38.377</span><span class="variable">ms</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">432.991</span><span class="variable">ms</span></span><br><span class="line"><span class="variable">ProcessMarkStack</span><span class="operator">:</span>       <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">21.829</span><span class="variable">s</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">2.116</span><span class="variable">ms</span><span class="operator">-</span><span class="number">71.119</span><span class="variable">ms</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">31.868</span><span class="variable">ms</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">98.679</span><span class="variable">ms</span></span><br><span class="line"><span class="variable">ClearFromSpace</span><span class="operator">:</span> <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">19.420</span><span class="variable">s</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">5.480</span><span class="variable">ms</span><span class="operator">-</span><span class="number">50.293</span><span class="variable">ms</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">28.351</span><span class="variable">ms</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">507.330</span><span class="variable">ms</span></span><br><span class="line"><span class="variable">ScanImmuneSpaces</span><span class="operator">:</span>       <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">9.968</span><span class="variable">s</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">8.155</span><span class="variable">ms</span><span class="operator">-</span><span class="number">30.639</span><span class="variable">ms</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">14.552</span><span class="variable">ms</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">46.676</span><span class="variable">ms</span></span><br><span class="line"><span class="variable">SweepSystemWeaks</span><span class="operator">:</span>       <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">6.741</span><span class="variable">s</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">3.655</span><span class="variable">ms</span><span class="operator">-</span><span class="number">14.715</span><span class="variable">ms</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">9.841</span><span class="variable">ms</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">22.142</span><span class="variable">ms</span></span><br><span class="line"><span class="variable">GrayAllDirtyImmuneObjects</span><span class="operator">:</span>      <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">4.466</span><span class="variable">s</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">0.584</span><span class="variable">ms</span><span class="operator">-</span><span class="number">14.315</span><span class="variable">ms</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">6.519</span><span class="variable">ms</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">24.355</span><span class="variable">ms</span></span><br><span class="line"><span class="variable">FlipOtherThreads</span><span class="operator">:</span>       <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">3.672</span><span class="variable">s</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">0.631</span><span class="variable">ms</span><span class="operator">-</span><span class="number">16.630</span><span class="variable">ms</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">5.361</span><span class="variable">ms</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">18.513</span><span class="variable">ms</span></span><br><span class="line"><span class="variable">ProcessReferences</span><span class="operator">:</span>      <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">2.806</span><span class="variable">s</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">0.001</span><span class="variable">ms</span><span class="operator">-</span><span class="number">9.459</span><span class="variable">ms</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">2.048</span><span class="variable">ms</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">11.951</span><span class="variable">ms</span></span><br><span class="line"><span class="variable">EnqueueFinalizerReferences</span><span class="operator">:</span>     <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">1.857</span><span class="variable">s</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">0.424</span><span class="variable">ms</span><span class="operator">-</span><span class="number">8.609</span><span class="variable">ms</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">2.711</span><span class="variable">ms</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">24.063</span><span class="variable">ms</span></span><br><span class="line"><span class="variable">VisitConcurrentRoots</span><span class="operator">:</span>   <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">1.094</span><span class="variable">s</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">1.306</span><span class="variable">ms</span><span class="operator">-</span><span class="number">5.357</span><span class="variable">ms</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">1.598</span><span class="variable">ms</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">6.831</span><span class="variable">ms</span></span><br><span class="line"><span class="variable">SweepArray</span><span class="operator">:</span>     <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">711.032</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">0.022</span><span class="variable">ms</span><span class="operator">-</span><span class="number">3.502</span><span class="variable">ms</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">1.038</span><span class="variable">ms</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">7.307</span><span class="variable">ms</span></span><br><span class="line"><span class="variable">InitializePhase</span><span class="operator">:</span>        <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">667.346</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">303</span><span class="variable">us</span><span class="operator">-</span><span class="number">2643.749</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">974.227</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">3199</span><span class="variable">us</span></span><br><span class="line"><span class="variable">VisitNonThreadRoots</span><span class="operator">:</span>    <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">388.145</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">103.911</span><span class="variable">us</span><span class="operator">-</span><span class="number">1385.833</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">566.635</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">5374</span><span class="variable">us</span></span><br><span class="line"><span class="variable">ThreadListFlip</span><span class="operator">:</span> <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">202.730</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">18</span><span class="variable">us</span><span class="operator">-</span><span class="number">2414.999</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">295.956</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">6780</span><span class="variable">us</span></span><br><span class="line"><span class="variable">EmptyRBMarkBitStack</span><span class="operator">:</span>    <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">132.934</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">8</span><span class="variable">us</span><span class="operator">-</span><span class="number">1757.499</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">194.064</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">8495</span><span class="variable">us</span></span><br><span class="line"><span class="variable">ResumeRunnableThreads</span><span class="operator">:</span>  <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">109.593</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">6</span><span class="variable">us</span><span class="operator">-</span><span class="number">4719.999</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">159.989</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">11106</span><span class="variable">us</span></span><br><span class="line"><span class="variable">ResumeOtherThreads</span><span class="operator">:</span>     <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">86.733</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">3</span><span class="variable">us</span><span class="operator">-</span><span class="number">4114.999</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">126.617</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">19332</span><span class="variable">us</span></span><br><span class="line"><span class="variable">ForwardSoftReferences</span><span class="operator">:</span>  <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">69.686</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">14</span><span class="variable">us</span><span class="operator">-</span><span class="number">2014.999</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">101.731</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">4723</span><span class="variable">us</span></span><br><span class="line"><span class="variable">RecordFree</span><span class="operator">:</span>     <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">58.889</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">0.500</span><span class="variable">us</span><span class="operator">-</span><span class="number">185.833</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">42.984</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">769</span><span class="variable">us</span></span><br><span class="line"><span class="variable">FlipThreadRoots</span><span class="operator">:</span>        <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">58.540</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">1.034</span><span class="variable">us</span><span class="operator">-</span><span class="number">4314.999</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">85.459</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">10224</span><span class="variable">us</span></span><br><span class="line"><span class="variable">CopyingPhase</span><span class="operator">:</span>   <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">52.227</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">26</span><span class="variable">us</span><span class="operator">-</span><span class="number">728.749</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">76.243</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">2060</span><span class="variable">us</span></span><br><span class="line"><span class="variable">ReclaimPhase</span><span class="operator">:</span>   <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">37.207</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">7</span><span class="variable">us</span><span class="operator">-</span><span class="number">2322.499</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">54.316</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">3826</span><span class="variable">us</span></span><br><span class="line"><span class="punctuation">(</span><span class="variable">Paused</span><span class="punctuation">)</span><span class="variable">GrayAllNewlyDirtyImmuneObjects</span><span class="operator">:</span> <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">23.859</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">11</span><span class="variable">us</span><span class="operator">-</span><span class="number">98.917</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">34.830</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">128</span><span class="variable">us</span></span><br><span class="line"><span class="variable">FreeList</span><span class="operator">:</span>       <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">20.376</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">2</span><span class="variable">us</span><span class="operator">-</span><span class="number">188.875</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">29.573</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">998</span><span class="variable">us</span></span><br><span class="line"><span class="variable">MarkZygoteLargeObjects</span><span class="operator">:</span> <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">18.970</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">4</span><span class="variable">us</span><span class="operator">-</span><span class="number">115.749</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">27.693</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">122</span><span class="variable">us</span></span><br><span class="line"><span class="punctuation">(</span><span class="variable">Paused</span><span class="punctuation">)</span><span class="variable">SetFromSpace</span><span class="operator">:</span>   <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">12.331</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">3</span><span class="variable">us</span><span class="operator">-</span><span class="number">94.226</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">18.001</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">109</span><span class="variable">us</span></span><br><span class="line"><span class="variable">SwapBitmaps</span><span class="operator">:</span>    <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">11.761</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">5</span><span class="variable">us</span><span class="operator">-</span><span class="number">49.968</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">17.169</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">67</span><span class="variable">us</span></span><br><span class="line"><span class="variable">ResetStack</span><span class="operator">:</span>     <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">4.317</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">1</span><span class="variable">us</span><span class="operator">-</span><span class="number">64.374</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">6.302</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">190</span><span class="variable">us</span></span><br><span class="line"><span class="variable">UnBindBitmaps</span><span class="operator">:</span>  <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">3.803</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">4</span><span class="variable">us</span><span class="operator">-</span><span class="number">49.822</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">5.551</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">70</span><span class="variable">us</span></span><br><span class="line"><span class="punctuation">(</span><span class="variable">Paused</span><span class="punctuation">)</span><span class="variable">ClearCards</span><span class="operator">:</span>     <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">3.336</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">250</span><span class="variable">ns</span><span class="operator">-</span><span class="number">7000</span><span class="variable">ns</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">347</span><span class="variable">ns</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">7000</span><span class="variable">ns</span></span><br><span class="line"><span class="punctuation">(</span><span class="variable">Paused</span><span class="punctuation">)</span><span class="variable">FlipCallback</span><span class="operator">:</span>   <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">3.082</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">1</span><span class="variable">us</span><span class="operator">-</span><span class="number">30</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">4.499</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">30</span><span class="variable">us</span></span><br><span class="line"><span class="variable">Done</span> <span class="variable">Dumping</span> <span class="variable">histograms</span></span><br><span class="line"><span class="variable">young</span> <span class="variable">concurrent</span> <span class="variable">copying</span> <span class="variable">paused</span><span class="operator">:</span>        <span class="built_in">Sum</span><span class="operator">:</span> <span class="number">229.314</span><span class="variable">ms</span> <span class="number">99</span><span class="operator">%</span> <span class="built_in">C</span><span class="operator">.</span><span class="built_in">I</span><span class="operator">.</span> <span class="number">37</span><span class="variable">us</span><span class="operator">-</span><span class="number">2287.499</span><span class="variable">us</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">334.764</span><span class="variable">us</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">6850</span><span class="variable">us</span></span><br><span class="line"><span class="variable">young</span> <span class="variable">concurrent</span> <span class="variable">copying</span> <span class="variable">freed</span><span class="operator">-</span><span class="variable">bytes</span><span class="operator">:</span> <span class="variable">Avg</span><span class="operator">:</span> <span class="number">44</span><span class="variable">MB</span> <span class="built_in">Max</span><span class="operator">:</span> <span class="number">50</span><span class="variable">MB</span> <span class="built_in">Min</span><span class="operator">:</span> <span class="number">9132</span><span class="variable">KB</span></span><br><span class="line"><span class="variable">Freed</span><span class="operator">-</span><span class="variable">bytes</span> <span class="variable">histogram</span><span class="operator">:</span> <span class="number">5120</span><span class="operator">:</span><span class="number">1</span><span class="operator">,</span><span class="number">15360</span><span class="operator">:</span><span class="number">1</span><span class="operator">,</span><span class="number">20480</span><span class="operator">:</span><span class="number">6</span><span class="operator">,</span><span class="number">25600</span><span class="operator">:</span><span class="number">1</span><span class="operator">,</span><span class="number">30720</span><span class="operator">:</span><span class="number">1</span><span class="operator">,</span><span class="number">35840</span><span class="operator">:</span><span class="number">9</span><span class="operator">,</span><span class="number">40960</span><span class="operator">:</span><span class="number">235</span><span class="operator">,</span><span class="number">46080</span><span class="operator">:</span><span class="number">427</span><span class="operator">,</span><span class="number">51200</span><span class="operator">:</span><span class="number">4</span></span><br><span class="line"><span class="variable">young</span> <span class="variable">concurrent</span> <span class="variable">copying</span> <span class="variable">total</span> <span class="variable">time</span><span class="operator">:</span> <span class="number">100.823</span><span class="variable">s</span> <span class="variable">mean</span> <span class="variable">time</span><span class="operator">:</span> <span class="number">147.187</span><span class="variable">ms</span></span><br><span class="line"><span class="variable">young</span> <span class="variable">concurrent</span> <span class="variable">copying</span> <span class="variable">freed</span><span class="operator">:</span> <span class="number">519927309</span> <span class="variable">objects</span> <span class="variable">with</span> <span class="variable">total</span> <span class="variable">size</span> <span class="number">30</span><span class="variable">GB</span></span><br><span class="line"><span class="variable">young</span> <span class="variable">concurrent</span> <span class="variable">copying</span> <span class="variable">throughput</span><span class="operator">:</span> <span class="number">5.15683</span><span class="variable">e</span><span class="operator">+</span><span class="number">06</span><span class="operator">/</span><span class="variable">s</span> <span class="operator">/</span> <span class="number">304</span><span class="variable">MB</span><span class="operator">/</span><span class="variable">s</span>  <span class="variable">per</span> <span class="variable">cpu</span><span class="operator">-</span><span class="variable">time</span><span class="operator">:</span> <span class="number">333152554</span><span class="operator">/</span><span class="variable">s</span> <span class="operator">/</span> <span class="number">317</span><span class="variable">MB</span><span class="operator">/</span><span class="variable">s</span></span><br><span class="line"><span class="variable">Average</span> <span class="variable">minor</span> <span class="variable">GC</span> <span class="variable">reclaim</span> <span class="variable">bytes</span> <span class="variable">ratio</span> <span class="number">0.52381</span> <span class="variable">over</span> <span class="number">685</span> <span class="variable">GC</span> <span class="variable">cycles</span></span><br><span class="line"><span class="variable">Average</span> <span class="variable">minor</span> <span class="variable">GC</span> <span class="variable">copied</span> <span class="variable">live</span> <span class="variable">bytes</span> <span class="variable">ratio</span> <span class="number">0.0512109</span> <span class="variable">over</span> <span class="number">685</span> <span class="variable">minor</span> <span class="variable">GCs</span></span><br><span class="line"><span class="variable">Cumulative</span> <span class="variable">bytes</span> <span class="variable">moved</span> <span class="number">1542000944</span></span><br><span class="line"><span class="variable">Cumulative</span> <span class="variable">objects</span> <span class="variable">moved</span> <span class="number">28393168</span></span><br><span class="line"><span class="variable">Peak</span> <span class="variable">regions</span> <span class="variable">allocated</span> <span class="number">376</span> <span class="punctuation">(</span><span class="number">94</span><span class="variable">MB</span><span class="punctuation">)</span> <span class="operator">/</span> <span class="number">2048</span> <span class="punctuation">(</span><span class="number">512</span><span class="variable">MB</span><span class="punctuation">)</span></span><br><span class="line"><span class="built_in">Total</span> <span class="variable">time</span> <span class="variable">spent</span> <span class="variable">in</span> <span class="variable">GC</span><span class="operator">:</span> <span class="number">670.771</span><span class="variable">s</span></span><br><span class="line"><span class="built_in">Mean</span> <span class="variable">GC</span> <span class="variable">size</span> <span class="variable">throughput</span><span class="operator">:</span> <span class="number">159</span><span class="variable">MB</span><span class="operator">/</span><span class="variable">s</span> <span class="variable">per</span> <span class="variable">cpu</span><span class="operator">-</span><span class="variable">time</span><span class="operator">:</span> <span class="number">177</span><span class="variable">MB</span><span class="operator">/</span><span class="variable">s</span></span><br><span class="line"><span class="built_in">Mean</span> <span class="variable">GC</span> <span class="variable">object</span> <span class="variable">throughput</span><span class="operator">:</span> <span class="number">2.94152</span><span class="variable">e</span><span class="operator">+</span><span class="number">06</span> <span class="variable">objects</span><span class="operator">/</span><span class="variable">s</span></span><br><span class="line"><span class="built_in">Total</span> <span class="variable">number</span> <span class="variable">of</span> <span class="variable">allocations</span> <span class="number">1974199562</span></span><br><span class="line"><span class="built_in">Total</span> <span class="variable">bytes</span> <span class="variable">allocated</span> <span class="number">104</span><span class="variable">GB</span></span><br><span class="line"><span class="built_in">Total</span> <span class="variable">bytes</span> <span class="variable">freed</span> <span class="number">104</span><span class="variable">GB</span></span><br><span class="line"><span class="variable">Free</span> <span class="variable">memory</span> <span class="number">10</span><span class="variable">MB</span></span><br><span class="line"><span class="variable">Free</span> <span class="variable">memory</span> <span class="variable">until</span> <span class="variable">GC</span> <span class="number">10</span><span class="variable">MB</span></span><br><span class="line"><span class="variable">Free</span> <span class="variable">memory</span> <span class="variable">until</span> <span class="variable">OOME</span> <span class="number">442</span><span class="variable">MB</span></span><br><span class="line"><span class="built_in">Total</span> <span class="variable">memory</span> <span class="number">80</span><span class="variable">MB</span></span><br><span class="line"><span class="built_in">Max</span> <span class="variable">memory</span> <span class="number">512</span><span class="variable">MB</span></span><br><span class="line"><span class="variable">Zygote</span> <span class="variable">space</span> <span class="variable">size</span> <span class="number">2780</span><span class="variable">KB</span></span><br><span class="line"><span class="built_in">Total</span> <span class="variable">mutator</span> <span class="variable">paused</span> <span class="variable">time</span><span class="operator">:</span> <span class="number">544.563</span><span class="variable">ms</span></span><br><span class="line"><span class="built_in">Total</span> <span class="variable">time</span> <span class="variable">waiting</span> <span class="variable">for</span> <span class="variable">GC</span> <span class="variable">to</span> <span class="variable">complete</span><span class="operator">:</span> <span class="number">117.494</span><span class="variable">ms</span></span><br><span class="line"><span class="built_in">Total</span> <span class="variable">GC</span> <span class="variable">count</span><span class="operator">:</span> <span class="number">2880</span></span><br><span class="line"><span class="built_in">Total</span> <span class="variable">GC</span> <span class="variable">time</span><span class="operator">:</span> <span class="number">670.771</span><span class="variable">s</span></span><br><span class="line"><span class="built_in">Total</span> <span class="variable">blocking</span> <span class="variable">GC</span> <span class="variable">count</span><span class="operator">:</span> <span class="number">1</span></span><br><span class="line"><span class="built_in">Total</span> <span class="variable">blocking</span> <span class="variable">GC</span> <span class="variable">time</span><span class="operator">:</span> <span class="number">86.373</span><span class="variable">ms</span></span><br><span class="line"><span class="built_in">Histogram</span> <span class="variable">of</span> <span class="variable">GC</span> <span class="variable">count</span> <span class="variable">per</span> <span class="number">10000</span> <span class="variable">ms</span><span class="operator">:</span> <span class="number">0</span><span class="operator">:</span><span class="number">259879</span><span class="operator">,</span><span class="number">1</span><span class="operator">:</span><span class="number">2828</span><span class="operator">,</span><span class="number">2</span><span class="operator">:</span><span class="number">24</span><span class="operator">,</span><span class="number">3</span><span class="operator">:</span><span class="number">1</span></span><br><span class="line"><span class="built_in">Histogram</span> <span class="variable">of</span> <span class="variable">blocking</span> <span class="variable">GC</span> <span class="variable">count</span> <span class="variable">per</span> <span class="number">10000</span> <span class="variable">ms</span><span class="operator">:</span> <span class="number">0</span><span class="operator">:</span><span class="number">262731</span><span class="operator">,</span><span class="number">1</span><span class="operator">:</span><span class="number">1</span></span><br><span class="line"><span class="variable">Native</span> <span class="variable">bytes</span> <span class="variable">total</span><span class="operator">:</span> <span class="number">30599192</span> <span class="variable">registered</span><span class="operator">:</span> <span class="number">8947416</span></span><br><span class="line"><span class="built_in">Total</span> <span class="variable">native</span> <span class="variable">bytes</span> <span class="variable">at</span> <span class="variable">last</span> <span class="variable">GC</span><span class="operator">:</span> <span class="number">30344912</span></span><br></pre></td></tr></table></figure><h3 id="åˆ†æ-GC-æ­£ç¡®æ€§é—®é¢˜çš„å·¥å…·"><a href="#åˆ†æ-GC-æ­£ç¡®æ€§é—®é¢˜çš„å·¥å…·" class="headerlink" title="åˆ†æ GC æ­£ç¡®æ€§é—®é¢˜çš„å·¥å…·"></a>åˆ†æ GC æ­£ç¡®æ€§é—®é¢˜çš„å·¥å…·</h3><p>é€ æˆ ART å†…éƒ¨å´©æºƒçš„åŸå› å¤šç§å¤šæ ·ã€‚è¯»å–æˆ–å†™å…¥å¯¹è±¡å­—æ®µæ—¶å‘ç”Ÿå´©æºƒå¯èƒ½è¡¨æ˜å †æŸåã€‚å¦‚æœ GC åœ¨è¿è¡Œæ—¶å´©æºƒï¼Œä¹Ÿå¯èƒ½æ˜¯ç”±å †æŸåé€ æˆçš„ã€‚é€ æˆå †æŸåçš„æœ€å¸¸è§åŸå› æ˜¯åº”ç”¨ä»£ç ä¸æ­£ç¡®ã€‚å¥½åœ¨æœ‰ä¸€äº›å·¥å…·å¯ç”¨æ¥è°ƒè¯•ä¸ GC å’Œå †ç›¸å…³çš„å´©æºƒé—®é¢˜ï¼Œè¿™äº›å·¥å…·åŒ…æ‹¬ä¸Šé¢æŒ‡å®šçš„å †éªŒè¯é€‰é¡¹å’Œ CheckJNIã€‚</p><h4 id="CheckJNI"><a href="#CheckJNI" class="headerlink" title="CheckJNI"></a>CheckJNI</h4><p>CheckJNI æ˜¯ä¸€ç§æ·»åŠ  JNI æ£€æŸ¥æ¥éªŒè¯åº”ç”¨è¡Œä¸ºçš„æ¨¡å¼ï¼›å‡ºäºæ€§èƒ½æ–¹é¢çš„åŸå› ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¸å¯ç”¨æ­¤ç±»æ£€æŸ¥ã€‚æ­¤ç±»æ£€æŸ¥å°†æ•è·ä¸€äº›å¯èƒ½ä¼šå¯¼è‡´å †æŸåçš„é”™è¯¯ï¼Œå¦‚ä½¿ç”¨æ— æ•ˆ/è¿‡æ—¶çš„å±€éƒ¨å’Œå…¨å±€å¼•ç”¨ã€‚å¦‚éœ€å¯ç”¨ CheckJNIï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb <span class="keyword">shell</span><span class="bash"> setprop dalvik.vm.checkjni <span class="literal">true</span></span></span><br></pre></td></tr></table></figure><p>CheckJNI çš„ forcecopy æ¨¡å¼å¯¹äºæ£€æµ‹è¶…å‡ºæ•°ç»„åŒºåŸŸæœ«ç«¯çš„å†™å…¥å¾ˆæœ‰ç”¨ã€‚å¯ç”¨åï¼Œforcecopy ä¼šä¿ƒä½¿æ•°ç»„è®¿é—® JNI å‡½æ•°è¿”å›å¸¦æœ‰çº¢è‰²åŒºåŸŸçš„å‰¯æœ¬ã€‚çº¢è‰²åŒºåŸŸæ˜¯è¿”å›çš„æŒ‡é’ˆæœ«ç«¯/å§‹ç«¯çš„ä¸€ä¸ªåŒºåŸŸï¼Œè¯¥åŒºåŸŸå…·æœ‰ä¸€ä¸ªç‰¹æ®Šå€¼ï¼Œè¯¥å€¼åœ¨æ•°ç»„é‡Šæ”¾æ—¶å¾—åˆ°éªŒè¯ã€‚å¦‚æœçº¢è‰²åŒºåŸŸä¸­çš„å€¼ä¸é¢„æœŸå€¼ä¸åŒ¹é…ï¼Œè¡¨æ˜å‘ç”Ÿäº†ç¼“å†²åŒºæº¢å‡ºæˆ–æ¬ è½½ã€‚è¿™ä¼šå¯¼è‡´ CheckJNI ä¸­æ­¢ã€‚å¦‚éœ€å¯ç”¨ forcecopy æ¨¡å¼ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb <span class="keyword">shell </span>setprop dalvik.vm.<span class="keyword">jniopts </span>forcecopy</span><br></pre></td></tr></table></figure><p>ä¸¾ä¾‹æ¥è¯´ï¼Œå½“å†™å…¥è¶…å‡ºä» <code>GetPrimitiveArrayCritical</code> è·å–çš„æ•°ç»„çš„æœ«ç«¯æ—¶ï¼Œè¿™å°±æ˜¯ CheckJNI åº”æ•è·çš„ä¸€ä¸ªé”™è¯¯ã€‚æ­¤æ“ä½œå¯èƒ½ä¼šæŸå Java å †ã€‚å¦‚æœå†™å…¥å‘ç”Ÿåœ¨ CheckJNI çº¢è‰²åŒºåŸŸå†…ï¼Œåˆ™åœ¨è°ƒç”¨ç›¸åº”çš„ <code>ReleasePrimitiveArrayCritical</code> æ—¶ï¼ŒCheckJNI ä¼šæ•è·è¯¥é—®é¢˜ã€‚å¦åˆ™ï¼Œå†™å…¥ä¼šæŸå Java å †ä¸­çš„æŸä¸ªéšæœºå¯¹è±¡ï¼Œå¹¶ä¸”å¯èƒ½ä¼šå¯¼è‡´å°†æ¥å‘ç”Ÿ GC å´©æºƒã€‚å¦‚æœæŸåçš„å†…å­˜æ˜¯å¼•ç”¨å­—æ®µï¼Œåˆ™ GC å¯èƒ½ä¼šæ•è·é”™è¯¯å¹¶è¾“å‡ºé”™è¯¯æ¶ˆæ¯â€œTried to mark <ptr> not contained by any spacesâ€ã€‚</p><p>å½“ GC å°è¯•æ ‡è®°ä¸€ä¸ªå¯¹è±¡ä½†æ— æ³•æ‰¾åˆ°å…¶ç©ºé—´æ—¶ï¼Œå°±ä¼šå‘ç”Ÿæ­¤é”™è¯¯ã€‚æ­¤æ£€æŸ¥å¤±è´¥åï¼ŒGC ä¼šéå†æ ¹ï¼Œå¹¶å°è¯•æŸ¥çœ‹æ— æ•ˆçš„å¯¹è±¡æ˜¯å¦ä¸ºæ ¹ã€‚ç»“æœå…±æœ‰ä¸¤ä¸ªé€‰é¡¹ï¼šå¯¹è±¡ä¸ºæ ¹æˆ–éæ ¹ã€‚</p><h4 id="æ— æ•ˆæ ¹ç¤ºä¾‹"><a href="#æ— æ•ˆæ ¹ç¤ºä¾‹" class="headerlink" title="æ— æ•ˆæ ¹ç¤ºä¾‹"></a>æ— æ•ˆæ ¹ç¤ºä¾‹</h4><p>å¦‚æœå¯¹è±¡ä¸ºæ— æ•ˆæ ¹ï¼Œåˆ™ä¼šè¾“å‡ºä¸€äº›æœ‰ç”¨çš„ä¿¡æ¯ï¼š<code>art E 5955 5955 art/runtime/gc/collector/mark_sweep.cc:383] Tried to mark 0x2 not contained by any spaces</code></p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">art E  <span class="number">5955</span>  <span class="number">5955</span> art/runtime/gc/collector/mark_sweep.cc:<span class="number">384</span>] Attempting see if</span><br><span class="line">it&#x27;s a bad root</span><br><span class="line">art E  <span class="number">5955</span>  <span class="number">5955</span> art/runtime/gc/collector/mark_sweep.cc:485] Found invalid</span><br><span class="line">root: 0x2</span><br><span class="line">art E  <span class="number">5955</span>  <span class="number">5955</span> art/runtime/gc/collector/mark_sweep.cc:486]</span><br><span class="line">Type=RootJavaFrame thread_id=1 location=Visiting method &#x27;java.lang.Object</span><br><span class="line">com.google.gwt.corp.collections.JavaReadableJsArray.get(int)&#x27; at dex PC 0x<span class="number">0002</span></span><br><span class="line">(native PC 0xf<span class="number">1960</span>9d9) vreg=1</span><br></pre></td></tr></table></figure><p>åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œ<code>com.google.gwt.corp.collections.JavaReadableJsArray.get</code> å†…çš„ <code>vreg=1</code> åº”è¯¥åŒ…å«ä¸€ä¸ªå †å¼•ç”¨ï¼Œä½†å´åŒ…å«äº†ä¸€ä¸ªåœ°å€ä¸º <code>0x2</code> çš„æ— æ•ˆæŒ‡é’ˆã€‚è¿™æ˜¯ä¸€ä¸ªæ— æ•ˆæ ¹ã€‚å¦‚éœ€è°ƒè¯•æ­¤é—®é¢˜ï¼Œè¯·åœ¨ oat æ–‡ä»¶ä¸Šä½¿ç”¨ <code>oatdump</code>ï¼Œå¹¶æŸ¥çœ‹å…·æœ‰æ— æ•ˆæ ¹çš„æ–¹æ³•ã€‚åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œç»“æœè¯æ˜é”™è¯¯åœ¨äº x86 åç«¯çš„ç¼–è¯‘å™¨é”™è¯¯ã€‚ä¿®å¤è¯¥é”™è¯¯çš„å˜æ›´åˆ—è¡¨å¦‚ä¸‹ï¼š<span class="exturl" data-url="aHR0cHM6Ly9hbmRyb2lkLXJldmlldy5nb29nbGVzb3VyY2UuY29tLyMvYy8xMzM5MzIv">https://android-review.googlesource.com/#/c/133932/<i class="fa fa-external-link-alt"></i></span></p><h4 id="æŸåçš„å¯¹è±¡ç¤ºä¾‹"><a href="#æŸåçš„å¯¹è±¡ç¤ºä¾‹" class="headerlink" title="æŸåçš„å¯¹è±¡ç¤ºä¾‹"></a>æŸåçš„å¯¹è±¡ç¤ºä¾‹</h4><p>å¦‚æœå¯¹è±¡ä¸æ˜¯æ ¹ï¼Œåˆ™è¾“å‡ºç±»ä¼¼äºä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">01</span>-<span class="number">15</span> <span class="number">12</span>:<span class="number">38</span>:<span class="number">00</span>.<span class="number">196</span>  <span class="number">1217</span>  <span class="number">1238</span> E art     : Attempting see if it&#x27;s a bad root</span><br><span class="line"><span class="attribute">01</span>-<span class="number">15</span> <span class="number">12</span>:<span class="number">38</span>:<span class="number">00</span>.<span class="number">196</span>  <span class="number">1217</span>  <span class="number">1238</span> F art     :</span><br><span class="line"><span class="attribute">art</span>/runtime/gc/collector/mark_sweep.cc:<span class="number">381</span>] Can&#x27;t mark invalid object</span><br></pre></td></tr></table></figure><p>å¦‚æœå †æŸåä¸æ˜¯æ— æ•ˆæ ¹ï¼Œå°†å¾ˆéš¾è°ƒè¯•ã€‚æ­¤é”™è¯¯æ¶ˆæ¯è¡¨æ˜å †ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå¯¹è±¡æŒ‡å‘æ— æ•ˆå¯¹è±¡ã€‚</p><h2 id="å®ç°-ART-å³æ—¶-JIT-ç¼–è¯‘å™¨"><a href="#å®ç°-ART-å³æ—¶-JIT-ç¼–è¯‘å™¨" class="headerlink" title="å®ç° ART å³æ—¶ (JIT) ç¼–è¯‘å™¨"></a>å®ç° ART å³æ—¶ (JIT) ç¼–è¯‘å™¨</h2><p>Android Runtime (ART) åŒ…å«ä¸€ä¸ªå…·å¤‡ä»£ç åˆ†æåŠŸèƒ½çš„å³æ—¶ (JIT) ç¼–è¯‘å™¨ï¼Œè¯¥ç¼–è¯‘å™¨å¯ä»¥åœ¨ Android åº”ç”¨è¿è¡Œæ—¶æŒç»­æé«˜å…¶æ€§èƒ½ã€‚JIT ç¼–è¯‘å™¨å¯¹ Android è¿è¡Œç»„ä»¶å½“å‰çš„é¢„å…ˆ (AOT) ç¼–è¯‘å™¨è¿›è¡Œäº†è¡¥å……ï¼Œå¯ä»¥æå‡è¿è¡Œæ—¶æ€§èƒ½ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´ï¼ŒåŠ å¿«åº”ç”¨å’Œç³»ç»Ÿæ›´æ–°é€Ÿåº¦ã€‚ç›¸è¾ƒäº AOT ç¼–è¯‘å™¨ï¼ŒJIT ç¼–è¯‘å™¨çš„ä¼˜åŠ¿ä¹Ÿæ›´ä¸ºæ˜æ˜¾ï¼Œå› ä¸ºåœ¨åº”ç”¨è‡ªåŠ¨æ›´æ–°æœŸé—´æˆ–åœ¨æ— çº¿ä¸‹è½½ (OTA) æ›´æ–°æœŸé—´é‡æ–°ç¼–è¯‘åº”ç”¨æ—¶ï¼Œå®ƒä¸ä¼šæ‹–æ…¢ç³»ç»Ÿé€Ÿåº¦ã€‚</p><p>å°½ç®¡ JIT å’Œ AOT ä½¿ç”¨ç›¸åŒçš„ç¼–è¯‘å™¨ï¼Œå®ƒä»¬æ‰€è¿›è¡Œçš„ä¸€ç³»åˆ—ä¼˜åŒ–ä¹Ÿè¾ƒä¸ºç›¸ä¼¼ï¼Œä½†å®ƒä»¬ç”Ÿæˆçš„ä»£ç å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚JIT ä¼šåˆ©ç”¨è¿è¡Œæ—¶ç±»å‹ä¿¡æ¯ï¼Œå¯ä»¥æ›´é«˜æ•ˆåœ°è¿›è¡Œå†…è”ï¼Œå¹¶å¯è®©å †æ ˆæ›¿æ¢ (OSR) ç¼–è¯‘æˆä¸ºå¯èƒ½ï¼Œè€Œè¿™ä¸€åˆ‡éƒ½ä¼šä½¿å…¶ç”Ÿæˆçš„ä»£ç ç•¥æœ‰ä¸åŒã€‚</p><h3 id="JIT-æ¶æ„"><a href="#JIT-æ¶æ„" class="headerlink" title="JIT æ¶æ„"></a>JIT æ¶æ„</h3><p><img src="https://up-img.yonghong.tech/pic/2021/07/29-20-44-jit-arch-3Fcld1.png" alt="JIT æ¶æ„"></p><p><strong>å›¾ 1.</strong> JIT æ¶æ„ã€‚</p><h3 id="JIT-ç¼–è¯‘"><a href="#JIT-ç¼–è¯‘" class="headerlink" title="JIT ç¼–è¯‘"></a>JIT ç¼–è¯‘</h3><p>JIT ç¼–è¯‘æ¶‰åŠä»¥ä¸‹æ´»åŠ¨ï¼š</p><p><img src="https://up-img.yonghong.tech/pic/2021/07/29-20-44-jit-profile-comp-RifrTY.png" alt="é…ç½®æ–‡ä»¶æŒ‡å¯¼çš„ç¼–è¯‘"></p><p><strong>å›¾ 2.</strong> é…ç½®æ–‡ä»¶å¼•å¯¼çš„ç¼–è¯‘ã€‚</p><ol><li><p>ç”¨æˆ·è¿è¡Œåº”ç”¨ï¼Œæ­¤ä¸¾éšåè§¦å‘ ART åŠ è½½<code>.dex</code>æ–‡ä»¶ã€‚</p><ul><li>å¦‚æœæœ‰ <code>.oat</code> æ–‡ä»¶ï¼ˆå³ <code>.dex</code> æ–‡ä»¶çš„ AOT äºŒè¿›åˆ¶æ–‡ä»¶ï¼‰ï¼ŒART ä¼šç›´æ¥ä½¿ç”¨è¯¥æ–‡ä»¶ã€‚è™½ç„¶ <code>.oat</code> æ–‡ä»¶ä¼šå®šæœŸç”Ÿæˆï¼Œä½†æ–‡ä»¶ä¸­ä¸ä¸€å®šä¼šåŒ…å«ç»è¿‡ç¼–è¯‘çš„ä»£ç ï¼ˆå³ AOT äºŒè¿›åˆ¶æ–‡ä»¶ï¼‰ã€‚</li><li>å¦‚æœ <code>.oat</code> æ–‡ä»¶ä¸å«ç»è¿‡ç¼–è¯‘çš„ä»£ç ï¼ŒART ä¼šé€šè¿‡ JIT å’Œè§£é‡Šå™¨æ‰§è¡Œ <code>.dex</code> æ–‡ä»¶ã€‚</li></ul></li><li><p>é’ˆå¯¹ä»»ä½•æœªæ ¹æ® <code>speed</code> ç¼–è¯‘è¿‡æ»¤å™¨ç¼–è¯‘çš„åº”ç”¨å¯ç”¨ JITï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œè¦å°½å¯èƒ½å¤šåœ°ç¼–è¯‘åº”ç”¨ä¸­çš„ä»£ç ï¼‰ã€‚</p></li><li><p>å°† JIT é…ç½®æ–‡ä»¶æ•°æ®è½¬å‚¨åˆ°åªæœ‰è¯¥åº”ç”¨å¯ä»¥è®¿é—®çš„ç³»ç»Ÿç›®å½•ä¸‹çš„æ–‡ä»¶ä¸­ã€‚</p></li><li><p>AOT ç¼–è¯‘ (<code>dex2oat</code>) å®ˆæŠ¤ç¨‹åºé€šè¿‡è§£æè¯¥æ–‡ä»¶æ¥æ¨è¿›å…¶ç¼–è¯‘ã€‚</p><p> <img src="https://up-img.yonghong.tech/pic/2021/07/29-20-44-jit-daemon-NoNjuF.png" alt="JIT å®ˆæŠ¤ç¨‹åº"><strong>å›¾ 3.</strong> JIT å®ˆæŠ¤ç¨‹åºæ´»åŠ¨ã€‚</p></li></ol><p>ä¸¾ä¾‹æ¥è¯´ï¼ŒGoogle Play æœåŠ¡å°±æ˜¯ä¸€ç§ç”±å…¶ä»–åº”ç”¨ä½¿ç”¨çš„ç±»ä¼¼äºå…±äº«åº“çš„æœåŠ¡ã€‚</p><h3 id="JIT-å·¥ä½œæµç¨‹"><a href="#JIT-å·¥ä½œæµç¨‹" class="headerlink" title="JIT å·¥ä½œæµç¨‹"></a>JIT å·¥ä½œæµç¨‹</h3><p><img src="https://source.android.com/devices/tech/dalvik/images/jit-workflow.png?hl=zh-cn" alt="JIT æ¶æ„"></p><p><strong>å›¾ 4.</strong> JIT æ•°æ®æµã€‚</p><ul><li><p>åˆ†æä¿¡æ¯ä¼šå­˜å‚¨åœ¨ä»£ç ç¼“å­˜ä¸­ï¼Œå¹¶ä¼šåœ¨å†…å­˜ç´§å¼ æ—¶ä½œä¸ºåƒåœ¾è¢«å›æ”¶ã€‚</p><ul><li>æ— æ³•ä¿è¯åœ¨åº”ç”¨å¤„äºåå°è¿è¡ŒçŠ¶æ€æ—¶æ‰€æ•è·çš„å¿«ç…§èƒ½å¤ŸåŒ…å«å®Œæ•´çš„æ•°æ®ï¼ˆå³ JIT ç¼–è¯‘çš„æ‰€æœ‰å†…å®¹ï¼‰ã€‚</li><li>è¯¥è¿‡ç¨‹ä¸ä¼šå°è¯•ç¡®ä¿è®°å½•æ‰€æœ‰å†…å®¹ï¼ˆå› ä¸ºè¿™ä¼šå½±å“è¿è¡Œæ—¶æ€§èƒ½ï¼‰ã€‚</li></ul></li><li><p>æ–¹æ³•å¯èƒ½æœ‰ä¸‰ç§ä¸åŒçš„çŠ¶æ€ï¼š</p><ul><li><p>å·²ç»è¿‡è§£é‡Šï¼ˆdex ä»£ç ï¼‰</p></li><li><p>å·²ç»è¿‡ JIT ç¼–è¯‘</p></li><li><p>å·²ç»è¿‡ AOT ç¼–è¯‘</p><p>å¦‚æœåŒæ—¶å­˜åœ¨ JIT å’Œ AOT ä»£ç ï¼ˆä¾‹å¦‚ï¼Œç”±äºåå¤è¿›è¡Œé€†ä¼˜åŒ–ï¼‰ï¼Œç»è¿‡ JIT ç¼–è¯‘çš„ä»£ç å°†æ˜¯é¦–é€‰ä»£ç ã€‚</p></li></ul></li><li><p>åœ¨ä¸å½±å“å‰å°åº”ç”¨æ€§èƒ½çš„æƒ…å†µä¸‹è¿è¡Œ JIT æ‰€éœ€çš„å†…å­˜å–å†³äºç›¸å…³åº”ç”¨ã€‚å¤§å‹åº”ç”¨æ¯”å°å‹åº”ç”¨éœ€è¦æ›´å¤šå†…å­˜ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¤§å‹åº”ç”¨æ‰€éœ€çš„å†…å­˜ç¨³å®šç»´æŒåœ¨ 4 MB å·¦å³ã€‚</p></li></ul><h3 id="å¼€å¯-JIT-æ—¥å¿—è®°å½•"><a href="#å¼€å¯-JIT-æ—¥å¿—è®°å½•" class="headerlink" title="å¼€å¯ JIT æ—¥å¿—è®°å½•"></a>å¼€å¯ JIT æ—¥å¿—è®°å½•</h3><p>è¦å¼€å¯ JIT æ—¥å¿—è®°å½•ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">adb root</span><br><span class="line">adb <span class="keyword">shell</span> <span class="keyword">stop</span></span><br><span class="line">adb <span class="keyword">shell</span> setprop dalvik.<span class="keyword">vm</span>.extra-opts -<span class="keyword">verbose</span>:jit</span><br><span class="line">adb <span class="keyword">shell</span> start</span><br></pre></td></tr></table></figure><h3 id="åœç”¨-JIT"><a href="#åœç”¨-JIT" class="headerlink" title="åœç”¨ JIT"></a>åœç”¨ JIT</h3><p>è¦åœç”¨ JITï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">adb root</span><br><span class="line">adb <span class="built_in">shell</span> <span class="built_in">stop</span></span><br><span class="line">adb <span class="built_in">shell</span> setprop dalvik.vm.usejit <span class="literal">false</span></span><br><span class="line">adb <span class="built_in">shell</span> <span class="built_in">start</span></span><br></pre></td></tr></table></figure><h3 id="å¼ºåˆ¶ç¼–è¯‘"><a href="#å¼ºåˆ¶ç¼–è¯‘" class="headerlink" title="å¼ºåˆ¶ç¼–è¯‘"></a>å¼ºåˆ¶ç¼–è¯‘</h3><p>è¦å¼ºåˆ¶ç¼–è¯‘ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell cmd <span class="keyword">package</span> <span class="title">compile</span></span><br></pre></td></tr></table></figure><p>å¼ºåˆ¶ç¼–è¯‘ç‰¹å®šè½¯ä»¶åŒ…çš„å¸¸è§ç”¨ä¾‹ï¼š</p><ul><li><p>åŸºäºé…ç½®æ–‡ä»¶ï¼š</p>  <figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell cmd <span class="keyword">package</span> <span class="title">compile -m speed-profile -f my-<span class="keyword">package</span></span></span><br></pre></td></tr></table></figure></li><li><p>å…¨é¢ï¼š</p>  <figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell cmd <span class="keyword">package</span> <span class="title">compile -m speed -f my-<span class="keyword">package</span></span></span><br></pre></td></tr></table></figure></li></ul><p>å¼ºåˆ¶ç¼–è¯‘æ‰€æœ‰è½¯ä»¶åŒ…çš„å¸¸è§ç”¨ä¾‹ï¼š</p><ul><li><p>åŸºäºé…ç½®æ–‡ä»¶ï¼š</p>  <figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell cmd <span class="keyword">package</span> <span class="title">compile -m speed-profile -f -a</span></span><br></pre></td></tr></table></figure></li><li><p>å…¨é¢ï¼š</p>  <figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell cmd <span class="keyword">package</span> <span class="title">compile -m speed -f -a</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="æ¸…é™¤é…ç½®æ–‡ä»¶æ•°æ®"><a href="#æ¸…é™¤é…ç½®æ–‡ä»¶æ•°æ®" class="headerlink" title="æ¸…é™¤é…ç½®æ–‡ä»¶æ•°æ®"></a>æ¸…é™¤é…ç½®æ–‡ä»¶æ•°æ®</h3><p>è¦æ¸…é™¤é…ç½®æ–‡ä»¶æ•°æ®å¹¶ç§»é™¤ç»è¿‡ç¼–è¯‘çš„ä»£ç ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><ul><li><p>é’ˆå¯¹ä¸€ä¸ªè½¯ä»¶åŒ…ï¼š</p>  <figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell cmd <span class="keyword">package</span> compile --<span class="keyword">reset</span> <span class="keyword">my</span>-<span class="keyword">package</span></span><br></pre></td></tr></table></figure></li><li><p>é’ˆå¯¹æ‰€æœ‰è½¯ä»¶åŒ…ï¼š</p>  <figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb <span class="built_in">shell</span> cmd package compile <span class="comment">--reset -a</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;Android Runtime (ART) æ˜¯ Android ä¸Šçš„åº”ç”¨å’Œéƒ¨åˆ†ç³»ç»ŸæœåŠ¡ä½¿ç”¨çš„æ‰˜ç®¡å¼è¿è¡Œæ—¶ã€‚ART åŠå…¶å‰èº« Dalvik æœ€åˆæ˜¯ä¸“ä¸º Android é¡¹ç›®æ‰“é€ çš„ã€‚ä½œä¸ºè¿è¡Œæ—¶çš„ ART å¯æ‰§è¡Œ Dalvik å¯æ‰§è¡Œæ–‡ä»¶å¹¶éµå¾ª Dex å­—èŠ‚ç è§„èŒƒã€‚&lt;/p&gt;
&lt;p&gt;ART å’Œ Dalvik æ˜¯è¿è¡Œ Dex å­—èŠ‚ç çš„å…¼å®¹è¿è¡Œæ—¶ï¼Œå› æ­¤é’ˆå¯¹ Dalvik å¼€å‘çš„åº”ç”¨ä¹Ÿèƒ½åœ¨ ART ç¯å¢ƒä¸­è¿ä½œã€‚ä¸è¿‡ï¼ŒDalvik é‡‡ç”¨çš„ä¸€äº›æŠ€æœ¯å¹¶ä¸é€‚ç”¨äº ARTã€‚æœ‰å…³æœ€é‡è¦é—®é¢˜çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cDovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9ndWlkZS9wcmFjdGljZXMvdmVyaWZ5aW5nLWFwcHMtYXJ0Lmh0bWw/aGw9emgtY24=&quot;&gt;åœ¨ Android Runtime (ART) ä¸ŠéªŒè¯åº”ç”¨è¡Œä¸º&lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/span&gt;ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Android" scheme="http://yonghong.tech/categories/Android/"/>
    
    
    <category term="JVM" scheme="http://yonghong.tech/tags/JVM/"/>
    
    <category term="Android" scheme="http://yonghong.tech/tags/Android/"/>
    
    <category term="ART" scheme="http://yonghong.tech/tags/ART/"/>
    
    <category term="Dalvik" scheme="http://yonghong.tech/tags/Dalvik/"/>
    
    <category term="è¿è¡Œæ—¶" scheme="http://yonghong.tech/tags/%E8%BF%90%E8%A1%8C%E6%97%B6/"/>
    
    <category term="è™šæ‹Ÿæœº" scheme="http://yonghong.tech/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>çœ‹çœ‹å¤§å‚æ˜¯å¦‚ä½•ç”¨äº‘åŸç”Ÿè§£å†³åƒä¸‡è§†é¢‘ä¼šè®®éš¾é¢˜çš„</title>
    <link href="http://yonghong.tech/2021/07/cloud-native-for-videoconferencing/"/>
    <id>http://yonghong.tech/2021/07/cloud-native-for-videoconferencing/</id>
    <published>2021-07-09T14:24:00.000Z</published>
    <updated>2021-07-09T14:24:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è…¾è®¯ï¼šæ­ç§˜æ—¥æ´»åƒä¸‡è…¾è®¯ä¼šè®®å…¨é‡äº‘åŸç”ŸåŒ–ä¸ŠTKEæŠ€æœ¯å®è·µ"><a href="#è…¾è®¯ï¼šæ­ç§˜æ—¥æ´»åƒä¸‡è…¾è®¯ä¼šè®®å…¨é‡äº‘åŸç”ŸåŒ–ä¸ŠTKEæŠ€æœ¯å®è·µ" class="headerlink" title="è…¾è®¯ï¼šæ­ç§˜æ—¥æ´»åƒä¸‡è…¾è®¯ä¼šè®®å…¨é‡äº‘åŸç”ŸåŒ–ä¸ŠTKEæŠ€æœ¯å®è·µ"></a>è…¾è®¯ï¼šæ­ç§˜æ—¥æ´»åƒä¸‡è…¾è®¯ä¼šè®®å…¨é‡äº‘åŸç”ŸåŒ–ä¸ŠTKEæŠ€æœ¯å®è·µ</h2><p>æ–‡ç« é“¾æ¥ï¼š<span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82ODQ0OTA0MTkyODMwNjAzMjcy">https://juejin.cn/post/6844904192830603272<i class="fa fa-external-link-alt"></i></span></p><p>æœ¬æ–‡æ€»ç»“äº†è…¾è®¯ä¼šè®®åœ¨TKEå®¹å™¨åŒ–éƒ¨ç½²æ—¶ç”¨åˆ°çš„å¹³å°ç›¸å…³ç‰¹æ€§ï¼ŒåŒ…æ‹¬ä¸šåŠ¡é•œåƒè‡ªåŠ¨åˆ†æ‰¹ç°åº¦å‘å¸ƒã€ConfigMapåˆ†æ‰¹ç°åº¦å‘å¸ƒã€Podå†…A/Bå®¹å™¨msçº§åˆ‡æ¢å‘å¸ƒã€å¤šé›†ç¾¤å‘å¸ƒç®¡ç†ã€åŸºäºDynamicQuotaçš„äº§å“é…é¢ç®¡ç†ã€æ¢æµ‹èŠ‚ç‚¹å’Œé›†ç¾¤ç¨³å®šæ€§é—®é¢˜ä»¥æå‡è‡ªæ„ˆèƒ½åŠ›ç­‰ã€‚</p><h2 id="åä¸ºï¼šè¿œç¨‹åŠå…¬åˆ©å™¨åä¸ºäº‘WeLinkï¼Œå¦‚ä½•ç»ƒå°±ç¡¬æ ¸æŠ—å‹èƒ½åŠ›ï¼Ÿ"><a href="#åä¸ºï¼šè¿œç¨‹åŠå…¬åˆ©å™¨åä¸ºäº‘WeLinkï¼Œå¦‚ä½•ç»ƒå°±ç¡¬æ ¸æŠ—å‹èƒ½åŠ›ï¼Ÿ" class="headerlink" title="åä¸ºï¼šè¿œç¨‹åŠå…¬åˆ©å™¨åä¸ºäº‘WeLinkï¼Œå¦‚ä½•ç»ƒå°±ç¡¬æ ¸æŠ—å‹èƒ½åŠ›ï¼Ÿ"></a>åä¸ºï¼šè¿œç¨‹åŠå…¬åˆ©å™¨åä¸ºäº‘WeLinkï¼Œå¦‚ä½•ç»ƒå°±ç¡¬æ ¸æŠ—å‹èƒ½åŠ›ï¼Ÿ</h2><p>æ–‡ç« é“¾æ¥ï¼š<span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8xMDYzODgxMzM=">https://zhuanlan.zhihu.com/p/106388133<i class="fa fa-external-link-alt"></i></span></p><p>ä¸šåŠ¡å¿«é€Ÿå¢é•¿å¸¦æ¥çš„æŒ‘æˆ˜èšç„¦åœ¨æµ·é‡è¯·æ±‚çš„å†²å‡»ï¼Œä»æ¶ˆæ¯åˆ°è¯­éŸ³æ¨¡å—ã€è§†é¢‘ä¼šè®®ç³»ç»Ÿï¼Œåä¸ºäº‘WeLinkæ ¸å¿ƒä¸šåŠ¡é‡‡ç”¨å…¨å®¹å™¨åŒ–æ¶æ„ï¼Œç»“åˆåä¸ºäº‘å®¹å™¨å¼•æ“å•é›†ç¾¤ç™¾ä¸‡å®¹å™¨çš„è¶…å¤§è§„æ¨¡æ”¯æ’‘ï¼Œå¯ä»¥è¿…é€Ÿåœ¨æ–°æ‰©å®¹çš„äº‘æœåŠ¡å™¨ä¸Šå¯åŠ¨ä¸šåŠ¡ï¼Œæ¯ç§’æœ€å¿«å¯æ–°å¢1000ä¸šåŠ¡å®ä¾‹ï¼Œå¤§å¤§é™ä½äº†ä¸šåŠ¡é«˜å³°æ—¶æ®µçš„æ–­çº¿ç‡ã€æ•…éšœç‡å’Œè¯·æ±‚ç­‰å¾…æ—¶é•¿ã€‚æ›´èƒ½é€šè¿‡ç‘¶å…‰çš„äºŒæ¬¡è°ƒåº¦è¿›è¡Œçƒ­ç‚¹æ¶ˆé™¤ï¼Œä¿éšœè®¡ç®—èµ„æºå‹åŠ›çš„å¹³å‡åˆ†å¸ƒï¼ŒåŠ©åŠ›ä¸šåŠ¡å¹³ç¨³è¿è¡Œã€‚</p><span id="more"></span><h2 id="å­—èŠ‚ï¼šå­—èŠ‚è·³åŠ¨å®¹å™¨åŒ–åœºæ™¯ä¸‹çš„æ€§èƒ½ä¼˜åŒ–å®è·µ"><a href="#å­—èŠ‚ï¼šå­—èŠ‚è·³åŠ¨å®¹å™¨åŒ–åœºæ™¯ä¸‹çš„æ€§èƒ½ä¼˜åŒ–å®è·µ" class="headerlink" title="å­—èŠ‚ï¼šå­—èŠ‚è·³åŠ¨å®¹å™¨åŒ–åœºæ™¯ä¸‹çš„æ€§èƒ½ä¼˜åŒ–å®è·µ"></a>å­—èŠ‚ï¼šå­—èŠ‚è·³åŠ¨å®¹å™¨åŒ–åœºæ™¯ä¸‹çš„æ€§èƒ½ä¼˜åŒ–å®è·µ</h2><p>æ–‡ç« é“¾æ¥ï¼š<span class="exturl" data-url="aHR0cHM6Ly93d3cuaW5mb3EuY24vYXJ0aWNsZS9tdS0xYkZITm1yZGQwa3liZ1BYeA==">https://www.infoq.cn/article/mu-1bFHNmrdd0kybgPXx<i class="fa fa-external-link-alt"></i></span></p><p>å­—èŠ‚è·³åŠ¨èµ„æºè°ƒåº¦å›¢é˜Ÿè´Ÿè´£ç§æœ‰äº‘å¹³å° TCE çš„åº•å±‚ Kubernetes é›†ç¾¤çš„å¼€å‘å’Œç»´æŠ¤å·¥ä½œã€‚TCE æ‰˜ç®¡äº†å¤´æ¡ã€æŠ–éŸ³ã€å­—èŠ‚å›½é™…åŒ–ä¸šåŠ¡ç­‰å†…éƒ¨ä¸Šä¸‡ä¸ªåœ¨çº¿å¾®æœåŠ¡ã€‚éšç€è¿™äº›ä¸šåŠ¡çš„å¿«é€Ÿå‘å±•ï¼Œé›†ç¾¤è§„æ¨¡ä¸æ–­æ‰©å¤§ï¼Œæœºå™¨è´Ÿè½½è¶Šæ¥è¶Šé«˜ï¼Œè¿ç»´éš¾åº¦å’Œæˆæœ¬é—®é¢˜è¶Šå‘æ˜¾è‘—ã€‚åŸç”Ÿ Kubernetes ä½œä¸ºæ§åˆ¶é¢ç³»ç»Ÿï¼Œå¹¶ä¸èƒ½å¾ˆå¥½åœ°è§£å†³è¿™äº›é—®é¢˜ã€‚ä¸ºäº†æå‡ç³»ç»Ÿå¯è§æ€§ï¼Œæˆ‘ä»¬åŸºäº eBPF å®ç°äº†ç³»ç»Ÿç›‘æ§ï¼Œä½¿å†…æ ¸èƒ½æ›´å¥½åœ°ç†è§£å¾®æœåŠ¡ï¼Œæå¤§åœ°æå‡äº†é—®é¢˜è¯Šæ–­æ•ˆç‡ã€‚ä¸ºæå‡èµ„æºåˆ©ç”¨ç‡ï¼Œæˆ‘ä»¬é€šè¿‡åŠ¨æ€è¶…å”®ï¼Œå®ç°äº†ä¸šåŠ¡å®ä¾‹çš„é«˜å¯†åº¦éƒ¨ç½²ï¼Œå¹¶é€šè¿‡ä¼˜åŒ– Kubernetes èµ„æºæ¨¡å‹ï¼Œæœ‰æ•ˆä¿è¯äº†å»¶æ—¶æ•æ„ŸæœåŠ¡çš„ QoSã€‚</p><h2 id="å¾®è½¯ï¼šAdvancing-Microsoft-Teams-on-Azureâ€”operating-at-pandemic-scale"><a href="#å¾®è½¯ï¼šAdvancing-Microsoft-Teams-on-Azureâ€”operating-at-pandemic-scale" class="headerlink" title="å¾®è½¯ï¼šAdvancing Microsoft Teams on Azureâ€”operating at pandemic scale"></a>å¾®è½¯ï¼šAdvancing Microsoft Teams on Azureâ€”operating at pandemic scale</h2><p>æ–‡ç« é“¾æ¥ï¼š<span class="exturl" data-url="aHR0cHM6Ly9henVyZS5taWNyb3NvZnQuY29tL2VuLXVzL2Jsb2cvYWR2YW5jaW5nLW1pY3Jvc29mdC10ZWFtcy1vbi1henVyZS1vcGVyYXRpbmctYXQtcGFuZGVtaWMtc2NhbGUv">https://azure.microsoft.com/en-us/blog/advancing-microsoft-teams-on-azure-operating-at-pandemic-scale/<i class="fa fa-external-link-alt"></i></span></p><h2 id="Zoomï¼šZoom-deploys-its-core-videoconferencing-service-on-Oracle-Cloud"><a href="#Zoomï¼šZoom-deploys-its-core-videoconferencing-service-on-Oracle-Cloud" class="headerlink" title="Zoomï¼šZoom deploys its core videoconferencing service on Oracle Cloud"></a>Zoomï¼šZoom deploys its core videoconferencing service on Oracle Cloud</h2><p>æ–‡ç« é“¾æ¥ï¼š<span class="exturl" data-url="aHR0cHM6Ly93d3cuemRuZXQuY29tL2FydGljbGUvem9vbS1kZXBsb3lzLWl0cy1jb3JlLXZpZGVvY29uZmVyZW5jaW5nLXNlcnZpY2Utb24tb3JhY2xlLWNsb3VkLw==">https://www.zdnet.com/article/zoom-deploys-its-core-videoconferencing-service-on-oracle-cloud/<i class="fa fa-external-link-alt"></i></span></p><h2 id="å£°ç½‘ï¼šä¼ä¸šäº‘åŸç”Ÿåˆ›æ–°ä¸å®è·µ"><a href="#å£°ç½‘ï¼šä¼ä¸šäº‘åŸç”Ÿåˆ›æ–°ä¸å®è·µ" class="headerlink" title="å£°ç½‘ï¼šä¼ä¸šäº‘åŸç”Ÿåˆ›æ–°ä¸å®è·µ"></a>å£°ç½‘ï¼šä¼ä¸šäº‘åŸç”Ÿåˆ›æ–°ä¸å®è·µ</h2><p>è§†é¢‘é“¾æ¥ï¼š<span class="exturl" data-url="aHR0cHM6Ly95dW5xaS5hbGl5dW4uY29tLzIwMjAvc2Vzc2lvbjg4P2xpdmVJZD00NDE5MQ==">https://yunqi.aliyun.com/2020/session88?liveId=44191<i class="fa fa-external-link-alt"></i></span></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;è…¾è®¯ï¼šæ­ç§˜æ—¥æ´»åƒä¸‡è…¾è®¯ä¼šè®®å…¨é‡äº‘åŸç”ŸåŒ–ä¸ŠTKEæŠ€æœ¯å®è·µ&quot;&gt;&lt;a href=&quot;#è…¾è®¯ï¼šæ­ç§˜æ—¥æ´»åƒä¸‡è…¾è®¯ä¼šè®®å…¨é‡äº‘åŸç”ŸåŒ–ä¸ŠTKEæŠ€æœ¯å®è·µ&quot; class=&quot;headerlink&quot; title=&quot;è…¾è®¯ï¼šæ­ç§˜æ—¥æ´»åƒä¸‡è…¾è®¯ä¼šè®®å…¨é‡äº‘åŸç”ŸåŒ–ä¸ŠTKEæŠ€æœ¯å®è·µ&quot;&gt;&lt;/a&gt;è…¾è®¯ï¼šæ­ç§˜æ—¥æ´»åƒä¸‡è…¾è®¯ä¼šè®®å…¨é‡äº‘åŸç”ŸåŒ–ä¸ŠTKEæŠ€æœ¯å®è·µ&lt;/h2&gt;&lt;p&gt;æ–‡ç« é“¾æ¥ï¼š&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82ODQ0OTA0MTkyODMwNjAzMjcy&quot;&gt;https://juejin.cn/post/6844904192830603272&lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡æ€»ç»“äº†è…¾è®¯ä¼šè®®åœ¨TKEå®¹å™¨åŒ–éƒ¨ç½²æ—¶ç”¨åˆ°çš„å¹³å°ç›¸å…³ç‰¹æ€§ï¼ŒåŒ…æ‹¬ä¸šåŠ¡é•œåƒè‡ªåŠ¨åˆ†æ‰¹ç°åº¦å‘å¸ƒã€ConfigMapåˆ†æ‰¹ç°åº¦å‘å¸ƒã€Podå†…A/Bå®¹å™¨msçº§åˆ‡æ¢å‘å¸ƒã€å¤šé›†ç¾¤å‘å¸ƒç®¡ç†ã€åŸºäºDynamicQuotaçš„äº§å“é…é¢ç®¡ç†ã€æ¢æµ‹èŠ‚ç‚¹å’Œé›†ç¾¤ç¨³å®šæ€§é—®é¢˜ä»¥æå‡è‡ªæ„ˆèƒ½åŠ›ç­‰ã€‚&lt;/p&gt;
&lt;h2 id=&quot;åä¸ºï¼šè¿œç¨‹åŠå…¬åˆ©å™¨åä¸ºäº‘WeLinkï¼Œå¦‚ä½•ç»ƒå°±ç¡¬æ ¸æŠ—å‹èƒ½åŠ›ï¼Ÿ&quot;&gt;&lt;a href=&quot;#åä¸ºï¼šè¿œç¨‹åŠå…¬åˆ©å™¨åä¸ºäº‘WeLinkï¼Œå¦‚ä½•ç»ƒå°±ç¡¬æ ¸æŠ—å‹èƒ½åŠ›ï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;åä¸ºï¼šè¿œç¨‹åŠå…¬åˆ©å™¨åä¸ºäº‘WeLinkï¼Œå¦‚ä½•ç»ƒå°±ç¡¬æ ¸æŠ—å‹èƒ½åŠ›ï¼Ÿ&quot;&gt;&lt;/a&gt;åä¸ºï¼šè¿œç¨‹åŠå…¬åˆ©å™¨åä¸ºäº‘WeLinkï¼Œå¦‚ä½•ç»ƒå°±ç¡¬æ ¸æŠ—å‹èƒ½åŠ›ï¼Ÿ&lt;/h2&gt;&lt;p&gt;æ–‡ç« é“¾æ¥ï¼š&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8xMDYzODgxMzM=&quot;&gt;https://zhuanlan.zhihu.com/p/106388133&lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ä¸šåŠ¡å¿«é€Ÿå¢é•¿å¸¦æ¥çš„æŒ‘æˆ˜èšç„¦åœ¨æµ·é‡è¯·æ±‚çš„å†²å‡»ï¼Œä»æ¶ˆæ¯åˆ°è¯­éŸ³æ¨¡å—ã€è§†é¢‘ä¼šè®®ç³»ç»Ÿï¼Œåä¸ºäº‘WeLinkæ ¸å¿ƒä¸šåŠ¡é‡‡ç”¨å…¨å®¹å™¨åŒ–æ¶æ„ï¼Œç»“åˆåä¸ºäº‘å®¹å™¨å¼•æ“å•é›†ç¾¤ç™¾ä¸‡å®¹å™¨çš„è¶…å¤§è§„æ¨¡æ”¯æ’‘ï¼Œå¯ä»¥è¿…é€Ÿåœ¨æ–°æ‰©å®¹çš„äº‘æœåŠ¡å™¨ä¸Šå¯åŠ¨ä¸šåŠ¡ï¼Œæ¯ç§’æœ€å¿«å¯æ–°å¢1000ä¸šåŠ¡å®ä¾‹ï¼Œå¤§å¤§é™ä½äº†ä¸šåŠ¡é«˜å³°æ—¶æ®µçš„æ–­çº¿ç‡ã€æ•…éšœç‡å’Œè¯·æ±‚ç­‰å¾…æ—¶é•¿ã€‚æ›´èƒ½é€šè¿‡ç‘¶å…‰çš„äºŒæ¬¡è°ƒåº¦è¿›è¡Œçƒ­ç‚¹æ¶ˆé™¤ï¼Œä¿éšœè®¡ç®—èµ„æºå‹åŠ›çš„å¹³å‡åˆ†å¸ƒï¼ŒåŠ©åŠ›ä¸šåŠ¡å¹³ç¨³è¿è¡Œã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="äº‘åŸç”Ÿ" scheme="http://yonghong.tech/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/"/>
    
    
    <category term="äº‘åŸç”Ÿ" scheme="http://yonghong.tech/tags/%E4%BA%91%E5%8E%9F%E7%94%9F/"/>
    
  </entry>
  
  <entry>
    <title>Java è¿›é˜¶ 08 â€”â€” JVM åƒåœ¾å›æ”¶å™¨</title>
    <link href="http://yonghong.tech/java-advance/08-jvm-gc/"/>
    <id>http://yonghong.tech/java-advance/08-jvm-gc/</id>
    <published>2021-07-02T13:00:00.000Z</published>
    <updated>2021-07-02T13:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åƒåœ¾å›æ”¶å™¨æ¦‚è¿°"><a href="#åƒåœ¾å›æ”¶å™¨æ¦‚è¿°" class="headerlink" title="åƒåœ¾å›æ”¶å™¨æ¦‚è¿°"></a>åƒåœ¾å›æ”¶å™¨æ¦‚è¿°</h2><p>åƒåœ¾æ”¶é›†å™¨æ²¡æœ‰åœ¨è§„èŒƒä¸­è¿›è¡Œè¿‡å¤šçš„è§„å®šï¼Œå¯ä»¥ç”±ä¸åŒçš„å‚å•†ï¼Œä¸åŒç‰ˆæœ¬çš„ JVM æ¥å®ç°ã€‚</p><p>ç”±äº JDK çš„ç‰ˆæœ¬å¤„äºé«˜é€Ÿè¿­ä»£è¿‡ç¨‹ä¸­ï¼Œå› æ­¤ Java å‘å±•è‡³ä»Šå·²ç»è¡ç”Ÿäº†ä¼—å¤šçš„ GC ç‰ˆæœ¬ã€‚</p><span id="more"></span><p>ä»ä¸åŒè§’åº¦åˆ†æåƒåœ¾æ”¶é›†å™¨ï¼Œå¯ä»¥å°† GC åˆ†ä¸ºä¸åŒçš„ç±»å‹ã€‚</p><p>Java ä¸åŒç‰ˆæœ¬çš„æ–°ç‰¹æ€§éœ€è¦å…³æ³¨çš„ç‚¹ï¼š</p><ul><li>è¯­æ³•å±‚é¢ï¼ŒLambdaè¡¨è¾¾å¼ï¼Œswitch è¡¨è¾¾å¼ï¼Œè‡ªåŠ¨è£…ç®±ã€æ‹†ç®±ï¼Œenumï¼Œ&lt;&gt;ï¼Œâ€¦</li><li>API å±‚é¢ï¼šStream APIï¼Œæ–°çš„æ—¶é—´æ—¥æœŸï¼ŒOptionalï¼ŒStringï¼Œé›†åˆæ¡†æ¶</li><li>åº•å±‚ä¼˜åŒ–ï¼šJVM çš„ä¼˜åŒ–ï¼Œå…ƒç©ºé—´ï¼Œé™æ€åŸŸï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± ï¼ŒGC çš„å˜åŒ–ï¼Œå¤šè¯­è¨€çš„æ”¯æŒ</li></ul><h2 id="åƒåœ¾å›æ”¶å™¨çš„åˆ†ç±»"><a href="#åƒåœ¾å›æ”¶å™¨çš„åˆ†ç±»" class="headerlink" title="åƒåœ¾å›æ”¶å™¨çš„åˆ†ç±»"></a>åƒåœ¾å›æ”¶å™¨çš„åˆ†ç±»</h2><ul><li><p>æŒ‰çº¿ç¨‹æ•°åˆ†ï¼Œå¯ä»¥åˆ†ä¸ºä¸²è¡Œåƒåœ¾å›æ”¶å™¨ï¼ˆSerial Collectorï¼‰å’Œå¹¶è¡Œåƒåœ¾å›æ”¶å™¨ï¼ˆParallel Collectorï¼‰ã€‚</p><ul><li><p>ä¸²è¡Œå›æ”¶æŒ‡çš„æ˜¯åœ¨åŒä¸€æ—¶é—´æ®µå†…åªå…è®¸æœ‰ä¸€ä¸ª CPU ç”¨äºæ‰§è¡Œåƒåœ¾å›æ”¶æ“ä½œï¼Œæ­¤æ—¶å·¥ä½œçº¿ç¨‹è¢«æš‚åœï¼Œç›´è‡³åƒåœ¾æ”¶é›†å·¥ä½œç»“æŸã€‚</p></li><li><p>åœ¨è¯¸å¦‚å• CPU å¤„ç†å™¨æˆ–è€…è¾ƒå°çš„åº”ç”¨å†…å­˜ç­‰ç¡¬ä»¶å¹³å°ä¸æ˜¯ç‰¹åˆ«ä¼˜è¶Šçš„åœºåˆï¼Œä¸²è¡Œå›æ”¶å™¨çš„æ€§èƒ½è¡¨ç°å¯ä»¥è¶…è¿‡å¹¶è¡Œå›æ”¶å™¨å’Œå¹¶å‘å›æ”¶å™¨ã€‚æ‰€ä»¥ä¸²è¡Œå›æ”¶å™¨é»˜è®¤è¢«åº”ç”¨åœ¨å®¢æˆ·ç«¯çš„ Client æ¨¡å¼ä¸‹çš„ JVM ä¸­ã€‚</p></li><li><p>åœ¨å¹¶å‘èƒ½åŠ›æ¯”è¾ƒå¼ºçš„ CPU ä¸Šï¼Œå¹¶è¡Œå›æ”¶å™¨äº§ç”Ÿçš„åœé¡¿æ—¶é—´è¦çŸ­äºä¸²è¡Œå›æ”¶å™¨ã€‚</p></li></ul></li><li><p>å’Œä¸²è¡Œå›æ”¶ç›¸åï¼Œå¹¶è¡Œæ”¶é›†å¯ä»¥è¿ç”¨å¤šä¸ª CPU åŒæ—¶æ‰§è¡Œåƒåœ¾å›æ”¶ï¼Œå› æ­¤æå‡äº†åº”ç”¨çš„ååé‡ï¼Œä¸è¿‡å¹¶è¡Œå›æ”¶ä»ç„¶ä¸ä¸²è¡Œå›æ”¶ä¸€æ ·ï¼Œé‡‡ç”¨ç‹¬å å¼ï¼Œä½¿ç”¨äº† STW æœºåˆ¶ã€‚</p></li><li><p>æŒ‰ç…§å·¥ä½œæ¨¡å¼åˆ†ï¼Œå¯ä»¥åˆ†ä¸ºå¹¶å‘å¼åƒåœ¾å›æ”¶å™¨å’Œç‹¬å å¼åƒåœ¾å›æ”¶å™¨ã€‚</p><ul><li>å¹¶å‘å¼åƒåœ¾å›æ”¶å™¨ä¸åº”ç”¨ç¨‹åºçº¿ç¨‹äº¤æ›¿å·¥ä½œï¼Œä»¥å°½å¯èƒ½å‡å°‘åº”ç”¨ç¨‹åºçš„åœé¡¿æ—¶é—´ã€‚</li><li>ç‹¬å å¼åƒåœ¾å›æ”¶å™¨ä¸€æ—¦è¿è¡Œï¼Œå°±åœæ­¢åº”ç”¨ç¨‹åºä¸­çš„æ‰€æœ‰ç”¨äºçº¿ç¨‹ï¼Œç›´åˆ°åƒåœ¾å›æ”¶è¿‡ç¨‹å®Œå…¨ç»“æŸã€‚</li></ul></li><li><p>æŒ‰ç¢ç‰‡å¤„ç†æ–¹å¼åˆ†ï¼Œå¯ä»¥åˆ†ä¸ºå‹ç¼©å¼åƒåœ¾å›æ”¶å™¨å’Œéå‹ç¼©å¼åƒåœ¾å›æ”¶å™¨ã€‚</p><ul><li>å‹ç¼©å¼åƒåœ¾å›æ”¶å™¨ä¼šåœ¨å›æ”¶å®Œæˆåï¼Œå¯¹å­˜æ´»å¯¹è±¡è¿›è¡Œå‹ç¼©æ•´ç†ï¼Œæ¶ˆé™¤å›æ”¶åçš„ç¢ç‰‡ã€‚ï¼ˆå†åˆ†é…å¯¹è±¡ç©ºé—´ä½¿ç”¨æŒ‡é’ˆç¢°æ’ï¼‰</li><li>éå‹ç¼©å¼çš„åƒåœ¾å›æ”¶å™¨ä¸è¿›è¡Œè¿™æ­¥æ“ä½œã€‚ï¼ˆå†åˆ†é…å¯¹è±¡ç©ºé—´ä½¿ç”¨ç©ºé—²åˆ—è¡¨ï¼‰</li></ul></li><li><p>æŒ‰å·¥ä½œçš„å†…å­˜åŒºé—´åˆ†ï¼Œåˆå¯åˆ†ä¸ºå¹´è½»ä»£åƒåœ¾å›æ”¶å™¨å’Œè€å¹´ä»£åƒåœ¾å›æ”¶å™¨ã€‚</p></li></ul><h2 id="è¯„ä¼°-GC-çš„æ€§èƒ½æŒ‡æ ‡"><a href="#è¯„ä¼°-GC-çš„æ€§èƒ½æŒ‡æ ‡" class="headerlink" title="è¯„ä¼° GC çš„æ€§èƒ½æŒ‡æ ‡"></a>è¯„ä¼° GC çš„æ€§èƒ½æŒ‡æ ‡</h2><ul><li><strong>ååé‡</strong>ï¼šè¿è¡Œç”¨æˆ·ä»£ç çš„æ—¶é—´å æ€»è¿è¡Œæ—¶é—´çš„æ¯”ä¾‹<ul><li>æ€»è¿è¡Œæ—¶é—´ï¼šç¨‹åºçš„è¿è¡Œæ—¶é—´ + å†…å­˜å›æ”¶çš„æ—¶é—´</li></ul></li><li>åƒåœ¾æ”¶é›†å¼€é”€ï¼šååé‡çš„è¡¥æ•°ï¼Œåƒåœ¾æ”¶é›†æ‰€ç”¨æ—¶é—´ä¸æ€»è¿è¡Œæ—¶é—´çš„æ¯”ä¾‹ã€‚</li><li><strong>æš‚åœæ—¶é—´</strong>ï¼š<strong>æ‰§è¡Œåƒåœ¾æ”¶é›†æ—¶ï¼Œç¨‹åºçš„å·¥ä½œçº¿ç¨‹è¢«æš‚åœçš„æ—¶é—´</strong>ã€‚</li><li>æ”¶é›†é¢‘ç‡ï¼šç›¸å¯¹äºåº”ç”¨ç¨‹åºçš„æ‰§è¡Œï¼Œæ”¶é›†æ“ä½œå‘ç”Ÿçš„é¢‘ç‡ã€‚</li><li><strong>å†…å­˜å ç”¨</strong>ï¼šJava å †åŒºæ‰€å çš„å†…å­˜å¤§å°ã€‚</li><li>å¿«é€Ÿï¼šä¸€ä¸ªå¯¹è±¡ä»è¯ç”Ÿåˆ°è¢«å›æ”¶æ‰€ç»å†çš„æ—¶é—´ã€‚</li></ul><p>ååé‡ã€æš‚åœæ—¶é—´ã€å†…å­˜å ç”¨ï¼Œè¿™ä¸‰è€…å…±åŒæ„æˆä¸€ä¸ªä¸å¯èƒ½ä¸‰è§’ã€‚ä¸‰è€…æ€»ä½“çš„è¡¨ç°ä¼šéšç€æŠ€æœ¯è¿›æ­¥è€Œè¶Šæ¥è¶Šå¥½ã€‚ä¸€æ¬¾ä¼˜ç§€çš„æ”¶é›†å™¨é€šå¸¸æœ€å¤šåŒæ—¶æ»¡è¶³å…¶ä¸­çš„ä¸¤é¡¹ã€‚</p><p>è¿™ä¸‰é¡¹é‡Œï¼Œæš‚åœæ—¶é—´çš„é‡è¦æ€§æ—¥ç›Šå‡¸æ˜¾ã€‚å› ä¸ºéšç€ç¡¬ä»¶å‘å±•ï¼Œå†…å­˜å ç”¨å¤šäº›è¶Šæ¥è¶Šèƒ½å®¹å¿ï¼Œç¡¬ä»¶æ€§èƒ½çš„æå‡æœ‰æœ‰åŠ©äºé™ä½æ”¶é›†å™¨è¿è¡Œæ—¶å¯¹åº”ç”¨ç¨‹åºçš„å½±å“ï¼Œå³æé«˜äº†ååé‡ã€‚è€Œå†…å­˜çš„æ‰©å¤§ï¼Œå¯¹å»¶è¿Ÿåè€Œå¸¦æ¥è´Ÿé¢çš„æ•ˆæœã€‚</p><p>ç®€å•æ¥è¯´ï¼Œä¸»è¦æŠ“ä½ä¸¤ç‚¹ï¼š<strong>ååé‡</strong>å’Œ<strong>æš‚åœæ—¶é—´</strong>ã€‚</p><h3 id="ååé‡ï¼ˆthroughputï¼‰"><a href="#ååé‡ï¼ˆthroughputï¼‰" class="headerlink" title="ååé‡ï¼ˆthroughputï¼‰"></a>ååé‡ï¼ˆthroughputï¼‰</h3><p>ååé‡å°±æ˜¯ CPU ç”¨äºè¿è¡Œç”¨æˆ·ä»£ç çš„æ—¶é—´ä¸ CPU æ€»æ¶ˆè€—æ—¶é—´çš„æ¯”å€¼ï¼Œå³ååé‡ = è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´ / ï¼ˆè¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´ + åƒåœ¾æ”¶é›†æ—¶é—´ï¼‰</p><ul><li>æ¯”å¦‚ï¼šè™šæ‹Ÿæœºæ€»å…±è¿è¡Œäº† 100 åˆ†é’Ÿï¼Œå…¶ä¸­åƒåœ¾æ”¶é›†èŠ±æ‰ 1 åˆ†é’Ÿï¼Œé‚£ååé‡å°±æ˜¯ 99%</li></ul><p>è¿™ç§æƒ…å†µä¸‹ï¼Œåº”ç”¨ç¨‹åºèƒ½å®¹å¿è¾ƒé«˜çš„æš‚åœæ—¶é—´ï¼Œå› æ­¤ï¼Œé«˜ååé‡çš„åº”ç”¨ç¨‹åºæœ‰æ›´é•¿çš„æ—¶é—´åŸºå‡†ï¼Œå¿«é€Ÿå“åº”æ˜¯ä¸å¿…è€ƒè™‘çš„ã€‚</p><p>ååé‡ä¼˜å…ˆï¼Œæ„å‘³ç€åœ¨å•ä½æ—¶é—´å†…ï¼ŒSTW çš„æ—¶é—´æœ€çŸ­ï¼š0.2 + 0.2 = 0.4</p><h3 id="æš‚åœæ—¶é—´ï¼ˆpause-timeï¼‰"><a href="#æš‚åœæ—¶é—´ï¼ˆpause-timeï¼‰" class="headerlink" title="æš‚åœæ—¶é—´ï¼ˆpause timeï¼‰"></a>æš‚åœæ—¶é—´ï¼ˆpause timeï¼‰</h3><p>æš‚åœæ—¶é—´æ˜¯æŒ‡ä¸€ä¸ªæ—¶é—´æ®µå†…åº”ç”¨ç¨‹åºçº¿ç¨‹æš‚åœï¼Œè®© GC çº¿ç¨‹æ‰§è¡Œçš„çŠ¶æ€</p><ul><li>ä¾‹å¦‚ï¼ŒGC æœŸé—´ 100 æ¯«ç§’çš„æš‚åœæ—¶é—´æ„å‘³ç€åœ¨è¿™ 100 æ¯«ç§’æœŸé—´å†…æ²¡æœ‰åº”ç”¨ç¨‹åºçº¿ç¨‹æ˜¯æ´»åŠ¨çš„ã€‚</li></ul><p>æš‚åœæ—¶é—´ä¼˜å…ˆï¼Œæ„å‘³ç€å°½å¯èƒ½è®©å•æ¬¡ STW çš„æ—¶é—´æœ€çŸ­ï¼š0.1 + 0.1 + 0.1 + 0.1 + 0.1 = 0.5</p><h3 id="ååé‡-vs-æš‚åœæ—¶é—´"><a href="#ååé‡-vs-æš‚åœæ—¶é—´" class="headerlink" title="ååé‡ vs æš‚åœæ—¶é—´"></a>ååé‡ vs æš‚åœæ—¶é—´</h3><p>é«˜ååé‡è¾ƒå¥½å› ä¸ºè¿™ä¼šè®©åº”ç”¨ç¨‹åºçš„æœ€ç»ˆç”¨æˆ·æ„Ÿè§‰åˆ°åªæœ‰åº”ç”¨ç¨‹åºçº¿ç¨‹åœ¨åšâ€ç”Ÿäº§æ€§â€œå·¥ä½œã€‚ç›´è§‰ä¸Šï¼Œååé‡è¶Šé«˜ç¨‹åºè¿è¡Œè¶Šå¿«ã€‚</p><p>ä½æš‚åœæ—¶é—´ï¼ˆä½å»¶è¿Ÿï¼‰è¾ƒå¥½å› ä¸ºä»æœ€ç»ˆç”¨æˆ·çš„è§’åº¦æ¥çœ‹ä¸ç®¡æ˜¯ GC è¿˜æ˜¯å…¶ä»–åŸå› å¯¼è‡´ä¸€ä¸ªåº”ç”¨è¢«æŒ‚èµ·å§‹ç»ˆæ˜¯ä¸å¥½çš„ã€‚è¿™å–å†³äºåº”ç”¨ç¨‹åºçš„ç±»å‹ï¼Œæœ‰æ—¶å€™ç”šè‡³çŸ­æš‚çš„ 200 æ¯«ç§’æš‚åœéƒ½å¯èƒ½æ‰“æ–­ç»ˆç«¯ç”¨æˆ·ä½“éªŒã€‚å› æ­¤å…·æœ‰ä½çš„è¾ƒå¤§æš‚åœæ—¶é—´æ˜¯éå¸¸é‡è¦çš„ï¼Œç‰¹åˆ«æ˜¯å¯¹äºä¸€ä¸ªäº¤äº’å¼åº”ç”¨ç¨‹åºã€‚</p><p>ä¸å¹¸çš„æ˜¯ â€é«˜ååé‡â€œ å’Œ â€ä½æš‚åœæ—¶é—´â€œ æ˜¯ä¸€å¯¹ç›¸äº’ç«äº‰çš„ç›®æ ‡ï¼ˆçŸ›ç›¾ï¼‰ã€‚</p><ul><li>å› ä¸ºå¦‚æœé€‰æ‹©ä»¥ååé‡ä¼˜å…ˆï¼Œé‚£ä¹ˆå¿…ç„¶éœ€è¦é™ä½å†…å­˜å›æ”¶çš„æ‰§è¡Œé¢‘ç‡ï¼Œä½†æ˜¯è¿™æ ·ä¼šå¯¼è‡´ GC éœ€è¦æ›´é•¿çš„æš‚åœæ—¶é—´æ¥æ‰§è¡Œå†…å­˜å›æ”¶ã€‚</li><li>ç›¸åçš„ï¼Œå¦‚æœé€‰æ‹©ä»¥ä½å»¶è¿Ÿä¼˜å…ˆä¸ºåŸåˆ™ï¼Œé‚£ä¹ˆä¸ºäº†é™ä½æ¯æ¬¡æ‰§è¡Œå†…å­˜å›æ”¶æ—¶çš„æš‚åœæ—¶é—´ï¼Œä¹Ÿåªèƒ½é¢‘ç¹åœ°æ‰§è¡Œå†…å­˜å›æ”¶ï¼Œä½†è¿™åˆå¼•èµ·äº†å¹´è½»ä»£å†…å­˜çš„ç¼©å‡å’Œå¯¼è‡´ç¨‹åºååé‡çš„ä¸‹é™ã€‚</li></ul><p>åœ¨è®¾è®¡ï¼ˆæˆ–ä½¿ç”¨ï¼‰GC ç®—æ³•æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»ç¡®å®šæˆ‘ä»¬çš„ç›®æ ‡ï¼šä¸€ä¸ª GC ç®—æ³•åªå¯èƒ½é’ˆå¯¹ä¸¤ä¸ªç›®æ ‡ä¹‹ä¸€ï¼ˆå³åªä¸“æ³¨äºè¾ƒå¤§ååé‡æˆ–æœ€å°æš‚åœæ—¶é—´ï¼‰ï¼Œæˆ–å°è¯•æ‰¾åˆ°ä¸€ä¸ªäºŒè€…çš„æŠ˜ä¸­ã€‚</p><p>ç°åœ¨æ ‡å‡†ï¼šåœ¨æœ€å¤§ååé‡ä¼˜å…ˆçš„æƒ…å†µä¸‹ï¼Œé™ä½åœé¡¿æ—¶é—´ã€‚ </p><h2 id="ä¸åŒçš„åƒåœ¾å›æ”¶å™¨æ¦‚è¿°"><a href="#ä¸åŒçš„åƒåœ¾å›æ”¶å™¨æ¦‚è¿°" class="headerlink" title="ä¸åŒçš„åƒåœ¾å›æ”¶å™¨æ¦‚è¿°"></a>ä¸åŒçš„åƒåœ¾å›æ”¶å™¨æ¦‚è¿°</h2><h3 id="åƒåœ¾æ”¶é›†å™¨å‘å±•å²"><a href="#åƒåœ¾æ”¶é›†å™¨å‘å±•å²" class="headerlink" title="åƒåœ¾æ”¶é›†å™¨å‘å±•å²"></a>åƒåœ¾æ”¶é›†å™¨å‘å±•å²</h3><p>æœ‰äº†è™šæ‹Ÿæœºï¼Œå°±ä¸€å®šéœ€è¦æ”¶é›†åƒåœ¾çš„æœºåˆ¶ï¼Œè¿™å°±æ˜¯ Grabage Collectionï¼Œå¯¹åº”çš„äº§å“æˆ‘ä»¬ç§°ä¸º Garbage Collectorã€‚</p><ul><li>1993 å¹´éš JDK 1.3.1 ä¸€èµ·æ¥çš„æ˜¯ä¸²è¡Œæ–¹å¼çš„ Serial GCï¼Œå®ƒæ˜¯ç¬¬ä¸€æ¬¾ GCã€‚ParNew åƒåœ¾æ”¶é›†å™¨æ˜¯ Serial æ”¶é›†å™¨çš„å¤šçº¿ç¨‹ç‰ˆæœ¬ã€‚</li><li>2002 å¹´ 2 æœˆ 26 æ—¥ï¼ŒParallel GC å’Œ Concurrent Mark Sweep GC è·Ÿéš JDK 1.4.2 ä¸€èµ·å‘å¸ƒã€‚</li><li>Parallel GC åœ¨ JDK 6 ä¹‹åæˆä¸º HotSpot é»˜è®¤ GCã€‚</li><li>2012 å¹´ï¼Œåœ¨ JDK 1.7u4 ç‰ˆæœ¬ä¸­ï¼ŒG1 å¯ç”¨ã€‚</li><li>2017 å¹´ï¼ŒJDK 9 ä¸­ G1 å˜æˆé»˜è®¤çš„åƒåœ¾æ”¶é›†å™¨ï¼Œä»¥æ›¿ä»£ CMSã€‚</li><li>2018 å¹´ 3 æœˆï¼ŒJDK 10 ä¸­ G1 åƒåœ¾å›æ”¶å™¨çš„å¹¶è¡Œå®Œæ•´åƒåœ¾å›æ”¶ï¼Œå®ç°å¹¶è¡Œæ€§æ¥æ”¹å–„æœ€åæƒ…å†µä¸‹çš„å»¶è¿Ÿã€‚</li><li>2018 å¹´ 9 æœˆï¼ŒJDK 11 å‘å¸ƒã€‚å¼•å…¥ Epsilon åƒåœ¾å›æ”¶å™¨ï¼Œåˆè¢«ç§°ä¸º â€No-Opâ€œï¼ˆæ— æ“ä½œï¼‰</li><li>2019 å¹´ 3 æœˆï¼ŒJDK 12 å‘å¸ƒã€‚å¢å¼º G1ï¼Œè‡ªåŠ¨è¿”å›æœªç”¨å †å†…å­˜ç»™æ“ä½œç³»ç»Ÿã€‚åŒæ—¶ï¼Œå¼•å…¥ Shenandoah GCï¼Œæ˜¯ä¸€ä¸ªä½åœé¡¿æ—¶é—´çš„ GCï¼ˆExperimentalï¼‰ã€‚</li><li>2019 å¹´ 9 æœˆï¼ŒJDK 13 å‘å¸ƒã€‚å¢å¼º ZGCï¼Œè‡ªåŠ¨è¿”å›æœªç”¨å †å†…å­˜ç»™æ“ä½œç³»ç»Ÿã€‚</li><li>2020 å¹´ 3 æœˆï¼ŒJDK 14 å‘å¸ƒã€‚åˆ é™¤ CMS åƒåœ¾å›æ”¶å™¨ã€‚æ‹“å±• ZGC åœ¨ macOS å’Œ Windows ä¸Šçš„åº”ç”¨ã€‚</li></ul><h3 id="7-æ¬¾ç»å…¸çš„åƒåœ¾å›æ”¶å™¨"><a href="#7-æ¬¾ç»å…¸çš„åƒåœ¾å›æ”¶å™¨" class="headerlink" title="7 æ¬¾ç»å…¸çš„åƒåœ¾å›æ”¶å™¨"></a>7 æ¬¾ç»å…¸çš„åƒåœ¾å›æ”¶å™¨</h3><p>ä¸²è¡Œå›æ”¶å™¨ï¼šSerialã€Serial Old</p><p>å¹¶è¡Œå›æ”¶å™¨ï¼šParNewã€Parallel Scavengeã€Parallel Old</p><p>å¹¶å‘å›æ”¶å™¨ï¼šCMSã€G1</p><h3 id="7-æ¬¾ç»å…¸çš„åƒåœ¾å›æ”¶å™¨ä¸åƒåœ¾åˆ†ä»£ä¹‹é—´çš„å…³ç³»"><a href="#7-æ¬¾ç»å…¸çš„åƒåœ¾å›æ”¶å™¨ä¸åƒåœ¾åˆ†ä»£ä¹‹é—´çš„å…³ç³»" class="headerlink" title="7 æ¬¾ç»å…¸çš„åƒåœ¾å›æ”¶å™¨ä¸åƒåœ¾åˆ†ä»£ä¹‹é—´çš„å…³ç³»"></a>7 æ¬¾ç»å…¸çš„åƒåœ¾å›æ”¶å™¨ä¸åƒåœ¾åˆ†ä»£ä¹‹é—´çš„å…³ç³»</h3><p>æ–°ç”Ÿä»£æ”¶é›†å™¨ï¼šSerialã€ParNewã€Parallel Scavenge</p><p>è€å¹´ä»£æ”¶é›†å™¨ï¼šSerial Oldã€Parallel Oldã€CMS</p><p>æ•´å †åƒåœ¾æ”¶é›†å™¨ï¼šG1</p><h3 id="åƒåœ¾æ”¶é›†å™¨çš„ç»„åˆå…³ç³»"><a href="#åƒåœ¾æ”¶é›†å™¨çš„ç»„åˆå…³ç³»" class="headerlink" title="åƒåœ¾æ”¶é›†å™¨çš„ç»„åˆå…³ç³»"></a>åƒåœ¾æ”¶é›†å™¨çš„ç»„åˆå…³ç³»</h3><p><img src="https://up-img.yonghong.tech/pic/2021/05/12-20-45-%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8%E7%9A%84%E7%BB%84%E5%90%88%E5%85%B3%E7%B3%BB-BZidDy.png" alt="åƒåœ¾æ”¶é›†å™¨çš„ç»„åˆå…³ç³»"></p><ul><li><p>ä¸¤ä¸ªæ”¶é›†å™¨é—´æœ‰è¿çº¿ï¼Œè¡¨æ˜å®ƒä»¬å¯ä»¥æ­é…ä½¿ç”¨ï¼š</p><p>Serial / Serial Old ã€Serial / CMS ã€ParNew / Serial Old ã€ ParNew / CMS ã€Parallel Scavenge / Serial Old ã€Parallel Scavenge / Parallel Old ã€G1</p></li><li><p>å…¶ä¸­ Serial Old ä½œä¸º CMS å‡ºç° â€Concurrent Mode Failureâ€œ å¤±è´¥çš„åå¤‡é¢„æ¡ˆã€‚</p></li><li><p>ï¼ˆçº¢è‰²è™šçº¿ï¼‰ç”±äºç»´æŠ¤å’Œå…¼å®¹æ€§æµ‹è¯•çš„ç‰ˆæœ¬ï¼Œåœ¨  JDK 8 æ—¶å°† Serial + CMSã€ParNew + Serial Old è¿™ä¸¤ä¸ªç»„åˆå£°æ˜ä¸ºåºŸå¼ƒï¼ˆJEP 173ï¼‰ï¼Œå¹¶åœ¨ JDK 9 ä¸­å®Œå…¨å–æ¶ˆäº†è¿™äº›ç»„åˆçš„æ”¯æŒï¼ˆJEP 214ï¼‰ï¼Œå³ï¼Œç§»é™¤äº†è¿™äº›ç»„åˆã€‚</p></li><li><p>ï¼ˆç»¿è‰²è™šçº¿ï¼‰JDK 14 ä¸­ï¼šå¼ƒç”¨ Parallel Scavenge å’Œ Serial Old ç»„åˆï¼ˆJEP 366ï¼‰</p></li><li><p>ï¼ˆé’è‰²è™šçº¿ï¼‰JDK 14ä¸­ï¼šåˆ é™¤ CMS åƒåœ¾å›æ”¶å™¨ï¼ˆJEP 363ï¼‰</p></li></ul><h3 id="å¦‚ä½•æŸ¥çœ‹é»˜è®¤çš„åƒåœ¾å›æ”¶å™¨"><a href="#å¦‚ä½•æŸ¥çœ‹é»˜è®¤çš„åƒåœ¾å›æ”¶å™¨" class="headerlink" title="å¦‚ä½•æŸ¥çœ‹é»˜è®¤çš„åƒåœ¾å›æ”¶å™¨"></a>å¦‚ä½•æŸ¥çœ‹é»˜è®¤çš„åƒåœ¾å›æ”¶å™¨</h3><p><code>-XX:+PrintCommandLineFlags</code> æŸ¥çœ‹å‘½ä»¤è¡Œç›¸å…³å‚æ•°ï¼ˆåŒ…å«ä½¿ç”¨çš„åƒåœ¾æ”¶é›†å™¨ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -XX:+PrintCommandLineFlags -version</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨å‘½ä»¤è¡ŒæŒ‡ä»¤ï¼š jinfo -flag ç›¸å…³åƒåœ¾å›æ”¶å™¨å‚æ•° è¿›ç¨‹ ID</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> jinfo -flag UseParallelGC 58951</span></span><br><span class="line">-XX:-UseParallelGC</span><br><span class="line"><span class="meta">$</span><span class="bash"> jinfo -flag UseParallelOldGC 58951</span></span><br><span class="line">-XX:-UseParallelOldGC</span><br><span class="line"><span class="meta">$</span><span class="bash"> jinfo -flag UseG1GC 58951</span></span><br><span class="line">-XX:-UseG1GC</span><br><span class="line"><span class="meta">$</span><span class="bash"> jinfo -flag UseConcMarkSweepGC 58951</span></span><br><span class="line">-XX:+UseConcMarkSweepGC</span><br></pre></td></tr></table></figure><h2 id="åƒåœ¾å›æ”¶å™¨ä»‹ç»"><a href="#åƒåœ¾å›æ”¶å™¨ä»‹ç»" class="headerlink" title="åƒåœ¾å›æ”¶å™¨ä»‹ç»"></a>åƒåœ¾å›æ”¶å™¨ä»‹ç»</h2><h3 id="Serial-å›æ”¶å™¨ï¼šä¸²è¡Œå›æ”¶"><a href="#Serial-å›æ”¶å™¨ï¼šä¸²è¡Œå›æ”¶" class="headerlink" title="Serial å›æ”¶å™¨ï¼šä¸²è¡Œå›æ”¶"></a>Serial å›æ”¶å™¨ï¼šä¸²è¡Œå›æ”¶</h3><p>Serial æ”¶é›†å™¨æ˜¯æœ€åŸºæœ¬ã€å†å²æœ€æ‚ ä¹…çš„åƒåœ¾æ”¶é›†å™¨äº†ã€‚JDK 1.3 ä¹‹å‰å›æ”¶æ–°ç”Ÿä»£å”¯ä¸€çš„é€‰æ‹©ã€‚</p><p>Serial æ”¶é›†å™¨ä½œä¸º HotSpot ä¸­ Client æ¨¡å¼ä¸‹çš„é»˜è®¤æ–°ç”Ÿåƒåœ¾æ”¶é›†å™¨ã€‚</p><p>Serial æ”¶é›†å™¨é‡‡ç”¨å¤åˆ¶ç®—æ³•ã€ä¸²è¡Œå›æ”¶å’Œ STW æœºåˆ¶çš„æ–¹å¼æ‰§è¡Œå†…å­˜å›æ”¶ã€‚</p><p>é™¤äº†å¹´è½»ä»£ä¹‹å¤–ï¼ŒSerial æ”¶é›†å™¨è¿˜æä¾›ç”¨äºæ‰§è¡Œè€å¹´ä»£åƒåœ¾æ”¶é›†çš„ Serial Old æ”¶é›†å™¨ã€‚Serial Old æ”¶é›†å™¨åŒæ ·ä¹Ÿé‡‡ç”¨äº†ä¸²è¡Œå›æ”¶å’Œ STW æœºåˆ¶ï¼Œåªä¸è¿‡å†…å­˜å›æ”¶ç®—æ³•ä½¿ç”¨çš„æ˜¯æ ‡è®°-å‹ç¼©ç®—æ³•ã€‚</p><ul><li>Serial Old æ˜¯è¿è¡Œåœ¨ Client æ¨¡å¼ä¸‹é»˜è®¤çš„è€å¹´ä»£çš„åƒåœ¾å›æ”¶å™¨ã€‚</li><li>Serial Old åœ¨ Server æ¨¡å¼ä¸‹ä¸»è¦æœ‰ä¸¤ä¸ªç”¨é€”ï¼šâ‘ ä¸æ–°ç”Ÿä»£çš„ Parallel Scavenge é…åˆä½¿ç”¨ â‘¡ä½œä¸ºè€å¹´ä»£ CMS æ”¶é›†å™¨çš„åå¤‡åƒåœ¾æ”¶é›†æ–¹æ¡ˆã€‚</li></ul><p>è¿™ä¸ªæ”¶é›†å™¨æ˜¯ä¸€ä¸ªå•çº¿ç¨‹çš„æ”¶é›†å™¨ï¼Œä½†å®ƒçš„ â€å•çº¿ç¨‹â€œ çš„æ„ä¹‰å¹¶ä¸ä»…ä»…è¯´æ˜å®ƒ<strong>åªä¼šä½¿ç”¨ä¸€ä¸ª CPU æˆ–ä¸€æ¡æ”¶é›†çº¿ç¨‹å»å®Œæˆåƒåœ¾æ”¶é›†å·¥ä½œ</strong>ï¼Œæ›´é‡è¦çš„æ˜¯åœ¨å®ƒè¿›è¡Œåƒåœ¾æ”¶é›†æ—¶ï¼Œ<strong>å¿…é¡»æš‚åœå…¶ä»–æ‰€æœ‰çš„å·¥ä½œçº¿ç¨‹</strong>ï¼Œç›´åˆ°å®ƒæ”¶é›†ç»“æŸã€‚</p><p>ä¼˜åŠ¿ï¼šç®€å•è€Œé«˜æ•ˆï¼ˆä¸å…¶ä»–æ”¶é›†å™¨çš„å•çº¿ç¨‹æ¯”ï¼‰ï¼Œå¯¹äºé™å®šå•ä¸ª CPU çš„ç¯å¢ƒæ¥è¯´ï¼ŒSerial æ”¶é›†å™¨ç”±äºæ²¡æœ‰çº¿ç¨‹äº¤äº’çš„å¼€é”€ï¼Œä¸“å¿ƒåšåƒåœ¾æ”¶é›†è‡ªç„¶å¯ä»¥è·å¾—æœ€é«˜çš„å•çº¿ç¨‹æ”¶é›†æ•ˆç‡ã€‚</p><ul><li>è¿è¡Œåœ¨ Client æ¨¡å¼ä¸‹çš„è™šæ‹Ÿæœºæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</li></ul><p>åœ¨ç”¨æˆ·çš„æ¡Œé¢åº”ç”¨åœºæ™¯ä¸­ï¼Œå¯ç”¨å†…å­˜ä¸€èˆ¬ä¸å¤§ï¼ˆå‡ å MB è‡³ä¸€ä¸¤ç™¾ MBï¼‰ï¼Œå¯ä»¥åœ¨è¾ƒçŸ­æ—¶é—´å†…å®Œæˆåƒåœ¾å›æ”¶ï¼ˆå‡ å ms è‡³ä¸€ç™¾å¤š msï¼‰ï¼Œåªè¦ä¸é¢‘ç¹å‘ç”Ÿï¼Œä½¿ç”¨ä¸²è¡Œå›æ”¶å™¨æ˜¯å¯ä»¥æ¥å—çš„ã€‚</p><h4 id="å‚æ•°é…ç½®"><a href="#å‚æ•°é…ç½®" class="headerlink" title="å‚æ•°é…ç½®"></a>å‚æ•°é…ç½®</h4><p>åœ¨ HotSpot è™šæ‹Ÿæœºä¸­ï¼Œä½¿ç”¨ <code>-XX:UseSerialGC</code> å‚æ•°å¯ä»¥æŒ‡å®šå¹´è½»ä»£å’Œè€å¹´ä»£éƒ½æ˜¯ç”¨ä¸²è¡Œæ”¶é›†å™¨ã€‚</p><ul><li>ç­‰ä»·äºæ–°ç”Ÿä»£ä½¿ç”¨ Serial GCï¼Œä¸”è€å¹´ä»£ä½¿ç”¨ Serial Old GCã€‚</li></ul><p>æ€»ç»“ï¼šè¿™ç§åƒåœ¾æ”¶é›†å™¨å¤§å®¶äº†è§£ï¼Œç°åœ¨å·²ç»ä¸ç”¨ä¸²è¡Œçš„äº†ã€‚è€Œä¸”åœ¨é™å®šå•æ ¸ CPU æ‰å¯ä»¥ç”¨ã€‚ç°åœ¨éƒ½ä¸æ˜¯å•æ ¸çš„äº†ã€‚</p><p>å¯¹äºäº¤äº’è¾ƒå¼ºçš„åº”ç”¨è€Œè¨€ï¼Œè¿™ç§åƒåœ¾æ”¶é›†å™¨æ˜¯ä¸èƒ½æ¥å—çš„ã€‚ä¸€èˆ¬åœ¨ Java Web åº”ç”¨ç¨‹åºä¸­æ˜¯ä¸ä¼šé‡‡ç”¨ä¸²è¡Œåƒåœ¾æ”¶é›†å™¨çš„ã€‚</p><h3 id="ParNew-å›æ”¶å™¨ï¼šå¹¶è¡Œå›æ”¶"><a href="#ParNew-å›æ”¶å™¨ï¼šå¹¶è¡Œå›æ”¶" class="headerlink" title="ParNew å›æ”¶å™¨ï¼šå¹¶è¡Œå›æ”¶"></a>ParNew å›æ”¶å™¨ï¼šå¹¶è¡Œå›æ”¶</h3><p>å¦‚æœè¯´ Serial GC æ˜¯å¹´è½»ä»£ä¸­çš„å•çº¿ç¨‹åƒåœ¾æ”¶é›†å™¨ï¼Œé‚£ä¹ˆ ParNew æ”¶é›†å™¨åˆ™æ˜¯ Serial æ”¶é›†å™¨çš„å¤šçº¿ç¨‹ç‰ˆæœ¬ã€‚</p><ul><li>Par æ˜¯ Parallel çš„ç¼©å†™ï¼ŒNewï¼šåªèƒ½å¤„ç†çš„æ˜¯æ–°ç”Ÿä»£</li></ul><p>ParNew æ”¶é›†å™¨é™¤äº†é‡‡ç”¨<strong>å¹¶è¡Œå›æ”¶</strong>çš„æ–¹å¼æ‰§è¡Œå†…å­˜å›æ”¶å¤–ï¼Œä¸¤æ¬¾åƒåœ¾æ”¶é›†å™¨ä¹‹é—´å‡ ä¹æ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚ParNew æ”¶é›†å™¨åœ¨å¹´è½»ä»£ä¸­åŒæ ·ä¹Ÿæ˜¯<strong>é‡‡ç”¨å¤åˆ¶ç®—æ³•ã€STW æœºåˆ¶</strong>ã€‚</p><p>ParNew æ˜¯å¾ˆå¤š JVM è¿è¡Œåœ¨ Server æ¨¡å¼ä¸‹æ–°ç”Ÿä»£çš„é»˜è®¤åƒåœ¾æ”¶é›†å™¨ã€‚</p><ul><li>å¯¹äºæ–°ç”Ÿä»£ï¼Œå›æ”¶æ¬¡æ•°é¢‘ç¹ï¼Œä½¿ç”¨å¹¶è¡Œæ–¹å¼é«˜æ•ˆã€‚</li><li>å¯¹äºè€å¹´ä»£ï¼Œå›æ”¶æ¬¡æ•°å°‘ï¼Œä½¿ç”¨ä¸²è¡Œæ–¹å¼èŠ‚çœèµ„æºã€‚ï¼ˆCPUå¹¶è¡Œéœ€è¦åˆ‡æ¢çº¿ç¨‹ï¼Œä¸²è¡Œå¯ä»¥çœå»åˆ‡æ¢çº¿ç¨‹çš„èµ„æºï¼‰</li></ul><p>ç”±äº ParNew æ”¶é›†å™¨æ˜¯åŸºäºå¹¶è¡Œå›æ”¶ï¼Œé‚£ä¹ˆæ˜¯å¦å¯ä»¥æ–­å®š ParNew æ”¶é›†å™¨çš„å›æ”¶æ•ˆç‡åœ¨ä»»ä½•åœºæ™¯ä¸‹éƒ½ä¼šæ¯” Serial æ”¶é›†å™¨æ›´é«˜æ•ˆï¼Ÿ</p><ul><li>ParNew æ”¶é›†å™¨è¿è¡Œåœ¨å¤š CPU ç¯å¢ƒä¸‹ï¼Œç”±äºå¯ä»¥å……åˆ†åˆ©ç”¨å¤š CPUã€å¤šæ ¸å¿ƒç­‰ç‰©ç†ç¡¬ä»¶èµ„æºä¼˜åŠ¿ï¼Œå¯ä»¥æ›´å¿«é€Ÿåœ°å®Œæˆåƒåœ¾æ”¶é›†ï¼Œæå‡ç¨‹åºçš„ååé‡ã€‚</li><li>ä½†æ˜¯åœ¨å•ä¸ª CPU çš„ç¯å¢ƒä¸‹ï¼ŒParNew æ”¶é›†å™¨ä¸æ¯” Serial æ”¶é›†å™¨æ›´é«˜æ•ˆã€‚è™½ç„¶ Serial æ”¶é›†å™¨æ˜¯åŸºäºä¸²è¡Œå›æ”¶ï¼Œä½†æ˜¯ç”±äº CPU ä¸éœ€è¦é¢‘ç¹åœ°åšä»»åŠ¡åˆ‡æ¢ï¼Œå› æ­¤å¯ä»¥æœ‰æ•ˆé¿å…å¤šçº¿ç¨‹äº¤äº’è¿‡ç¨‹ä¸­äº§ç”Ÿçš„ä¸€äº›é¢å¤–å¼€é”€ã€‚</li></ul><p>é™¤ Serial å¤–ï¼Œç›®å‰åªæœ‰ ParNew GC èƒ½ä¸ CMS æ”¶é›†å™¨é…åˆå·¥ä½œã€‚</p><h4 id="å‚æ•°é…ç½®-1"><a href="#å‚æ•°é…ç½®-1" class="headerlink" title="å‚æ•°é…ç½®"></a>å‚æ•°é…ç½®</h4><p>åœ¨ç¨‹åºä¸­ï¼Œå¼€å‘äººå‘˜å¯ä»¥é€šè¿‡é€‰é¡¹ <code>-XX:+UseParNewGC</code> æ‰‹åŠ¨æŒ‡å®šä½¿ç”¨ ParNew æ”¶é›†å™¨æ‰§è¡Œå†…å­˜å›æ”¶ä»»åŠ¡ã€‚å®ƒè¡¨ç¤ºå¹´è½»ä»£ä½¿ç”¨å¹¶è¡Œæ”¶é›†å™¨ï¼Œä¸å½±å“è€å¹´ä»£ã€‚</p><p><code>-XX:ParallelGCThreads</code> é™åˆ¶çº¿ç¨‹æ•°é‡ï¼Œé»˜è®¤å¼€å¯å’Œ CPU æ•°ç›¸åŒçš„çº¿ç¨‹æ•°ã€‚</p><h3 id="Parallel-å›æ”¶å™¨ï¼šååé‡ä¼˜å…ˆ"><a href="#Parallel-å›æ”¶å™¨ï¼šååé‡ä¼˜å…ˆ" class="headerlink" title="Parallel å›æ”¶å™¨ï¼šååé‡ä¼˜å…ˆ"></a>Parallel å›æ”¶å™¨ï¼šååé‡ä¼˜å…ˆ</h3><p>HotSpot çš„å¹´è½»ä»£ä¸­é™¤äº†æ‹¥æœ‰ ParNew æ”¶é›†å™¨æ˜¯åŸºäºå¹¶è¡Œå›æ”¶ä»¥å¤–ï¼ŒParallel Scavenge æ”¶é›†å™¨åŒæ ·ä¹Ÿé‡‡ç”¨äº†å¤åˆ¶ç®—æ³•ã€å¹¶è¡Œå›æ”¶å’Œ STW æœºåˆ¶ã€‚</p><p>é‚£ä¹ˆ Parallel æ”¶é›†å™¨çš„å‡ºç°æ˜¯å¦å¤šæ­¤ä¸€ä¸¾ï¼Ÿ</p><ul><li>å’Œ ParNew æ”¶é›†å™¨ä¸åŒï¼ŒParallel Scavenge æ”¶é›†å™¨çš„ç›®æ ‡æ˜¯è¾¾åˆ°ä¸€ä¸ª<strong>å¯æ§çš„ååé‡</strong>ï¼ˆThroughputï¼‰ï¼Œå®ƒä¹Ÿè¢«ç§°ä¸ºååé‡ä¼˜å…ˆçš„åƒåœ¾æ”¶é›†å™¨ã€‚</li><li>è‡ªé€‚åº”è°ƒèŠ‚ç­–ç•¥ä¹Ÿæ˜¯ Parallel Scavenge ä¸ ParNew çš„ä¸€ä¸ªé‡è¦åŒºåˆ«ã€‚</li></ul><p>é«˜ååé‡åˆ™å¯ä»¥é«˜æ•ˆåœ°åˆ©ç”¨ CPU æ—¶é—´ï¼Œå°½å¿«å®Œæˆç¨‹åºçš„è¿ç®—ä»»åŠ¡ï¼Œä¸»è¦é€‚åˆåœ¨åå°è¿ç®—è€Œä¸éœ€è¦å¤ªå¤šäº¤äº’çš„ä»»åŠ¡ã€‚å› æ­¤ï¼Œå¸¸è§åœ¨æœåŠ¡å™¨ç¯å¢ƒä¸­ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œé‚£äº›æ‰§è¡Œæ‰¹é‡å¤„ç†ã€è®¢å•å¤„ç†ã€å·¥èµ„æ”¯ä»˜ã€ç§‘å­¦è®¡ç®—çš„åº”ç”¨ç¨‹åºã€‚</p><p>Parallel æ”¶é›†å™¨åœ¨ JDK 1.6 æ—¶æä¾›äº†ç”¨äºæ‰§è¡Œè€å¹´ä»£åƒåœ¾æ”¶é›†çš„ Parallel Old æ”¶é›†å™¨ï¼Œç”¨æ¥ä»£æ›¿è€å¹´ä»£çš„ Serial Old æ”¶é›†å™¨ã€‚</p><p>Parallel Old æ”¶é›†å™¨é‡‡ç”¨äº†<strong>æ ‡è®°-å‹ç¼©ç®—æ³•</strong>ï¼Œä½†åŒæ ·ä¹Ÿæ˜¯åŸºäº<strong>å¹¶è¡Œå›æ”¶</strong>å’Œ STW æœºåˆ¶ã€‚</p><p>åœ¨ååé‡ä¼˜å…ˆçš„åº”ç”¨åœºæ™¯ä¸­ï¼ŒParallel æ”¶é›†å™¨å’Œ Parallel Old æ”¶é›†å™¨çš„ç»„åˆï¼Œåœ¨ Server æ¨¡å¼ä¸‹çš„å†…å­˜å›æ”¶æ€§èƒ½å¾ˆä¸é”™ã€‚</p><p>åœ¨ Java 8 ä¸­ï¼Œé»˜è®¤ä¹Ÿæ˜¯æ­¤åƒåœ¾æ”¶é›†å™¨ã€‚</p><h4 id="å‚æ•°é…ç½®-2"><a href="#å‚æ•°é…ç½®-2" class="headerlink" title="å‚æ•°é…ç½®"></a>å‚æ•°é…ç½®</h4><ul><li><code>-XX:+UserParallelGC</code> æ‰‹åŠ¨æŒ‡å®šå¹´è½»ä»£ä½¿ç”¨ Parallel å¹¶è¡Œæ”¶é›†å™¨æ‰§è¡Œå†…å­˜å›æ”¶ä»»åŠ¡ã€‚</li><li><code>-XX:+UseParallelOld</code> æ‰‹åŠ¨æŒ‡å®šè€å¹´ä»£éƒ½æ˜¯ä½¿ç”¨å¹¶è¡Œå›æ”¶æ”¶é›†å™¨ã€‚<ul><li>ä¸Šé¢ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«é€‚ç”¨äºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ã€‚é»˜è®¤ JDK 8 æ˜¯å¼€å¯çš„ã€‚</li><li>ä¸Šé¢ä¸¤ä¸ªå‚æ•°ï¼Œé»˜è®¤å¼€å¯ä¸€ä¸ªï¼Œå¦ä¸€ä¸ªä¹Ÿä¼šè¢«å¼€å¯ã€‚ï¼ˆäº’ç›¸æ¿€æ´»ï¼‰</li></ul></li><li><code>-XX:ParallelGCTheads</code> è®¾ç½®å¹´è½»ä»£å¹¶è¡Œæ”¶é›†å™¨çš„çº¿ç¨‹æ•°ã€‚ä¸€èˆ¬åœ°ï¼Œæœ€å¥½ä¸ CPU æ•°é‡ç›¸ç­‰ï¼Œä»¥é¿å…è¿‡å¤šçš„çº¿ç¨‹æ•°å½±å“åƒåœ¾æ”¶é›†æ€§èƒ½ã€‚<ul><li>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ CPU æ•°é‡å°äº 8 ä¸ªï¼ŒParallelGCThreads çš„å€¼ç­‰äº CPU æ•°é‡ã€‚</li><li>å½“ CPU æ•°é‡å¤§äº 8 ä¸ªï¼ŒParallelGCThreads çš„å€¼ç­‰äº <code>3 + ((5 * CPU_COUNT) / 8 )</code>ã€‚</li></ul></li><li><code>-XX:MaxGCPauseMillis</code> è®¾ç½®åƒåœ¾æ”¶é›†å™¨æœ€å¤§åœé¡¿æ—¶é—´ï¼ˆå³ STW çš„æ—¶é—´ï¼‰ã€‚å•ä½æ˜¯æ¯«ç§’ã€‚<ul><li>ä¸ºäº†å°½å¯èƒ½åœ°æŠŠåœé¡¿æ—¶é—´æ§åˆ¶åœ¨ MaxGCPauseMillis ä»¥å†…ï¼Œæ”¶é›†å™¨åœ¨å·¥ä½œæ—¶ä¼šè°ƒæ•´ Java å †å¤§å°æˆ–è€…å…¶ä»–ä¸€äº›å‚æ•°ã€‚</li><li>å¯¹äºç”¨æˆ·æ¥è®²ï¼Œåœé¡¿æ—¶é—´è¶ŠçŸ­ä½“éªŒè¶Šå¥½ã€‚ä½†æ˜¯åœ¨æœåŠ¡ç«¯ï¼Œæˆ‘ä»¬æ³¨é‡é«˜å¹¶å‘ï¼Œæ•´ä½“çš„ååé‡ã€‚æ‰€ä»¥æœåŠ¡å™¨ç«¯é€‚åˆ Parallelï¼Œè¿›è¡Œæ§åˆ¶</li><li><strong>è¯¥å‚æ•°ä½¿ç”¨éœ€è¦è°¨æ…ã€‚</strong></li></ul></li><li><code>-XX:GCTimeRatio</code> åƒåœ¾æ”¶é›†æ—¶é—´å æ€»æ—¶é—´çš„æ¯”ä¾‹ï¼ˆ= 1 / (N + 1)ï¼‰ã€‚ç”¨äºè¡¡é‡ååé‡çš„å¤§å°ã€‚<ul><li>å–å€¼èŒƒå›´ï¼ˆ0, 100ï¼‰ã€‚é»˜è®¤å€¼ 99ï¼Œä¹Ÿå°±æ˜¯åƒåœ¾å›æ”¶æ—¶é—´ä¸è¶…è¿‡ 1%ã€‚</li><li>ä¸å‰ä¸€ä¸ª <code>-XX:MaxGCPauseMillis</code> å‚æ•°æœ‰ä¸€å®šçš„çŸ›ç›¾æ€§ã€‚æš‚åœæ—¶é—´è¶Šé•¿ï¼ŒRadio å‚æ•°å°±å®¹æ˜“è¶…è¿‡è®¾å®šçš„æ¯”ä¾‹ã€‚</li></ul></li><li><code>-XX:+UseAdaptiveSizePolicy</code> è®¾ç½® Parallel Scavenge æ”¶é›†å™¨å…·æœ‰è‡ªé€‚åº”è°ƒèŠ‚ç­–ç•¥ã€‚<ul><li>åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œå¹´è½»ä»£çš„å¤§å°ï¼ŒEden å’Œ Survivor çš„æ¯”ä¾‹ã€æ™‹å‡è€å¹´ä»£çš„å¯¹è±¡å¹´é¾„ç­‰å‚æ•°ä¼šè¢«è‡ªåŠ¨è°ƒæ•´ï¼Œä»¥è¾¾åˆ°åœ¨å †å¤§å°ã€ååé‡å’Œåœé¡¿æ—¶é—´ä¹‹é—´çš„å¹³è¡¡ç‚¹ã€‚</li><li>åœ¨æ‰‹åŠ¨è°ƒä¼˜æ¯”è¾ƒå›°éš¾çš„åœºåˆï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ç§è‡ªé€‚åº”çš„æ–¹å¼ï¼Œä»…æŒ‡å®šè™šæ‹Ÿæœºçš„æœ€å¤§å †ã€ç›®æ ‡çš„ååé‡ï¼ˆGCTimeRatioï¼‰å’Œåœé¡¿æ—¶é—´ï¼ˆMaxGCPauseMillisï¼‰ï¼Œè®©è™šæ‹Ÿæœºè‡ªå·±å®Œæˆè°ƒåº¦å·¥ä½œã€‚</li></ul></li></ul><h3 id="CMS-å›æ”¶å™¨ï¼šä½å»¶è¿Ÿ"><a href="#CMS-å›æ”¶å™¨ï¼šä½å»¶è¿Ÿ" class="headerlink" title="CMS  å›æ”¶å™¨ï¼šä½å»¶è¿Ÿ"></a>CMS  å›æ”¶å™¨ï¼šä½å»¶è¿Ÿ</h3><p>åœ¨ JDK 1.5 æ—¶æœŸï¼ŒHotSpot æ¨å‡ºäº†ä¸€æ¬¾åœ¨å¼ºäº¤äº’åº”ç”¨ä¸­å‡ ä¹å¯è®¤ä¸ºæœ‰åˆ’æ—¶ä»£æ„ä¹‰çš„åƒåœ¾æ”¶é›†å™¨ï¼šCMSï¼ˆConcurrent-Mark-Sweepï¼‰æ”¶é›†å™¨ï¼Œè¿™æ¬¾æ”¶é›†å™¨æ˜¯ HotSpot è™šæ‹Ÿä¸­ç¬¬ä¸€æ¬¾çœŸæ­£æ„ä¹‰ä¸Šçš„å¹¶å‘æ”¶é›†å™¨ï¼Œå®ƒç¬¬ä¸€æ¬¡å®ç°äº†è®©åƒåœ¾æ”¶é›†çº¿ç¨‹ä¸ç”¨æˆ·çº¿ç¨‹åŒæ—¶å·¥ä½œã€‚</p><p>CMS æ”¶é›†å™¨çš„å…³æ³¨ç‚¹æ˜¯å°½å¯èƒ½ç¼©çŸ­åƒåœ¾æ”¶é›†æ—¶ç”¨æˆ·çº¿ç¨‹çš„åœé¡¿æ—¶é—´ã€‚åœé¡¿æ—¶é—´è¶ŠçŸ­ï¼ˆä½å»¶è¿Ÿï¼‰å°±è¶Šé€‚åˆä¸ç”¨æˆ·äº¤äº’çš„ç¨‹åºï¼Œè‰¯å¥½çš„å“åº”é€Ÿåº¦èƒ½æå‡ç”¨æˆ·ä½“éªŒã€‚</p><ul><li>ç›®å‰å¾ˆå¤§ä¸€éƒ¨åˆ†çš„ Java åº”ç”¨é›†ä¸­åœ¨äº’è”ç½‘ç«™æˆ–è€… B/S ç³»ç»Ÿçš„æœåŠ¡ç«¯ä¸Šï¼Œè¿™ç±»åº”ç”¨å°¤å…¶é‡è§†æœåŠ¡çš„å“åº”é€Ÿåº¦ï¼Œå¸Œæœ›ç³»ç»Ÿåœé¡¿æ—¶é—´æœ€çŸ­ï¼Œä»¥ç»™ç”¨æˆ·å¸¦æ¥è¾ƒå¥½çš„ä½“éªŒã€‚CMS æ”¶é›†å™¨å°±éå¸¸ç¬¦åˆè¿™ç±»åº”ç”¨çš„éœ€æ±‚ã€‚</li></ul><p>CMS çš„åƒåœ¾æ”¶é›†ç®—æ³•é‡‡ç”¨ æ ‡è®°-æ¸…é™¤ ç®—æ³•ï¼Œå¹¶ä¸”ä¹Ÿä¼š STWã€‚</p><p>ä¸å¹¸çš„æ˜¯ï¼ŒCMS ä½œä¸ºè€å¹´ä»£çš„æ”¶é›†å™¨ï¼Œå´æ— æ³•ä¸ JDK 1.4.0 ä¸­å·²ç»å­˜åœ¨çš„æ–°ç”Ÿä»£æ”¶é›†å™¨ Parallel Scavenge æ”¶é›†å™¨é…åˆå·¥ä½œï¼Œæ‰€ä»¥åœ¨ JDK 1.5 ä¸­ä½¿ç”¨ CMS æ¥æ”¶é›†è€å¹´ä»£çš„æ—¶å€™ï¼Œæ–°ç”Ÿä»£åªèƒ½é€‰æ‹© ParNew æˆ–è€… Serial æ”¶é›†å™¨ä¸­çš„ä¸€ä¸ªã€‚</p><p>åœ¨ G1 å‡ºç°ä¹‹å‰ï¼ŒCMS ä½¿ç”¨è¿˜æ˜¯éå¸¸å¹¿æ³›çš„ï¼Œä¸€ç›´åˆ°ä»Šå¤©ï¼Œä»»ç„¶æœ‰å¾ˆå¤šç³»ç»Ÿä½¿ç”¨ CMS GCã€‚</p><h4 id="CMS-å·¥ä½œåŸç†"><a href="#CMS-å·¥ä½œåŸç†" class="headerlink" title="CMS å·¥ä½œåŸç†"></a>CMS å·¥ä½œåŸç†</h4><p>CMS æ•´ä¸ªè¿‡ç¨‹æ¯”ä¹‹å‰çš„æ”¶é›†å™¨è¦å¤æ‚ï¼Œæ•´ä¸ªè¿‡ç¨‹åˆ†ä¸º 4 ä¸ªä¸»è¦é˜¶æ®µï¼Œå³åˆå§‹æ ‡è®°é˜¶æ®µã€å¹¶å‘æ ‡è®°é˜¶æ®µã€é‡æ–°æ ‡è®°é˜¶æ®µã€å¹¶å‘æ¸…é™¤é˜¶æ®µã€‚</p><ul><li>åˆå§‹æ ‡è®°ï¼ˆInitial-Markï¼‰é˜¶æ®µï¼šåœ¨è¿™ä¸ªé˜¶æ®µä¸­ï¼Œç¨‹åºç”¨æ‰€æœ‰çš„å·¥ä½œçº¿ç¨‹éƒ½å°†ä¼šå› ä¸º STW æœºåˆ¶è€Œå‡ºç°çŸ­æš‚çš„æš‚åœï¼Œè¿™ä¸ªé˜¶æ®µçš„ä¸»è¦ä»»åŠ¡<strong>ä»…ä»…æ˜¯æ ‡è®°å‡º GC Roots èƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡</strong>ã€‚ä¸€æ—¦æ ‡è®°å®Œæˆä¹‹åå°±ä¼šæ¢å¤ä¹‹å‰è¢«æš‚åœçš„æ‰€æœ‰åº”ç”¨çº¿ç¨‹ã€‚ç”±äºç›´æ¥å…³è”å¯¹è±¡æ¯”è¾ƒå°ï¼Œæ‰€ä»¥è¿™é‡Œçš„<strong>é€Ÿåº¦éå¸¸å¿«</strong>ã€‚</li><li>å¹¶å‘æ ‡è®°ï¼ˆConcurrent-Markï¼‰é˜¶æ®µï¼š<strong>ä» GC Roots çš„ç›´æ¥å…³è”å¯¹è±¡å¼€å§‹éå†æ•´ä¸ªå¯¹è±¡å›¾çš„è¿‡ç¨‹</strong>ï¼Œè¿™ä¸ªè¿‡ç¨‹<strong>è€—æ—¶è¾ƒé•¿</strong>ä½†æ˜¯<strong>ä¸éœ€è¦åœé¡¿ç”¨æˆ·çº¿ç¨‹</strong>ï¼Œå¯ä»¥ä¸åƒåœ¾æ”¶é›†çº¿ç¨‹ä¸€èµ·å¹¶å‘è¿è¡Œã€‚</li><li>é‡æ–°æ ‡è®°ï¼ˆRemarkï¼‰é˜¶æ®µï¼šç”±äºåœ¨å¹¶å‘æ ‡è®°é˜¶æ®µä¸­ï¼Œç¨‹åºçš„å·¥ä½œçº¿ç¨‹ä¼šå’Œåƒåœ¾æ”¶é›†çº¿ç¨‹åŒæ—¶è¿è¡Œæˆ–äº¤å‰è¿è¡Œï¼Œå› æ­¤ä¸ºäº†<strong>ä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´ï¼Œå› ç”¨æˆ·ç¨‹åºç»§ç»­è¿ä½œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£ä¸€éƒ¨åˆ†å¯¹è±¡çš„æ ‡è®°è®°å½•</strong>ï¼Œè¿™ä¸ªé˜¶æ®µçš„åœé¡¿æ—¶é—´é€šå¸¸ä¼šæ¯”åˆå§‹æ ‡è®°é˜¶æ®µç¨é•¿ä¸€äº›ï¼Œä½†ä¹Ÿè¿œæ¯”å¹¶å‘æ ‡è®°é˜¶æ®µçš„æ—¶é—´çŸ­ã€‚</li><li>å¹¶å‘æ¸…é™¤ï¼ˆConcurrent-Sweepï¼‰é˜¶æ®µï¼šæ­¤é˜¶æ®µ<strong>æ¸…ç†åˆ é™¤æ‰æ ‡è®°é˜¶æ®µçš„å·²ç»æ­»äº¡çš„å¯¹è±¡ï¼Œé‡Šæ”¾å†…å­˜ç©ºé—´</strong>ã€‚ç”±äºä¸éœ€è¦ç§»åŠ¨å­˜æ´»å¯¹è±¡ï¼Œæ‰€ä»¥è¿™ä¸ªé˜¶æ®µä¹Ÿæ˜¯å¯ä»¥ä¸ç”¨æˆ·çº¿ç¨‹åŒæ—¶å¹¶å‘çš„ã€‚</li></ul><h4 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h4><p>å°½ç®¡ CMS æ”¶é›†å™¨é‡‡ç”¨çš„æ˜¯å¹¶å‘å›æ”¶ï¼ˆéç‹¬å å¼ï¼‰ï¼Œä½†æ˜¯åœ¨å…¶<strong>åˆå§‹åŒ–æ ‡è®°å’Œå†æ¬¡æ ‡è®°è¿™ä¸¤ä¸ªé˜¶æ®µä¸­ä»ç„¶éœ€è¦æ‰§è¡Œ STW æœºåˆ¶æš‚åœç¨‹åºä¸­çš„å·¥ä½œçº¿ç¨‹</strong>ï¼Œä¸è¿‡æš‚åœæ—¶é—´å¹¶ä¸ä¼šå¤ªé•¿ï¼Œå› æ­¤å¯ä»¥è¯´æ˜ç›®å‰æ‰€æœ‰çš„åƒåœ¾æ”¶é›†å™¨éƒ½åšä¸åˆ°å®Œå…¨ä¸éœ€è¦ STWï¼Œåªæ˜¯å°½å¯èƒ½çš„ç¼©çŸ­æš‚åœæ—¶é—´ã€‚</p><p>ç”±äºæœ€è€—è´¹æ—¶é—´çš„å¹¶å‘æ ‡è®°ä¸å¹¶å‘æ¸…é™¤é˜¶æ®µéƒ½ä¸éœ€è¦æš‚åœå·¥ä½œï¼Œæ‰€ä»¥æ•´ä½“çš„å›æ”¶æ˜¯ä½å»¶è¿Ÿçš„ã€‚</p><p>å¦å¤–ï¼Œç”±äºåœ¨åƒåœ¾æ”¶é›†é˜¶æ®µç”¨æˆ·çº¿ç¨‹æ²¡æœ‰ä¸­æ–­ï¼Œæ‰€ä»¥åœ¨ CMS å›æ”¶è¿‡ç¨‹ä¸­ï¼Œè¿˜åº”è¯¥ç¡®ä¿åº”ç”¨ç¨‹åºç”¨æˆ·çº¿ç¨‹æœ‰è¶³å¤Ÿçš„å†…å­˜å¯ç”¨ã€‚å› æ­¤ï¼ŒCMS æ”¶é›†å™¨ä¸èƒ½åƒå…¶ä»–æ”¶é›†å™¨é‚£æ ·ç­‰åˆ°è€å¹´ä»£å‡ ä¹å®Œå…¨è¢«å¡«æ»¡äº†åœ¨è¿›è¡Œæ”¶é›†ï¼Œè€Œæ˜¯å½“å †å†…å­˜ä½¿ç”¨ç‡è¾¾åˆ°æŸä¸€é˜ˆå€¼æ—¶ï¼Œä¾¿å¼€å§‹è¿›è¡Œå›æ”¶ï¼Œä»¥ç¡®ä¿åº”ç”¨ç¨‹åºåœ¨ CMS å·¥ä½œè¿‡ç¨‹ä¸­ä¾ç„¶æœ‰è¶³å¤Ÿçš„å†…å­˜ç©ºé—´æ”¯æŒåº”ç”¨ç¨‹åºè¿è¡Œã€‚è¦æ˜¯ CMS è¿è¡ŒæœŸé—´é¢„ç•™çš„å†…å­˜æ— æ³•æ»¡è¶³ç¨‹åºéœ€è¦ï¼Œå°±ä¼šå‡ºç°ä¸€æ¬¡ â€Concurrent Mode Failureâ€œ å¤±è´¥ï¼Œè¿™æ—¶è™šæ‹Ÿæœºå°†å¯åŠ¨åå¤‡é¢„æ¡ˆï¼šä¸´æ—¶å¯ç”¨ Serial Old æ”¶é›†å™¨æ¥é‡æ–°è¿›è¡Œè€å¹´ä»£çš„åƒåœ¾æ”¶é›†ï¼Œè¿™æ ·åœé¡¿æ—¶é—´å°±å¾ˆé•¿äº†ã€‚</p><p>CMS æ”¶é›†å™¨çš„åƒåœ¾æ”¶é›†ç®—æ³•é‡‡ç”¨çš„æ˜¯ æ ‡è®°-æ¸…é™¤ ç®—æ³•ï¼Œè¿™æ„å‘³ç€æ¯æ¬¡æ‰§è¡Œå®Œå†…å­˜å›æ”¶åï¼Œç”±äºè¢«æ‰§è¡Œå†…å­˜å›æ”¶çš„æ— ç”¨å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ææœ‰å¯èƒ½æ˜¯ä¸è¿ç»­çš„ä¸€äº›å†…å­˜å—ï¼Œä¸å¯é¿å…åœ°å°†ä¼šäº§ç”Ÿä¸€äº›å†…å­˜ç¢ç‰‡ã€‚é‚£ä¹ˆ CMS åœ¨ä¸ºæ–°å¯¹è±¡åˆ†é…å†…å­˜ç©ºé—´æ—¶ï¼Œå°†æ— æ³•ä½¿ç”¨æŒ‡é’ˆç¢°æ’ï¼ˆBump the Pointerï¼‰æŠ€æœ¯ï¼Œè€Œåªèƒ½é€‰æ‹©ç©ºé—²åˆ—è¡¨ï¼ˆFree Listï¼‰æ‰§è¡Œå†…å­˜åˆ†é…ã€‚</p><p>æœ‰äººä¼šè§‰å¾—æ—¢ç„¶ Mark Sweep ä¼šé€ æˆå†…å­˜ç¢ç‰‡ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¸æŠŠç®—æ³•æ¢æˆ Mark Compact å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆå…¶å®å¾ˆç®€å•ï¼Œå› ä¸ºå½“å¹¶å‘æ¸…é™¤çš„æ—¶å€™ï¼Œç”¨ Compact æ•´ç†å†…å­˜çš„è¯ï¼ŒåŸæ¥çš„ç”¨æˆ·çº¿ç¨‹ä½¿ç”¨çš„å†…å­˜è¿˜æ€ä¹ˆç”¨ï¼Ÿè¦ä¿è¯ç”¨æˆ·çº¿ç¨‹èƒ½ç»§ç»­æ‰§è¡Œï¼Œå‰æå¾—æ˜¯å®ƒè¿è¡Œçš„èµ„æºä¸å—å½±å“ã€‚Mark Compact æ›´é€‚åˆ STW è¿™ç§åœºæ™¯ä¸‹ä½¿ç”¨ã€‚</p><h4 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h4><ul><li>å¹¶å‘æ”¶é›†</li><li>ä½å»¶è¿Ÿ</li></ul><h4 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><ul><li>ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ï¼Œå¯¼è‡´å¹¶å‘æ¸…é™¤åï¼Œç”¨æˆ·çº¿ç¨‹å¯ç”¨çš„ç©ºé—´ä¸è¶³ã€‚åœ¨æ— æ³•åˆ†é…å¤§å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œä¸å¾—ä¸æå‰è§¦å‘ Full GCã€‚</li><li>å¯¹ CPU èµ„æºéå¸¸æ•æ„Ÿï¼Œåœ¨å¹¶å‘é˜¶æ®µï¼Œå®ƒè™½ç„¶ä¸ä¼šå¯¼è‡´ç”¨æˆ·åœé¡¿ï¼Œä½†æ˜¯ä¼šå› ä¸ºå ç”¨äº†ä¸€éƒ¨åˆ†çº¿ç¨‹è€Œå¯¼è‡´åº”ç”¨ç¨‹åºå˜æ…¢ï¼Œæ€»ååé‡ä¼šé™ä½ã€‚</li><li>æ— æ³•å¤„ç†æµ®åŠ¨åƒåœ¾ï¼Œå¯èƒ½ä¼šå‡ºç° â€Concurrent Mode Failureâ€œ å¤±è´¥è€Œå¯¼è‡´å¦ä¸€æ¬¡ Full GC çš„äº§ç”Ÿã€‚åœ¨å¹¶å‘æ ‡è®°é˜¶æ®µç”±äºç¨‹åºçš„å·¥ä½œçº¿ç¨‹å’Œåƒåœ¾æ”¶é›†çº¿ç¨‹æ˜¯åŒæ—¶è¿è¡Œæˆ–è€…äº¤å‰è¿è¡Œçš„ï¼Œé‚£ä¹ˆåœ¨å¹¶å‘æ ‡è®°é˜¶æ®µå¦‚æœäº§ç”Ÿæ–°çš„åƒåœ¾å¯¹è±¡ï¼ŒCMS å°†æ— æ³•å¯¹è¿™äº›åƒåœ¾å¯¹è±¡è¿›è¡Œæ ‡è®°ï¼Œæœ€ç»ˆä¼šå¯¼è‡´è¿™äº›æ–°äº§ç”Ÿçš„åƒåœ¾å¯¹è±¡æ²¡æœ‰è¢«åŠæ—¶å›æ”¶ï¼Œä»è€Œåªèƒ½åœ¨ä¸‹ä¸€æ¬¡æ‰§è¡Œ GC æ—¶é‡Šæ”¾è¿™äº›ä¹‹å‰æœªè¢«å›æ”¶çš„å†…å­˜ç©ºé—´ã€‚</li></ul><h4 id="å‚æ•°é…ç½®-3"><a href="#å‚æ•°é…ç½®-3" class="headerlink" title="å‚æ•°é…ç½®"></a>å‚æ•°é…ç½®</h4><ul><li><code>-XX:+UseConcMarkSweepGC</code> æ‰‹åŠ¨æŒ‡å®šä½¿ç”¨ CMS æ”¶é›†å™¨æ‰§è¡Œå†…å­˜å›æ”¶ä»»åŠ¡ã€‚<ul><li>å¼€å¯è¯¥å‚æ•°åä¼šè‡ªåŠ¨å°† <code>-XX:+UseParNewGC</code> æ‰“å¼€ã€‚å³ï¼šå¹´è½»ä»£ä½¿ç”¨ ParNew æ”¶é›†å™¨ + è€å¹´ä»£ä½¿ç”¨ CMS æ”¶é›†å™¨ + è€å¹´ä»£çš„å¤‡ç”¨æ”¶é›†å™¨ Serial Old æ”¶é›†å™¨</li></ul></li><li><code>-XX:CMSInitiatingOccupanyFraction</code> è®¾ç½®å †å†…å­˜ä½¿ç”¨ç‡çš„é˜ˆå€¼ï¼Œä¸€æ—¦åˆ°è¾¾è¯¥é˜ˆå€¼ï¼Œä¾¿å¼€å§‹è¿›è¡Œå›æ”¶ã€‚<ul><li>JDK 5 åŠä»¥å‰ç‰ˆæœ¬çš„é»˜è®¤å€¼ä¸º 68ï¼Œå³å½“è€å¹´ä»£çš„ç©ºé—´ä½¿ç”¨ç‡è¾¾åˆ° 68% æ—¶ï¼Œä¼šæ‰§è¡Œä¸€æ¬¡ CMS å›æ”¶ã€‚JDK 6 åŠä»¥ä¸Šçš„ç‰ˆæœ¬é»˜è®¤å€¼ä¸º 92%ã€‚</li><li>å¦‚æœå†…å­˜å¢é•¿ç¼“æ…¢ï¼Œåˆ™å¯ä»¥è®¾ç½®ä¸€ä¸ªç¨å¤§çš„å€¼ï¼Œå¤§çš„é˜ˆå€¼å¯ä»¥æœ‰æ•ˆé™ä½ CMS çš„è§¦å‘é¢‘ç‡ï¼Œå‡å°‘è€å¹´ä»£å›æ”¶çš„æ¬¡æ•°å¯ä»¥è¾ƒä¸ºæ˜æ˜¾åœ°æ”¹å–„åº”ç”¨ç¨‹åºæ€§èƒ½ã€‚åä¹‹ï¼Œå¦‚æœåº”ç”¨ç¨‹åºå†…å­˜ä½¿ç”¨ç‡å¢é•¿å¾ˆå¿«ï¼Œåˆ™åº”è¯¥é™ä½è¿™ä¸ªé˜ˆå€¼ï¼Œä»¥é¿å…é¢‘ç¹è§¦å‘è€å¹´ä»£ä¸²è¡Œæ”¶é›†å™¨ã€‚å› æ­¤é€šè¿‡è¯¥é€‰é¡¹ä¾¿å¯ä»¥æœ‰æ•ˆé™ä½ Full GC çš„æ‰§è¡Œæ¬¡æ•°ã€‚</li></ul></li><li><code>-XX:+UseCMSCompactAtFullCollection</code> ç”¨äºæŒ‡å®šåœ¨æ‰§è¡Œå®Œ Full GC åå¯¹å†…å­˜ç©ºé—´è¿›è¡Œå‹ç¼©æ•´ç†ï¼Œä»¥æ­¤é¿å…å†…å­˜ç¢ç‰‡çš„äº§ç”Ÿã€‚ä¸è¿‡ç”±äºå†…å­˜å‹ç¼©æ•´ç†è¿‡ç¨‹æ— æ³•å¹¶å‘æ‰§è¡Œï¼Œæ‰€å¸¦æ¥çš„é—®é¢˜å°±æ˜¯åœé¡¿æ—¶é—´å˜å¾—æ›´é•¿äº†ã€‚</li><li><code>-XX:CMSFullGCsBeforeCompaction</code> è®¾ç½®åœ¨æ‰§è¡Œå¤šå°‘æ¬¡ Full GC åå¯¹å†…å­˜ç©ºé—´è¿›è¡Œå‹ç¼©æ•´ç†ã€‚</li><li><code>-XX:ParallelCMSThreads</code> è®¾ç½® CMS çš„çº¿ç¨‹æ•°é‡ã€‚<ul><li>CMS é»˜è®¤å¯åŠ¨çš„çº¿ç¨‹æ•°æ˜¯ ï¼ˆParallelCMSThreads + 3ï¼‰ / 4</li><li>ParallelCMSThreads æ˜¯å¹´è½»ä»£å¹¶è¡Œæ”¶é›†å™¨ï¼ˆParNewï¼‰çš„çº¿ç¨‹æ•°ã€‚å½“ CPU èµ„æºæ¯”è¾ƒç´§å¼ æ—¶ï¼Œå—åˆ° CMS æ”¶é›†å™¨çº¿ç¨‹çš„å½±å“ï¼Œåº”ç”¨ç¨‹åºçš„æ€§èƒ½åœ¨åƒåœ¾å›æ”¶é˜¶æ®µå¯èƒ½ä¼šéå¸¸ç³Ÿç³•ã€‚</li></ul></li></ul><h4 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><p>HotSpot æœ‰è¿™ä¹ˆå¤šçš„åƒåœ¾å›æ”¶å™¨ï¼Œé‚£ä¹ˆå¦‚æœæœ‰äººé—®ï¼ŒSerial GCã€Parallel GCã€CMS GC è¿™ä¸‰ä¸ª GC æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ</p><ul><li>å¦‚æœä½ æƒ³è¦æœ€å°åŒ–åœ°ä½¿ç”¨å†…å­˜å’Œå¹¶è¡Œå¼€é”€ï¼Œè¯·é€‰æ‹© Serial GC</li><li>å¦‚æœä½ æƒ³è¦æœ€å¤§åŒ–åº”ç”¨ç¨‹åºçš„ååé‡ï¼Œè¯·é€‰æ‹© Parallel GC</li><li>å¦‚æœä½ æƒ³è¦æœ€å°åŒ– GC çš„ä¸­æ–­æˆ–åœé¡¿æ—¶é—´ï¼Œè¯·é€‰æ‹© CMS GC</li></ul><p>JDK 9 æ–°ç‰¹æ€§ï¼šCMS è¢«æ ‡è®°ä¸º Deprecate äº†ï¼ˆJEP291ï¼‰</p><ul><li>å¦‚æœå¯¹ JDK 9 åŠä»¥ä¸Šç‰ˆæœ¬çš„ HotSpot è™šæ‹Ÿæœºä½¿ç”¨å‚æ•° <code>-XX:+UseConcMarkSweepGC</code> æ¥å¼€å¯ CMS æ”¶é›†å™¨çš„è¯ï¼Œç”¨æˆ·ä¼šæ”¶åˆ°ä¸€ä¸ªè­¦å‘Šä¿¡æ¯ï¼Œæç¤º CMS ä¸ºäº†å°†ä¼šè¢«å»é™¤ã€‚</li></ul><p>JDK 14 æ–°ç‰¹æ€§ï¼šå»é™¤ CMS åƒåœ¾æ”¶é›†å™¨ï¼ˆJEP363ï¼‰</p><ul><li>ç§»é™¤äº† CMS åƒåœ¾æ”¶é›†å™¨ï¼Œå¦‚æœåœ¨ JDK 14 ä¸­ä½¿ç”¨ <code>-XX:+UseConcMarkSweepGC</code> çš„è¯ï¼ŒJVM ä¸ä¼šæŠ¥é”™ï¼Œåªæ˜¯ç»™å‡ºè­¦å‘Šï¼Œä½†æ˜¯ä¸ä¼šé€€å‡ºã€‚JVM ä¼šè‡ªåŠ¨ä½¿ç”¨é»˜è®¤çš„ GCã€‚</li></ul><h3 id="G1-å›æ”¶å™¨ï¼šåŒºåŸŸåŒ–åˆ†ä»£å¼"><a href="#G1-å›æ”¶å™¨ï¼šåŒºåŸŸåŒ–åˆ†ä»£å¼" class="headerlink" title="G1 å›æ”¶å™¨ï¼šåŒºåŸŸåŒ–åˆ†ä»£å¼"></a>G1 å›æ”¶å™¨ï¼šåŒºåŸŸåŒ–åˆ†ä»£å¼</h3><p><strong>1.æ—¢ç„¶æˆ‘ä»¬å·²ç»æœ‰äº†å‰é¢å‡ ä¸ªå¼ºå¤§çš„ GCï¼Œä¸ºä»€ä¹ˆè¿˜è¦å‘å¸ƒ Garbage Firstï¼ˆG1ï¼‰GCï¼Ÿ</strong></p><p>åŸå› å°±åœ¨äºå¯¹äºåº”ç”¨ç¨‹åºæ‰€åº”ç”¨çš„<strong>ä¸šåŠ¡è¶Šæ¥è¶Šåºå¤§ã€å¤æ‚ï¼Œç”¨æˆ·è¶Šæ¥è¶Šå¤š</strong>ï¼Œæ²¡æœ‰ GC å°±ä¸èƒ½ä¿è¯åº”ç”¨ç¨‹åºæ­£å¸¸è¿›è¡Œï¼Œè€Œç»å¸¸é€ æˆ STW çš„ GC åˆè·Ÿä¸ä¸Šå®é™…çš„éœ€æ±‚ï¼Œæ‰€ä»¥æ‰ä¼šä¸æ–­åœ°å°è¯•å¯¹ GC è¿›è¡Œä¼˜åŒ–ã€‚G1ï¼ˆGarbage Firstï¼‰åƒåœ¾å›æ”¶å™¨æ˜¯åœ¨ Java 7 Update 4 ä¹‹åå¼•å…¥çš„ä¸€ä¸ªæ–°çš„åƒåœ¾å›æ”¶å™¨ï¼Œæ˜¯å½“ä»Šæ”¶é›†å™¨æŠ€æœ¯å‘å±•çš„æœ€å‰æ²¿æˆæœä¹‹ä¸€ã€‚</p><p>ä¸æ­¤åŒæ—¶ï¼Œä¸ºäº†é€‚åº”ç°åœ¨<strong>ä¸æ–­æ‰©å¤§çš„å†…å­˜å’Œä¸æ–­å¢åŠ çš„å¤„ç†å™¨æ•°é‡</strong>ï¼Œè¿›ä¸€æ­¥é™ä½æš‚åœæ—¶é—´ï¼ˆpause timeï¼‰ï¼ŒåŒæ—¶å…¼é¡¾è‰¯å¥½çš„ååé‡ã€‚</p><p><strong>å®˜æ–¹ç»™ G1 è®¾å®šçš„ç›®æ ‡æ˜¯åœ¨å»¶è¿Ÿå¯æ§çš„æƒ…å†µä¸‹è·å¾—å°½å¯èƒ½é«˜çš„ååé‡ï¼Œæ‰€ä»¥æ‰æ‹…å½“èµ·â€å…¨åŠŸèƒ½æ”¶é›†å™¨â€œçš„é‡ä»»ä¸æœŸæœ›ã€‚</strong></p><p><strong>2.ä¸ºä»€ä¹ˆåå­—å«åš Garbage Firstï¼ˆG1ï¼‰å‘¢ï¼Ÿ</strong></p><p>å› ä¸º G1 æ˜¯ä¸€ä¸ªå¹¶è¡Œå›æ”¶å™¨ï¼Œå®ƒæŠŠå †å†…å­˜åˆ†å‰²æˆå¾ˆå¤šä¸ç›¸å…³çš„åŒºåŸŸï¼ˆRegionï¼‰ï¼ˆç‰©ç†ä¸Šä¸è¿ç»­çš„ï¼‰ã€‚ä½¿ç”¨ä¸åŒçš„ Region æ¥è¡¨ç¤º Edenã€Survivor0ã€Survivor1ã€è€å¹´ä»£ç­‰ã€‚</p><p>G1 GC æœ‰è®¡åˆ’åœ°é¿å…åœ¨æ•´ä¸ª Java å †ä¸­è¿›è¡Œå…¨åŒºåŸŸçš„åƒåœ¾æ”¶é›†ã€‚G1 è·Ÿè¸ªå„ä¸ª Region é‡Œé¢çš„åƒåœ¾å †ç§¯çš„ä»·å€¼å¤§å°ï¼ˆå›æ”¶æ‰€è·å¾—çš„çš„ç©ºé—´å¤§å°ä»¥åŠå›æ”¶æ‰€éœ€æ—¶é—´çš„ç»éªŒå€¼ï¼‰ï¼Œåœ¨åå°ç»´æŠ¤ä¸€ä¸ªä¼˜å…ˆåˆ—è¡¨ï¼Œ<strong>æ¯æ¬¡æ ¹æ®å…è®¸çš„æ”¶é›†æ—¶é—´ï¼Œä¼˜å…ˆå›æ”¶ä»·å€¼æœ€å¤§çš„ Region</strong>ã€‚</p><p>ç”±äºè¿™ç§æ–¹å¼çš„ä¾§é‡ç‚¹åœ¨äºå›æ”¶åƒåœ¾æœ€å¤§é‡çš„åŒºé—´ï¼ˆRegionï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬ç»™ G1 ä¸€ä¸ªåå­—ï¼šåƒåœ¾ä¼˜å…ˆï¼ˆGarbage Firstï¼‰ã€‚</p><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>G1ï¼ˆGarbage Firstï¼‰æ˜¯ä¸€æ¬¾é¢å‘æœåŠ¡ç«¯åº”ç”¨çš„åƒåœ¾æ”¶é›†å™¨ï¼Œä¸»è¦é’ˆå¯¹é…å¤‡å¤šæ ¸ CPU åŠå¤§å®¹é‡å†…å­˜çš„æœºå™¨ï¼Œä»¥æé«˜æ¦‚ç‡æ»¡è¶³ GC åœé¡¿æ—¶é—´çš„åŒæ—¶ï¼Œè¿˜å…¼å…·é«˜ååé‡çš„æ€§èƒ½ç‰¹å¾ã€‚</p><p>åœ¨ JDK 1.7 ç‰ˆæœ¬æ­£å¼å¯ç”¨ï¼Œç§»é™¤äº† Experimental çš„æ ‡è¯†ï¼Œæ˜¯ JDK 9 ä»¥åçš„é»˜è®¤åƒåœ¾å›æ”¶å™¨ï¼Œå–ä»£äº† CMS å›æ”¶å™¨ä»¥åŠ Parallel + Parallel Old ç»„åˆã€‚è¢« Oracle å®˜æ–¹ç§°ä¸º â€å…¨åŠŸèƒ½çš„åƒåœ¾æ”¶é›†å™¨â€œã€‚</p><p>ä¸æ­¤åŒæ—¶ï¼ŒCMS å·²ç»åœ¨ JDK 9 ä¸­è¢«æ ‡è®°ä¸ºåºŸå¼ƒï¼ˆDeprecatedï¼‰ã€‚åœ¨  JDK 8 ä¸­è¿˜ä¸æ˜¯é»˜è®¤çš„åƒåœ¾å›æ”¶å™¨ï¼Œéœ€è¦ä½¿ç”¨ <code>-XX:+UseG1GC</code> æ¥ä½¿ç”¨ã€‚</p><h4 id="ä¼˜åŠ¿"><a href="#ä¼˜åŠ¿" class="headerlink" title="ä¼˜åŠ¿"></a>ä¼˜åŠ¿</h4><p>ä¸å…¶ä»–çš„ GC æ”¶é›†ç›¸æ¯”ï¼ŒG1 ä½¿ç”¨äº†å…¨æ–°çš„<strong>åˆ†åŒºç®—æ³•</strong>ï¼Œå…¶ç‰¹å®šå¦‚ä¸‹æ‰€ç¤ºï¼š</p><ul><li><strong>å¹¶è¡Œä¸å¹¶å‘</strong><ul><li>å¹¶è¡Œæ€§ï¼šG1 åœ¨å›æ”¶æœŸé—´ï¼Œå¯ä»¥æœ‰å¤šä¸ª GC çº¿ç¨‹åŒæ—¶å·¥ä½œï¼Œæœ‰æ•ˆåˆ©ç”¨å¤šæ ¸è®¡ç®—èƒ½åŠ›ã€‚æ­¤æ—¶ç”¨æˆ·çº¿ç¨‹ STW</li><li>å¹¶å‘æ€§ï¼šG1 æ‹¥æœ‰ä¸åº”ç”¨ç¨‹åºäº¤æ›¿æ‰§è¡Œçš„èƒ½åŠ›ï¼Œéƒ¨åˆ†å·¥ä½œå¯ä»¥å’Œåº”ç”¨ç¨‹åºåŒæ—¶æ‰§è¡Œï¼Œå› æ­¤ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œä¸ä¼šåœ¨æ•´ä¸ªå›æ”¶é˜¶æ®µå‘ç”Ÿå®Œå…¨é˜»å¡åº”ç”¨ç¨‹åºçš„æƒ…å†µã€‚</li></ul></li><li><strong>åˆ†ä»£æ”¶é›†</strong><ul><li>ä»åˆ†ä»£ä¸Šçœ‹ï¼Œ<strong>G1 ä¾ç„¶å±äºåˆ†ä»£å‹åƒåœ¾å›æ”¶å™¨</strong>ï¼Œå®ƒä¼šåŒºåˆ†å¹´è½»ä»£å’Œè€ç”Ÿä»£ï¼Œå¹´è½»ä»£ä¾ç„¶æœ‰ Eden åŒºå’Œ Survivor åŒºã€‚ä½†ä»å †çš„ç»“æ„ä¸Šçœ‹ï¼Œå®ƒä¸è¦æ±‚æ•´ä¸ª Eden åŒºã€å¹´è½»ä»£æˆ–è€…è€å¹´ä»£éƒ½æ˜¯è¿ç»­çš„ï¼Œä¹Ÿä¸å†åšæŒå›ºå®šå¤§å°å’Œå›ºå®šæ•°é‡ã€‚</li><li>å°†<strong>å †ç©ºé—´åˆ†ä¸ºè‹¥å¹²ä¸ªåŒºåŸŸï¼ˆRegionï¼‰ï¼Œè¿™äº›åŒºåŸŸä¸­åŒ…å«äº†é€»è¾‘ä¸Šçš„å¹´è½»ä»£å’Œè€å¹´ä»£</strong>ã€‚</li><li>å’Œä¹‹å‰çš„å„ç±»å›æ”¶å™¨ä¸åŒï¼Œå®ƒåŒæ—¶<strong>å…¼é¡¾å¹´è½»ä»£å’Œè€å¹´ä»£</strong>ã€‚å¯¹æ¯”å…¶ä»–å›æ”¶å™¨ï¼Œæˆ–è€…å·¥ä½œåœ¨å¹´è½»ä»£ï¼Œæˆ–è€…å·¥ä½œåœ¨è€å¹´ä»£ã€‚</li></ul></li><li><strong>ç©ºé—´æ•´åˆ</strong><ul><li>CMSï¼šâ€æ ‡è®°-æ¸…é™¤â€œ ç®—æ³•ã€å†…å­˜ç¢ç‰‡ã€è‹¥å¹²æ¬¡ GC åè¿›è¡Œä¸€æ¬¡ç¢ç‰‡æ•´ç†</li><li>G1 å°†å†…å­˜åˆ’åˆ†æˆä¸ºä¸€ä¸ªä¸ªçš„ Regionã€‚å†…å­˜çš„å›æ”¶æ˜¯ä»¥ Region ä½œä¸ºåŸºæœ¬å•ä½çš„ã€‚<strong>Region ä¹‹é—´æ˜¯å¤åˆ¶ç®—æ³•</strong>ï¼Œä½†æ•´ä½“ä¸Šå®é™…å¯çœ‹åšæ˜¯<strong>æ ‡è®°-å‹ç¼©ï¼ˆMark-Compactï¼‰ç®—æ³•</strong>ï¼Œä¸¤ç§ç®—æ³•éƒ½å¯ä»¥é¿å…å†…å­˜ç¢ç‰‡ã€‚è¿™ç§ç‰¹æ€§æœ‰åˆ©äºç¨‹åºé•¿æ—¶é—´è¿è¡Œï¼Œåˆ†é…å¤§å¯¹è±¡æ—¶ä¸ä¼šå› ä¸ºæ— æ³•æ‰¾åˆ°è¿ç»­å†…å­˜ç©ºé—´è€Œæå‰è§¦å‘ä¸‹ä¸€æ¬¡ GCã€‚å°¤å…¶æ˜¯å½“ Java å †éå¸¸å¤§çš„æ—¶å€™ï¼ŒG1 çš„ä¼˜åŠ¿æ›´åŠ æ˜æ˜¾ã€‚</li></ul></li><li><strong>å¯é¢„æµ‹çš„åœé¡¿æ—¶é—´æ¨¡å‹</strong>ï¼ˆå³è½¯å®æ—¶ soft real-timeï¼‰<ul><li>è¿™æ˜¯ G1 ç›¸å¯¹äº CMS çš„å¦ä¸€å¤§ä¼˜åŠ¿ï¼ŒG1 é™¤äº†è¿½æ±‚ä½åœé¡¿å¤–ï¼Œè¿˜èƒ½å»ºç«‹å¯é¢„æµ‹çš„åœé¡¿æ—¶é—´æ¨¡å‹ï¼Œèƒ½è®©ä½¿ç”¨è€…æ˜ç¡®æŒ‡å®šåœ¨ä¸€ä¸ªé•¿åº¦ä¸º M æ¯«ç§’çš„æ—¶é—´ç‰‡æ®µå†…ï¼Œæ¶ˆè€—åœ¨åƒåœ¾æ”¶é›†ä¸Šçš„æ—¶é—´ä¸å¾—è¶…è¿‡ N æ¯«ç§’ã€‚<ul><li>ç”±äºåˆ†åŒºçš„åŸå› ï¼ŒG1 å¯ä»¥åªé€‰æ‹©éƒ¨åˆ†åŒºåŸŸè¿›è¡Œå†…å­˜å›æ”¶ï¼Œè¿™æ ·ç¼©å°äº†å›æ”¶çš„èŒƒå›´ï¼Œå› æ­¤å¯¹äºå…¨å±€åœé¡¿æƒ…å†µçš„å‘ç”Ÿä¹Ÿèƒ½å¾—åˆ°è¾ƒå¥½çš„æ§åˆ¶ã€‚</li><li>G1 è·Ÿè¸ªå„ä¸ª Region é‡Œé¢çš„åƒåœ¾å †ç§¯çš„ä»·å€¼å¤§å°ï¼ˆå›æ”¶æ‰€è·å¾—çš„ç©ºé—´å¤§å°ä»¥åŠå›æ”¶æ‰€éœ€æ—¶é—´çš„ç»éªŒå€¼ï¼‰ï¼Œåå°ç»´æŠ¤ä¸€ä¸ªä¼˜å…ˆåˆ—è¡¨ï¼Œ<strong>æ¯æ¬¡æ ¹æ®å…è®¸çš„æ”¶é›†æ—¶é—´ï¼Œä¼˜å…ˆå›æ”¶ä»·å€¼æœ€å¤§çš„ Regionã€‚</strong>ä¿è¯äº† G1 æ”¶é›†å™¨åœ¨æœ‰é™çš„æ—¶é—´å†…å¯ä»¥<strong>è·å–å°½å¯èƒ½é«˜çš„æ”¶é›†æ•ˆç‡ã€‚</strong></li><li>ç›¸æ¯”äº CMS GCï¼ŒG1 æœªå¿…èƒ½åšåˆ° CMS åœ¨æœ€å¥½æƒ…å†µä¸‹çš„å»¶è¿Ÿåœé¡¿ï¼Œä½†æ˜¯æœ€å·®æƒ…å†µè¦å¥½å¾ˆå¤šã€‚</li></ul></li></ul></li></ul><h4 id="ç¼ºç‚¹-1"><a href="#ç¼ºç‚¹-1" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><p>ç›¸è¾ƒäº CMSï¼ŒG1 è¿˜ä¸å…·å¤‡å…¨æ–¹ä½ã€å‹å€’æ€§ä¼˜åŠ¿ã€‚æ¯”å¦‚åœ¨ç”¨æˆ·ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼ŒG1 æ— è®ºæ˜¯ä¸ºäº†åƒåœ¾æ”¶é›†äº§ç”Ÿçš„å†…å­˜å ç”¨ï¼ˆFootprintï¼‰è¿˜æ˜¯ç¨‹åºè¿è¡Œæ—¶çš„é¢å¤–æ‰§è¡Œè´Ÿè½½ï¼ˆOverloadï¼‰éƒ½è¦æ¯” CMS è¦é«˜ã€‚</p><p>ä»ç»éªŒä¸Šè¯´ï¼Œåœ¨å°å†…å­˜åº”ç”¨ä¸Š CMS çš„è¡¨ç°å¤§æ¦‚ç‡ä¼šä¼˜äº G1ï¼Œè€Œ  G1 åœ¨å¤§å†…å­˜åº”ç”¨ä¸Šåˆ™å‘æŒ¥å…¶ä¼˜åŠ¿ã€‚å¹³è¡¡ç‚¹åœ¨ 6-8 GB ä¹‹é—´ã€‚</p><h4 id="å‚æ•°é…ç½®-4"><a href="#å‚æ•°é…ç½®-4" class="headerlink" title="å‚æ•°é…ç½®"></a>å‚æ•°é…ç½®</h4><ul><li><code>-XX:+UseG1GC</code> æ‰‹åŠ¨æŒ‡å®šä½¿ç”¨ G1 æ”¶é›†å™¨æ‰§è¡Œå†…å­˜å›æ”¶ä»»åŠ¡ã€‚JDK 9 åŠä»¥åé»˜è®¤å¼€å¯ã€‚</li><li><code>-XX:G1HeapRegionSize</code> è®¾ç½®æ¯ä¸ª Region çš„å¤§å°ã€‚å€¼æ˜¯ 2 çš„å¹‚ï¼ŒèŒƒå›´æ˜¯ 1 MB åˆ° 32 MB ä¹‹é—´ï¼Œç›®æ ‡æ˜¯æ ¹æ®æœ€å°çš„ Java å †å¤§å°åˆ’åˆ†å‡ºçº¦ 2048 ä¸ªåŒºåŸŸã€‚é»˜è®¤æ˜¯å †å†…å­˜çš„ 1/2000ã€‚</li><li><code>-XX:MaxGCPauseMillis</code> è®¾ç½®æœŸæœ›è¾¾åˆ°çš„æœ€å¤§ GC åœé¡¿æ—¶é—´æŒ‡æ ‡ï¼ˆJJVM ä¼šå°½åŠ›å®ç°ï¼Œä½†ä¸ä¿è¯è¾¾åˆ°ï¼‰ã€‚é»˜è®¤å€¼æ˜¯ 200 msã€‚</li><li><code>-XX:ParallelGCThread</code> è®¾ç½® STW å·¥ä½œçº¿ç¨‹æ•°çš„å€¼ã€‚æœ€å¤šè®¾ç½®ä¸º 8ã€‚</li><li><code>-XX:ConcGCThreads</code>è®¾ç½®å¹¶å‘æ ‡è®°çš„çº¿ç¨‹æ•°ã€‚å°† n è®¾ç½®ä¸ºå¹¶è¡Œåƒåœ¾å›æ”¶çº¿ç¨‹æ•°ï¼ˆParallelGCThreadsï¼‰çš„ 1/4 å·¦å³ã€‚</li><li><code>-XX:InitiatingHeapOccupanyPercent</code> è®¾ç½®è§¦å‘å¹¶å‘ GC å‘¨æœŸçš„ Java å †å ç”¨ç‡é˜ˆå€¼ã€‚è¶…è¿‡æ­¤å€¼ï¼Œå°±è§¦å‘ GCã€‚é»˜è®¤å€¼æ˜¯ 45ã€‚</li></ul><h4 id="å¸¸è§æ“ä½œæ­¥éª¤"><a href="#å¸¸è§æ“ä½œæ­¥éª¤" class="headerlink" title="å¸¸è§æ“ä½œæ­¥éª¤"></a>å¸¸è§æ“ä½œæ­¥éª¤</h4><p>G1 çš„è®¾è®¡åŸåˆ™å°±æ˜¯ç®€åŒ– JVM æ€§èƒ½è°ƒä¼˜ï¼Œå¼€å‘äººå‘˜åªéœ€è¦ç®€å•çš„ä¸‰æ­¥å³å¯å®Œæˆè°ƒä¼˜ï¼š</p><ul><li>ç¬¬ä¸€æ­¥ï¼Œå¼€å¯ G1 åƒåœ¾æ”¶é›†å™¨</li><li>ç¬¬äºŒæ­¥ï¼šè®¾ç½®å †çš„æœ€å¤§å†…å­˜</li><li>ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®æœ€å¤§çš„åœé¡¿æ—¶é—´</li></ul><p>G1 ä¸­æä¾›äº†ä¸‰ç§åƒåœ¾å›æ”¶æ¨¡å¼ï¼šYoung GCã€Mixed GC å’Œ Full GCï¼Œåœ¨ä¸åŒçš„æ¡ä»¶ä¸‹è¢«è§¦å‘ã€‚</p><h4 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h4><ul><li>é¢å‘æœåŠ¡ç«¯åº”ç”¨ï¼Œé’ˆå¯¹å…·æœ‰å¤§å†…å­˜ã€å¤šå¤„ç†å™¨çš„æœºå™¨ã€‚ï¼ˆåœ¨æ™®é€šå¤§å°çš„å †é‡Œè¡¨ç°å¹¶ä¸æƒŠå–œï¼‰</li><li>æœ€ä¸»è¦çš„åº”ç”¨æ˜¯éœ€è¦ä½ GC å»¶è¿Ÿï¼Œå¹¶å…·æœ‰å¤§å †çš„åº”ç”¨ç¨‹åºæä¾›è§£å†³æ–¹æ¡ˆ</li><li>å¦‚ï¼šåœ¨å †å¤§å°çº¦ 6GB æˆ–æ›´å¤§æ—¶ï¼Œå¯é¢„æµ‹çš„æš‚åœæ—¶é—´å¯ä»¥ä½äº 0.5 ç§’ï¼›G1 é€šè¿‡æ¯æ¬¡åªæ¸…ç†ä¸€éƒ¨åˆ†è€Œä¸æ˜¯å…¨éƒ¨çš„ Region çš„å¢é‡å¼æ¸…ç†æ¥ä¿è¯æ¯æ¬¡ GC åœé¡¿æ—¶é—´ä¸ä¼šå¤ªé•¿ã€‚</li><li>ç”¨æ¥æ›¿æ¢æ‰ CMS æ”¶é›†å™¨ï¼Œåœ¨ä¸‹é¢çš„æƒ…å†µæ—¶ï¼Œä½¿ç”¨ G1 å¯èƒ½æ¯” CMS å¥½ï¼š<ul><li>è¶…è¿‡ 50% çš„ Java å †è¢«æ´»åŠ¨æ•°æ®å ç”¨</li><li>å¯¹è±¡åˆ†é…é¢‘ç‡æˆ–å¹´ä»£æå‡é¢‘ç‡å˜åŒ–å¾ˆå¤§</li><li>GC åœé¡¿æ—¶é—´è¿‡é•¿ï¼ˆé•¿äº 0.5 è‡³ 1 ç§’ï¼‰</li></ul></li><li>HotSpot åƒåœ¾æ”¶é›†å™¨é‡Œï¼Œé™¤äº† G1 ä»¥å¤–ï¼Œå…¶ä»–çš„åƒåœ¾æ”¶é›†å™¨ä½¿ç”¨å†…ç½®çš„ JVM çº¿ç¨‹æ‰§è¡Œ GC çš„å¤šçº¿ç¨‹æ“ä½œï¼Œè€Œ G1 GC å¯ä»¥é‡‡ç”¨åº”ç”¨çº¿ç¨‹æ‰¿æ‹…åå°è¿è¡Œçš„ GC å·¥ä½œï¼Œå³å½“ JVM çš„ GC çº¿ç¨‹å¤„ç†é€Ÿåº¦æ…¢æ—¶ï¼Œç³»ç»Ÿä¼šè°ƒç”¨åº”ç”¨ç¨‹åºçº¿ç¨‹å¸®åŠ©åŠ é€Ÿåƒåœ¾å›æ”¶è¿‡ç¨‹ã€‚ï¼ˆå•¥æ„æ€ï¼Ÿï¼‰</li></ul><h4 id="åˆ†åŒº-Regionï¼šåŒ–æ•´ä¸ºé›¶"><a href="#åˆ†åŒº-Regionï¼šåŒ–æ•´ä¸ºé›¶" class="headerlink" title="åˆ†åŒº Regionï¼šåŒ–æ•´ä¸ºé›¶"></a>åˆ†åŒº Regionï¼šåŒ–æ•´ä¸ºé›¶</h4><p>ä½¿ç”¨ G1 æ”¶é›†å™¨æ—¶ï¼Œå®ƒå°†æ•´ä¸ª Java å †åˆ’åˆ†æˆçº¦ 2048 ä¸ªå¤§å°ç›¸åŒçš„ç‹¬ç«‹ Region å—ï¼Œæ¯ä¸ª Region å—å¤§å°æ ¹æ®å †ç©ºé—´çš„å®é™…å¤§å°è€Œå®šï¼Œæ•´ä½“è¢«æ§åˆ¶åœ¨ 1MB åˆ° 32 MB ä¹‹é—´ï¼Œä¸”ä¸º 2 çš„ N æ¬¡å¹‚ï¼Œå³ 1 MBï¼Œ2 MBï¼Œ4 MBï¼Œ8 MBï¼Œ16 MBï¼Œ32 MBã€‚å¯ä»¥é€šè¿‡ <code>-XX:G1HeapRegionSize</code> è®¾å®šã€‚æ‰€æœ‰çš„ Region å¤§å°ç›¸åŒï¼Œä¸”åœ¨ JVM ç”Ÿå‘½å‘¨æœŸå†…ä¸ä¼šè¢«æ”¹å˜ã€‚</p><p>è™½ç„¶è¿˜ä¿ç•™æœ‰æ–°ç”Ÿä»£å’Œè€å¹´ä»£çš„æ¦‚å¿µï¼Œä½†æ–°ç”Ÿä»£å’Œè€å¹´ä»£ä¸å†æ˜¯ç‰©ç†éš”ç¦»çš„äº†ï¼Œå®ƒä»¬éƒ½æ˜¯ä¸€éƒ¨åˆ† Regionï¼ˆä¸éœ€è¦è¿ç»­ï¼‰çš„é›†åˆã€‚é€šè¿‡ Region çš„åŠ¨æ€åˆ†é…æ–¹å¼å®ç°é€»è¾‘ä¸Šçš„è¿ç»­ã€‚</p><p>ä¸€ä¸ª Region æœ‰å¯èƒ½å±äº Edenã€Survivor æˆ–è€… Old/Tenured å†…å­˜åŒºåŸŸã€‚ä½†æ˜¯ä¸€ä¸ª Region åªå¯èƒ½å±äºä¸€ä¸ªè§’è‰²ã€‚å›¾ä¸­çš„ E è¡¨ç¤ºè¯¥ Region å±äº Eden å†…å­˜åŒºåŸŸï¼ŒS è¡¨ç¤ºå±äº Survivor å†…å­˜åŒºåŸŸï¼ŒO è¡¨ç¤ºå±äº Old å†…å­˜åŒºåŸŸã€‚å›¾ä¸­ç©ºç™½çš„è¡¨ç¤ºæœªä½¿ç”¨çš„å†…å­˜ç©ºé—´ã€‚</p><p>G1 åƒåœ¾æ”¶é›†å™¨è¿˜å¢åŠ äº†ä¸€ç§æ–°çš„å†…å­˜åŒºåŸŸï¼Œå«åš Humongous å†…å­˜åŒºåŸŸï¼Œå¦‚å›¾ä¸­çš„ H å—ã€‚ä¸»è¦ç”¨äºå­˜å‚¨å¤§å¯¹è±¡ï¼Œå¦‚æœè¶…è¿‡ä¸€ä¸ª Region çš„50%ï¼Œå°±æ”¾åˆ° Hã€‚ï¼ˆè¿™é‡Œè€å¸ˆè®²è§£æœ‰è¯¯ï¼Œåœ¨ã€ŠJVM G1æºç åˆ†æå’Œè°ƒä¼˜ã€‹ä¹¦ä¸­å†™åˆ°ï¼šå¯¹äºå¤§å¯¹è±¡åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯å¤§äºHeapRegionSizeçš„ä¸€åŠï¼Œä½†æ˜¯å°äºHeapRegionSizeï¼Œå³ä¸€ä¸ªå®Œæ•´çš„å †åˆ†åŒºå¯ä»¥ä¿å­˜ï¼Œåˆ™ç›´æ¥ä»ç©ºé—²åˆ—è¡¨ç›´æ¥æ‹¿ä¸€ä¸ªå †åˆ†åŒºï¼Œæˆ–è€…åˆ†é…ä¸€ä¸ªæ–°çš„å †åˆ†åŒºã€‚å¦‚æœæ˜¯è¿ç»­å¯¹è±¡ï¼Œåˆ™éœ€è¦å¤šä¸ªå †åˆ†åŒºï¼Œæ€è·¯åŒä¸Šï¼Œä½†æ˜¯å¤„ç†çš„æ—¶å€™éœ€è¦åŠ é”ã€‚ï¼‰</p><p>è®¾ç½® H çš„åŸå› ï¼š</p><p>å¯¹äºå †ä¸­çš„å¤§å¯¹è±¡ï¼Œé»˜è®¤ç›´æ¥ä¼šåˆ†é…åˆ°è€å¹´ä»£ï¼Œä½†æ˜¯å¦‚æœå®ƒæ˜¯ä¸€ä¸ªçŸ­æœŸå­˜åœ¨çš„å¤§å¯¹è±¡ï¼Œå°±ä¼šå¯¹åƒåœ¾æ”¶é›†å™¨é€ æˆè´Ÿé¢å½±å“ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒG1 åˆ’åˆ†äº†ä¸€ä¸ª Humongous åŒºï¼Œå®ƒç”¨æ¥ä¸“é—¨å­˜æ”¾å¤§å¯¹è±¡ã€‚<strong>å¦‚æœä¸€ä¸ª H åŒºè£…ä¸ä¸‹ä¸€ä¸ªå¤§å¯¹è±¡ï¼Œé‚£ä¹ˆ G1 ä¼šå¯»æ‰¾è¿ç»­çš„ H åŒºæ¥å­˜å‚¨ã€‚</strong>ä¸ºäº†èƒ½æ‰¾åˆ°è¿ç»­çš„ H åŒºï¼Œæœ‰æ—¶å€™ä¸å¾—ä¸å¯ç”¨ Full GCã€‚G1 çš„å¤§å¤šæ•°è¡Œä¸ºéƒ½æŠŠ H åŒºä½œä¸ºè€å¹´ä»£çš„ä¸€éƒ¨åˆ†æ¥çœ‹å¾…ã€‚</p><h4 id="åƒåœ¾å›æ”¶è¿‡ç¨‹"><a href="#åƒåœ¾å›æ”¶è¿‡ç¨‹" class="headerlink" title="åƒåœ¾å›æ”¶è¿‡ç¨‹"></a>åƒåœ¾å›æ”¶è¿‡ç¨‹</h4><p>G1 GC çš„åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸»è¦åŒ…æ‹¬å¦‚ä¸‹ä¸‰ä¸ªç¯èŠ‚ï¼š</p><ul><li>å¹´è½»ä»£ GCï¼ˆYoung GCï¼‰</li><li>è€å¹´ä»£å¹¶å‘æ ‡è®°è¿‡ç¨‹ï¼ˆConcurrent Markingï¼‰</li><li>æ··åˆå›æ”¶ï¼ˆMixed GCï¼‰</li><li>ï¼ˆå¦‚æœéœ€è¦ï¼Œå•çº¿ç¨‹ã€ç‹¬å å¼ã€é«˜å¼ºåº¦çš„ Full GC è¿˜æ˜¯ç»§ç»­å­˜åœ¨çš„ã€‚å®ƒé’ˆå¯¹ GC çš„è¯„ä¼°å¤±è´¥æä¾›äº†ä¸€ç§å¤±è´¥ä¿æŠ¤æœºåˆ¶ï¼Œå³å¼ºåŠ›å›æ”¶ã€‚ï¼‰</li></ul><p>Young GC â†’ Young GC + Concurrent Marking â†’ Mixed GC â†’ Full GC</p><p>åº”ç”¨ç¨‹åºåˆ†é…å†…å­˜ï¼Œ<strong>å½“å¹´è½»ä»£çš„ Eden åŒºç”¨å°½æ—¶å¼€å§‹å¹´è½»ä»£å›æ”¶è¿‡ç¨‹</strong>ï¼›G1 å¹´è½»ä»£æ”¶é›†é˜¶æ®µæ˜¯ä¸€ä¸ª<strong>å¹¶è¡Œ</strong>çš„<strong>ç‹¬å å¼</strong>æ”¶é›†å™¨ã€‚åœ¨å¹´è½»ä»£å›æ”¶æœŸï¼ŒG1 GC æš‚åœæ‰€æœ‰åº”ç”¨ç¨‹åºçº¿ç¨‹ï¼Œå¯åŠ¨æ‰€çº¿ç¨‹æ‰§è¡Œå¹´è½»ä»£å›æ”¶ã€‚ç„¶å<strong>ä»å¹´è½»ä»£åŒºé—´ç§»åŠ¨å­˜æ´»å¯¹è±¡åˆ° Survivor åŒºé—´æˆ–è€…è€å¹´ä»£åŒºé—´ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ä¸¤ä¸ªåŒºé—´éƒ½ä¼šæ¶‰åŠ</strong>ã€‚</p><p>å½“å †å†…å­˜ä½¿ç”¨è¾¾åˆ°ä¸€å®šå€¼ï¼ˆé»˜è®¤ 45%ï¼‰æ—¶ï¼Œå¼€å§‹è€å¹´ä»£å¹¶å‘æ ‡è®°è¿‡ç¨‹ã€‚</p><p>æ ‡è®°å®Œæˆé©¬ä¸Šå¼€å§‹æ··åˆå›æ”¶è¿‡ç¨‹ã€‚å¯¹äºä¸€ä¸ªæ··åˆå›æ”¶æœŸï¼ŒG1 GC ä»è€å¹´åŒºé—´ç§»åŠ¨å­˜æ´»å¯¹è±¡åˆ°ç©ºé—²åŒºé—´ï¼Œè¿™äº›ç©ºé—²åŒºé—´ä¹Ÿå°±æˆä¸ºäº†è€å¹´ä»£çš„ä¸€éƒ¨åˆ†ã€‚å’Œå¹´è½»ä»£ä¸åŒï¼Œè€å¹´ä»£çš„ G1 å›æ”¶å™¨å’Œå…¶ä»– GC ä¸åŒ<strong>ï¼ŒG1 çš„è€å¹´ä»£å›æ”¶å™¨ä¸éœ€è¦æ•´ä¸ªè€å¹´ä»£è¢«å›æ”¶ï¼Œä¸€æ¬¡åªéœ€è¦æ‰«æ/å›æ”¶ä¸€å°éƒ¨åˆ†è€å¹´ä»£çš„ Region å°±å¯ä»¥äº†</strong>ã€‚åŒæ—¶ï¼Œè¿™ä¸ªè€å¹´ä»£ Region æ˜¯å’Œå¹´è½»ä»£ä¸€èµ·è¢«å›æ”¶çš„ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼šä¸€ä¸ª Web æœåŠ¡å™¨ï¼ŒJava è¿›ç¨‹æœ€å¤§å †å†…å­˜ä¸º 4 Gï¼Œæ¯åˆ†é’Ÿå“åº” 1500 ä¸ªè¯·æ±‚ï¼Œæ¯ 45 ç§’é’Ÿä¼šæ–°åˆ†é…å¤§çº¦ 2 G å†…å­˜ã€‚G1 ä¼šæ¯ 45 ç§’é’Ÿè¿›è¡Œä¸€æ¬¡å¹´è½»ä»£å›æ”¶ï¼Œæ¯ 31 ä¸ªå°æ—¶æ•´ä¸ªå †çš„ä½¿ç”¨ç‡ä¼šè¾¾åˆ° 45 %ï¼Œä¼šå¼€å§‹è€å¹´ä»£å¹¶å‘æ ‡è®°è¿‡ç¨‹ï¼Œæ ‡è®°å®Œæˆåå¼€å§‹å››åˆ°äº”æ¬¡çš„æ··åˆå›æ”¶ã€‚</p><h5 id="Remembered-Set"><a href="#Remembered-Set" class="headerlink" title="Remembered Set"></a>Remembered Set</h5><ul><li>ä¸€ä¸ªå¯¹è±¡è¢«ä¸åŒåŒºåŸŸå¼•ç”¨çš„é—®é¢˜</li><li>ä¸€ä¸ª Region ä¸å¯èƒ½æ˜¯å­¤ç«‹çš„ï¼Œä¸€ä¸ª Region ä¸­çš„å¯¹è±¡å¯èƒ½è¢«å…¶ä»–ä»»æ„ Region ä¸­çš„å¯¹è±¡å¼•ç”¨ï¼Œåˆ¤æ–­å¯¹è±¡å­˜æ´»æ—¶ï¼Œæ˜¯å¦éœ€è¦æ‰«ææ•´ä¸ª Java å †æ‰èƒ½ä¿è¯å‡†ç¡®ï¼Ÿ</li><li>åœ¨å…¶ä»–çš„åˆ†ä»£æ”¶é›†å™¨ï¼Œä¹Ÿå­˜åœ¨è¿™æ ·çš„é—®é¢˜ï¼ˆè€Œ G1 æ›´çªå‡ºï¼‰</li><li>å›æ”¶æ–°ç”Ÿä»£ä¹Ÿä¸å¾—ä¸åŒæ—¶æ‰«æè€å¹´ä»£ï¼Ÿ</li><li>è¿™æ ·çš„è¯ä¼šé™ä½ Minor GC çš„æ•ˆç‡</li></ul><p>è§£å†³æ–¹æ³•ï¼š</p><ul><li>æ— è®º G1 è¿˜æ˜¯å…¶ä»–åˆ†ä»£æ”¶é›†å™¨ï¼ŒJVM éƒ½æ˜¯ä½¿ç”¨ Remembered Set æ¥é¿å…å…¨å±€æ‰«æï¼›</li><li>æ¯ä¸ª Region éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ Remembered Setï¼›</li><li>æ¯æ¬¡ Reference ç±»å‹æ•°æ®å†™æ“ä½œæ—¶ï¼Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªå†™å±éšœï¼ˆWrite Barrierï¼‰æš‚æ—¶ä¸­æ–­æ“ä½œï¼›</li><li>ç„¶åæ£€æŸ¥å°†è¦å†™å…¥çš„å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡æ˜¯å¦å’Œè¯¥ Reference ç±»å‹æ•°æ®åœ¨ä¸åŒçš„ Regionï¼ˆå…¶ä»–æ”¶é›†å™¨ï¼šæ£€æŸ¥è€å¹´ä»£å¯¹è±¡æ˜¯å¦å¼•ç”¨äº†æ–°ç”Ÿä»£å¯¹è±¡ï¼‰ï¼›</li><li>å¦‚æœä¸åŒï¼Œé€šè¿‡ CardTableï¼ˆRemembered Set çš„å®ç°ï¼‰ æŠŠç›¸å…³å¼•ç”¨ä¿¡æ¯è®°å½•åˆ°å¼•ç”¨æŒ‡å‘å¯¹è±¡æ‰€åœ¨ Region å¯¹åº”çš„ Remembered Set ä¸­ï¼›</li><li>å½“è¿›è¡Œåƒåœ¾æ”¶é›†æ—¶ï¼Œåœ¨ GC Roots çš„æšä¸¾èŒƒå›´åŠ å…¥ Remembered Setï¼Œå°±å¯ä»¥ä¿è¯ä¸è¿›è¡Œå…¨å±€æ‰«æï¼Œä¹Ÿä¸ä¼šæœ‰é—æ¼ã€‚</li></ul><h4 id="åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸€ï¼šå¹´è½»ä»£å›æ”¶è¿‡ç¨‹"><a href="#åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸€ï¼šå¹´è½»ä»£å›æ”¶è¿‡ç¨‹" class="headerlink" title="åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸€ï¼šå¹´è½»ä»£å›æ”¶è¿‡ç¨‹"></a>åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸€ï¼šå¹´è½»ä»£å›æ”¶è¿‡ç¨‹</h4><p>JVM å¯åŠ¨æ—¶ï¼ŒG1 å…ˆå‡†å¤‡å¥½ Eden åŒºï¼Œç¨‹åºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¸æ–­åˆ›å»ºå¯¹è±¡åˆ° Eden åŒºï¼Œå½“ Eden ç©ºé—´è€—å°½æ—¶ï¼ŒG1 ä¼šå¯åŠ¨ä¸€æ¬¡å¹´è½»ä»£åƒåœ¾å›æ”¶è¿‡ç¨‹ã€‚</p><p>å¹´è½»ä»£åƒåœ¾å›æ”¶åªä¼šæ”¶é›† Eden åŒºå’Œ Survivor åŒºã€‚</p><p>YGC æ—¶ï¼Œé¦–å…ˆ G1 åœæ­¢åº”ç”¨ç¨‹åºçš„æ‰§è¡Œï¼ˆSTWï¼‰ï¼ŒG1 åˆ›å»ºå›æ”¶é›†ï¼ˆCollection Setï¼‰ï¼Œå›æ”¶é›†æ˜¯æŒ‡éœ€è¦è¢«å›æ”¶çš„å†…å­˜åˆ†æ®µçš„é›†åˆï¼Œå¹´è½»ä»£å›æ”¶è¿‡ç¨‹çš„å›æ”¶é›†åŒ…å«å¹´è½»ä»£ Eden åŒºå’Œ Survivor åŒºæ‰€æœ‰çš„å†…å­˜åˆ†æ®µã€‚</p><p>ç„¶åå¼€å§‹å¦‚ä¸‹å›æ”¶è¿‡ç¨‹ï¼š</p><ul><li><p><strong>ç¬¬ä¸€é˜¶æ®µï¼Œæ‰«ææ ¹ã€‚</strong></p><p>æ ¹æ˜¯æŒ‡ static å˜é‡æŒ‡å‘çš„å¯¹è±¡ï¼Œæ­£åœ¨æ‰§è¡Œçš„æ–¹æ³•è°ƒç”¨é“¾ä¸Šçš„å±€éƒ¨å˜é‡ç­‰ã€‚æ ¹å¼•ç”¨è¿åŒ RSet è®°å½•çš„å¤–éƒ¨å¼•ç”¨ä½œä¸ºæ‰«æå­˜æ´»å¯¹è±¡çš„å…¥å£ã€‚</p></li><li><p><strong>ç¬¬äºŒé˜¶æ®µï¼Œæ›´æ–° RSetã€‚</strong></p><p>å¤„ç† Dirty Card Queue ä¸­çš„ cardï¼Œæ›´æ–° RSetã€‚æ­¤é˜¶æ®µå®Œæˆåï¼Œ<strong>RSet å¯ä»¥å‡†ç¡®çš„åæ˜ è€å¹´ä»£å¯¹æ‰€åœ¨çš„å†…å­˜åˆ†æ®µä¸­å¯¹è±¡çš„å¼•ç”¨ã€‚</strong></p></li><li><p><strong>ç¬¬ä¸‰é˜¶æ®µï¼šå¤„ç† RSetã€‚</strong></p><p>è¯†åˆ«è¢«è€å¹´ä»£å¯¹è±¡æ‰€æŒ‡å‘çš„ Eden ä¸­çš„å¯¹è±¡ï¼Œè¿™äº›è¢«æŒ‡å‘çš„ Eden ä¸­çš„å¯¹è±¡è¢«è®¤ä¸ºæ˜¯å­˜æ´»çš„å¯¹è±¡ã€‚</p></li><li><p><strong>ç¬¬å››é˜¶æ®µï¼šå¤åˆ¶å¯¹è±¡ã€‚</strong></p><p>æ­¤é˜¶æ®µï¼Œå¯¹è±¡æ ‘è¢«éå†ï¼ŒEden åŒºå†…å­˜æ®µä¸­å­˜æ´»çš„å¯¹è±¡ä¼šè¢«å¤åˆ¶åˆ° Survivor åŒºä¸­ç©ºçš„å†…å­˜åˆ†æ®µï¼ŒSurvivor åŒºå†…å­˜æ®µä¸­å­˜æ´»çš„å¯¹è±¡å¦‚æœå¹´é¾„æœªè¾¾åˆ°é˜ˆå€¼ï¼Œå¹´é¾„ä¼šåŠ  1ï¼Œè¾¾åˆ°é˜ˆå€¼ä¼šè¢«å¤åˆ¶åˆ° Old åŒºä¸­çš„å†…å­˜åˆ†æ®µï¼Œå¦‚æœ Survivor ç©ºé—´ä¸å¤Ÿï¼ŒEden ç©ºé—´çš„éƒ¨åˆ†æ•°æ®ä¼šç›´æ¥æ™‹å‡åˆ°è€å¹´ä»£ç©ºé—´ã€‚</p></li><li><p><strong>ç¬¬äº”é˜¶æ®µï¼šå¤„ç†å¼•ç”¨ã€‚</strong></p><p>å¤„ç† Softã€Weakã€Phantomã€Finalã€JNI Weak ç­‰å¼•ç”¨ï¼ˆè¿™é‡Œå¯èƒ½æè¿°ä¸å‡†ç¡®ï¼‰ã€‚æœ€ç»ˆ Eden ç©ºé—´çš„æ•°æ®ä¸ºç©ºï¼ŒGC åœæ­¢å·¥ä½œï¼Œè€Œç›®æ ‡å†…å­˜ä¸­çš„å¯¹è±¡éƒ½æ˜¯è¿ç»­å­˜å‚¨çš„ï¼Œæ²¡æœ‰ç¢ç‰‡ï¼Œæ‰€ä»¥å¤åˆ¶è¿‡ç¨‹å¯ä»¥è¾¾åˆ°å†…å­˜æ•´ç†çš„æ•ˆæœï¼Œå‡å°‘ç¢ç‰‡ã€‚</p></li></ul><p>æ³¨ï¼šå¯¹äºåº”ç”¨ç¨‹åºçš„å¼•ç”¨èµ‹å€¼è¯­å¥ object.fieled = objectï¼ŒJVM ä¼šåœ¨ä¹‹å‰å’Œä¹‹åæ‰§è¡Œç‰¹æ®Šçš„æ“ä½œä»¥åœ¨ Dirty Card Queue ä¸­å…¥é˜Ÿä¸€ä¸ªä¿å­˜äº†å¯¹è±¡å¼•ç”¨ä¿¡æ¯çš„ cardï¼Œåœ¨å¹´è½»ä»£å›æ”¶çš„æ—¶å€™ï¼ŒG1 ä¼šå¯¹ Dirty Card Queue ä¸­æ‰€æœ‰çš„ card è¿›è¡Œå¤„ç†ï¼Œä»¥æ›´æ–° RSetï¼Œä¿è¯ RSet å®æ—¶å‡†ç¡®çš„åæ˜ å¼•ç”¨å…³ç³»ã€‚</p><p>é‚£ä¸ºä»€ä¹ˆä¸åœ¨å¼•ç”¨èµ‹å€¼è¯­å¥å¤„ç›´æ¥æ›´æ–° RSet å‘¢ï¼Ÿè¿™æ˜¯ä¸ºäº†æ€§èƒ½çš„éœ€è¦ï¼ŒRSet çš„å¤„ç†éœ€è¦çº¿ç¨‹åŒæ­¥ï¼Œå¼€é”€ä¼šå¾ˆå¤§ï¼Œä½¿ç”¨é˜Ÿåˆ—æ€§èƒ½ä¼šå¥½å¾ˆå¤šã€‚</p><h4 id="åƒåœ¾å›æ”¶è¿‡ç¨‹äºŒï¼šè€å¹´ä»£å¹¶å‘æ ‡è®°è¿‡ç¨‹"><a href="#åƒåœ¾å›æ”¶è¿‡ç¨‹äºŒï¼šè€å¹´ä»£å¹¶å‘æ ‡è®°è¿‡ç¨‹" class="headerlink" title="åƒåœ¾å›æ”¶è¿‡ç¨‹äºŒï¼šè€å¹´ä»£å¹¶å‘æ ‡è®°è¿‡ç¨‹"></a>åƒåœ¾å›æ”¶è¿‡ç¨‹äºŒï¼šè€å¹´ä»£å¹¶å‘æ ‡è®°è¿‡ç¨‹</h4><ul><li><strong>1.åˆå§‹æ ‡è®°è¿‡ç¨‹ï¼ˆSTWï¼‰</strong>ï¼šæ ‡è®°ä»æ ¹èŠ‚ç‚¹ç›´æ¥å¯è¾¾çš„å¯¹è±¡ã€‚è¿™ä¸ªé˜¶æ®µæ˜¯ STW çš„ï¼Œå¹¶ä¸”ä¼šè§¦å‘ä¸€æ¬¡å¹´è½»ä»£ GCã€‚</li><li><strong>2.æ ¹åŒºåŸŸæ‰«æï¼ˆRoot Region Scanningï¼‰</strong>ï¼šG1 GC æ‰«æ Survivor åŒºç›´æ¥å¯è¾¾çš„è€å¹´ä»£åŒºåŸŸå¯¹è±¡ï¼Œå¹¶æ ‡è®°è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚è¿™ä¸€è¿‡ç¨‹å¿…é¡»åœ¨ Young GC ä¹‹å‰å®Œæˆã€‚</li><li><strong>3.å¹¶å‘æ ‡è®°ï¼ˆConcurrent Markingï¼‰</strong>ï¼šåœ¨æ•´ä¸ªå †ä¸­è¿›è¡Œå¹¶å‘æ ‡è®°ï¼ˆå’Œåº”ç”¨ç¨‹åºå¹¶å‘æ‰§è¡Œï¼‰ï¼Œæ­¤è¿‡ç¨‹å¯èƒ½è¢« Young GC ä¸­æ–­ã€‚åœ¨å¹¶å‘æ ‡è®°é˜¶æ®µï¼Œè‹¥å‘ç°åŒºåŸŸå¯¹è±¡ä¸­æ‰€æœ‰çš„å¯¹è±¡éƒ½æ˜¯åƒåœ¾ï¼Œé‚£è¿™ä¸ªåŒºåŸŸä¼šè¢«ç«‹å³å›æ”¶ï¼ˆå®æ—¶å›æ”¶ï¼‰ã€‚åŒæ—¶ï¼Œå¹¶å‘æ ‡è®°è¿‡ç¨‹ä¸­ï¼Œä¼šè®¡ç®—æ¯ä¸ªåŒºåŸŸçš„å¯¹è±¡æ´»æ€§ï¼ˆåŒºåŸŸä¸­å­˜æ´»å¯¹è±¡çš„æ¯”ä¾‹ï¼‰ã€‚</li><li><strong>4.å†æ¬¡æ ‡è®°ï¼ˆRemark,STWï¼‰</strong>ï¼šç”±äºåº”ç”¨ç¨‹åºæŒç»­è¿›è¡Œï¼Œéœ€è¦ä¿®æ­£ä¸Šä¸€æ¬¡çš„æ ‡è®°ç»“æœã€‚æ˜¯ STW çš„ã€‚G1 ä¸­é‡‡ç”¨äº†æ¯” CMS æ›´å¿«çš„åˆå§‹å¿«ç…§ç®—æ³•ï¼šsnapshot-at-the-beginningï¼ˆSATBï¼‰ã€‚</li><li><strong>5.ç‹¬å æ¸…ç†ï¼ˆcleanup,STWï¼‰</strong>:è®¡ç®—å„ä¸ªåŒºåŸŸçš„å­˜æ´»å¯¹è±¡å’Œ GC å›æ”¶æ¯”ä¾‹ï¼Œå¹¶è¿›è¡Œæ’åºï¼Œè¯†åˆ«å¯ä»¥æ··åˆå›æ”¶çš„åŒºåŸŸã€‚ä¸ºä¸‹é˜¶æ®µåšé“ºå«ã€‚æ˜¯ STW çš„ã€‚</li><li><strong>6.å¹¶å‘æ¸…ç†é˜¶æ®µ</strong>ï¼šè¯†åˆ«å¹¶æ¸…ç†å®Œå…¨ç©ºé—²çš„åŒºåŸŸ</li></ul><h4 id="åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸‰ï¼šæ··åˆå›æ”¶è¿‡ç¨‹"><a href="#åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸‰ï¼šæ··åˆå›æ”¶è¿‡ç¨‹" class="headerlink" title="åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸‰ï¼šæ··åˆå›æ”¶è¿‡ç¨‹"></a>åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸‰ï¼šæ··åˆå›æ”¶è¿‡ç¨‹</h4><p>å½“è¶Šæ¥è¶Šå¤šçš„å¯¹è±¡æ™‹å‡åˆ°è€å¹´ä»£ Old Region æ—¶ï¼Œä¸ºäº†é¿å…å †å†…å­˜è¢«è€—å°½ï¼Œè™šæ‹Ÿæœºä¼šè§¦å‘ä¸€ä¸ªæ··åˆçš„åƒåœ¾æ”¶é›†å™¨ï¼Œå³ Mixed GCï¼Œè¯¥ç®—æ³•å¹¶ä¸æ˜¯ä¸€ä¸ª Old GCï¼Œé™¤äº†å›æ”¶æ•´ä¸ª Young Regionï¼Œè¿˜ä¼šå›æ”¶ä¸€éƒ¨åˆ†çš„ Old Regionã€‚è¿™é‡Œéœ€è¦æ³¨æ„ï¼šæ˜¯ä¸€éƒ¨åˆ†è€å¹´ä»£ï¼Œè€Œä¸æ˜¯å…¨éƒ¨è€å¹´ä»£ã€‚å¯ä»¥é€‰æ‹©å“ªäº› Old Region è¿›è¡Œæ”¶é›†ï¼Œä»è€Œå¯ä»¥å¯¹åƒåœ¾å›æ”¶çš„è€—æ—¶æ—¶é—´è¿›è¡Œæ§åˆ¶ã€‚ä¹Ÿè¦æ³¨æ„çš„æ˜¯ Mixed GC å¹¶ä¸æ˜¯ Full GCã€‚</p><ul><li>å¹¶å‘æ ‡è®°ç»“æŸä»¥åï¼Œè€å¹´ä»£ä¸­ç™¾åˆ†ç™¾ä¸ºåƒåœ¾çš„å†…å­˜åˆ†æ®µè¢«å›æ”¶äº†ï¼Œéƒ¨åˆ†ä¸ºåƒåœ¾çš„å†…å­˜åˆ†æ®µè¢«è®¡ç®—äº†å‡ºæ¥ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™äº›è€å¹´ä»£çš„å†…å­˜åˆ†æ®µä¼šåˆ†8æ¬¡ï¼ˆå¯ä»¥é€šè¿‡ <code>-XX:G1MixedGCCountTarget</code> è®¾ç½®ï¼‰è¢«å›æ”¶ã€‚</li><li>æ··åˆå›æ”¶çš„å›æ”¶é›†ï¼ˆCollection Setï¼‰åŒ…æ‹¬å…«åˆ†ä¹‹ä¸€çš„è€å¹´ä»£å†…å­˜åˆ†æ®µï¼ŒEden åŒºå†…å­˜åˆ†æ®µï¼ŒSurvivor åŒºå†…å­˜åˆ†æ®µã€‚æ··åˆå›æ”¶çš„ç®—æ³•å’Œå¹´è½»ä»£å›æ”¶çš„ç®—æ³•å®Œå…¨ä¸€æ ·ï¼Œåªæ˜¯å›æ”¶é›†å¤šäº†è€å¹´ä»£çš„å†…å­˜åˆ†æ®µã€‚å…·ä½“è¿‡ç¨‹è¯·å‚è€ƒä¸Šé¢çš„å¹´è½»ä»£å›æ”¶è¿‡ç¨‹ã€‚</li><li>ç”±äºè€å¹´ä»£ä¸­çš„å†…å­˜åˆ†æ®µé»˜è®¤åˆ†8æ¬¡å›æ”¶ï¼ŒG1 ä¼šä¼˜å…ˆå›æ”¶åƒåœ¾å¤šçš„å†…å­˜åˆ†æ®µã€‚<strong>åƒåœ¾å å†…å­˜åˆ†æ®µæ¯”ä¾‹è¶Šé«˜çš„ï¼Œè¶Šä¼šè¢«å…ˆå›æ”¶ã€‚</strong>å¹¶ä¸”æœ‰ä¸€ä¸ªé˜ˆå€¼ä¼šå†³å®šå†…å­˜åˆ†æ®µæ˜¯å¦è¢«å›æ”¶ã€‚<code>-XX:G1MixedGCLiveThresholdPercent</code> ï¼Œé»˜è®¤ä¸º 65%ï¼Œæ„æ€æ˜¯åƒåœ¾å å†…å­˜åˆ†æ®µæ¯”ä¾‹è¦è¾¾åˆ° 65% æ‰ä¼šè¢«å›æ”¶ã€‚å¦‚æœåƒåœ¾å æ¯”å¤ªä½ï¼Œæ„å‘³ç€å­˜æ´»çš„å¯¹è±¡å æ¯”é«˜ï¼Œåœ¨å¤åˆ¶çš„æ—¶å€™ä¼šèŠ±è´¹æ›´å¤šçš„æ—¶é—´ã€‚</li><li>æ··åˆå›æ”¶å¹¶ä¸ä¸€å®šè¦è¿›è¡Œ 8 æ¬¡ã€‚æœ‰ä¸€ä¸ªé˜ˆå€¼ <code>-XX:G1HeapWastePercent</code>ï¼Œé»˜è®¤å€¼ä¸º 10%ï¼Œæ„æ€æ˜¯å…è®¸æ•´ä¸ªå †å†…å­˜ä¸­æœ‰ 10% çš„ç©ºé—´è¢«æµªè´¹ï¼Œæ„å‘³ç€å¦‚æœå‘ç°å¯ä»¥å›æ”¶çš„åƒåœ¾å å †å†…å­˜çš„æ¯”ä¾‹ä½äº 10%ï¼Œåˆ™ä¸å†è¿›è¡Œæ··åˆå›æ”¶ã€‚å› ä¸º GC ä¼šèŠ±è´¹å¾ˆå¤šçš„æ—¶é—´ä½†æ˜¯å›æ”¶åˆ°çš„å†…å­˜å´å¾ˆå°‘ã€‚</li></ul><h4 id="åƒåœ¾å›æ”¶å¯é€‰è¿‡ç¨‹å››ï¼šFull-GC"><a href="#åƒåœ¾å›æ”¶å¯é€‰è¿‡ç¨‹å››ï¼šFull-GC" class="headerlink" title="åƒåœ¾å›æ”¶å¯é€‰è¿‡ç¨‹å››ï¼šFull GC"></a>åƒåœ¾å›æ”¶å¯é€‰è¿‡ç¨‹å››ï¼šFull GC</h4><p>G1çš„åˆè¡·å°±æ˜¯è¦é¿å… Full GC çš„å‡ºç°ã€‚ä½†æ˜¯å¦‚æœä¸Šè¿°æ–¹å¼ä¸èƒ½æ­£å¸¸å·¥ä½œï¼ŒG1 ä¼šåœæ­¢åº”ç”¨ç¨‹åºçš„æ‰§è¡Œï¼ˆStop-The-Worldï¼‰ï¼Œä½¿ç”¨<strong>å•çº¿ç¨‹</strong>çš„å†…å­˜å›æ”¶ç®—æ³•è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œæ€§èƒ½ä¼šéå¸¸å·®ï¼Œåº”ç”¨ç¨‹åºåœé¡¿æ—¶é—´ä¼šå¾ˆé•¿ã€‚</p><p>è¦é¿å… Full GC çš„å‘ç”Ÿï¼Œä¸€æ—¦å‘ç”Ÿ Full GCï¼Œéœ€è¦å¯¹JVMå‚æ•°è¿›è¡Œè°ƒæ•´ã€‚ä»€ä¹ˆæ—¶å€™ä¼šå‘ç”Ÿ Full GC å‘¢ï¼Ÿæ¯”å¦‚å †å†…å­˜å¤ªå°ï¼Œå½“ G1 åœ¨å¤åˆ¶å­˜æ´»å¯¹è±¡çš„æ—¶å€™æ²¡æœ‰ç©ºçš„å†…å­˜åˆ†æ®µå¯ç”¨ï¼Œåˆ™ä¼šå›é€€åˆ° Full GCï¼Œè¿™ç§æƒ…å†µå¯ä»¥é€šè¿‡å¢å¤§å†…å­˜è§£å†³ã€‚</p><p>å¯¼è‡´ G1 Full GC çš„åŸå› å¯èƒ½æœ‰ä¸¤ä¸ªï¼š</p><ul><li>Evacuation çš„æ—¶å€™æ²¡æœ‰è¶³å¤Ÿçš„ To Space æ¥å­˜æ”¾æ™‹å‡çš„å¯¹è±¡ï¼›</li><li>å¹¶å‘å¤„ç†è¿‡ç¨‹å®Œæˆä¹‹å‰ç©ºé—´è€—å°½ã€‚</li></ul><h4 id="G1-è¡¥å……"><a href="#G1-è¡¥å……" class="headerlink" title="G1 è¡¥å……"></a>G1 è¡¥å……</h4><p>ä» Oracle å®˜æ–¹é€éœ²å‡ºæ¥çš„ä¿¡æ¯å¯è·çŸ¥ï¼Œå›æ”¶é˜¶æ®µï¼ˆEvacuationï¼‰å…¶å®æœ¬ä¹Ÿæœ‰æƒ³è¿‡è®¾è®¡æˆä¸ç”¨æˆ·ç¨‹åºä¸€èµ·å¹¶å‘æ‰§è¡Œï¼Œä½†è¿™ä»¶äº‹æƒ…åšèµ·æ¥æ¯”è¾ƒå¤æ‚ï¼Œè€ƒè™‘åˆ° G1 åªæ˜¯å›ä¸€éƒ¨åˆ† Regionï¼Œåœé¡¿æ—¶é—´æ˜¯ç”¨æˆ·å¯æ§åˆ¶çš„ï¼Œæ‰€ä»¥å¹¶ä¸è¿«åˆ‡å»å®ç°ï¼Œ<strong>è€Œé€‰æ‹©æŠŠè¿™ä¸ªç‰¹æ€§æ”¾åˆ°äº† G1 ä¹‹åå‡ºç°çš„ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨ï¼ˆå³ ZGCï¼‰ä¸­ã€‚</strong>å¦å¤–ï¼Œè¿˜è€ƒè™‘åˆ° G1 ä¸æ˜¯ä»…ä»…é¢å‘ä½å»¶è¿Ÿï¼Œåœé¡¿ç”¨æˆ·çº¿ç¨‹èƒ½å¤Ÿæœ€å¤§å¹…åº¦æé«˜åƒåœ¾æ”¶é›†æ•ˆç‡ï¼Œä¸ºäº†ä¿è¯ååé‡æ‰€ä»¥æ‰é€‰æ‹©äº†å®Œå…¨æš‚åœç”¨æˆ·çº¿ç¨‹çš„å®ç°æ–¹æ¡ˆã€‚ </p><h4 id="G1-å›æ”¶å™¨çš„ä¼˜åŒ–å»ºè®®"><a href="#G1-å›æ”¶å™¨çš„ä¼˜åŒ–å»ºè®®" class="headerlink" title="G1 å›æ”¶å™¨çš„ä¼˜åŒ–å»ºè®®"></a>G1 å›æ”¶å™¨çš„ä¼˜åŒ–å»ºè®®</h4><ol><li>å¹´è½»ä»£å¤§å°<ul><li>é¿å…ä½¿ç”¨ -Xmn æˆ– -XX:NewRatio ç­‰ç›¸å…³é€‰é¡¹æ˜¾å¼è®¾ç½®å¹´è½»ä»£å¤§å°ï¼Œå› ä¸ºå›ºå®šå¹´è½»ä»£çš„å¤§å°ä¼šè¦†ç›–å¯é¢„æµ‹çš„æš‚åœæ—¶é—´ç›®æ ‡ã€‚æˆ‘ä»¬è®© G1 è‡ªå·±å»è°ƒæ•´</li></ul></li><li>æš‚åœæ—¶é—´ç›®æ ‡ä¸è¦å¤ªè¿‡ä¸¥è‹›<ul><li>G1 GC çš„ååé‡ç›®æ ‡æ˜¯ 90% çš„åº”ç”¨ç¨‹åºæ—¶é—´å’Œ 10% çš„åƒåœ¾å›æ”¶æ—¶é—´</li><li>è¯„ä¼° G1 GC çš„ååé‡æ—¶ï¼Œæš‚åœæ—¶é—´ç›®æ ‡ä¸è¦å¤ªä¸¥è‹›ã€‚ç›®æ ‡å¤ªè¿‡ä¸¥è‹›è¡¨ç¤ºä½ æ„¿æ„æ‰¿å—æ›´å¤šçš„åƒåœ¾å›æ”¶å¼€é”€ï¼Œè€Œè¿™äº›ä¼šç›´æ¥å½±å“åˆ°ååé‡ã€‚</li></ul></li></ol><h2 id="åƒåœ¾å›æ”¶å™¨æ€»ç»“"><a href="#åƒåœ¾å›æ”¶å™¨æ€»ç»“" class="headerlink" title="åƒåœ¾å›æ”¶å™¨æ€»ç»“"></a>åƒåœ¾å›æ”¶å™¨æ€»ç»“</h2><p>æˆªæ­¢ JDK 1.8ï¼Œä¸€å…±æœ‰ 7 æ¬¾ä¸åŒçš„åƒåœ¾æ”¶é›†å™¨ã€‚æ¯ä¸€æ¬¾çš„åƒåœ¾æ”¶é›†å™¨éƒ½æœ‰ä¸åŒçš„ç‰¹ç‚¹ï¼Œåœ¨å…·ä½“ä½¿ç”¨çš„æ—¶å€™ï¼Œéœ€è¦æ ¹æ®å…·ä½“çš„æƒ…å†µé€‰ç”¨ä¸åŒçš„åƒåœ¾æ”¶é›†å™¨ã€‚</p><table><thead><tr><th>åƒåœ¾æ”¶é›†å™¨</th><th>åˆ†ç±»</th><th>ä½œç”¨ä½ç½®</th><th>ä½¿ç”¨ç®—æ³•</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Serial</td><td>ä¸²è¡Œè¿è¡Œ</td><td>æ–°ç”Ÿä»£</td><td>å¤åˆ¶ç®—æ³•</td><td>å“åº”é€Ÿåº¦ä¼˜å…ˆ</td><td>é€‚ç”¨äºå• CPU ç¯å¢ƒä¸‹çš„ Client æ¨¡å¼</td></tr><tr><td>ParNew</td><td>å¹¶è¡Œè¿è¡Œ</td><td>æ–°ç”Ÿä»£</td><td>å¤åˆ¶ç®—æ³•</td><td>å“åº”é€Ÿåº¦ä¼˜å…ˆ</td><td>å¤š CPU ç¯å¢ƒ Server æ¨¡å¼ä¸‹ä¸ CMS é…åˆä½¿ç”¨</td></tr><tr><td>Parallel</td><td>å¹¶è¡Œè¿è¡Œ</td><td>æ–°ç”Ÿä»£</td><td>å¤åˆ¶ç®—æ³•</td><td>ååé‡ä¼˜å…ˆ</td><td>é€‚ç”¨äºåå°è¿ç®—è€Œä¸éœ€è¦å¤ªå¤šäº¤äº’çš„åœºæ™¯</td></tr><tr><td>Serial Old</td><td>ä¸²è¡Œè¿è¡Œ</td><td>è€å¹´ä»£</td><td>æ ‡è®°-å‹ç¼©ç®—æ³•</td><td>å“åº”é€Ÿåº¦ä¼˜å…ˆ</td><td>é€‚ç”¨äºå• CPU ç¯å¢ƒä¸‹çš„ Client æ¨¡å¼</td></tr><tr><td>Parallel Old</td><td>å¹¶è¡Œè¿è¡Œ</td><td>è€å¹´ä»£</td><td>æ ‡è®°-å‹ç¼©ç®—æ³•</td><td>ååé‡ä¼˜å…ˆ</td><td>é€‚ç”¨äºåå°è¿ç®—è€Œä¸éœ€è¦å¤ªå¤šäº¤äº’çš„åœºæ™¯</td></tr><tr><td>CMS</td><td>å¹¶å‘è¿è¡Œ</td><td>è€å¹´ä»£</td><td>æ ‡è®°-æ¸…é™¤ç®—æ³•</td><td>å“åº”é€Ÿåº¦ä¼˜å…ˆ</td><td>é€‚ç”¨äºäº’è”ç½‘æˆ– B/S ä¸šåŠ¡</td></tr><tr><td>G1</td><td>å¹¶å‘ã€å¹¶è¡Œè¿è¡Œ</td><td>æ–°ç”Ÿä»£ã€è€å¹´ä»£</td><td>æ ‡è®°-å‹ç¼©ç®—æ³•ã€å¤åˆ¶ç®—æ³•</td><td>å“åº”é€Ÿåº¦ä¼˜å…ˆ</td><td>é¢å‘æœåŠ¡ç«¯åº”ç”¨</td></tr></tbody></table><p>GC å‘å±•é˜¶æ®µ</p><p>Serial â†’ Parallel â†’ CMS â†’ G1 â†’ ZGC</p><h3 id="æ€ä¹ˆé€‰æ‹©åƒåœ¾å›æ”¶å™¨"><a href="#æ€ä¹ˆé€‰æ‹©åƒåœ¾å›æ”¶å™¨" class="headerlink" title="æ€ä¹ˆé€‰æ‹©åƒåœ¾å›æ”¶å™¨"></a>æ€ä¹ˆé€‰æ‹©åƒåœ¾å›æ”¶å™¨</h3><p>Java åƒåœ¾æ”¶é›†å™¨çš„é…ç½®å¯¹äº JVM ä¼˜åŒ–æ¥è¯´æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„é€‰æ‹©ï¼Œé€‰æ‹©åˆé€‚çš„åƒåœ¾æ”¶é›†å™¨å¯ä»¥è®© JVM çš„æ€§èƒ½æœ‰ä¸€ä¸ªå¾ˆå¤§çš„æå‡ã€‚æ€ä¹ˆé€‰æ‹©åƒåœ¾æ”¶é›†å™¨ï¼Ÿ</p><ol><li>ä¼˜å…ˆè°ƒæ•´å †çš„å¤§å°è®© JVM è‡ªé€‚åº”å®Œæˆã€‚</li><li>å¦‚æœå†…å­˜å°äº 100Mï¼Œä½¿ç”¨ä¸²è¡Œæ”¶é›†å™¨</li><li>å¦‚æœæ˜¯å•æ ¸ã€å•æœºç¨‹åºï¼Œå¹¶ä¸”æ²¡æœ‰åœé¡¿æ—¶é—´çš„è¦æ±‚ï¼Œä¸²è¡Œæ”¶é›†å™¨</li><li>å¦‚æœæ˜¯å¤š CPUã€éœ€è¦é«˜ååé‡ã€å…è®¸åœé¡¿æ—¶é—´è¶…è¿‡ 1 ç§’ï¼Œé€‰æ‹©å¹¶è¡Œæˆ–è€… JVM è‡ªå·±é€‰æ‹©</li><li>å¦‚æœæ˜¯å¤š CPUã€è¿½æ±‚ä½åœé¡¿æ—¶é—´ï¼Œéœ€å¿«é€Ÿå“åº”ï¼ˆæ¯”å¦‚å»¶è¿Ÿä¸èƒ½è¶…è¿‡ 1 ç§’ï¼Œå¦‚äº’è”ç½‘åº”ç”¨ï¼‰ï¼Œä½¿ç”¨å¹¶å‘æ”¶é›†å™¨</li><li>å®˜æ–¹æ¨è G1ï¼Œæ€§èƒ½é«˜ã€‚ç°åœ¨äº’è”ç½‘çš„é¡¹ç›®ï¼ŒåŸºæœ¬éƒ½æ˜¯ä½¿ç”¨ G1ã€‚</li></ol><p>æœ€åéœ€è¦æ˜ç¡®ä¸€ä¸ªè§‚ç‚¹ï¼š</p><ol><li>æ²¡æœ‰æœ€å¥½çš„æ”¶é›†å™¨ï¼Œæ›´æ²¡æœ‰ä¸‡èƒ½çš„æ”¶é›†ç®—æ³•</li><li>è°ƒä¼˜æ°¸è¿œæ˜¯é’ˆå¯¹ç‰¹å®šåœºæ™¯ã€ç‰¹å®šéœ€æ±‚ï¼Œä¸å­˜åœ¨ä¸€åŠ³æ°¸é€¸çš„æ”¶é›†å™¨</li></ol><h3 id="é¢è¯•"><a href="#é¢è¯•" class="headerlink" title="é¢è¯•"></a>é¢è¯•</h3><ol><li>å¯¹äºåƒåœ¾æ”¶é›†ï¼Œé¢è¯•å®˜å¯ä»¥å¾ªåºæ¸è¿›ä»ç†è®ºã€å®è·µå„ç§è§’åº¦æ·±å…¥ï¼Œä¹Ÿæœªå¿…æ˜¯è¦æ±‚é¢è¯•è€…ä»€ä¹ˆéƒ½æ‡‚ã€‚ä½†å¦‚æœä½ æ‡‚å¾—åŸç†ï¼Œä¸€å®šä¼šæˆä¸ºé¢è¯•ä¸­çš„åŠ åˆ†é¡¹ã€‚è¿™é‡Œè¾ƒé€šç”¨ã€åŸºç¡€æ€§çš„éƒ¨åˆ†å¦‚ä¸‹ï¼š<ul><li>åƒåœ¾æ”¶é›†çš„ç®—æ³•æœ‰å“ªäº›ï¼Ÿå¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å¯ä»¥å›æ”¶ï¼Ÿ</li><li>åƒåœ¾æ”¶é›†å™¨å·¥ä½œçš„åŸºæœ¬æµç¨‹ã€‚</li></ul></li><li>å¦å¤–ï¼Œå¤§å®¶éœ€è¦å¤šå…³æ³¨åƒåœ¾å›æ”¶å™¨è¿™ä¸€ç« çš„å„ç§å¸¸ç”¨çš„å‚æ•°</li></ol><h2 id="GC-æ—¥å¿—åˆ†æ"><a href="#GC-æ—¥å¿—åˆ†æ" class="headerlink" title="GC æ—¥å¿—åˆ†æ"></a>GC æ—¥å¿—åˆ†æ</h2><h3 id="GC-æ—¥å¿—å‚æ•°è®¾ç½®"><a href="#GC-æ—¥å¿—å‚æ•°è®¾ç½®" class="headerlink" title="GC æ—¥å¿—å‚æ•°è®¾ç½®"></a>GC æ—¥å¿—å‚æ•°è®¾ç½®</h3><p><strong>é€šè¿‡é˜…è¯»GCæ—¥å¿—ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£Javaè™šæ‹Ÿæœºå†…å­˜åˆ†é…ä¸å›æ”¶ç­–ç•¥ã€‚</strong></p><p>å†…å­˜åˆ†é…ä¸åƒåœ¾å›æ”¶çš„å‚æ•°åˆ—è¡¨</p><ol><li>-XX:+PrintGC ï¼šè¾“å‡ºGCæ—¥å¿—ã€‚ç±»ä¼¼ï¼š-verbose:gc</li><li>-XX:+PrintGCDetails ï¼šè¾“å‡ºGCçš„è¯¦ç»†æ—¥å¿—</li><li>-XX:+PrintGCTimestamps ï¼šè¾“å‡ºGCçš„æ—¶é—´æˆ³ï¼ˆä»¥åŸºå‡†æ—¶é—´çš„å½¢å¼ï¼‰</li><li>-XX:+PrintGCDatestamps ï¼šè¾“å‡ºGCçš„æ—¶é—´æˆ³ï¼ˆä»¥æ—¥æœŸçš„å½¢å¼ï¼Œå¦‚2013-05-04T21: 53: 59.234 +0800ï¼‰</li><li>-XX:+PrintHeapAtGC ï¼šåœ¨è¿›è¡ŒGCçš„å‰åæ‰“å°å‡ºå †çš„ä¿¡æ¯</li><li>-Xloggc:â€¦/logs/gc.log ï¼šæ—¥å¿—æ–‡ä»¶çš„è¾“å‡ºè·¯å¾„</li></ol><h3 id="GC-æ—¥å¿—æŸ¥çœ‹å·¥å…·"><a href="#GC-æ—¥å¿—æŸ¥çœ‹å·¥å…·" class="headerlink" title="GC æ—¥å¿—æŸ¥çœ‹å·¥å…·"></a>GC æ—¥å¿—æŸ¥çœ‹å·¥å…·</h3><p>GCViewerã€GCEasyã€GCHistoã€GCLogViewerã€Hpjmeterã€garbagecat ç­‰</p><h3 id="GC-æ—¥å¿—è¡¥å……è¯´æ˜"><a href="#GC-æ—¥å¿—è¡¥å……è¯´æ˜" class="headerlink" title="GC æ—¥å¿—è¡¥å……è¯´æ˜"></a>GC æ—¥å¿—è¡¥å……è¯´æ˜</h3><ol><li>â€œ[GCâ€ å’Œ â€œ[Full GCâ€ è¯´æ˜äº†è¿™æ¬¡åƒåœ¾æ”¶é›†çš„åœé¡¿ç±»å‹ï¼Œå¦‚æœæœ‰ Full åˆ™è¯´æ˜ GC å‘ç”Ÿäº† â€œStop The Worldâ€</li><li>ä½¿ç”¨ Serial æ”¶é›†å™¨åœ¨æ–°ç”Ÿä»£çš„åå­—æ˜¯ Default New Generationï¼Œå› æ­¤æ˜¾ç¤ºçš„æ˜¯ â€œ[DefNewâ€</li><li>ä½¿ç”¨ ParNew æ”¶é›†å™¨åœ¨æ–°ç”Ÿä»£çš„åå­—ä¼šå˜æˆ â€œParNewâ€ï¼Œæ„æ€æ˜¯ â€œParallel New Generationâ€</li><li>ä½¿ç”¨ Parallel scavenge æ”¶é›†å™¨åœ¨æ–°ç”Ÿä»£çš„åå­—æ˜¯ â€œPSYoungGenâ€</li><li>è€å¹´ä»£çš„æ”¶é›†å’Œæ–°ç”Ÿä»£é“ç†ä¸€æ ·ï¼Œåå­—ä¹Ÿæ˜¯æ”¶é›†å™¨å†³å®šçš„</li><li>ä½¿ç”¨ G1 æ”¶é›†å™¨çš„è¯ï¼Œä¼šæ˜¾ç¤ºä¸º â€œgarbage-first heapâ€</li><li>Allocation Failure è¡¨æ˜æœ¬æ¬¡å¼•èµ· GC çš„åŸå› æ˜¯å› ä¸ºåœ¨å¹´è½»ä»£ä¸­æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´èƒ½å¤Ÿå­˜å‚¨æ–°çš„æ•°æ®äº†ã€‚</li><li>[PSYoungGen: 5986K-&gt;696K(8704K) ] 5986K-&gt;704K (9216K)<ul><li>ä¸­æ‹¬å·å†…ï¼šGC å›æ”¶å‰å¹´è½»ä»£å¤§å°ï¼Œå›æ”¶åå¤§å°ï¼Œï¼ˆå¹´è½»ä»£æ€»å¤§å°ï¼‰</li><li>æ‹¬å·å¤–ï¼šGC å›æ”¶å‰å¹´è½»ä»£å’Œè€å¹´ä»£å¤§å°ï¼Œå›æ”¶åå¤§å°ï¼Œï¼ˆå¹´è½»ä»£å’Œè€å¹´ä»£æ€»å¤§å°ï¼‰</li></ul></li><li>user ä»£è¡¨ç”¨æˆ·æ€å›æ”¶è€—æ—¶ï¼Œsys å†…æ ¸æ€å›æ”¶è€—æ—¶ï¼Œreal å®é™…è€—æ—¶ã€‚ç”±äºå¤šæ ¸çº¿ç¨‹åˆ‡æ¢çš„åŸå› ï¼Œæ—¶é—´æ€»å’Œå¯èƒ½ä¼šè¶…è¿‡ real æ—¶é—´</li></ol><h2 id="åƒåœ¾å›æ”¶å™¨çš„æ–°å‘å±•"><a href="#åƒåœ¾å›æ”¶å™¨çš„æ–°å‘å±•" class="headerlink" title="åƒåœ¾å›æ”¶å™¨çš„æ–°å‘å±•"></a>åƒåœ¾å›æ”¶å™¨çš„æ–°å‘å±•</h2><h3 id="åƒåœ¾å›æ”¶å™¨çš„å‘å±•è¿‡ç¨‹"><a href="#åƒåœ¾å›æ”¶å™¨çš„å‘å±•è¿‡ç¨‹" class="headerlink" title="åƒåœ¾å›æ”¶å™¨çš„å‘å±•è¿‡ç¨‹"></a>åƒåœ¾å›æ”¶å™¨çš„å‘å±•è¿‡ç¨‹</h3><p>GC ä»ç„¶å¤„äºé£é€Ÿå‘å±•ä¹‹ä¸­ï¼Œç›®å‰çš„é»˜è®¤é€‰é¡¹ G1 GC åœ¨ä¸æ–­çš„è¿›è¡Œæ”¹è¿›ï¼Œå¾ˆå¤šæˆ‘ä»¬åŸæ¥è®¤ä¸ºçš„ç¼ºç‚¹ï¼Œä¾‹å¦‚ä¸²è¡Œçš„ Full GCã€Card Table æ‰«æçš„ä½æ•ˆç­‰ï¼Œéƒ½å·²ç»è¢«å¤§å¹…æ”¹è¿›ï¼Œä¾‹å¦‚ï¼ŒJDK10 ä»¥åï¼ŒFull GC å·²ç»æ˜¯å¹¶è¡Œè¿è¡Œï¼Œåœ¨å¾ˆå¤šåœºæ™¯ä¸‹ï¼Œå…¶è¡¨ç°è¿˜ç•¥ä¼˜äº Parallel GC çš„å¹¶è¡Œ Full GC å®ç°ã€‚ </p><p>å³ä½¿æ˜¯ Serial GCï¼Œè™½ç„¶æ¯”è¾ƒå¤è€ï¼Œä½†æ˜¯ç®€å•çš„è®¾è®¡å’Œå®ç°æœªå¿…å°±æ˜¯è¿‡æ—¶çš„ï¼Œå®ƒæœ¬èº«çš„å¼€é”€ï¼Œä¸ç®¡æ˜¯GCç›¸å…³æ•°æ®ç»“æ„çš„å¼€é”€ï¼Œè¿˜æ˜¯çº¿ç¨‹çš„å¼€é”€ï¼Œéƒ½æ˜¯éå¸¸å°çš„ï¼Œæ‰€ä»¥éšç€äº‘è®¡ç®—çš„å…´èµ·ï¼Œ<strong>åœ¨ Serverless ç­‰æ–°çš„åº”ç”¨åœºæ™¯ä¸‹ï¼ŒSerial GC æ‰¾åˆ°äº†æ–°çš„èˆå°ã€‚</strong></p><p>æ¯”è¾ƒä¸å¹¸çš„æ˜¯ CMS GCï¼Œå› ä¸ºå…¶ç®—æ³•çš„ç†è®ºç¼ºé™·ç­‰åŸå› ï¼Œè™½ç„¶ç°åœ¨è¿˜æœ‰éå¸¸å¤§çš„ç”¨æˆ·ç¾¤ä½“ï¼Œä½†åœ¨ JDK 9 ä¸­å·²ç»è¢«æ ‡è®°ä¸ºåºŸå¼ƒï¼Œå¹¶åœ¨ JDK 14 ç‰ˆæœ¬ä¸­ç§»é™¤ã€‚</p><p>ç°åœ¨ G1 å›æ”¶å™¨å·²æˆä¸ºé»˜è®¤å›æ”¶å™¨å¥½å‡ å¹´äº†ã€‚æˆ‘ä»¬è¿˜çœ‹åˆ°äº†å¼•å…¥äº†ä¸¤ä¸ªæ–°çš„æ”¶é›†å™¨ï¼šZGCï¼ˆJDK 11å‡ºç°ï¼‰å’Œ Shenandoahï¼ˆOpen JDK 12ï¼‰ï¼Œå…¶ç‰¹ç‚¹ï¼šä¸»æ‰“ä½åœé¡¿æ—¶é—´ã€‚</p><h3 id="Shenandoah-GC"><a href="#Shenandoah-GC" class="headerlink" title="Shenandoah GC"></a>Shenandoah GC</h3><p><strong>Open JDK12çš„Shenandoash GCï¼šä½åœé¡¿æ—¶é—´çš„GCï¼ˆå®éªŒæ€§ï¼‰</strong></p><p>Shenandoah æ— ç–‘æ˜¯ä¼—å¤š GC ä¸­æœ€å­¤ç‹¬çš„ä¸€ä¸ªã€‚æ˜¯ç¬¬ä¸€æ¬¾ä¸ç”± Oracle å…¬å¸å›¢é˜Ÿé¢†å¯¼å¼€å‘çš„ Hotspot åƒåœ¾æ”¶é›†å™¨ã€‚ä¸å¯é¿å…çš„å—åˆ°å®˜æ–¹çš„æ’æŒ¤ã€‚æ¯”å¦‚å·ç§° openJDK å’Œ OracleJDK æ²¡æœ‰åŒºåˆ«çš„ Oracle å…¬å¸ä»æ‹’ç»åœ¨ Oracle JDK12 ä¸­æ”¯æŒ Shenandoahã€‚</p><p>Shenandoah åƒåœ¾å›æ”¶å™¨æœ€åˆç”± RedHat è¿›è¡Œçš„ä¸€é¡¹åƒåœ¾æ”¶é›†å™¨ç ”ç©¶é¡¹ç›® Pauseless GC çš„å®ç°ï¼Œæ—¨åœ¨é’ˆå¯¹ JVM ä¸Šçš„å†…å­˜å›æ”¶å®ç°ä½åœé¡¿çš„éœ€æ±‚ã€‚åœ¨ 2014 å¹´è´¡çŒ®ç»™ OpenJDKã€‚</p><p>Red Hat ç ”å‘ Shenandoah å›¢é˜Ÿå¯¹å¤–å®£ç§°ï¼ŒShenandoah åƒåœ¾å›æ”¶å™¨çš„æš‚åœæ—¶é—´ä¸å †å¤§å°æ— å…³ï¼Œè¿™æ„å‘³ç€æ— è®ºå°†å †è®¾ç½®ä¸º 200MB è¿˜æ˜¯200GBï¼Œ99.9% çš„ç›®æ ‡éƒ½å¯ä»¥æŠŠåƒåœ¾æ”¶é›†çš„åœé¡¿æ—¶é—´é™åˆ¶åœ¨åæ¯«ç§’ä»¥å†…ã€‚ä¸è¿‡å®é™…ä½¿ç”¨æ€§èƒ½å°†å–å†³äºå®é™…å·¥ä½œå †çš„å¤§å°å’Œå·¥ä½œè´Ÿè½½ã€‚</p><p><img src="https://up-img.yonghong.tech/pic/2021/05/12-20-51-shenandoah-benchmark-XybNYb.png" alt="shenandoah-benchmark"></p><p>è¿™æ˜¯ RedHat åœ¨ 2016 å¹´å‘è¡¨çš„è®ºæ–‡æ•°æ®ï¼Œæµ‹è¯•å†…å®¹æ˜¯ä½¿ç”¨ ES å¯¹ 200GB çš„ç»´åŸºç™¾ç§‘æ•°æ®è¿›è¡Œç´¢å¼•ã€‚ä»ç»“æœçœ‹ï¼š</p><ol><li>åœé¡¿æ—¶é—´æ¯”å…¶ä»–å‡ æ¬¾æ”¶é›†å™¨ç¡®å®æœ‰äº†è´¨çš„é£è·ƒï¼Œä½†ä¹Ÿæœªå®ç°æœ€å¤§åœé¡¿æ—¶é—´æ§åˆ¶åœ¨åæ¯«ç§’ä»¥å†…çš„ç›®æ ‡ã€‚</li><li>è€Œååé‡æ–¹é¢å‡ºç°äº†æ˜æ˜¾çš„ä¸‹é™ï¼Œæ€»è¿è¡Œæ—¶é—´æ˜¯æ‰€æœ‰æµ‹è¯•æ”¶é›†å™¨é‡Œæœ€é•¿çš„ã€‚</li></ol><p>æ€»ç»“</p><ol><li>Shenandoah GC çš„å¼±é¡¹ï¼šé«˜è¿è¡Œè´Ÿæ‹…ä¸‹çš„ååé‡ä¸‹é™ã€‚</li><li>Shenandoah GC çš„å¼ºé¡¹ï¼šä½å»¶è¿Ÿæ—¶é—´ã€‚</li></ol><p>ç›¸å…³è§£è¯»ï¼šå°šç¡…è°·å®‹çº¢åº·Java12&amp;13æ–°ç‰¹æ€§æ•™ç¨‹(æ·±å…¥è§£è¯»java12&amp;13)</p><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWpKNDExTTdrUQ==">https://www.bilibili.com/video/BV1jJ411M7kQ<i class="fa fa-external-link-alt"></i></span></p><h3 id="ä»¤äººéœ‡æƒŠã€é©å‘½æ€§çš„-ZGC"><a href="#ä»¤äººéœ‡æƒŠã€é©å‘½æ€§çš„-ZGC" class="headerlink" title="ä»¤äººéœ‡æƒŠã€é©å‘½æ€§çš„ ZGC"></a>ä»¤äººéœ‡æƒŠã€é©å‘½æ€§çš„ ZGC</h3><p>å®˜æ–¹æ–‡æ¡£ï¼š<span class="exturl" data-url="aHR0cHM6Ly9kb2NzLm9yYWNsZS5jb20vZW4vamF2YS9qYXZhc2UvMTIvZ2N0dW5pbmcv">https://docs.oracle.com/en/java/javase/12/gctuning/<i class="fa fa-external-link-alt"></i></span></p><p>ZGC ä¸ Shenandoah ç›®æ ‡é«˜åº¦ç›¸ä¼¼ï¼Œåœ¨å°½å¯èƒ½å¯¹ååé‡å½±å“ä¸å¤§çš„å‰æä¸‹ï¼Œå®ç°åœ¨ä»»æ„å †å†…å­˜å¤§å°ä¸‹éƒ½å¯ä»¥æŠŠåƒåœ¾æ”¶é›†çš„åœé¢‡æ—¶é—´é™åˆ¶åœ¨åæ¯«ç§’ä»¥å†…çš„ä½å»¶è¿Ÿã€‚</p><p>ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ä¸€ä¹¦ä¸­è¿™æ ·å®šä¹‰ ZGCï¼šZGC æ”¶é›†å™¨æ˜¯ä¸€æ¬¾åŸºäº Region å†…å­˜å¸ƒå±€çš„ï¼Œï¼ˆæš‚æ—¶ï¼‰ä¸è®¾åˆ†ä»£çš„ï¼Œä½¿ç”¨äº†è¯»å±éšœã€æŸ“è‰²æŒ‡é’ˆå’Œå†…å­˜å¤šé‡æ˜ å°„ç­‰æŠ€æœ¯æ¥å®ç°<strong>å¯å¹¶å‘çš„æ ‡è®°-å‹ç¼©ç®—æ³•</strong>çš„ï¼Œä»¥<strong>ä½å»¶è¿Ÿä¸ºé¦–è¦ç›®æ ‡</strong>çš„ä¸€æ¬¾åƒåœ¾æ”¶é›†å™¨ã€‚</p><p>ZGC çš„å·¥ä½œè¿‡ç¨‹å¯ä»¥åˆ†ä¸º 4 ä¸ªé˜¶æ®µï¼š<strong>å¹¶å‘æ ‡è®° - å¹¶å‘é¢„å¤‡é‡åˆ†é… - å¹¶å‘é‡åˆ†é… - å¹¶å‘é‡æ˜ å°„</strong> ç­‰ã€‚</p><p>ZGC å‡ ä¹åœ¨æ‰€æœ‰åœ°æ–¹å¹¶å‘æ‰§è¡Œçš„ï¼Œé™¤äº†<strong>åˆå§‹æ ‡è®°çš„æ˜¯ STW çš„</strong>ã€‚æ‰€ä»¥åœé¡¿æ—¶é—´å‡ ä¹å°±è€—è´¹åœ¨åˆå§‹æ ‡è®°ä¸Šï¼Œè¿™éƒ¨åˆ†çš„å®é™…æ—¶é—´æ˜¯éå¸¸å°‘çš„ã€‚</p><p>åœ¨ ZGC çš„å¼ºé¡¹åœé¡¿æ—¶é—´æµ‹è¯•ä¸Šï¼Œå®ƒæ¯«ä¸ç•™æƒ…çš„å°† Parallelã€G1 æ‹‰å¼€äº†ä¸¤ä¸ªæ•°é‡çº§çš„å·®è·ã€‚æ— è®ºå¹³å‡åœé¡¿ã€95% åœé¡¿ã€99.8% åœé¡¿ã€99. 98% åœé¡¿ï¼Œè¿˜æ˜¯æœ€å¤§åœé¡¿æ—¶é—´ï¼ŒZGC éƒ½èƒ½æ¯«ä¸è´¹åŠ²æ§åˆ¶åœ¨ 10 æ¯«ç§’ä»¥å†…ã€‚</p><p>è™½ç„¶ ZGC è¿˜åœ¨è¯•éªŒçŠ¶æ€ï¼Œæ²¡æœ‰å®Œæˆæ‰€æœ‰ç‰¹æ€§ï¼Œä½†æ­¤æ—¶æ€§èƒ½å·²ç»ç›¸å½“äº®çœ¼ï¼Œç”¨â€œä»¤äººéœ‡æƒŠã€é©å‘½æ€§â€æ¥å½¢å®¹ï¼Œä¸ä¸ºè¿‡ã€‚æœªæ¥å°†åœ¨æœåŠ¡ç«¯ã€å¤§å†…å­˜ã€ä½å»¶è¿Ÿåº”ç”¨çš„é¦–é€‰åƒåœ¾æ”¶é›†å™¨ã€‚</p><h3 id="é¢å‘å¤§å †çš„-AliGC"><a href="#é¢å‘å¤§å †çš„-AliGC" class="headerlink" title="é¢å‘å¤§å †çš„ AliGC"></a>é¢å‘å¤§å †çš„ AliGC</h3><p>AliGC æ˜¯é˜¿é‡Œå·´å·´ JVM å›¢é˜ŸåŸºäº G1 ç®—æ³•ï¼Œé¢å‘å¤§å †ï¼ˆLargeHeapï¼‰åº”ç”¨åœºæ™¯ã€‚æŒ‡å®šåœºæ™¯ä¸‹çš„å¯¹æ¯”ï¼š</p><p><img src="https://up-img.yonghong.tech/pic/2021/05/12-20-51-aligc_1-FPAp6p.png" alt="12-20-51-aligc_1-FPAp6p"></p><p><img src="https://up-img.yonghong.tech/pic/2021/05/12-20-51-aligc_2-CKMw3y.png" alt="12-20-51-aligc_2-CKMw3y"></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;åƒåœ¾å›æ”¶å™¨æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#åƒåœ¾å›æ”¶å™¨æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;åƒåœ¾å›æ”¶å™¨æ¦‚è¿°&quot;&gt;&lt;/a&gt;åƒåœ¾å›æ”¶å™¨æ¦‚è¿°&lt;/h2&gt;&lt;p&gt;åƒåœ¾æ”¶é›†å™¨æ²¡æœ‰åœ¨è§„èŒƒä¸­è¿›è¡Œè¿‡å¤šçš„è§„å®šï¼Œå¯ä»¥ç”±ä¸åŒçš„å‚å•†ï¼Œä¸åŒç‰ˆæœ¬çš„ JVM æ¥å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äº JDK çš„ç‰ˆæœ¬å¤„äºé«˜é€Ÿè¿­ä»£è¿‡ç¨‹ä¸­ï¼Œå› æ­¤ Java å‘å±•è‡³ä»Šå·²ç»è¡ç”Ÿäº†ä¼—å¤šçš„ GC ç‰ˆæœ¬ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Javaè¿›é˜¶" scheme="http://yonghong.tech/categories/Java%E8%BF%9B%E9%98%B6/"/>
    
    
    <category term="Javaè¿›é˜¶" scheme="http://yonghong.tech/tags/Java%E8%BF%9B%E9%98%B6/"/>
    
    <category term="JVM" scheme="http://yonghong.tech/tags/JVM/"/>
    
  </entry>
  
  <entry>
    <title>Java è¿›é˜¶ 07 â€”â€” JVM åƒåœ¾å›æ”¶ç›¸å…³æ¦‚å¿µ</title>
    <link href="http://yonghong.tech/java-advance/07-jvm-gc/"/>
    <id>http://yonghong.tech/java-advance/07-jvm-gc/</id>
    <published>2021-06-25T13:00:00.000Z</published>
    <updated>2021-06-25T13:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="System-gc-çš„ç†è§£"><a href="#System-gc-çš„ç†è§£" class="headerlink" title="System.gc() çš„ç†è§£"></a>System.gc() çš„ç†è§£</h2><p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œé€šè¿‡ System.gc() æˆ–è€… Runtime.getRuntime().gc() çš„è°ƒç”¨ï¼Œ<strong>ä¼šæ˜¾ç¤ºè§¦å‘ Full GC</strong>ï¼ŒåŒæ—¶å¯¹è€å¹´ä»£å’Œæ–°ç”Ÿä»£è¿›è¡Œå›æ”¶ï¼Œå°è¯•é‡Šæ”¾è¢«ä¸¢å¼ƒå¯¹è±¡å ç”¨çš„å†…å­˜ã€‚</p><p>ç„¶è€Œ System.gc() è°ƒç”¨é™„å¸¦ä¸€ä¸ªå…è´£å£°æ˜ï¼Œæ— æ³•ä¿è¯å¯¹åƒåœ¾æ”¶é›†å™¨çš„è°ƒç”¨ã€‚</p><span id="more"></span><p>JVM å®ç°è€…å¯ä»¥é€šè¿‡ System.gc() è°ƒç”¨æ¥å†³å®š JVM çš„ GC è¡Œä¸ºã€‚è€Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåƒåœ¾å›æ”¶åº”è¯¥æ˜¯è‡ªåŠ¨è¿›è¡Œçš„ï¼Œæ— é¡»æ‰‹åŠ¨è§¦å‘ï¼Œå¦åˆ™å°±å¤ªè¿‡äºéº»çƒ¦äº†ã€‚åœ¨ä¸€äº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œå¦‚æˆ‘ä»¬æ­£åœ¨ç¼–å†™ä¸€ä¸ªæ€§èƒ½åŸºå‡†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿è¡Œä¹‹é—´è°ƒç”¨ System.gc()ã€‚</p><p>ä¾‹å­1ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SystemGCTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> SystemGCTest();</span><br><span class="line">        System.gc(); <span class="comment">// æé†’ JVM çš„åƒåœ¾å›æ”¶å™¨æ‰§è¡Œ GC</span></span><br><span class="line"></span><br><span class="line">        System.runFinalization(); <span class="comment">// å¼ºåˆ¶è°ƒç”¨æœªè¢«ä½¿ç”¨å¯¹è±¡çš„ finalize æ–¹æ³•</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">finalize</span><span class="params">()</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.finalize();</span><br><span class="line">        System.out.println(<span class="string">&quot;è°ƒç”¨äº†é‡å†™çš„ finalize æ–¹æ³•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¾‹å­2</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * -XX:+PrintGCDetails</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LocalVarGCTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">10</span> * <span class="number">1024</span> * <span class="number">1024</span>]; <span class="comment">// 10M</span></span><br><span class="line">        System.gc(); <span class="comment">// ä¸èƒ½å›æ”¶</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">10</span> * <span class="number">1024</span> * <span class="number">1024</span>]; <span class="comment">// 10M</span></span><br><span class="line">        buffer = <span class="keyword">null</span>;</span><br><span class="line">        System.gc(); <span class="comment">// å¯ä»¥å›æ”¶</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">10</span> * <span class="number">1024</span> * <span class="number">1024</span>]; <span class="comment">// 10M</span></span><br><span class="line">        &#125;</span><br><span class="line">        System.gc(); <span class="comment">// ä¸èƒ½å›æ”¶ï¼Œå±€éƒ¨å˜é‡è¡¨ä¸­ä»ç„¶æœ‰å¼•ç”¨</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun4</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">10</span> * <span class="number">1024</span> * <span class="number">1024</span>]; <span class="comment">// 10M</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> value = <span class="number">10</span>;</span><br><span class="line">        System.gc(); <span class="comment">// å¯ä»¥å›æ”¶ï¼Œå±€éƒ¨å˜é‡è¡¨ä¸­ value å’Œ buffer ä½¿ç”¨åŒä¸€ä¸ª Slot</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun5</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        fun1();</span><br><span class="line">        System.gc(); <span class="comment">// å¯ä»¥å›æ”¶</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        LocalVarGCTest local = <span class="keyword">new</span> LocalVarGCTest();</span><br><span class="line">        local.fun5();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å†…å­˜æº¢å‡ºä¸å†…å­˜æ³„éœ²"><a href="#å†…å­˜æº¢å‡ºä¸å†…å­˜æ³„éœ²" class="headerlink" title="å†…å­˜æº¢å‡ºä¸å†…å­˜æ³„éœ²"></a>å†…å­˜æº¢å‡ºä¸å†…å­˜æ³„éœ²</h2><h3 id="å†…å­˜æº¢å‡º"><a href="#å†…å­˜æº¢å‡º" class="headerlink" title="å†…å­˜æº¢å‡º"></a>å†…å­˜æº¢å‡º</h3><p>å†…å­˜æº¢å‡ºç›¸å¯¹äºå†…å­˜æ³„éœ²æ¥è¯´ï¼Œå°½ç®¡æ›´å®¹æ˜“ç†è§£ï¼Œä½†æ˜¯åŒæ ·çš„ï¼Œå†…å­˜æº¢å‡ºä¹Ÿæ˜¯å¼•å‘ç¨‹åºå´©æºƒçš„ç½ªé­ç¥¸é¦–ä¹‹ä¸€ã€‚</p><p>ç”±äº GC ä¸€ç›´åœ¨å‘å±•ï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œé™¤éåº”ç”¨ç¨‹åºå ç”¨çš„å†…å­˜å¢é•¿é€Ÿåº¦éå¸¸å¿«ï¼Œé€ æˆåƒåœ¾å›æ”¶å·²ç»è·Ÿä¸ä¸Šå†…å­˜æ¶ˆè€—çš„é€Ÿåº¦ï¼Œå¦åˆ™ä¸å¤ªå®¹æ˜“å‡ºç° OOM çš„æƒ…å†µã€‚</p><p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒGC ä¼šè¿›è¡Œå„ç§å¹´é¾„æ®µçš„åƒåœ¾å›æ”¶ï¼Œå®åœ¨ä¸è¡Œäº†å°±æ”¾å¤§æ‹›ï¼Œæ¥ä¸€æ¬¡ç‹¬å å¼çš„ Full GC æ“ä½œï¼Œè¿™æ—¶å€™ä¼šå›æ”¶å¤§é‡çš„å†…å­˜ï¼Œä¾›åº”ç”¨ç¨‹åºç»§ç»­ä½¿ç”¨ã€‚</p><p>Java Doc ä¸­å¯¹ OutOfMemoryError çš„è§£é‡Šæ˜¯ï¼Œ<strong>æ²¡æœ‰ç©ºé—²å†…å­˜ï¼Œå¹¶ä¸”åƒåœ¾æ”¶é›†å™¨ä¹Ÿæ— æ³•æä¾›æ›´å¤šå†…å­˜ã€‚</strong></p><p>1.é¦–å…ˆè¯´æ²¡æœ‰ç©ºé—²å†…å­˜çš„æƒ…å†µï¼šè¯´æ˜ Java è™šæ‹Ÿæœºçš„å †å†…å­˜ä¸å¤Ÿã€‚åŸå› æœ‰äºŒï¼š</p><ul><li><p>Java è™šæ‹Ÿæœºçš„å †å†…å­˜è®¾ç½®ä¸å¤Ÿ</p><p>æ¯”å¦‚ï¼šå¯èƒ½å­˜åœ¨å†…å­˜æ³„éœ²é—®é¢˜ï¼šä¹Ÿå¾ˆæœ‰å¯èƒ½å°±æ˜¯å †çš„å¤§å°ä¸åˆç†ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦å¤„ç†æ¯”è¾ƒå¯è§‚çš„æ•°æ®é‡ï¼Œä½†æ˜¯æ²¡æœ‰æ˜¾ç¤ºæŒ‡å®š JVM å †å¤§å°æˆ–è€…æŒ‡å®šæ•°å€¼åå°ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ -Xmsã€-Xmx æ¥è°ƒæ•´ã€‚</p></li><li><p>ä»£ç ä¸­åˆ›å»ºäº†å¤§é‡å¤§å¯¹è±¡ï¼Œå¹¶ä¸”é•¿æ—¶é—´ä¸èƒ½è¢«åƒåœ¾æ”¶é›†å™¨æ”¶é›†ï¼ˆå­˜åœ¨å¼•ç”¨ï¼‰</p><p>å¯¹äºè€ç‰ˆæœ¬çš„ Oracle JDKï¼Œå› ä¸ºæ°¸ä¹…ä»£çš„å¤§å°æ—¶æœ‰é™çš„ï¼Œå¹¶ä¸” JVM å¯¹æ°¸ä¹…ä»£åƒåœ¾å›æ”¶ï¼ˆå¦‚ï¼Œå¸¸é‡æ± å›æ”¶ã€å¸è½½ä¸å†éœ€è¦çš„ç±»å‹ï¼‰éå¸¸ä¸ç§¯æï¼Œæ‰€ä»¥å½“æˆ‘ä»¬ä¸æ–­æ·»åŠ æ–°ç±»å‹çš„æ—¶å€™ï¼Œæ°¸ä¹…ä»£å‡ºç° OOM ä¹Ÿéå¸¸å¤šè§ï¼Œå°¤å…¶æ˜¯åœ¨è¿è¡Œæ—¶å­˜åœ¨å¤§é‡åŠ¨æ€ç±»å‹ç”Ÿæˆçš„åœºåˆï¼›ç±»ä¼¼ intern å­—ç¬¦ä¸²ç¼“å­˜å ç”¨å¤ªå¤šç©ºé—´ï¼Œä¹Ÿä¼šå¯¼è‡´ OOM é—®é¢˜ã€‚å¯¹åº”çš„å¼‚å¸¸ä¿¡æ¯ï¼Œä¼šæ ‡è®°å‡ºæ¥å’Œæ°¸ä¹…ä»£ç›¸å…³ï¼šâ€java.lang.OutOfMemoryError: PermGen Spaceâ€</p><p>éšç€å…ƒæ•°æ®åŒºçš„å¼•å…¥ï¼Œæ–¹æ³•åŒºå†…å­˜å·²ç»ä¸å†é‚£ä¹ˆçª˜è¿«ï¼Œæ‰€ä»¥ç›¸åº”çš„ OOM æœ‰æ‰€æ”¹è§‚ï¼Œå‡ºç° OOM å¼‚å¸¸çš„ä¿¡æ¯åˆ™å˜æˆäº† â€œjava.lang.OutOfMemoryError: Metaspaceâ€ã€‚ç›´æ¥å†…å­˜ä¸è¶³ï¼Œä¹Ÿä¼šå¯¼è‡´ OOMã€‚</p></li></ul><p>2.åƒåœ¾æ”¶é›†å™¨æ— æ³•æä¾›æ›´å¤šå†…å­˜ï¼Œè¿™é‡Œé¢éšå«ç€ä¸€å±‚æ„æ€æ˜¯ï¼Œåœ¨æŠ›å‡º OOM ä¹‹å‰ï¼Œé€šå¸¸åƒåœ¾æ”¶é›†å™¨ä¼šè¢«è§¦å‘ï¼Œå°½å…¶æ‰€èƒ½å»æ¸…ç†å‡ºç©ºé—´ã€‚</p><ul><li>ä¾‹å¦‚ï¼šåœ¨å¼•ç”¨æœºåˆ¶åˆ†æä¸­ï¼Œæ¶‰åŠåˆ° JVM ä¼šå»å°è¯•å›æ”¶è½¯å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ç­‰ã€‚</li><li>åœ¨ java.nio.BITs.reserveMemory() æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬èƒ½æ¸…æ¥šåœ°çœ‹åˆ°ï¼ŒSystem.gc() ä¼šè¢«è°ƒç”¨ï¼Œä»¥æ¸…ç†ç©ºé—´ã€‚</li></ul><p>å½“ç„¶ï¼Œä¹Ÿä¸æ˜¯åœ¨ä»»ä½•æƒ…å†µä¸‹åƒåœ¾æ”¶é›†å™¨éƒ½ä¼šè¢«è§¦å‘çš„ã€‚</p><ul><li>æ¯”å¦‚ï¼Œæˆ‘ä»¬å»åˆ†é…ä¸€ä¸ªè¶…å¤§å¯¹è±¡ã€‚ç±»ä¼¼ä¸€ä¸ªè¶…å¤§æ•°ç»„è¶…è¿‡å †çš„æœ€å¤§å€¼ï¼ŒJVM å¯ä»¥åˆ¤æ–­å‡ºåƒåœ¾æ”¶é›†å¹¶ä¸èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥ç›´æ¥æŠ›å‡º OOMã€‚</li></ul><h3 id="å†…å­˜æ³„éœ²"><a href="#å†…å­˜æ³„éœ²" class="headerlink" title="å†…å­˜æ³„éœ²"></a>å†…å­˜æ³„éœ²</h3><p>å†…å­˜æ³„éœ²ä¹Ÿç§°ä½œ å­˜å‚¨æ¸—æ¼ã€‚ä¸¥æ ¼æ¥è¯´ï¼Œ<strong>åªæœ‰å¯¹è±¡ä¸ä¼šå†è¢«ç¨‹åºç”¨åˆ°äº†ï¼Œä½†æ˜¯ GC åˆä¸èƒ½å›æ”¶ä»–ä»¬çš„æƒ…å†µï¼Œæ‰å«å†…å­˜æ³„éœ²</strong>ã€‚</p><p>ä½†å®é™…æƒ…å†µå¾ˆå¤šæ—¶å€™ä¸€äº›ä¸å¤ªå¥½çš„å®è·µï¼ˆæˆ–ç–å¿½ï¼‰ä¼šå¯¼è‡´å¯¹å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå˜å¾—å¾ˆé•¿ç”šè‡³å¯¼è‡´ OOMï¼Œä¹Ÿå¯ä»¥å«åšå®½æ³›æ„ä¹‰ä¸Šçš„å†…å­˜æ³„éœ²ã€‚</p><p>å°½ç®¡å†…å­˜æ³„éœ²å¹¶ä¸ä¼šç«‹åˆ»å¼•èµ·ç¨‹åºå´©æºƒï¼Œä½†æ˜¯ä¸€æ—¦å‘ç”Ÿå†…å­˜æ³„éœ²ï¼Œç¨‹åºä¸­çš„å¯ç”¨å†…å­˜å°±ä¼šè¢«é€æ­¥èš•é£Ÿï¼Œç›´è‡³è€—å°½æ‰€æœ‰å†…å­˜ï¼Œæœ€ç»ˆå‡ºç° OOM å¼‚å¸¸ï¼Œå¯¼è‡´ç¨‹åºå´©æºƒã€‚</p><p>æ³¨æ„ï¼Œè¿™é‡Œçš„å­˜å‚¨ç©ºé—´å¹¶ä¸æ˜¯æŒ‡ç‰©ç†å†…å­˜ï¼Œè€Œæ˜¯æŒ‡è™šæ‹Ÿå†…å­˜å¤§å°ï¼Œè¿™ä¸ªè™šæ‹Ÿå†…å­˜å¤§å°å†³å®šäºç£ç›˜äº¤æ¢åŒºè®¾å®šçš„å¤§å°ã€‚</p><p>ä¸¾ä¾‹ï¼š</p><p>1.å•ä¾‹æ¨¡å¼</p><p>å•ä¾‹çš„ç”Ÿå‘½å‘¨æœŸå’Œåº”ç”¨ç¨‹åºæ˜¯ä¸€æ ·é•¿çš„ï¼Œæ‰€ä»¥å•ä¾‹ç¨‹åºä¸­ï¼Œå¦‚æœæŒæœ‰å¯¹å¤–éƒ¨å¯¹è±¡çš„å¼•ç”¨çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªå¤–éƒ¨å¯¹è±¡æ˜¯ä¸èƒ½è¢«å›æ”¶çš„ï¼Œåˆ™ä¼šå¯¼è‡´å†…å­˜æ³„éœ²çš„äº§ç”Ÿã€‚</p><p>2.ä¸€äº›æä¾› close çš„èµ„æºæœªå…³é—­å¯¼è‡´å†…å­˜æ³„éœ²</p><p>æ•°æ®åº“è¿æ¥ï¼ˆdataSource.getConnection()ï¼‰ï¼Œç½‘ç»œè¿æ¥ï¼ˆsocketï¼‰å’Œ io è¿æ¥å¿…é¡»æ‰‹åŠ¨ closeï¼Œå¦åˆ™æ˜¯ä¸èƒ½è¢«å›æ”¶çš„ã€‚</p><h2 id="Stop-The-World"><a href="#Stop-The-World" class="headerlink" title="Stop The World"></a>Stop The World</h2><p>Stop The Worldï¼Œç®€ç§° STWï¼ŒæŒ‡çš„æ˜¯ GC äº‹ä»¶å‘ç”Ÿè¿‡ç¨‹ä¸­ï¼Œä¼šäº§ç”Ÿåº”ç”¨ç¨‹åºçš„åœé¡¿ã€‚åœé¡¿äº§ç”Ÿæ—¶æ•´ä¸ªåº”ç”¨ç¨‹åºçº¿ç¨‹éƒ½ä¼šè¢«æš‚åœï¼Œæ²¡æœ‰ä»»ä½•å“åº”ï¼Œæœ‰ç‚¹åƒå¡æ­»çš„æ„Ÿè§‰ï¼Œè¿™ä¸ªåœé¡¿ç§°ä¸º STWã€‚</p><ul><li>å¯è¾¾æ€§åˆ†æç®—æ³•ä¸­æšä¸¾æ ¹èŠ‚ç‚¹ï¼ˆGC Rootsï¼‰ä¼šå¯¼è‡´æ‰€æœ‰ Java æ‰§è¡Œçº¿ç¨‹åœé¡¿ã€‚<ul><li>åˆ†æå·¥ä½œå¿…é¡»åœ¨ä¸€ä¸ªèƒ½ç¡®ä¿ä¸€è‡´æ€§çš„å¿«ç…§ä¸­è¿›è¡Œ</li><li>ä¸€è‡´æ€§æŒ‡æ•´ä¸ªåˆ†ææœŸé—´æ•´ä¸ªæ‰§è¡Œç³»ç»Ÿçœ‹èµ·æ¥åƒè¢«å†»ç»“åœ¨æŸä¸ªæ—¶é—´ç‚¹ä¸Š</li><li>å¦‚æœå‡ºç°åˆ†æè¿‡ç¨‹ä¸­å¯¹è±¡å¼•ç”¨å…³ç³»è¿˜åœ¨ä¸æ–­å˜åŒ–ï¼Œåˆ™åˆ†æç»“æœçš„å‡†ç¡®æ€§æ— æ³•ä¿è¯ã€‚=</li></ul></li></ul><p>è¢« STW ä¸­æ–­çš„åº”ç”¨ç¨‹åºçº¿ç¨‹ä¼šåœ¨å®Œæˆ GC ä¹‹åæ¢å¤ï¼Œé¢‘ç¹ä¸­æ–­ä¼šè®©ç”¨æˆ·æ„Ÿè§‰åƒæ˜¯ç½‘é€Ÿä¸å¿«é€ æˆç”µå½±å¡å¸¦ä¸€æ ·ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å‡å°‘ STW çš„å‘ç”Ÿã€‚</p><p>STW äº‹ä»¶å’Œé‡‡ç”¨å“ªæ¬¾ GC æ— å…³ï¼Œæ‰€æœ‰çš„ GC éƒ½æœ‰è¿™ä¸ªäº‹ä»¶ã€‚</p><p>å“ªæ€•æ˜¯ G1 ä¹Ÿä¸èƒ½å®Œå…¨é¿å… STW æƒ…å†µå‘ç”Ÿï¼Œåªèƒ½è¯´åƒåœ¾å›æ”¶å™¨è¶Šæ¥è¶Šä¼˜ç§€ï¼Œå›æ”¶æ•ˆç‡è¶Šæ¥è¶Šé«˜ï¼Œå°½å¯èƒ½å¾—ç¼©çŸ­äº†æš‚åœæ—¶é—´ã€‚</p><p>STW æ˜¯ JVM åœ¨åå°è‡ªåŠ¨å‘èµ·å’Œè‡ªåŠ¨å®Œæˆçš„ã€‚åœ¨ç”¨æˆ·ä¸å¯è§çš„æƒ…å†µä¸‹ï¼ŒæŠŠç”¨æˆ·æ­£å¸¸çš„å·¥ä½œçº¿ç¨‹å…¨éƒ¨åœæ‰ã€‚</p><p>å¼€å‘ä¸­ä¸è¦ç”¨ System.gc()ï¼›ä¼šå¯¼è‡´ STW çš„å‘ç”Ÿã€‚</p><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StopTheWorldTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        WorkThread workThread = <span class="keyword">new</span> WorkThread();</span><br><span class="line">        PrintThread printThread = <span class="keyword">new</span> PrintThread();</span><br><span class="line">        workThread.start();</span><br><span class="line">        printThread.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">WorkThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">        List&lt;<span class="keyword">byte</span>[]&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">                    <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1000</span>];</span><br><span class="line">                    list.add(buffer);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (list.size() &gt; <span class="number">10000</span>) &#123;</span><br><span class="line">                    list.clear();</span><br><span class="line">                    System.gc(); <span class="comment">// è§¦å‘ Full GCï¼Œå¼•å‘ STW</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">PrintThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">long</span> startTime = System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                    <span class="keyword">long</span> t = System.currentTimeMillis() - startTime;</span><br><span class="line">                    System.out.println(t / <span class="number">1000</span> + <span class="string">&quot;.&quot;</span> + t % <span class="number">1000</span>);</span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åƒåœ¾å›æ”¶çš„å¹¶è¡Œä¸å¹¶å‘"><a href="#åƒåœ¾å›æ”¶çš„å¹¶è¡Œä¸å¹¶å‘" class="headerlink" title="åƒåœ¾å›æ”¶çš„å¹¶è¡Œä¸å¹¶å‘"></a>åƒåœ¾å›æ”¶çš„å¹¶è¡Œä¸å¹¶å‘</h2><h3 id="å¹¶å‘ï¼ˆConcurrentï¼‰"><a href="#å¹¶å‘ï¼ˆConcurrentï¼‰" class="headerlink" title="å¹¶å‘ï¼ˆConcurrentï¼‰"></a>å¹¶å‘ï¼ˆConcurrentï¼‰</h3><p>åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œæ˜¯æŒ‡ä¸€ä¸ªæ—¶é—´æ®µä¸­æœ‰å‡ ä¸ªç¨‹åºéƒ½å¤„äºå·²å¯åŠ¨è¿è¡Œåˆ°è¿è¡Œå®Œæ¯•ä¹‹é—´ï¼Œä¸”è¿™å‡ ä¸ªç¨‹åºéƒ½æ˜¯åœ¨åŒä¸€ä¸ªå¤„ç†å™¨ä¸Šè¿è¡Œã€‚</p><p>å¹¶å‘ä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„â€œåŒæ—¶è¿›è¡Œâ€ï¼Œåªæ˜¯ CPU æŠŠä¸€ä¸ªæ—¶é—´æ®µåˆ’åˆ†æˆå‡ ä¸ªæ—¶é—´ç‰‡æ®µï¼ˆæ—¶é—´åŒºé—´ï¼‰ï¼Œç„¶ååœ¨è¿™å‡ ä¸ªæ—¶é—´åŒºé—´ä¹‹é—´æ¥å›åˆ‡æ¢ï¼Œç”±äº CPU å¤„ç†çš„é€Ÿåº¦éå¸¸å¿«ï¼Œåªè¦æ—¶é—´é—´éš”å¤„ç†å¾—å½“ï¼Œå³å¯è®©ç”¨æˆ·æ„Ÿè§‰æ˜¯å¤šä¸ªåº”ç”¨ç¨‹åºåŒæ—¶åœ¨è¿›è¡Œã€‚</p><h3 id="å¹¶è¡Œï¼ˆParallelï¼‰"><a href="#å¹¶è¡Œï¼ˆParallelï¼‰" class="headerlink" title="å¹¶è¡Œï¼ˆParallelï¼‰"></a>å¹¶è¡Œï¼ˆParallelï¼‰</h3><p>å½“ç³»ç»Ÿæœ‰ä¸€ä¸ªä»¥ä¸Š CPU æ—¶ï¼Œå½“ä¸€ä¸ª CPU æ‰§è¡Œä¸€ä¸ªè¿›ç¨‹æ—¶ï¼Œå¦ä¸€ä¸ª CPU å¯ä»¥æ‰§è¡Œå¦ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸¤ä¸ªè¿›è¡Œäº’ä¸æŠ¢å  CPU èµ„æºï¼Œå¯ä»¥åŒæ—¶è¿›è¡Œï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºå¹¶è¡Œã€‚</p><p>å…¶å®å†³å®šå¹¶è¡Œçš„å› ç´ ä¸æ˜¯ CPU çš„æ•°é‡ï¼Œè€Œæ˜¯ CPU çš„æ ¸å¿ƒæ•°é‡ï¼Œæ¯”å¦‚ä¸€ä¸ª CPU å¤šä¸ªæ ¸ä¹Ÿå¯ä»¥å¹¶è¡Œã€‚</p><p>é€‚åˆç§‘å­¦è®¡ç®—ï¼Œåå°å¤„ç†ç­‰å¼±äº¤äº’åœºæ™¯ã€‚</p><h3 id="å¹¶å‘-vs-å¹¶è¡Œ"><a href="#å¹¶å‘-vs-å¹¶è¡Œ" class="headerlink" title="å¹¶å‘ vs å¹¶è¡Œ"></a>å¹¶å‘ vs å¹¶è¡Œ</h3><p>å¹¶å‘ï¼ŒæŒ‡çš„æ˜¯å¤šä¸ªäº‹æƒ…ï¼Œåœ¨åŒä¸€æ—¶é—´æ®µå†…åŒæ—¶å‘ç”Ÿäº†ã€‚</p><p>å¹¶è¡Œï¼ŒæŒ‡çš„æ˜¯å¤šä¸ªäº‹æƒ…ï¼Œåœ¨åŒä¸€æ—¶é—´ç‚¹ä¸ŠåŒæ—¶å‘ç”Ÿäº†ã€‚</p><p>å¹¶å‘çš„å¤šä¸ªä»»åŠ¡ä¹‹é—´æ˜¯äº’ç›¸æŠ¢å èµ„æºçš„ï¼Œ</p><p>å¹¶è¡Œçš„å¤šä¸ªä»»åŠ¡ä¹‹é—´æ˜¯ä¸äº’ç›¸æŠ¢å èµ„æºçš„ã€‚</p><p>åªæœ‰åœ¨å¤š CPU æˆ–è€…ä¸€ä¸ª CPU å¤šæ ¸çš„æƒ…å†µä¸­ï¼Œæ‰ä¼šå‘ç”Ÿå¹¶è¡Œã€‚</p><p>å¦åˆ™ï¼Œçœ‹ä¼¼åŒæ—¶å‘ç”Ÿçš„äº‹æƒ…ï¼Œå…¶å®éƒ½æ˜¯å¹¶å‘æ‰§è¡Œçš„ï¼Œ</p><h3 id="åƒåœ¾å›æ”¶çš„å¹¶å‘ä¸å¹¶è¡Œ"><a href="#åƒåœ¾å›æ”¶çš„å¹¶å‘ä¸å¹¶è¡Œ" class="headerlink" title="åƒåœ¾å›æ”¶çš„å¹¶å‘ä¸å¹¶è¡Œ"></a>åƒåœ¾å›æ”¶çš„å¹¶å‘ä¸å¹¶è¡Œ</h3><p>å¹¶å‘å’Œå¹¶è¡Œï¼Œåœ¨è°ˆè®ºåƒåœ¾æ”¶é›†å™¨çš„ä¸Šä¸‹åˆè¯­å¢ƒä¸­ï¼Œå®ƒä»¬å¯ä»¥è§£é‡Šå¦‚ä¸‹ï¼š</p><ul><li>å¹¶è¡Œï¼šåªå¤šæ¡åƒåœ¾æ”¶é›†çº¿ç¨‹å¹¶è¡Œå·¥ä½œï¼Œä½†æ­¤æ—¶ç”¨æˆ·çº¿ç¨‹ä»å¤„äºç­‰å¾…çŠ¶æ€ã€‚<ul><li>å¦‚ ParNewã€Parallel Scavengeã€Parallel Old</li></ul></li><li>ä¸²è¡Œ<ul><li>ç›¸è¾ƒäºå¹¶è¡Œçš„æ¦‚å¿µï¼Œå•çº¿ç¨‹æ‰§è¡Œã€‚</li><li>å¦‚æœå†…å­˜ä¸å¤Ÿï¼Œåˆ™ç¨‹åºæš‚åœï¼Œå¯åŠ¨ JVM åƒåœ¾å›æ”¶å™¨è¿›è¡Œåƒåœ¾å›æ”¶ã€‚å›æ”¶å®Œï¼Œå†å¯åŠ¨ç¨‹åºçš„çº¿ç¨‹ã€‚</li></ul></li><li>å¹¶å‘ï¼šæŒ‡ç”¨æˆ·çº¿ç¨‹ä¸åƒåœ¾æ”¶é›†çº¿ç¨‹åŒæ—¶æ‰§è¡Œï¼ˆä½†ä¸ä¸€å®šæ˜¯å¹¶è¡Œçš„ï¼Œå¯èƒ½ä¼šäº¤æ›¿æ‰§è¡Œï¼‰ï¼Œåƒåœ¾å›æ”¶çº¿ç¨‹åœ¨æ‰§è¡Œæ—¶ä¸ä¼šåœé¡¿ç”¨æˆ·ç¨‹åºçš„è¿è¡Œã€‚<ul><li>ç”¨æˆ·ç¨‹åºåœ¨ç»§ç»­è¿è¡Œï¼Œè€Œåƒåœ¾æ”¶é›†ç¨‹åºçº¿ç¨‹è¿è¡Œäºå¦ä¸€ä¸ª CPU ä¸Šã€‚</li><li>å¦‚ï¼šCMSã€G1</li></ul></li></ul><h2 id="å®‰å…¨ç‚¹ä¸å®‰å…¨åŒºåŸŸ"><a href="#å®‰å…¨ç‚¹ä¸å®‰å…¨åŒºåŸŸ" class="headerlink" title="å®‰å…¨ç‚¹ä¸å®‰å…¨åŒºåŸŸ"></a>å®‰å…¨ç‚¹ä¸å®‰å…¨åŒºåŸŸ</h2><h3 id="å®‰å…¨ç‚¹ï¼ˆSafe-Pointï¼‰"><a href="#å®‰å…¨ç‚¹ï¼ˆSafe-Pointï¼‰" class="headerlink" title="å®‰å…¨ç‚¹ï¼ˆSafe Pointï¼‰"></a>å®‰å…¨ç‚¹ï¼ˆSafe Pointï¼‰</h3><p>ç¨‹åºæ‰§è¡Œæ—¶å¹¶éåœ¨æ‰€æœ‰çš„åœ°æ–¹éƒ½å¯ä»¥åœé¡¿ä¸‹æ¥å¼€å§‹ GCï¼Œåªæœ‰åœ¨ç‰¹å®šä½ç½®æ‰èƒ½åœé¡¿ä¸‹æ¥å¼€å§‹ GCï¼Œè¿™äº›ä½ç½®ç§°ä¸º å®‰å…¨ç‚¹ï¼ˆSafe Pointï¼‰ã€‚</p><p>Safe Point çš„é€‰æ‹©å¾ˆé‡è¦ï¼Œ<strong>å¦‚æœå¤ªå°‘å¯èƒ½å¯¼è‡´ GC ç­‰å¾…çš„æ—¶é—´å¤ªé•¿ï¼Œå¦‚æœå¤ªé¢‘ç¹å¯èƒ½å¯¼è‡´è¿è¡Œæ—¶çš„æ€§èƒ½é—®é¢˜</strong>ã€‚å¤§éƒ¨åˆ†æŒ‡ä»¤çš„æ‰§è¡Œæ—¶é—´éƒ½éå¸¸çŸ­æš‚ï¼Œé€šå¸¸ä¼šæ ¹æ® â€œæ˜¯å¦å…·æœ‰è®©ç¨‹åºé•¿æ—¶é—´æ‰§è¡Œçš„ç‰¹æ€§â€ ä¸ºæ ‡å‡†ã€‚æ¯”å¦‚ï¼šé€‰æ‹©ä¸€äº›æ‰§è¡Œæ—¶é—´è¾ƒé•¿çš„æŒ‡ä»¤ä½œä¸º Safe Pointï¼Œå¦‚<strong>æ–¹æ³•è°ƒç”¨ã€å¾ªç¯è·³è½¬å’Œå¼‚å¸¸è·³è½¬</strong>ç­‰ã€‚</p><p>å¦‚ä½•åœ¨ GC å‘ç”Ÿæ—¶ï¼Œæ£€æŸ¥æ‰€æœ‰çº¿ç¨‹éƒ½è·‘åˆ°æœ€è¿‘çš„å®‰å…¨ç‚¹åœé¡¿ä¸‹æ¥å‘¢ï¼Ÿ</p><ul><li><p>æŠ¢å å¼ä¸­æ–­ï¼šï¼ˆç›®å‰æ²¡æœ‰è™šæ‹Ÿæœºé‡‡ç”¨äº†ï¼‰</p><p>é¦–å…ˆä¸­æ–­æ‰€æœ‰çº¿ç¨‹ï¼Œå¦‚æœè¿˜æœ‰çº¿ç¨‹ä¸åœ¨å®‰å…¨ç‚¹ï¼Œå°±æ¢å¤çº¿ç¨‹ï¼Œè®©çº¿ç¨‹è·‘åˆ°å®‰å…¨ç‚¹ã€‚</p></li><li><p>ä¸»åŠ¨å¼ä¸­æ–­ï¼š</p><p>è®¾ç½®ä¸€ä¸ªä¸­æ–­æ ‡å¿—ï¼Œå„ä¸ªçº¿ç¨‹è¿è¡Œåˆ° Safe Point çš„æ—¶å€™ä¸»åŠ¨è½®è¯¢åˆ°è¿™ä¸ªæ ‡å¿—ï¼Œå¦‚æœä¸­æ–­æ ‡å¿—ä¸ºçœŸï¼Œåˆ™å°†è‡ªå·±è¿›è¡Œä¸­æ–­æŒ‚èµ·ã€‚</p></li></ul><h3 id="å®‰å…¨åŒºåŸŸï¼ˆSafe-Regionï¼‰"><a href="#å®‰å…¨åŒºåŸŸï¼ˆSafe-Regionï¼‰" class="headerlink" title="å®‰å…¨åŒºåŸŸï¼ˆSafe Regionï¼‰"></a>å®‰å…¨åŒºåŸŸï¼ˆSafe Regionï¼‰</h3><p>Safe Point æœºåˆ¶ä¿è¯äº†ç¨‹åºæ‰§è¡Œæ—¶ï¼Œåœ¨ä¸å¤ªé•¿çš„æ—¶é—´å†…å°±ä¼šé‡åˆ°å¯è¿›å…¥ GC çš„ Safe Pointã€‚ä½†æ˜¯ï¼Œç¨‹åº â€œä¸æ‰§è¡Œâ€ çš„æ—¶å€™å‘¢ï¼Ÿä¾‹å¦‚çº¿ç¨‹å¤„äº Sleep çŠ¶æ€æˆ– Blocked çŠ¶æ€ï¼Œè¿™ä¸ªæ—¶å€™çº¿ç¨‹æ— æ³•å“åº” JVM çš„ä¸­æ–­è¯·æ±‚ï¼Œâ€œèµ°â€ åˆ°å®‰å…¨ç‚¹å»ä¸­æ–­æŒ‚èµ·ï¼ŒJVM ä¹Ÿä¸å¤ªå¯èƒ½ç­‰å¾…çº¿ç¨‹è¢«å”¤é†’ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œå°±éœ€è¦å®‰å…¨åŒºåŸŸï¼ˆSafe Regionï¼‰æ¥è§£å†³ã€‚</p><p><strong>å®‰å…¨åŒºåŸŸæ˜¯æŒ‡åœ¨ä¸€æ®µä»£ç ç‰‡æ®µä¸­ï¼Œå¯¹è±¡çš„å¼•ç”¨å…³ç³»ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œåœ¨è¿™ä¸ªåŒºåŸŸä¸­çš„ä»»ä½•ä½ç½®å¼€å§‹ GC éƒ½æ˜¯å®‰å…¨çš„ã€‚</strong>æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠ Safe Region çœ‹åšæ˜¯æ‹“å±•äº†çš„ Safe Pointã€‚</p><p>å®é™…æ‰§è¡Œæ—¶ï¼š</p><ul><li>å½“çº¿ç¨‹è¿è¡Œåˆ° Safe Region çš„ä»£ç æ—¶ï¼Œé¦–å…ˆæ ‡è¯†å·²ç»è¿›å…¥äº† Safe Regionï¼Œå¦‚æœè¿™æ®µæ—¶é—´å†…å‘ç”Ÿ GCï¼ŒJVM ä¼šå¿½ç•¥æ ‡è¯†ä¸º Safe Region çŠ¶æ€çš„çº¿ç¨‹ã€‚</li><li>å½“çº¿ç¨‹ç¦»å¼€ Safe Region æ—¶ï¼Œä¼šæ£€æŸ¥ JVM æ˜¯å¦å·²ç»å®Œæˆ GCï¼Œå¦‚æœå®Œæˆäº†ï¼Œåˆ™ç»§ç»­è¿è¡Œï¼Œå¦åˆ™çº¿ç¨‹å¿…é¡»ç­‰å¾…ç›´åˆ°æ”¶åˆ°å¯ä»¥å®‰å…¨ç¦»å¼€ Safe Region çš„ä¿¡å·ä¸ºæ­¢ã€‚</li></ul><hr><h2 id="å†è°ˆå¼•ç”¨"><a href="#å†è°ˆå¼•ç”¨" class="headerlink" title="å†è°ˆå¼•ç”¨"></a>å†è°ˆå¼•ç”¨</h2><p>æˆ‘ä»¬å¸Œæœ›èƒ½æè¿°è¿™æ ·ä¸€ç±»å¯¹è±¡ï¼šå½“å†…å­˜ç©ºé—´è¿˜è¶³å¤Ÿæ—¶ï¼Œåˆ™èƒ½ä¿ç•™åœ¨å†…å­˜ä¸­ï¼›å¦‚æœå†…å­˜ç©ºé—´åœ¨è¿›è¡Œåƒåœ¾æ”¶é›†åè¿˜æ˜¯å¾ˆç´§å¼ ï¼Œåˆ™å¯ä»¥æŠ›å¼ƒè¿™äº›å¯¹è±¡ã€‚</p><p>ã€æ—¢åé—¨åˆéå¸¸é«˜é¢‘çš„é¢è¯•é¢˜ã€‘å¼ºå¼•ç”¨ã€è½¯å¼•ç”¨ã€å¼±å¼•ç”¨ã€è™šå¼•ç”¨æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå…·ä½“ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>åœ¨ JDK 1.2 ç‰ˆæœ¬åï¼ŒJava å¯¹å¼•ç”¨çš„æ¦‚å¿µè¿›è¡Œäº†æ‰©å……ï¼Œå°†å¼•ç”¨åˆ†ä¸ºå¼ºå¼•ç”¨ï¼ˆStrong Referenceï¼‰ã€è½¯å¼•ç”¨ï¼ˆSoft Referenceï¼‰ã€å¼±å¼•ç”¨ï¼ˆWeak Preferenceï¼‰å’Œè™šå¼•ç”¨ï¼ˆPhantom Referenceï¼‰4 ç§ï¼Œè¿™ 4 ç§å¼•ç”¨å¼ºåº¦ä¾æ¬¡é€æ¸å‡å¼±ã€‚</p><p>é™¤å¼ºå¼•ç”¨å¤–ï¼Œå…¶ä»– 3 ç§å¼•ç”¨å‡å¯ä»¥åœ¨ java.lang.ref åŒ…ä¸­æ‰¾åˆ°å®ƒä»¬çš„èº«å½±ã€‚å¦‚ä¸‹å›¾ï¼Œæ˜¾ç¤ºäº†è¿™ 3 ç§å¼•ç”¨ç±»å‹å¯¹åº”çš„ç±»ï¼Œå¼€å‘äººå‘˜å¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­ç›´æ¥ä½¿ç”¨å®ƒä»¬ã€‚</p><p>Reference å­ç±»ä¸­åªæœ‰ç»ˆç»“å™¨å¼•ç”¨æ˜¯åŒ…å†…å¯è§çš„ï¼Œå…¶ä»– 3 ç§ç±»å‹å‡ä¸º publicï¼Œå¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­ç›´æ¥ä½¿ç”¨ã€‚</p><ul><li>å¼ºå¼•ç”¨ï¼šæœ€ä¼ ç»Ÿçš„å¼•ç”¨çš„å®šä¹‰ï¼Œæ˜¯æŒ‡åœ¨ç¨‹åºä»£ç ä¹‹ä¸­æ™®éå­˜åœ¨çš„å¼•ç”¨èµ‹å€¼ï¼Œå³ç±»ä¼¼ â€œObject obj = new Object()â€ è¿™ç§å¼•ç”¨å…³ç³»ã€‚<strong>æ— è®ºä»»ä½•æƒ…å†µä¸‹ï¼Œåªè¦å¼ºå¼•ç”¨å…³ç³»è¿˜åœ¨ï¼Œåƒåœ¾æ”¶é›†å™¨å°±æ°¸è¿œä¸ä¼šå›æ”¶æ‰è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚</strong></li><li>è½¯å¼•ç”¨ï¼šåœ¨ç³»ç»Ÿå°†è¦å‘ç”Ÿå†…å­˜æº¢å‡ºä¹‹å‰ï¼Œå°†ä¼šæŠŠè¿™äº›å¯¹è±¡åˆ—å…¥å›æ”¶èŒƒå›´ä¹‹ä¸­è¿›è¡Œç¬¬äºŒæ¬¡å›æ”¶ã€‚å¦‚æœè¿™æ¬¡å›æ”¶åè¿˜æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œæ‰ä¼šæŠ›å‡ºå†…å­˜æº¢å‡ºå¼‚å¸¸ã€‚</li><li>å¼±å¼•ç”¨ï¼šè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡åªèƒ½ç”Ÿå­˜åˆ°ä¸‹ä¸€æ¬¡åƒåœ¾æ”¶é›†ä¹‹å‰ã€‚å½“åƒåœ¾æ”¶é›†å™¨å·¥ä½œæ—¶ï¼Œæ— è®ºå†…å­˜ç©ºé—´æ˜¯å¦è¶³å¤Ÿï¼Œéƒ½ä¼šå›æ”¶æ‰è¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡ã€‚</li><li>è™šå¼•ç”¨ï¼šä¸€ä¸ªå¯¹è±¡æ˜¯å¦æœ‰è™šå¼•ç”¨çš„å­˜åœ¨ï¼Œå®Œå…¨ä¸ä¼šå¯¹å…¶ç”Ÿå­˜æ—¶é—´æ„æˆå½±å“ï¼Œä¹Ÿæ— æ³•é€šè¿‡è™šå¼•ç”¨æ¥è·å¾—ä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹ã€‚<strong>ä¸ºä¸€ä¸ªå¯¹è±¡è®¾ç½®è™šå¼•ç”¨å…³è”çš„å”¯ä¸€ç›®çš„å°±æ˜¯èƒ½åœ¨è¿™ä¸ªå¯¹è±¡è¢«æ”¶é›†å™¨å›æ”¶æ—¶æ”¶åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥ã€‚</strong></li></ul><h2 id="å†è°ˆå¼•ç”¨ï¼šå¼ºå¼•ç”¨ï¼ˆä¸å›æ”¶ï¼‰"><a href="#å†è°ˆå¼•ç”¨ï¼šå¼ºå¼•ç”¨ï¼ˆä¸å›æ”¶ï¼‰" class="headerlink" title="å†è°ˆå¼•ç”¨ï¼šå¼ºå¼•ç”¨ï¼ˆä¸å›æ”¶ï¼‰"></a>å†è°ˆå¼•ç”¨ï¼šå¼ºå¼•ç”¨ï¼ˆä¸å›æ”¶ï¼‰</h2><p>åœ¨ Java ç¨‹åºä¸­ï¼Œæœ€å¸¸è§çš„å¼•ç”¨ç±»å‹æ˜¯å¼ºå¼•ç”¨ï¼ˆæ™®é€šå¯¹è±¡99%ä»¥ä¸Šéƒ½æ˜¯å¼ºå¼•ç”¨ï¼‰ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æœ€å¸¸è§çš„æ™®é€šå¯¹è±¡å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯é»˜è®¤çš„å¼•ç”¨ç±»å‹ã€‚</p><p>å½“åœ¨ Java è¯­è¨€ä¸­ä½¿ç”¨ new æ“ä½œç¬¦åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå¹¶å°†å…¶èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œè¿™ä¸ªå˜é‡å°±æˆä¸ºæŒ‡å‘è¯¥å¯¹è±¡çš„ä¸€ä¸ªå¼ºå¼•ç”¨ã€‚</p><p>å¼ºå¼•ç”¨çš„å¯¹è±¡æ˜¯å¯è§¦åŠçš„ï¼Œåƒåœ¾å›æ”¶å™¨å°±æ°¸è¿œä¸ä¼šå›æ”¶æ‰è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚</p><p>å¯¹äºä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–çš„å¼•ç”¨å…³ç³»ï¼Œåªè¦è¶…è¿‡äº†å¼•ç”¨çš„ä½œç”¨åŸŸæˆ–è€…æ˜¾å¼åœ°å°†ç›¸åº”ï¼ˆå¼ºï¼‰å¼•ç”¨èµ‹å€¼ä¸º nullï¼Œå°±æ˜¯å¯ä»¥å½“åšåƒåœ¾è¢«æ”¶é›†äº†ï¼Œå½“ç„¶å…·ä½“å›æ”¶æ—¶æœºè¿˜æ˜¯è¦çœ‹åƒåœ¾æ”¶é›†ç­–ç•¥ã€‚</p><p>ç›¸å¯¹çš„ï¼Œè½¯å¼•ç”¨ã€å¼±å¼•ç”¨å’Œè™šå¼•ç”¨çš„å¯¹è±¡æ˜¯è½¯å¯è§¦åŠã€å¼±å¯è§¦åŠçš„ï¼Œåœ¨ä¸€å®šæ¡ä»¶ä¸‹ï¼Œéƒ½æ˜¯å¯ä»¥è¢«å›æ”¶çš„ã€‚æ‰€ä»¥ï¼Œå¼ºå¼•ç”¨æ—¶é€ æˆ Java å†…å­˜æ³„éœ²çš„ä¸»è¦åŸå› ä¹‹ä¸€ã€‚</p><p>ä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">StringBuffer stringBuffer = <span class="keyword">new</span> StringBuffer(<span class="string">&quot;å¼ºå¼•ç”¨&quot;</span>);</span><br></pre></td></tr></table></figure><p>å¼ºå¼•ç”¨å…·å¤‡ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>å¼ºå¼•ç”¨å¯ä»¥ç›´æ¥è®¿é—®ç›®æ ‡å¯¹è±¡ã€‚</li><li>å¼ºå¼•ç”¨æ‰€æŒ‡å‘çš„å¯¹è±¡åœ¨ä»»ä½•æ—¶å€™éƒ½ä¸ä¼šè¢«ç³»ç»Ÿå›æ”¶ï¼Œè™šæ‹Ÿæœºå®æ„¿æŠ›å‡º OOM å¼‚å¸¸ï¼Œä¹Ÿä¸ä¼šå›æ”¶å¼ºå¼•ç”¨æ‰€æŒ‡å‘å¯¹è±¡ã€‚</li><li>å¼ºå¼•ç”¨å¯èƒ½å¯¼è‡´å†…å­˜æ³„éœ²ã€‚</li></ul><h2 id="å†è°ˆå¼•ç”¨ï¼šè½¯å¼•ç”¨ï¼ˆå†…å­˜ä¸è¶³å³å›æ”¶ï¼‰"><a href="#å†è°ˆå¼•ç”¨ï¼šè½¯å¼•ç”¨ï¼ˆå†…å­˜ä¸è¶³å³å›æ”¶ï¼‰" class="headerlink" title="å†è°ˆå¼•ç”¨ï¼šè½¯å¼•ç”¨ï¼ˆå†…å­˜ä¸è¶³å³å›æ”¶ï¼‰"></a>å†è°ˆå¼•ç”¨ï¼šè½¯å¼•ç”¨ï¼ˆå†…å­˜ä¸è¶³å³å›æ”¶ï¼‰</h2><p>è½¯å¼•ç”¨æ˜¯ç”¨æ¥æè¿°ä¸€äº›è¿˜æœ‰ç”¨ï¼Œä½†æ˜¯éå¿…éœ€çš„å¯¹è±¡ã€‚åªè¦è¢«è½¯å¼•ç”¨å…³è”ç€çš„å¯¹è±¡ï¼Œåœ¨ç³»ç»Ÿå°†è¦å‘ç”Ÿå†…å­˜æº¢å‡ºå¼‚å¸¸å‰ä¼šæŠŠè¿™äº›å¯¹è±¡åˆ—è¿›å›æ”¶èŒƒå›´ä¹‹ä¸­è¿›è¡Œç¬¬äºŒæ¬¡å›æ”¶ï¼Œå¦‚æœè¿™æ¬¡å›æ”¶è¿˜æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œæ‰ä¼šæŠ›å‡ºå†…å­˜æº¢å‡ºå¼‚å¸¸ã€‚</p><p>è½¯å¼•ç”¨é€šå¸¸ç”¨æ¥å®ç°å†…å­˜æ•æ„Ÿçš„ç¼“å­˜ã€‚æ¯”å¦‚ï¼šé«˜é€Ÿç¼“å­˜ï¼ˆå¦‚ï¼ŒMyBatis çš„ç¼“å­˜ï¼‰å°±æœ‰ç”¨åˆ°è½¯å¼•ç”¨ã€‚å¦‚æœè¿˜æœ‰ç©ºé—²å†…å­˜ï¼Œå°±å¯ä»¥æš‚æ—¶ä¿ç•™ç¼“å­˜ï¼Œå½“å†…å­˜ä¸è¶³æ—¶æ¸…ç†æ‰ï¼Œè¿™æ ·å°±èƒ½ä¿è¯äº†ä½¿ç”¨ç¼“å­˜çš„åŒæ—¶ï¼Œä¸ä¼šè€—å°½å†…å­˜ã€‚</p><p>åƒåœ¾å›æ”¶å™¨åœ¨æŸä¸ªæ—¶åˆ»å†³å®šå›æ”¶è½¯å¯è¾¾çš„å¯¹è±¡çš„æ—¶å€™ï¼Œä¼šæ¸…ç†è½¯å¼•ç”¨ï¼Œå¹¶å¯é€‰åœ°æŠŠå¼•ç”¨å­˜æ”¾åˆ°ä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—ï¼ˆReference Queueï¼‰ã€‚</p><p>ç±»ä¼¼å¼±å¼•ç”¨ï¼Œåªä¸è¿‡ Java è™šæ‹Ÿæœºä¼šå°½é‡è®©è½¯å¼•ç”¨çš„å­˜æ´»æ—¶é—´é•¿ä¸€äº›ï¼Œè¿«ä¸å¾—å·²æ‰æ¸…ç†ã€‚</p><p>ä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Object obj = <span class="keyword">new</span> Object(); <span class="comment">// å£°æ˜å¼ºå¼•ç”¨</span></span><br><span class="line">SoftReference&lt;Object&gt; sr = <span class="keyword">new</span> SoftReference&lt;&gt;(obj);</span><br><span class="line">obj = <span class="keyword">null</span>; <span class="comment">// é”€æ¯å¼ºå¼•ç”¨</span></span><br></pre></td></tr></table></figure><h2 id="å†è°ˆå¼•ç”¨ï¼šå¼±å¼•ç”¨ï¼ˆå‘ç°å³å›æ”¶ï¼‰"><a href="#å†è°ˆå¼•ç”¨ï¼šå¼±å¼•ç”¨ï¼ˆå‘ç°å³å›æ”¶ï¼‰" class="headerlink" title="å†è°ˆå¼•ç”¨ï¼šå¼±å¼•ç”¨ï¼ˆå‘ç°å³å›æ”¶ï¼‰"></a>å†è°ˆå¼•ç”¨ï¼šå¼±å¼•ç”¨ï¼ˆå‘ç°å³å›æ”¶ï¼‰</h2><p>å¼±å¼•ç”¨ä¹Ÿæ˜¯ç”¨æ¥æè¿°é‚£äº›éå¿…éœ€å¯¹è±¡ï¼Œ<strong>åª</strong>è¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡<strong>åªèƒ½ç”Ÿå­˜åˆ°ä¸‹ä¸€æ¬¡åƒåœ¾æ”¶é›†å‘ç”Ÿä¸ºæ­¢</strong>ã€‚åœ¨ç³»ç»Ÿ GC æ—¶ï¼Œåªè¦å‘ç°å¼±å¼•ç”¨ï¼Œä¸ç®¡ç³»ç»Ÿå †ç©ºé—´ä½¿ç”¨æ˜¯å¦å……è¶³ï¼Œéƒ½ä¼šå›æ”¶æ‰åªè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡ã€‚</p><p>ä½†æ˜¯ï¼Œç”±äºåƒåœ¾å›æ”¶å™¨çš„çº¿ç¨‹é€šå¸¸ä¼˜å…ˆçº§ä½ï¼Œå› æ­¤ï¼Œå¹¶ä¸ä¸€å®šèƒ½å¾ˆå¿«åœ°å‘ç°æŒæœ‰å¼±å¼•ç”¨çš„å¯¹è±¡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¼±å¼•ç”¨å¯¹è±¡å¯ä»¥å­˜åœ¨è¾ƒé•¿çš„æ—¶é—´ã€‚</p><p>å¼±å¼•ç”¨å’Œè½¯å¼•ç”¨ä¸€æ ·ï¼Œåœ¨æ„é€ å¼±å¼•ç”¨åŒæ—¶ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—ï¼Œå½“å¼±å¼•ç”¨å¯¹è±¡è¢«å›æ”¶æ—¶ï¼Œå°±ä¼šåŠ å…¥æŒ‡å®šçš„å¼•ç”¨é˜Ÿåˆ—ï¼Œé€šè¿‡è¿™ä¸ªé˜Ÿåˆ—å¯ä»¥è·Ÿè¸ªå¯¹è±¡çš„å›æ”¶æƒ…å†µã€‚</p><p><strong>è½¯å¼•ç”¨ã€å¼±å¼•ç”¨éƒ½éå¸¸é€‚åˆæ¥ä¿å­˜é‚£äº›å¯æœ‰å¯æ— çš„ç¼“å­˜æ•°æ®ã€‚</strong>å¦‚æœè¿™ä¹ˆåšï¼Œå½“ç³»ç»Ÿå†…å­˜ä¸è¶³æ—¶ï¼Œè¿™äº›ç¼“å­˜æ•°æ®å°±ä¼šè¢«å›æ”¶ï¼Œä¸ä¼šå¯¼è‡´å†…å­˜æº¢å‡ºã€‚è€Œå½“å†…å­˜èµ„æºå……è¶³æ—¶ï¼Œè¿™äº›ç¼“å­˜æ•°æ®åˆå¯ä»¥å­˜åœ¨ç›¸å½“é•¿çš„æ—¶é—´ï¼Œä»è€Œèµ·åˆ°åŠ é€Ÿç³»ç»Ÿçš„ä½œç”¨ã€‚</p><p>ä¾‹å­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Object obj = <span class="keyword">new</span> Object(); <span class="comment">// å£°æ˜å¼ºå¼•ç”¨</span></span><br><span class="line">WeakReference&lt;Object&gt; wr = <span class="keyword">new</span> WeakReference&lt;&gt;(obj);</span><br><span class="line">obj = <span class="keyword">null</span>; <span class="comment">// é”€æ¯å¼ºå¼•ç”¨</span></span><br></pre></td></tr></table></figure><p>å¼±å¼•ç”¨å¯¹è±¡ä¸è½¯å¼•ç”¨å¯¹è±¡æœ€å¤§çš„ä¸åŒå°±åœ¨äºï¼Œå½“ GC åœ¨è¿›è¡Œå›æ”¶æ—¶ï¼Œéœ€è¦é€šè¿‡ç®—æ³•æ£€æŸ¥æ˜¯å¤Ÿå›æ”¶è½¯å¼•ç”¨å¯¹è±¡ï¼Œè€Œå¯¹äºå¼±å¼•ç”¨ï¼ŒGC æ€»æ˜¯è¿›è¡Œå›æ”¶ã€‚å¼±å¼•ç”¨å¯¹è±¡æ›´å®¹æ˜“ã€æ›´å¿«è¢« GC å›æ”¶ã€‚</p><p>é¢è¯•é¢˜ï¼šå¼€å‘ä¸­ä½¿ç”¨è¿‡ WeakHashMap å—ï¼Ÿ</p><p>å›¾ç‰‡ç¼“å­˜ç­‰ã€‚</p><h2 id="å†è°ˆå¼•ç”¨ï¼šè™šå¼•ç”¨ï¼ˆå¯¹è±¡å›æ”¶è·Ÿè¸ªï¼‰"><a href="#å†è°ˆå¼•ç”¨ï¼šè™šå¼•ç”¨ï¼ˆå¯¹è±¡å›æ”¶è·Ÿè¸ªï¼‰" class="headerlink" title="å†è°ˆå¼•ç”¨ï¼šè™šå¼•ç”¨ï¼ˆå¯¹è±¡å›æ”¶è·Ÿè¸ªï¼‰"></a>å†è°ˆå¼•ç”¨ï¼šè™šå¼•ç”¨ï¼ˆå¯¹è±¡å›æ”¶è·Ÿè¸ªï¼‰</h2><p>ä¹Ÿç§°ä¸º â€œå¹½çµå¼•ç”¨â€ æˆ–è€… â€œå¹»å½±å¼•ç”¨â€ï¼Œæ˜¯æ‰€æœ‰å¼•ç”¨ç±»å‹ä¸­æœ€å¼±çš„ä¸€ä¸ªã€‚</p><p>ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æœ‰è™šå¼•ç”¨çš„å­˜åœ¨ï¼Œå®Œå…¨ä¸ä¼šå†³å®šå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡ä»…æŒæœ‰è™šå¼•ç”¨ï¼Œé‚£ä¹ˆå®ƒå’Œæ²¡æœ‰å¼•ç”¨å‡ ä¹æ˜¯ä¸€æ ·çš„ï¼Œéšæ—¶éƒ½å¯èƒ½è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ã€‚</p><p>å®ƒä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œä¹Ÿæ— æ³•é€šè¿‡è™šå¼•ç”¨æ¥è·å–è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚å½“è¯•å›¾é€šè¿‡è™šå¼•ç”¨çš„ get() æ–¹æ³•å–å¾—å¯¹è±¡æ—¶ï¼Œæ€»æ˜¯ nullã€‚</p><p>ä¸ºä¸€ä¸ªå¯¹è±¡è®¾ç½®è™šå¼•ç”¨å…³è”çš„å”¯ä¸€ç›®çš„åœ¨äºè·Ÿè¸ªåƒåœ¾å›æ”¶è¿‡ç¨‹ã€‚æ¯”å¦‚ï¼šèƒ½åœ¨è¿™ä¸ªå¯¹è±¡è¢«æ”¶é›†å™¨å›æ”¶æ—¶æ”¶åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥ã€‚</p><p>è™šå¼•ç”¨å¿…é¡»å’Œå¼•ç”¨é˜Ÿåˆ—ä¸€èµ·ä½¿ç”¨ã€‚è™šå¼•ç”¨åœ¨åˆ›å»ºæ—¶å¿…é¡»æä¾›ä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—ä½œä¸ºå‚æ•°ã€‚å½“åƒåœ¾å›æ”¶å™¨å‡†å¤‡å›æ”¶ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æœå‘ç°å®ƒè¿˜æœ‰è™šå¼•ç”¨ï¼Œå°±ä¼šå›æ”¶å¯¹è±¡åï¼Œå°†è¿™ä¸ªè™šå¼•ç”¨åŠ å…¥å¼•ç”¨é˜Ÿåˆ—ï¼Œä»¥é€šçŸ¥åº”ç”¨ç¨‹åºå¯¹è±¡å›æ”¶æƒ…å†µã€‚</p><p>ç”±äºè™šå¼•ç”¨å¯ä»¥è·Ÿè¸ªå¯¹è±¡çš„å›æ”¶æ—¶é—´ï¼Œå› æ­¤ï¼Œä¹Ÿå¯ä»¥å°†ä¸€äº›èµ„æºé‡Šæ”¾æ“ä½œæ”¾ç½®åœ¨è™šå¼•ç”¨ä¸­æ‰§è¡Œå’Œè®°å½•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Object obj = <span class="keyword">new</span> Object(); <span class="comment">// å£°æ˜å¼ºå¼•ç”¨</span></span><br><span class="line">ReferenceQueue phantomQueue = <span class="keyword">new</span> ReferenceQueue();</span><br><span class="line">PhantomReference&lt;Object&gt; pr = <span class="keyword">new</span> PhantomReference&lt;&gt;(obj, phantomQueue);</span><br><span class="line">obj = <span class="keyword">null</span>; <span class="comment">// é”€æ¯å¼ºå¼•ç”¨</span></span><br></pre></td></tr></table></figure><h2 id="å†è°ˆå¼•ç”¨ï¼šç»ˆç»“å™¨å¼•ç”¨"><a href="#å†è°ˆå¼•ç”¨ï¼šç»ˆç»“å™¨å¼•ç”¨" class="headerlink" title="å†è°ˆå¼•ç”¨ï¼šç»ˆç»“å™¨å¼•ç”¨"></a>å†è°ˆå¼•ç”¨ï¼šç»ˆç»“å™¨å¼•ç”¨</h2><p>å®ƒç”¨äºå®ç°å¯¹è±¡çš„ finalize æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºç»ˆç»“å™¨å¼•ç”¨ã€‚</p><p>æ— éœ€æ‰‹åŠ¨ç¼–ç ï¼Œå…¶å†…éƒ¨é…åˆå¼•ç”¨é˜Ÿåˆ—ä½¿ç”¨ã€‚</p><p>åœ¨ GC æ—¶ï¼Œç»ˆç»“å™¨å¼•ç”¨å…¥é˜Ÿã€‚ç”± Finalizer çº¿ç¨‹é€šè¿‡ç»ˆç»“å™¨å¼•ç”¨æ‰¾åˆ°è¢«å¼•ç”¨å¯¹è±¡å¹¶è°ƒç”¨å®ƒçš„ finalize æ–¹æ³•ï¼Œç¬¬äºŒæ¬¡ GC æ—¶æ‰èƒ½å›æ”¶è¢«å¼•ç”¨å¯¹è±¡ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;System-gc-çš„ç†è§£&quot;&gt;&lt;a href=&quot;#System-gc-çš„ç†è§£&quot; class=&quot;headerlink&quot; title=&quot;System.gc() çš„ç†è§£&quot;&gt;&lt;/a&gt;System.gc() çš„ç†è§£&lt;/h2&gt;&lt;p&gt;åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œé€šè¿‡ System.gc() æˆ–è€… Runtime.getRuntime().gc() çš„è°ƒç”¨ï¼Œ&lt;strong&gt;ä¼šæ˜¾ç¤ºè§¦å‘ Full GC&lt;/strong&gt;ï¼ŒåŒæ—¶å¯¹è€å¹´ä»£å’Œæ–°ç”Ÿä»£è¿›è¡Œå›æ”¶ï¼Œå°è¯•é‡Šæ”¾è¢«ä¸¢å¼ƒå¯¹è±¡å ç”¨çš„å†…å­˜ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œ System.gc() è°ƒç”¨é™„å¸¦ä¸€ä¸ªå…è´£å£°æ˜ï¼Œæ— æ³•ä¿è¯å¯¹åƒåœ¾æ”¶é›†å™¨çš„è°ƒç”¨ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Javaè¿›é˜¶" scheme="http://yonghong.tech/categories/Java%E8%BF%9B%E9%98%B6/"/>
    
    
    <category term="Javaè¿›é˜¶" scheme="http://yonghong.tech/tags/Java%E8%BF%9B%E9%98%B6/"/>
    
    <category term="JVM" scheme="http://yonghong.tech/tags/JVM/"/>
    
  </entry>
  
  <entry>
    <title>Java è¿›é˜¶ 06 â€”â€” JVM åƒåœ¾å›æ”¶ç®—æ³•</title>
    <link href="http://yonghong.tech/java-advance/06-jvm-gc-algo/"/>
    <id>http://yonghong.tech/java-advance/06-jvm-gc-algo/</id>
    <published>2021-06-18T13:00:00.000Z</published>
    <updated>2021-06-18T13:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¸ºä»€ä¹ˆä¼šæœ‰-GC"><a href="#ä¸ºä»€ä¹ˆä¼šæœ‰-GC" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šæœ‰ GC"></a>ä¸ºä»€ä¹ˆä¼šæœ‰ GC</h1><p>æœ¬è´¨ä¸Šæ˜¯å†…å­˜èµ„æºçš„æœ‰é™æ€§ï¼Œå› æ­¤éœ€è¦å¤§å®¶å…±äº«ä½¿ç”¨ï¼Œæ‰‹å·¥ç”³è¯·ï¼Œæ‰‹åŠ¨é‡Šæ”¾ã€‚</p><p>åƒåœ¾æ”¶é›†ï¼Œä¸æ˜¯ Java è¯­è¨€çš„ä¼´ç”Ÿäº§ç‰©ã€‚æ—©åœ¨ 1960 å¹´ï¼Œç¬¬ä¸€é—¨å¼€å§‹ä½¿ç”¨å†…å­˜åŠ¨æ€åˆ†é…å’Œåƒåœ¾æ”¶é›†æŠ€æœ¯çš„ Lisp è¯­è¨€è¯ç”Ÿã€‚</p><p>å…³äºåƒåœ¾æ”¶é›†æœ‰ä¸‰ä¸ªç»å…¸é—®é¢˜ï¼š</p><ul><li>å“ªäº›å†…å­˜éœ€è¦å›æ”¶ï¼Ÿ</li><li>ä»€ä¹ˆæ—¶å€™å›æ”¶ï¼Ÿ</li><li>å¦‚ä½•å›æ”¶ï¼Ÿ</li></ul><span id="more"></span><p>åƒåœ¾æ”¶é›†æœºåˆ¶æ˜¯ Java è¯­è¨€çš„æ‹›ç‰Œèƒ½åŠ›ï¼Œæå¤§åœ°æé«˜äº†å¼€å‘æ•ˆç‡ã€‚å¦‚ä»Šï¼Œåƒåœ¾æ”¶é›†å‡ ä¹æˆä¸ºç°ä»£è¯­è¨€çš„æ ‡é…ï¼Œå³ä½¿ç»è¿‡å¦‚æ­¤é•¿æ—¶é—´çš„å‘å±•ï¼ŒJava çš„åƒåœ¾æ”¶é›†æœºåˆ¶ä»ç„¶åœ¨ä¸æ–­çš„æ¼”è¿›ä¸­ï¼Œä¸åŒå¤§å°çš„è®¾å¤‡ã€ä¸åŒç‰¹å¾çš„åº”ç”¨åœºæ™¯ï¼Œå¯¹åƒåœ¾æ”¶é›†æå‡ºäº†æ–°çš„æŒ‘æˆ˜ï¼Œè¿™å½“ç„¶ä¹Ÿæ˜¯é¢è¯•çš„çƒ­ç‚¹ã€‚</p><p>é¢è¯•é¢˜ï¼š</p><ul><li>åƒåœ¾å›æ”¶å™¨ï¼Œå„è‡ªä¼˜ç¼ºç‚¹ï¼ŒCMSã€G1</li><li>GC ç®—æ³•æœ‰å“ªäº›ï¼Œç›®å‰çš„ JDK ç‰ˆæœ¬é‡‡ç”¨ä»€ä¹ˆå›æ”¶ç®—æ³•</li><li>GC ä¸¤ç§åˆ¤å®šæ–¹æ³•</li><li>åˆ†ä»£å›æ”¶</li><li>åƒåœ¾æ”¶é›†ç­–ç•¥å’Œç®—æ³•</li><li>å¹³æ—¶å¦‚ä½•æ­é…ä½¿ç”¨åƒåœ¾å›æ”¶å™¨</li><li>ä»€ä¹ˆæƒ…å†µè§¦å‘åƒåœ¾å›æ”¶</li><li>System.gc() runtime.gc()</li><li>Java  GC æœºåˆ¶ï¼ŒGC Roots æœ‰å“ªäº›</li><li>CMS å›æ”¶åœé¡¿äº†å‡ æ¬¡ï¼Œä¸ºä»€ä¹ˆï¼Ÿ</li></ul><h1 id="ä»€ä¹ˆæ˜¯åƒåœ¾ï¼ˆGarbageï¼‰"><a href="#ä»€ä¹ˆæ˜¯åƒåœ¾ï¼ˆGarbageï¼‰" class="headerlink" title="ä»€ä¹ˆæ˜¯åƒåœ¾ï¼ˆGarbageï¼‰"></a>ä»€ä¹ˆæ˜¯åƒåœ¾ï¼ˆGarbageï¼‰</h1><p>åƒåœ¾æ˜¯æŒ‡åœ¨è¿è¡Œç¨‹åºä¸­æ²¡æœ‰ä»»ä½•æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯éœ€è¦è¢«å›æ”¶çš„åƒåœ¾ã€‚An object is considered garbage when it  can no longer be  reached from any pointer in the running program .</p><p>å¦‚æœä¸åŠæ—¶å¯¹å†…å­˜ä¸­çš„åƒåœ¾è¿›è¡Œæ¸…ç†ï¼Œé‚£ä¹ˆï¼Œè¿™äº›åƒåœ¾å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ä¼šä¸€ç›´ä¿ç•™åˆ°åº”ç”¨ç¨‹åºç»“æŸï¼Œè¢«ä¿ç•™çš„ç©ºé—´æ— æ³•è¢«å…¶ä»–å¯¹è±¡ä½¿ç”¨ã€‚ç”šè‡³å¯èƒ½å¯¼è‡´å†…å­˜æº¢å‡ºã€‚</p><h1 id="ä¸ºä»€ä¹ˆéœ€è¦åƒåœ¾å›æ”¶"><a href="#ä¸ºä»€ä¹ˆéœ€è¦åƒåœ¾å›æ”¶" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦åƒåœ¾å›æ”¶"></a>ä¸ºä»€ä¹ˆéœ€è¦åƒåœ¾å›æ”¶</h1><p>å¯¹äºé«˜çº§è¯­è¨€æ¥è¯´ï¼Œä¸€ä¸ªåŸºæœ¬è®¤çŸ¥æ˜¯å¦‚æœä¸è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œå†…å­˜è¿Ÿæ—©éƒ½ä¼šè¢«æ¶ˆè€—å®Œï¼Œå› ä¸ºä¸æ–­åœ°åˆ†é…å†…å­˜ç©ºé—´è€Œä¸è¿›è¡Œå›æ”¶ï¼Œå°±å¥½åƒä¸åœçš„ç”Ÿäº§è€Œä»æ¥ä¸æ‰“æ‰«ä¸€æ ·ã€‚</p><p>é™¤äº†é‡Šæ”¾æ²¡ç”¨çš„å¯¹è±¡ï¼Œåƒåœ¾å›æ”¶ä¹Ÿå¯ä»¥æ¸…é™¤å†…å­˜é‡Œçš„è®°å½•ç¢ç‰‡ã€‚ç¢ç‰‡æ•´ç†å°†æ‰€å ç”¨çš„å †å†…å­˜ç§»åˆ°å †çš„ä¸€ç«¯ï¼Œä»¥ä¾¿ JVM å°†æ•´ç†å‡ºçš„å†…å­˜åˆ†é…ç»™æ–°çš„å¯¹è±¡ã€‚</p><p>éšç€åº”ç”¨ç¨‹åºæ‰€åº”å¯¹çš„ä¸šåŠ¡è¶Šæ¥è¶Šåºå¤§ã€å¤æ‚ï¼Œç”¨æˆ·è¶Šæ¥è¶Šå¤šï¼Œæ²¡æœ‰ GC å°±ä¸èƒ½ä¿è¯åº”ç”¨ç¨‹åºçš„æ­£å¸¸è¿›è¡Œã€‚è€Œç»å¸¸é€ æˆ STW çš„ GC åˆè·Ÿä¸ä¸Šå®é™…çš„éœ€æ±‚ï¼Œæ‰€ä»¥æ‰ä¼šä¸æ–­åœ°å°è¯•å¯¹ GC è¿›è¡Œä¼˜åŒ–ã€‚</p><h1 id="æ—©æœŸåƒåœ¾å›æ”¶"><a href="#æ—©æœŸåƒåœ¾å›æ”¶" class="headerlink" title="æ—©æœŸåƒåœ¾å›æ”¶"></a>æ—©æœŸåƒåœ¾å›æ”¶</h1><p>åœ¨æ—©æœŸçš„ C/C++ æ—¶ä»£ï¼Œåƒåœ¾å›æ”¶åŸºæœ¬ä¸Šæ˜¯æ‰‹å·¥è¿›è¡Œçš„ã€‚å¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨ new å…³é”®å­—è¿›è¡Œå†…å­˜ç”³è¯·ï¼Œå¹¶ä½¿ç”¨ delete å…³é”®å­—è¿›è¡Œå†…å­˜é‡Šæ”¾ã€‚æ¯”å¦‚ä»¥ä¸‹ä»£ç </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MibBridge *pBridge = <span class="keyword">new</span> cmBaseGroupBridge();</span><br><span class="line"><span class="comment">// å¦‚æœæ³¨å†Œå¤±è´¥ï¼Œä½¿ç”¨ delete å…³é”®å­—é‡Šæ”¾è¯¥å¯¹è±¡æ‰€å ç”¨å†…å­˜åŒºåŸŸ</span></span><br><span class="line"><span class="keyword">if</span> (pBridg-&gt;Register(kDestroy) != NO_ERROR) &#123;</span><br><span class="line">    <span class="keyword">delete</span> pBridge;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼å¯ä»¥çµæ´»æ§åˆ¶å†…å­˜é‡Šæ”¾çš„æ—¶é—´ï¼Œä½†æ˜¯ä¼šç»™å¼€å‘äººå‘˜å¸¦æ¥é¢‘ç¹ç”³è¯·å’Œé‡Šæ”¾å†…å­˜çš„ç®¡ç†è´Ÿæ‹…ã€‚å€˜è‹¥æœ‰ä¸€å¤„å†…å­˜åŒºé—´ç”±äºç¨‹åºå‘˜ç¼–ç çš„é—®é¢˜å¿˜è®°è¢«å›æ”¶ï¼Œé‚£ä¹ˆå°±ä¼šäº§ç”Ÿå†…å­˜æ³„éœ²ï¼Œåƒåœ¾å¯¹è±¡æ°¸è¿œæ— æ³•è¢«æ¸…é™¤ï¼Œéšç€ç³»ç»Ÿè¿è¡Œæ—¶é—´çš„ä¸æ–­å¢é•¿ï¼Œåƒåœ¾å¯¹è±¡æ‰€è€—å†…å­˜å¯èƒ½æŒç»­ä¸Šå‡ï¼Œç›´åˆ°å‡ºç°å†…å­˜æº¢å‡ºå¹¶é€ æˆåº”ç”¨ç¨‹åºå´©æºƒã€‚</p><p>æœ‰äº†åƒåœ¾å›æ”¶æœºåˆ¶åï¼Œä¸Šè¿°ä»£ç å—ææœ‰å¯èƒ½å˜æˆè¿™æ ·ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MibBridge *pBridge = <span class="keyword">new</span> cmBaseGroupBridge();</span><br><span class="line">pBridg-&gt;Register(kDestroy);</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œé™¤äº† Java ä»¥å¤–ï¼ŒC#ã€Pythonã€Ruby ç­‰è¯­è¨€éƒ½ä½¿ç”¨äº†è‡ªåŠ¨åƒåœ¾å›æ”¶çš„æ€æƒ³ï¼Œä¹Ÿæ˜¯æœªæ¥å‘å±•è¶‹åŠ¿ã€‚å¯ä»¥è¯´ï¼Œè¿™ç§è‡ªåŠ¨åŒ–çš„å†…å­˜åˆ†é…å’Œåƒåœ¾å›æ”¶çš„æ–¹å¼å·²ç»æˆä¸ºç°ä»£å¼€å‘è¯­è¨€å¿…å¤‡çš„æ ‡å‡†ã€‚</p><h1 id="Java-åƒåœ¾å›æ”¶æœºåˆ¶"><a href="#Java-åƒåœ¾å›æ”¶æœºåˆ¶" class="headerlink" title="Java åƒåœ¾å›æ”¶æœºåˆ¶"></a>Java åƒåœ¾å›æ”¶æœºåˆ¶</h1><p>è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼Œæ— éœ€å¼€å‘äººå‘˜æ‰‹åŠ¨å‚ä¸å†…å­˜çš„åˆ†é…ä¸å›æ”¶ï¼Œè¿™æ ·é™ä½äº†å†…å­˜æ³„æ¼å’Œå†…å­˜æº¢å‡ºçš„é£é™©ã€‚</p><ul><li>æ²¡æœ‰åƒåœ¾å›æ”¶å™¨ï¼Œjava ä¹Ÿä¼šå’Œ cpp ä¸€æ ·ï¼Œå„ç§æ‚¬å‚æŒ‡é’ˆï¼Œé‡æŒ‡é’ˆï¼Œæ³„éœ²é—®é¢˜è®©ä½ å¤´ç–¼ä¸å·²ã€‚</li></ul><p>è‡ªåŠ¨å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œå°†ç¨‹åºå‘˜ä»ç¹é‡çš„å†…å­˜ç®¡ç†ä¸­é‡Šæ”¾å‡ºæ¥ï¼Œå¯ä»¥æ›´ä¸“æ³¨åœ°ä¸“å¿ƒäºä¸šåŠ¡å¼€å‘ã€‚</p><p><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLm9yYWNsZS5jb20vamF2YXNlLzgvZG9jcy90ZWNobm90ZXMvZ3VpZGVzL3ZtL2djdHVuaW5nL3RvYy5odG1s">Oracle å®˜ç½‘å…³äºåƒåœ¾å›æ”¶çš„ä»‹ç»<i class="fa fa-external-link-alt"></i></span></p><p>æ‹…å¿§ï¼š</p><p>å¯¹äº Java å¼€å‘äººå‘˜è€Œè¨€ï¼Œè‡ªåŠ¨å†…å­˜ç®¡ç†å°±åƒæ˜¯ä¸€ä¸ªé»‘åŒ£å­ï¼Œå¦‚æœè¿‡åº¦ä¾èµ–äºâ€è‡ªåŠ¨â€œï¼Œé‚£ä¹ˆè¿™å°†ä¼šæ˜¯ä¸€åœºç¾éš¾ï¼Œæœ€ä¸¥é‡çš„å°±ä¼šå¼±åŒ– Java å¼€å‘äººå‘˜åœ¨ç¨‹åºå‡ºç°å†…å­˜æº¢å‡ºæ—¶å®šä½é—®é¢˜å’Œè§£å†³é—®é¢˜çš„èƒ½åŠ›ã€‚</p><p>æ­¤æ—¶ï¼Œäº†è§£ JVM çš„è‡ªåŠ¨å†…å­˜åˆ†é…å’Œå†…å­˜å›æ”¶åŸç†å°±æ˜¾å¾—éå¸¸é‡è¦ï¼Œåªæœ‰åœ¨çœŸæ­£äº†è§£ JVM æ˜¯å¦‚ä½•ç®¡ç†å†…å­˜åï¼Œæˆ‘ä»¬æ‰èƒ½å¤Ÿåœ¨é‡è§ OOM æ—¶ï¼Œå¿«é€Ÿåœ°æ ¹æ®é”™è¯¯å¼‚å¸¸æ—¥å¿—å®šä½é—®é¢˜å’Œè§£å†³é—®é¢˜ã€‚</p><p>å½“éœ€è¦æ’æŸ¥å„ç§å†…å­˜æº¢å‡ºã€å†…å­˜æ³„æ¼é—®é¢˜æ—¶ï¼Œå½“åƒåœ¾æ”¶é›†å†Œå¾ˆéš¾è¿‡ä¸ºç³»ç»Ÿè¾¾åˆ°æ›´é«˜å¹¶å‘é‡çš„ç“¶é¢ˆæ—¶ï¼Œæˆ‘ä»¬å°±å¿…é¡»å¯¹è¿™äº›â€è‡ªåŠ¨åŒ–â€œçš„æŠ€æœ¯æ˜¯æ˜¯å¿…è¦çš„ç›‘æ§å’Œè°ƒä¼˜ã€‚</p><p>åƒåœ¾å›æ”¶å™¨å¯ä»¥å¯¹å¹´è½»ä»£å›æ”¶ï¼Œä¹Ÿå¯ä»¥å¯¹è€å¹´ä»£å›æ”¶ï¼Œç”šè‡³å…¨å †å’Œæ–¹æ³•åŒºçš„å›æ”¶ã€‚</p><hr><ul><li>å…¶ä¸­ï¼ŒJava å †æ˜¯åƒåœ¾æ”¶é›†å™¨çš„å·¥ä½œé‡ç‚¹</li></ul><p>ä»æ¬¡æ•°ä¸Šè®²ï¼š</p><ul><li>é¢‘ç¹æ”¶é›†å¹´è½»ä»£</li><li>è¾ƒå°‘æ”¶é›†è€å¹´ä»£</li><li>åŸºæœ¬ä¸åŠ¨æ–¹æ³•åŒº/æ°¸ä¹…ä»£/å…ƒç©ºé—´</li></ul><h1 id="åƒåœ¾å›æ”¶ç›¸å…³ç®—æ³•"><a href="#åƒåœ¾å›æ”¶ç›¸å…³ç®—æ³•" class="headerlink" title="åƒåœ¾å›æ”¶ç›¸å…³ç®—æ³•"></a>åƒåœ¾å›æ”¶ç›¸å…³ç®—æ³•</h1><h2 id="åƒåœ¾æ ‡è®°é˜¶æ®µ"><a href="#åƒåœ¾æ ‡è®°é˜¶æ®µ" class="headerlink" title="åƒåœ¾æ ‡è®°é˜¶æ®µ"></a>åƒåœ¾æ ‡è®°é˜¶æ®µ</h2><p>åœ¨å †é‡Œå­˜æ”¾ç€å‡ ä¹æ‰€æœ‰çš„ Java å¯¹è±¡å®ä¾‹ï¼Œåœ¨ GC æ‰§è¡Œåƒåœ¾å›æ”¶ä¹‹å‰ï¼Œé¦–å…ˆ<strong>éœ€è¦åŒºåˆ†å‡ºå†…å­˜ä¸­å“ªäº›æ˜¯å­˜æ´»çš„å¯¹è±¡ï¼Œå“ªäº›æ˜¯å·²ç»æ­»äº¡çš„å¯¹è±¡</strong>ã€‚åªæœ‰è¢«æ ‡è®°ä¸ºå·²ç»æ­»äº¡çš„å¯¹è±¡ï¼ŒGC æ‰ä¼šåœ¨æ‰§è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œé‡Šæ”¾æ‰å…¶æ‰€å æœ‰çš„å†…å­˜ç©ºé—´ï¼Œå› æ­¤è¿™ä¸ªè¿‡ç¨‹æˆ‘ä»¬ç§°ä¸º<strong>åƒåœ¾æ ‡è®°é˜¶æ®µ</strong>ã€‚</p><p>é‚£ä¹ˆåœ¨ JVM ä¸­ç©¶ç«Ÿæ˜¯å¦‚ä½•æ ‡è®°ä¸€ä¸ªæ­»äº¡å¯¹è±¡å‘¢ï¼Ÿç®€å•æ¥è¯´ï¼Œå½“ä¸€ä¸ªå¯¹è±¡å·²ç»ä¸å†è¢«ä»»ä½•çš„å­˜æ´»å¯¹è±¡ç»§ç»­å¼•ç”¨æ—¶ï¼Œå°±å¯ä»¥å®£åˆ¤ä¸ºå·²ç»æ­»äº¡ã€‚</p><p>åˆ¤æ–­å¯¹è±¡å­˜æ´»ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼š<strong>å¼•ç”¨è®¡æ•°æ³•</strong>å’Œ<strong>å¯è¾¾æ€§åˆ†æç®—æ³•</strong>ã€‚</p><h3 id="æ–¹å¼ä¸€ï¼šå¼•ç”¨è®¡æ•°ç®—æ³•"><a href="#æ–¹å¼ä¸€ï¼šå¼•ç”¨è®¡æ•°ç®—æ³•" class="headerlink" title="æ–¹å¼ä¸€ï¼šå¼•ç”¨è®¡æ•°ç®—æ³•"></a>æ–¹å¼ä¸€ï¼šå¼•ç”¨è®¡æ•°ç®—æ³•</h3><p>å¼•ç”¨è®¡æ•°ç®—æ³•ï¼ˆReference Countingï¼‰æ¯”è¾ƒç®€å•ï¼Œå¯¹æ¯ä¸ªå¯¹è±¡ä¿å­˜ä¸€ä¸ªæ•´å‹çš„<strong>å¼•ç”¨è®¡æ•°å™¨å±æ€§ç”¨äºè®°å½•å¯¹è±¡è¢«å¼•ç”¨çš„æƒ…å†µ</strong>ã€‚</p><p>å¯¹äºä¸€ä¸ªå¯¹è±¡ Aï¼Œåªè¦æœ‰ä»»ä½•ä¸€ä¸ªå¯¹è±¡å¼•ç”¨äº† Aï¼Œåˆ™ A çš„å¼•ç”¨è®¡æ•°å™¨å°±åŠ  1ï¼›å½“å¼•ç”¨å¤±æ•ˆæ—¶ï¼Œå¼•ç”¨è®¡æ•°å™¨å°±å‡ 1ã€‚åªè¦å¯¹è±¡ A çš„å¼•ç”¨è®¡æ•°å™¨çš„å€¼ä¸º 0ï¼Œå³è¡¨ç¤ºå¯¹è±¡ A ä¸å¯èƒ½å†è¢«ä½¿ç”¨ï¼Œå¯è¿›è¡Œå›æ”¶ã€‚</p><p>ä¼˜ç‚¹ï¼š<strong>å®ç°ç®€å•ï¼Œåƒåœ¾å¯¹è±¡ä¾¿äºè¾¨è¯†ï¼›åˆ¤å®šæ•ˆç‡é«˜ï¼Œå›æ”¶æ²¡æœ‰å»¶è¿Ÿæ€§</strong>ã€‚</p><p>ç¼ºç‚¹ï¼š</p><ul><li>å®ƒéœ€è¦å•ç‹¬çš„å­—æ®µå­˜å‚¨è®¡æ•°å™¨ï¼Œè¿™æ ·çš„åšæ³•å¢åŠ äº†<strong>å­˜å‚¨ç©ºé—´çš„å¼€é”€</strong>ã€‚</li><li>æ¯æ¬¡èµ‹å€¼éƒ½éœ€è¦æ›´æ–°è®¡æ•°å™¨ï¼Œä¼´éšç€åŠ æ³•å’Œå‡æ³•æ“ä½œï¼Œè¿™å¢åŠ äº†<strong>æ—¶é—´å¼€é”€</strong>ã€‚</li><li>å¼•ç”¨è®¡æ•°å™¨æœ‰ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼Œå³<strong>æ— æ³•å¤„ç†å¾ªç¯å¼•ç”¨</strong>çš„æƒ…å†µã€‚è¿™æ˜¯ä¸€æ¡è‡´å‘½çš„ç¼ºé™·ï¼Œå¯¼è‡´åœ¨ Java çš„åƒåœ¾å›æ”¶å™¨ä¸­æ²¡æœ‰ä½¿ç”¨è¿™ç±»ç®—æ³•ã€‚</li></ul><h4 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><p>å¼•ç”¨è®¡æ•°ç®—æ³•ï¼Œæ˜¯å¾ˆå¤šè¯­è¨€çš„èµ„æºå›æ”¶é€‰æ‹©ï¼Œä¾‹å¦‚å› äººå·¥æ™ºèƒ½è€Œæ›´åŠ ç«çƒ­çš„ Pythonï¼Œå®ƒæ›´æ˜¯åŒæ—¶æ”¯æŒå¼•ç”¨è®¡æ•°å’Œåƒåœ¾æ”¶é›†æœºåˆ¶ã€‚</p><p>å…·ä½“å“ªç§æœ€ä¼˜æ˜¯è¦çœ‹åœºæ™¯çš„ï¼Œä¸šç•Œæœ‰å¤§è§„æ¨¡å®è·µä¸­ä»…ä¿ç•™å¼•ç”¨è®¡æ•°æœºåˆ¶ï¼Œä»¥æé«˜ååé‡çš„å°è¯•ã€‚</p><p>Java å¹¶æ²¡æœ‰é€‰æ‹©å¼•ç”¨è®¡æ•°ï¼Œæ˜¯å› ä¸ºå…¶å­˜åœ¨ä¸€ä¸ªåŸºæœ¬çš„éš¾é¢˜ï¼Œä¹Ÿå°±æ˜¯å¾ˆéš¾å¤„ç†å¾ªç¯å¼•ç”¨å…³ç³»ã€‚</p><p>Python å¦‚ä½•è§£å†³å¾ªç¯å¼•ç”¨ï¼Ÿ</p><ul><li>æ‰‹åŠ¨è§£é™¤ï¼šå¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯åœ¨åˆé€‚çš„æ—¶æœºï¼Œè§£é™¤å¼•ç”¨å…³ç³»ã€‚</li><li>ä½¿ç”¨å¼±å¼•ç”¨ weakrefï¼Œweakref æ˜¯ Python æä¾›çš„æ ‡å‡†åº“ï¼Œæ—¨åœ¨è§£å†³å¾ªç¯å¼•ç”¨ã€‚</li></ul><h3 id="æ–¹å¼äºŒï¼šå¯è¾¾æ€§åˆ†æç®—æ³•"><a href="#æ–¹å¼äºŒï¼šå¯è¾¾æ€§åˆ†æç®—æ³•" class="headerlink" title="æ–¹å¼äºŒï¼šå¯è¾¾æ€§åˆ†æç®—æ³•"></a>æ–¹å¼äºŒï¼šå¯è¾¾æ€§åˆ†æç®—æ³•</h3><p>å¯è¾¾æ€§åˆ†æç®—æ³•åˆå«åšæ ¹æœç´¢ç®—æ³•ï¼Œæˆ–è€…æ˜¯è¿½è¸ªæ€§åƒåœ¾æ”¶é›†ã€‚</p><p>ç›¸å¯¹äºå¼•ç”¨è®¡æ•°æ³•è€Œè¨€ï¼Œå¯è¾¾æ€§åˆ†æç®—æ³•ä¸ä»…åŒæ ·å…·å¤‡å®ç°ç®€å•å’Œæ‰§è¡Œé«˜æ•ˆç­‰ç‰¹ç‚¹ï¼Œæ›´é‡è¦çš„æ˜¯è¯¥ç®—æ³•å¯ä»¥æœ‰æ•ˆåœ°è§£å†³åœ¨å¼•ç”¨è®¡æ•°ç®—æ³•ä¸­å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼çš„å‘ç”Ÿã€‚</p><p>ç›¸è¾ƒäºå¼•ç”¨è®¡æ•°ç®—æ³•ï¼Œè¿™é‡Œçš„å¯è¾¾æ€§åˆ†æå°±æ˜¯ Javaã€C# é€‰æ‹©çš„ã€‚è¿™ç§ç±»å‹çš„åƒåœ¾æ”¶é›†å™¨é€šå¸¸ä¹Ÿå«åš<strong>è¿½è¸ªæ€§åƒåœ¾æ”¶é›†å™¨ï¼ˆTracing Garbage Collectorï¼‰</strong>ã€‚</p><p>æ‰€è°“ â€GC Rootsâ€œ æ ¹é›†åˆå°±æ˜¯ä¸€ç»„å¿…é¡»æ´»è·ƒçš„å¼•ç”¨ã€‚</p><p>åŸºæœ¬æ€è·¯ï¼š</p><ul><li>å¯è¾¾æ€§åˆ†æç®—æ³•æ˜¯ä»¥æ ¹å¯¹è±¡é›†åˆï¼ˆGC Rootsï¼‰ä¸ºèµ·å§‹ç‚¹ï¼ŒæŒ‰ç…§ä»ä¸Šè‡³ä¸‹çš„æ–¹å¼<strong>æœç´¢è¢«æ ¹å¯¹è±¡é›†åˆæ‰€è¿æ¥çš„ç›®æ ‡å¯¹è±¡æ˜¯å¦å¯è¾¾</strong>ã€‚</li><li>ä½¿ç”¨å¯è¾¾æ€§åˆ†æç®—æ³•åï¼Œå†…å­˜ä¸­çš„å­˜æ´»å¯¹è±¡éƒ½ä¼šè¢«æ ¹å¯¹è±¡é›†åˆç›´æ¥æˆ–é—´æ¥è¿æ¥ç€ï¼Œæœç´¢èµ°è¿‡çš„è·¯å¾„ç§°ä¸º<strong>å¼•ç”¨é“¾ï¼ˆReference Chainï¼‰</strong></li><li>å¦‚æœç›®æ ‡å¯¹è±¡æ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿ï¼Œåˆ™æ˜¯ä¸å¯è¾¾çš„ï¼Œå°±æ„å‘³ç€è¯¥å¯¹è±¡å·²ç»æ­»äº¡ï¼Œå¯ä»¥æ ‡è®°ä¸ºåƒåœ¾å¯¹è±¡</li><li>åœ¨å¯è¾¾æ€§åˆ†æç®—æ³•ä¸­ï¼Œåªæœ‰èƒ½å¤Ÿè¢«æ ¹å¯¹è±¡é›†åˆç›´æ¥æˆ–é—´æ¥è¿æ¥çš„å¯¹è±¡æ‰æ˜¯å­˜æ´»å¯¹è±¡</li></ul><p>è¿™ä¸ªç®—æ³•ç›®å‰è¾ƒä¸ºå¸¸ç”¨ã€‚</p><h4 id="GC-Roots"><a href="#GC-Roots" class="headerlink" title="GC Roots"></a>GC Roots</h4><p>åœ¨ Java è¯­è¨€ä¸­ï¼ŒGC Roots åŒ…æ‹¬ä»¥ä¸‹å‡ ç±»å…ƒç´ ï¼š</p><ul><li>è™šæ‹Ÿæœºæ ˆä¸­å¼•ç”¨çš„å¯¹è±¡<ul><li>æ¯”å¦‚ï¼Œå„ä¸ªçº¿ç¨‹è¢«è°ƒç”¨çš„æ–¹æ³•ä¸­ä½¿ç”¨åˆ°çš„å‚æ•°ã€å±€éƒ¨å˜é‡ç­‰ã€‚</li></ul></li><li>æœ¬åœ°æ–¹æ³•æ ˆå†… JNIï¼ˆé€šå¸¸è¯´çš„æœ¬åœ°æ–¹æ³•ï¼‰å¼•ç”¨çš„å¯¹è±¡</li><li>æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡<ul><li>æ¯”å¦‚ï¼šJava ç±»çš„å¼•ç”¨ç±»å‹é™æ€å˜é‡</li></ul></li><li>æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡<ul><li>æ¯”å¦‚ï¼šå­—ç¬¦ä¸²å¸¸é‡æ± é‡Œçš„å¼•ç”¨</li></ul></li><li>æ‰€æœ‰è¢«åŒæ­¥é” synchronized æŒæœ‰çš„å¯¹è±¡</li><li>Java è™šæ‹Ÿæœºå†…éƒ¨çš„å¼•ç”¨<ul><li>åŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”çš„ Class å¯¹è±¡ï¼Œä¸€äº›å¸¸é©»çš„å¼‚å¸¸å¯¹è±¡ï¼ˆå¦‚ï¼šNullPointerExceptionã€OutOfMemoryErrorï¼‰ï¼Œç³»ç»Ÿç±»åŠ è½½å™¨ã€‚</li></ul></li><li>åæ˜  Java è™šæ‹Ÿæœºå†…éƒ¨æƒ…å†µçš„ JMXBeanã€JVMTI ä¸­æ³¨å†Œçš„å›è°ƒã€æœ¬åœ°ä»£ç ç¼“å­˜ç­‰ã€‚</li></ul><p>é™¤äº†è¿™äº›å›ºå®šçš„ GC Roots é›†åˆä»¥å¤–ï¼Œæ ¹æ®ç”¨æˆ·æ‰€é€‰ç”¨çš„åƒåœ¾æ”¶é›†å™¨ä»¥åŠå½“å‰å›æ”¶çš„å†…å­˜åŒºåŸŸä¸åŒï¼Œè¿˜å¯ä»¥æœ‰å…¶ä»–å¯¹è±¡ ä¸´æ—¶æ€§ åœ°åŠ å…¥ï¼Œå…±åŒæ„æˆå®Œæ•´ GC Roots é›†åˆã€‚æ¯”å¦‚ï¼Œåˆ†ä»£æ”¶é›†å’Œå±€éƒ¨å›æ”¶ï¼ˆPartial GCï¼‰</p><ul><li>å¦‚æœåªé’ˆå¯¹ Java å †ä¸­çš„æŸä¸€å—åŒºåŸŸè¿›è¡Œåƒåœ¾å›æ”¶ï¼ˆæ¯”å¦‚ï¼šå…¸å‹çš„åªé’ˆå¯¹æ–°ç”Ÿä»£ï¼‰ï¼Œå¿…é¡»è€ƒè™‘åˆ°å†…å­˜åŒºåŸŸæ˜¯è™šæ‹Ÿæœºè‡ªå·±çš„å®ç°ç»†èŠ‚ï¼Œæ›´ä¸æ˜¯å­¤ç«‹å°é—­çš„ï¼Œè¿™ä¸ªåŒºåŸŸçš„å¯¹è±¡å®Œå…¨æœ‰å¯èƒ½è¢«å…¶ä»–åŒºåŸŸçš„å¯¹è±¡æ‰€å¼•ç”¨ï¼Œè¿™æ—¶å€™å°±éœ€è¦ä¸€å¹¶å°†å…³è”çš„åŒºåŸŸå¯¹è±¡ä¹ŸåŠ å…¥ GC Roots é›†åˆä¸­å»è€ƒè™‘ï¼Œæ‰èƒ½ä¿è¯å¯è¾¾æ€§åˆ†æçš„å‡†ç¡®æ€§ã€‚</li></ul><p><strong>å°æŠ€å·§ï¼š</strong>ç”±äº Root é‡‡ç”¨æ ˆæ–¹å¼å­˜æ”¾å˜é‡å’ŒæŒ‡é’ˆï¼Œæ‰€ä»¥å¦‚æœä¸€ä¸ªæŒ‡é’ˆï¼Œå®ƒä¿å­˜äº†å †å†…å­˜é‡Œé¢çš„å¯¹è±¡ï¼Œä½†æ˜¯è‡ªå·±åˆä¸å­˜æ”¾åœ¨å †å†…å­˜é‡Œé¢ï¼Œé‚£å®ƒå°±æ˜¯ä¸€ä¸ª Rootã€‚</p><p><strong>æ³¨æ„ï¼š</strong>å¦‚æœè¦ä½¿ç”¨å¯è¾¾æ€§åˆ†æç®—æ³•æ¥åˆ¤æ–­å†…å­˜æ˜¯å¦å¯å›æ”¶ï¼Œé‚£ä¹ˆåˆ†æå·¥ä½œå¿…é¡»åœ¨ä¸€ä¸ªèƒ½å¤Ÿä¿éšœä¸€è‡´æ€§çš„å¿«ç…§ä¸­è¿›è¡Œã€‚è¿™ç‚¹ä¸æ»¡è¶³çš„è¯åˆ†æç»“æœçš„å‡†ç¡®æ€§å°±æ— æ³•ä¿è¯ã€‚</p><p>è¿™ç‚¹ä¹Ÿæ˜¯å¯¼è‡´ GC æ—¶è¿›è¡Œå¿…é¡» â€Stop The Worldâ€œ çš„ä¸€ä¸ªé‡è¦åŸå› ã€‚</p><ul><li>å³ä½¿æ˜¯å·ç§°ï¼ˆå‡ ä¹ï¼‰ä¸ä¼šå‘ç”Ÿåœé¡¿çš„ CMS æ”¶é›†å™¨ä¸­ï¼Œ<strong>æšä¸¾æ ¹èŠ‚ç‚¹æ—¶ä¹Ÿæ˜¯å¿…é¡»è¦åœé¡¿çš„</strong>ã€‚</li></ul><h4 id="å¯¹è±¡çš„-finalization-æœºåˆ¶"><a href="#å¯¹è±¡çš„-finalization-æœºåˆ¶" class="headerlink" title="å¯¹è±¡çš„ finalization æœºåˆ¶"></a>å¯¹è±¡çš„ finalization æœºåˆ¶</h4><p>Java è¯­è¨€æä¾›äº†å¯¹è±¡ç»ˆæ­¢ï¼ˆfinalizationï¼‰æœºåˆ¶æ¥å…è®¸å¼€å‘äººå‘˜æä¾›å¯¹è±¡è¢«é”€æ¯ä¹‹å‰çš„è‡ªå®šä¹‰å¤„ç†é€»è¾‘ã€‚</p><p>å½“åƒåœ¾å›æ”¶å™¨å‘ç°æ²¡æœ‰å¼•ç”¨æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œå³ï¼šåƒåœ¾å›æ”¶æ­¤å¯¹è±¡ä¹‹å‰ï¼Œæ€»ä¼šå…ˆè°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„ finalize() æ–¹æ³•ã€‚</p><p> finalize() æ–¹æ³•å…è®¸åœ¨å­ç±»ä¸­è¢«é‡å†™ï¼Œç”¨äºåœ¨å¯¹è±¡è¢«å›æ”¶æ—¶è¿›è¡Œèµ„æºé‡Šæ”¾ã€‚é€šå¸¸åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è¿›è¡Œä¸€äº›èµ„æºé‡Šæ”¾å’Œæ¸…ç†çš„å·¥ä½œï¼Œæ¯”å¦‚å…³é—­æ–‡ä»¶ã€å¥—æ¥å­—å’Œæ•°æ®åº“è¿æ¥ç­‰ã€‚</p><p>æ°¸è¿œä¸è¦ä¸»åŠ¨è°ƒç”¨å¯¹è±¡çš„ finalize() æ–¹æ³•ï¼Œåº”è¯¥äº¤ç»™åƒåœ¾å›æ”¶æœºåˆ¶è°ƒç”¨ã€‚ç†ç”±åŒ…æ‹¬ä»¥ä¸‹ 3 ç‚¹ï¼š</p><ul><li><p>åœ¨ finalize() æ—¶å¯èƒ½ä¼šå¯¼è‡´å¯¹è±¡å¤æ´»ã€‚</p></li><li><p>finalize() æ–¹æ³•æ‰§è¡Œæ—¶é—´æ˜¯æ²¡æœ‰ä¿éšœçš„ï¼Œå®ƒå®Œå…¨ç”± GC çº¿ç¨‹å†³å®šï¼Œæç«¯æƒ…å†µä¸‹ï¼Œè‹¥ä¸å‘ç”Ÿ GCï¼Œåˆ™  finalize() æ–¹æ³•å°†æ²¡æœ‰æ‰§è¡Œæœºä¼šã€‚</p></li><li><p>ä¸€ä¸ªç³Ÿç³•çš„  finalize() ä¼šä¸¥é‡å½±å“ GC æ€§èƒ½</p></li></ul><p>ä»åŠŸèƒ½ä¸Šæ¥è¯´ï¼Œ finalize() æ–¹æ³•ä¸ C++ ä¸­çš„ææ„å‡½æ•°æ¯”è¾ƒç›¸ä¼¼ï¼Œä½†æ˜¯ Java é‡‡ç”¨çš„æ˜¯åŸºäºåƒåœ¾å›æ”¶å™¨çš„è‡ªåŠ¨å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œæ‰€ä»¥  finalize() æ–¹æ³•åœ¨æœ¬è´¨ä¸Šä¸åŒäº C++ ä¸­çš„ææ„å‡½æ•°ã€‚</p><p>ç”±äº  finalize() æ–¹æ³•çš„å­˜åœ¨ï¼Œè™šæ‹Ÿæœºä¸­çš„å¯¹è±¡ä¸€èˆ¬å¤„äºä¸‰ç§å¯èƒ½çš„çŠ¶æ€ã€‚</p><h4 id="ç”Ÿå­˜è¿˜æ˜¯æ­»äº¡ï¼Ÿ"><a href="#ç”Ÿå­˜è¿˜æ˜¯æ­»äº¡ï¼Ÿ" class="headerlink" title="ç”Ÿå­˜è¿˜æ˜¯æ­»äº¡ï¼Ÿ"></a>ç”Ÿå­˜è¿˜æ˜¯æ­»äº¡ï¼Ÿ</h4><p>å¦‚æœæ‰€æœ‰çš„æ ¹èŠ‚ç‚¹éƒ½æ— æ³•è®¿é—®åˆ°æŸä¸ªå¯¹è±¡ï¼Œè¯´æ˜å¯¹è±¡å·²ç»ä¸å†ä½¿ç”¨äº†ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ­¤å¯¹è±¡éœ€è¦è¢«å›æ”¶ã€‚ä½†äº‹å®ä¸Šï¼Œä¹Ÿå¹¶éæ˜¯ â€œéæ­»ä¸å¯â€ çš„ï¼Œè¿™æ—¶å€™å®ƒä»¬æš‚æ—¶å¤„äº â€œç¼“åˆ‘â€ é˜¶æ®µã€‚ä¸€ä¸ªæ— æ³•è§¦åŠçš„å¯¹è±¡æœ‰å¯èƒ½åœ¨æŸä¸€ä¸ªæ¡ä»¶ä¸‹ â€å¤æ´»â€œï¼Œå¦‚æœè¿™æ ·ï¼Œé‚£ä¹ˆå¯¹å®ƒçš„å›æ”¶å°±æ˜¯ä¸åˆç†çš„ï¼Œä¸ºæ­¤ï¼Œå®šä¹‰è™šæ‹Ÿæœºä¸­çš„å¯¹è±¡å¯èƒ½çš„ä¸‰ç§çŠ¶æ€ã€‚å¦‚ä¸‹ï¼š</p><ul><li>å¯è§¦åŠçš„ï¼šä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œå¯ä»¥åˆ°è¾¾è¿™ä¸ªå¯¹è±¡ã€‚</li><li>å¯å¤æ´»çš„ï¼šå¯¹è±¡çš„æ‰€æœ‰å¼•ç”¨éƒ½è¢«é‡Šæ”¾ï¼Œä½†æ˜¯å¯¹è±¡æœ‰å¯èƒ½åœ¨  finalize() ä¸­å¤æ´»ã€‚</li><li>ä¸å¯è§¦åŠçš„ï¼šå¯¹è±¡çš„ finalize() æ–¹æ³•è¢«è°ƒç”¨ï¼Œå¹¶ä¸”æ²¡æœ‰å¤æ´»ï¼Œé‚£ä¹ˆå°±ä¼šè¿›å…¥ä¸å¯è§¦åŠçŠ¶æ€ã€‚ä¸å¯è§¦åŠçš„å¯¹è±¡ä¸å¯èƒ½è¢«å¤æ´»ï¼Œå› ä¸º  finalize() æ–¹æ³•åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ã€‚</li></ul><p>ä»¥ä¸Š 3 ç§çŠ¶æ€ä¸­ï¼Œæ˜¯ç”±äº finalize() æ–¹æ³•çš„å­˜åœ¨è¿›è¡Œçš„åŒºåˆ†ã€‚åªæœ‰åœ¨å¯¹è±¡ä¸å¯è§¦åŠæ—¶æ‰å¯ä»¥è¢«å›æ”¶ã€‚</p><h4 id="å…·ä½“è¿‡ç¨‹"><a href="#å…·ä½“è¿‡ç¨‹" class="headerlink" title="å…·ä½“è¿‡ç¨‹"></a>å…·ä½“è¿‡ç¨‹</h4><p>åˆ¤å®šä¸€ä¸ªå¯¹è±¡ objA æ˜¯å¦å¯å›æ”¶ï¼Œè‡³å°‘è¦ç»å†ä¸¤æ¬¡æ ‡è®°è¿‡ç¨‹ï¼š</p><ul><li>å¦‚æœå¯¹è±¡ objA åˆ° GC Roots æ²¡æœ‰å¼•ç”¨é“¾ï¼Œåˆ™è¿›è¡Œç¬¬ä¸€æ¬¡æ ‡è®°</li><li>è¿›è¡Œç­›é€‰ï¼Œåˆ¤æ–­æ­¤å¯¹è±¡æ˜¯å¦æœ‰å¿…è¦æ‰§è¡Œ  finalize() æ–¹æ³•<ul><li>å¦‚æœå¯¹è±¡ objA æ²¡æœ‰é‡å†™ finalize() æ–¹æ³•ï¼Œæˆ–è€… finalize() æ–¹æ³•å·²ç»è¢«è™šæ‹Ÿæœºè°ƒç”¨è¿‡ï¼Œåˆ™è™šæ‹Ÿæœºè§†ä¸º â€æ²¡æœ‰å¿…è¦æ‰§è¡Œâ€œï¼ŒobjA è¢«åˆ¤å®šä¸ºä¸å¯è§¦åŠçš„ã€‚</li><li>å¦‚æœå¯¹è±¡ objA é‡å†™äº† finalize() æ–¹æ³•ï¼Œä¸”è¿˜æœªæ‰§è¡Œè¿‡ï¼Œé‚£ä¹ˆ objA ä¼šè¢«æ’å…¥åˆ° F-Queue é˜Ÿåˆ—ä¸­ï¼Œç”±ä¸€ä¸ªè™šæ‹Ÿæœºè‡ªåŠ¨åˆ›å»ºçš„ã€ä½ä¼˜å…ˆçº§çš„ Finalizer çº¿ç¨‹è§¦å‘å…¶ finalize() æ–¹æ³•æ‰§è¡Œã€‚</li><li>finalize() æ–¹æ³•æ˜¯å¯¹è±¡é€ƒè„±æ­»äº¡çš„æœ€åæœºä¼šï¼Œç¨å GC ä¼šå¯¹ F-Queue é˜Ÿåˆ—ä¸­çš„å¯¹è±¡è¿›è¡Œç¬¬äºŒæ¬¡æ ‡è®°ã€‚å¦‚æœ objA åœ¨ finalize() æ–¹æ³•ä¸­ä¸å¼•ç”¨é“¾ä¸Šçš„ä»»ä½•ä¸€ä¸ªå¯¹è±¡å»ºç«‹äº†è”ç³»ï¼Œé‚£ä¹ˆåœ¨ç¬¬äºŒæ¬¡æ ‡è®°æ—¶ï¼ŒobjA ä¼šè¢«ç§»å‡º â€å³å°†å›æ”¶â€œ é›†åˆã€‚ä¹‹åï¼Œå¯¹è±¡ä¼šå†æ¬¡å‡ºç°æ²¡æœ‰å¼•ç”¨å­˜åœ¨çš„æƒ…å†µã€‚åœ¨è¿™ä¸ªæƒ…å†µä¸‹ï¼Œfinalize() æ–¹æ³•ä¸ä¼šè¢«å†æ¬¡è°ƒç”¨ï¼Œå¯¹è±¡ä¼šç›´æ¥å˜æˆä¸å¯è§¦åŠçš„çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªå¯¹è±¡çš„ finalize() æ–¹æ³•åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ã€‚</li></ul></li></ul><h4 id="MAT-ä¸-JProfiler-çš„-GC-Roots-æº¯æº"><a href="#MAT-ä¸-JProfiler-çš„-GC-Roots-æº¯æº" class="headerlink" title="MAT ä¸ JProfiler çš„ GC Roots æº¯æº"></a>MAT ä¸ JProfiler çš„ GC Roots æº¯æº</h4><p>MAT æ˜¯ Memory Analyzer çš„ç®€ç§°ï¼Œå®ƒæ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„ Java å †å†…å­˜åˆ†æå™¨ï¼Œç”¨äºæŸ¥æ‰¾å†…å­˜æ³„éœ²ä»¥åŠæŸ¥çœ‹å†…å­˜æ¶ˆè€—æƒ…å†µã€‚</p><p>MAT æ˜¯åŸºäº Eclipse å¼€å‘çš„ï¼Œæ˜¯ä¸€æ¬¾å…è´¹çš„æ€§èƒ½åˆ†æå·¥å…·ã€‚</p><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuZWNsaXBzZS5vcmcvbWF0Lw==">https://www.eclipse.org/mat/<i class="fa fa-external-link-alt"></i></span></p><h4 id="è·å–-dump-æ–‡ä»¶"><a href="#è·å–-dump-æ–‡ä»¶" class="headerlink" title="è·å– dump æ–‡ä»¶"></a>è·å– dump æ–‡ä»¶</h4><ul><li>å‘½ä»¤è¡Œä½¿ç”¨ jmap<ul><li>jps</li><li>jmap -dump:format=b,live,file=test1.bin 14036</li></ul></li><li>ä½¿ç”¨ JVisualVM å¯¼å‡º<ul><li>æ•è·çš„ heap dump æ–‡ä»¶æ˜¯ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œå…³é—­ JVisualVM åè‡ªåŠ¨åˆ é™¤ï¼Œè‹¥è¦ä¿ç•™ï¼Œéœ€è¦å°†å…¶å¦å­˜ä¸ºæ–‡ä»¶ã€‚</li><li>å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ•è· heap dump<ul><li>åœ¨å·¦ä¾§ Application å­çª—å£ä¸­å³å‡»ç›¸åº”çš„åº”ç”¨ç¨‹åºï¼Œé€‰æ‹© Heap Dump</li><li>åœ¨ Monitor å­æ ‡ç­¾é¡µä¸­ç‚¹å‡» Heap Dump æŒ‰é’®</li></ul></li><li>æœ¬åœ°åº”ç”¨ç¨‹åºçš„ Heap Dumps ä½œä¸ºåº”ç”¨ç¨‹åºæ ‡ç­¾é¡µçš„ä¸€ä¸ªå­æ ‡ç­¾é¡µæ‰“å¼€ã€‚åŒæ—¶ï¼ŒHeap Dump åœ¨å·¦ä¾§ Application æ ä¸­å¯¹åº”ä¸€ä¸ªå«æœ‰æ—¶é—´æˆ³çš„èŠ‚ç‚¹ï¼Œå³å‡»è¿™ä¸ªèŠ‚ç‚¹é€‰æ‹© Save As å³å¯å°† Heap Dump æ–‡ä»¶ä¿å­˜åˆ°æœ¬åœ°ã€‚</li></ul></li></ul><h2 id="åƒåœ¾æ¸…é™¤é˜¶æ®µ"><a href="#åƒåœ¾æ¸…é™¤é˜¶æ®µ" class="headerlink" title="åƒåœ¾æ¸…é™¤é˜¶æ®µ"></a>åƒåœ¾æ¸…é™¤é˜¶æ®µ</h2><p>å½“æˆåŠŸåŒºåˆ†å‡ºå†…å­˜ä¸­å­˜æ´»å¯¹è±¡å’Œæ­»äº¡å¯¹è±¡åï¼ŒGC æ¥ä¸‹æ¥çš„ä»»åŠ¡å°±æ˜¯æ‰§è¡Œåƒåœ¾å›æ”¶ï¼Œé‡Šæ”¾æ‰æ— ç”¨å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ï¼Œä»¥ä¾¿æœ‰è¶³å¤Ÿçš„å¯ç”¨å†…å­˜ç©ºé—´ä¸ºæ–°å¯¹è±¡åˆ†é…å†…å­˜ã€‚</p><p>ç›®å‰åœ¨ JVM æ¯”è¾ƒå¸¸è§çš„ä¸‰ç§åƒåœ¾æ”¶é›†ç®—æ³•æ˜¯ æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼ˆMark-Sweepï¼‰ã€å¤åˆ¶ç®—æ³•ï¼ˆCopyingï¼‰ã€æ ‡è®°-å‹ç¼©ç®—æ³•ï¼ˆMark-Compactï¼‰</p><h3 id="æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼ˆMark-Sweepï¼‰"><a href="#æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼ˆMark-Sweepï¼‰" class="headerlink" title="æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼ˆMark-Sweepï¼‰"></a>æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼ˆMark-Sweepï¼‰</h3><h4 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h4><p>æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼ˆMark-Sweepï¼‰æ˜¯ä¸€ç§éå¸¸åŸºç¡€å’Œå¸¸è§çš„åƒåœ¾æ”¶é›†ç®—æ³•ï¼Œè¯¥ç®—æ³•è¢« J.McCarthy ç­‰äººåœ¨ 1960 å¹´æå‡ºå¹¶åº”ç”¨äº List è¯­è¨€ã€‚</p><h4 id="æ‰§è¡Œè¿‡ç¨‹"><a href="#æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="æ‰§è¡Œè¿‡ç¨‹"></a>æ‰§è¡Œè¿‡ç¨‹</h4><p>å½“å †ä¸­çš„æœ‰æ•ˆå†…å­˜ç©ºé—´ï¼ˆavailable memoryï¼‰è¢«è€—å°½çš„æ—¶å€™ï¼Œå°±ä¼šåœæ­¢æ•´ä¸ªç¨‹åºï¼ˆä¹Ÿè¢«ç§°ä¸º Stop The Worldï¼‰ï¼Œç„¶åè¿›è¡Œä¸¤é¡¹å·¥ä½œï¼Œç¬¬ä¸€é¡¹æ˜¯æ ‡è®°ï¼Œç¬¬äºŒé¡¹åˆ™æ˜¯æ¸…é™¤ã€‚</p><ul><li>æ ‡è®°ï¼šCollector ä»å¼•ç”¨æ ¹èŠ‚ç‚¹å¼€å§‹éå†ï¼Œæ ‡è®°æ‰€æœ‰è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚ä¸€èˆ¬æ˜¯åœ¨å¯¹è±¡çš„ Header ä¸­è®°å½•ä¸ºå¯è¾¾å¯¹è±¡ã€‚</li><li>æ¸…é™¤ï¼šCollector å¯¹å¯¹å †å†…å­˜ä»å¤´åˆ°å°¾è¿›è¡Œçº¿æ€§çš„éå†ï¼Œå¦‚æœå‘ç°æŸä¸ªå¯¹è±¡åœ¨å…¶ Header ä¸­æ²¡æœ‰æ ‡è®°ä¸ºå¯è¾¾å¯¹è±¡ï¼Œåˆ™å°†å…¶å›æ”¶ã€‚</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>æ•ˆç‡ä¸ç®—é«˜</li><li>åœ¨è¿›è¡Œ GC çš„æ—¶å€™ï¼Œéœ€è¦åœæ­¢æ•´ä¸ªåº”ç”¨ç¨‹åºï¼Œå¯¼è‡´ç”¨æˆ·ä½“éªŒå·®</li><li>è¿™ç§æ–¹å¼æ¸…ç†å‡ºæ¥çš„ç©ºé—²å†…å­˜ç©ºé—´æ˜¯ä¸è¿ç»­çš„ï¼Œäº§ç”Ÿå†…å­˜ç¢ç‰‡ã€‚éœ€è¦ç»´æŠ¤ä¸€ä¸ªç©ºé—²åˆ—è¡¨</li></ul><p>æ³¨æ„ï¼šä½•ä¸ºæ¸…é™¤ï¼Ÿ</p><p>è¿™é‡Œæ‰€è°“çš„æ¸…é™¤å¹¶ä¸æ˜¯çœŸçš„ç½®ç©ºï¼Œè€Œæ˜¯æŠŠéœ€è¦æ¸…é™¤çš„å¯¹è±¡åœ°å€ä¿å­˜åœ¨ç©ºé—²çš„åœ°å€åˆ—è¡¨é‡Œã€‚ä¸‹æ¬¡æœ‰æ–°å¯¹è±¡éœ€è¦åŠ è½½æ—¶ï¼Œåˆ¤æ–­åƒåœ¾çš„ä½ç½®ç©ºé—´æ˜¯å¦å¤Ÿï¼Œå¦‚æœå¤Ÿï¼Œå°±å­˜æ”¾ã€‚</p><h3 id="å¤åˆ¶ç®—æ³•ï¼ˆCopyingï¼‰"><a href="#å¤åˆ¶ç®—æ³•ï¼ˆCopyingï¼‰" class="headerlink" title="å¤åˆ¶ç®—æ³•ï¼ˆCopyingï¼‰"></a>å¤åˆ¶ç®—æ³•ï¼ˆCopyingï¼‰</h3><h4 id="èƒŒæ™¯-1"><a href="#èƒŒæ™¯-1" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h4><p>ä¸ºäº†è§£å†³æ ‡è®°-æ¸…é™¤ç®—æ³•åœ¨åƒåœ¾æ”¶é›†æ•ˆç‡æ–¹é¢çš„ç¼ºé™·ï¼ŒM.L.Minsky äº1963 å¹´å‘è¡¨äº†è‘—åçš„è®ºæ–‡ï¼Œâ€ä½¿ç”¨åŒå­˜å‚¨åŒºçš„ Lisp è¯­è¨€åƒåœ¾æ”¶é›†å™¨ ï¼ˆA Lisp Garbage Collector Algorithm Using Serial Secondary Storageï¼‰â€œã€‚M.L.Minsky æœ¬äººæˆåŠŸåœ°å¼•å…¥åˆ°äº† Lisp è¯­è¨€çš„ä¸€ä¸ªå®ç°ç‰ˆæœ¬ä¸­ã€‚</p><h4 id="æ ¸å¿ƒæ€æƒ³"><a href="#æ ¸å¿ƒæ€æƒ³" class="headerlink" title="æ ¸å¿ƒæ€æƒ³"></a>æ ¸å¿ƒæ€æƒ³</h4><p>å°†æ´»ç€çš„å†…å­˜ç©ºé—´åˆ†ä¸ºä¸¤å—ï¼Œæ¯æ¬¡åªæ˜¯ç”¨å…¶ä¸­ä¸€å—ï¼Œåœ¨åƒåœ¾å›æ”¶æ—¶å°†æ­£åœ¨ä½¿ç”¨çš„å†…å­˜ä¸­çš„å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°æœªè¢«ä½¿ç”¨çš„å†…å­˜å—ä¸­ï¼Œä¹‹åæ¸…é™¤æ­£åœ¨ä½¿ç”¨çš„å†…å­˜å—ä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼Œäº¤æ¢ä¸¤ä¸ªå†…å­˜çš„è§’è‰²ï¼Œæœ€åå®Œæˆåƒåœ¾å›æ”¶ã€‚</p><p>ä¼˜ç‚¹</p><ul><li><p>æ²¡æœ‰æ ‡è®°å’Œæ¸…é™¤è¿‡ç¨‹ï¼Œå®ç°ç®€å•ï¼Œè¿è¡Œé«˜æ•ˆ</p></li><li><p>å¤åˆ¶è¿‡å»ä»¥åä¿è¯ç©ºé—´çš„è¿ç»­æ€§ï¼Œä¸ä¼šå‡ºç°â€ç¢ç‰‡é—®é¢˜â€œ</p></li></ul><p>ç¼ºç‚¹</p><ul><li><p>æ­¤ç®—æ³•çš„ç¼ºç‚¹ä¹Ÿæ˜¯å¾ˆæ˜æ˜¾çš„ï¼Œå°±æ˜¯éœ€è¦ä¸¤å€çš„å†…å­˜ç©ºé—´ã€‚</p></li><li><p>å¯¹äº G1 è¿™ç§åˆ†æ‹†æˆä¸ºå¤§é‡ region çš„GCï¼Œå¤åˆ¶è€Œä¸æ˜¯ç§»åŠ¨ï¼Œæ„å‘³ç€ GC éœ€è¦ç»´æŠ¤ region ä¹‹é—´å¯¹è±¡å¼•ç”¨å…³ç³»ï¼Œä¸ç®¡æ˜¯å†…å­˜å ç”¨æˆ–è€…æ—¶é—´å¼€é”€ä¹Ÿä¸å°</p></li></ul><p>ç‰¹åˆ«çš„ï¼š</p><ul><li>å¦‚æœç³»ç»Ÿä¸­çš„åƒåœ¾å¯¹è±¡å¾ˆå¤šï¼Œå¤åˆ¶çŸ­å‘éœ€è¦å¤åˆ¶çš„å­˜æ´»å¯¹è±¡æ•°é‡å¹¶ä¸ä¼šå¤ªå¤§ï¼Œæˆ–è€…è¯´éå¸¸ä½ã€‚</li></ul><p>åº”ç”¨åœºæ™¯ï¼š</p><p>åœ¨æ–°ç”Ÿä»£ï¼Œå¯¹åº”å¸¸è§„åº”ç”¨çš„åƒåœ¾å›æ”¶ï¼Œä¸€æ¬¡é€šå¸¸å¯ä»¥å›æ”¶ 70% - 99% çš„å†…å­˜ç©ºé—´ï¼Œå›æ”¶æ€§ä»·æ¯”å¾ˆé«˜ã€‚æ‰€ä»¥ç°åœ¨çš„å•†ä¸šè™šæ‹Ÿæœºéƒ½æ˜¯ç”¨è¿™ç§æ”¶é›†ç®—æ³•å›æ”¶æ–°ç”Ÿä»£ã€‚</p><h3 id="æ ‡è®°-å‹ç¼©ç®—æ³•ï¼ˆMark-Compactï¼‰"><a href="#æ ‡è®°-å‹ç¼©ç®—æ³•ï¼ˆMark-Compactï¼‰" class="headerlink" title="æ ‡è®°-å‹ç¼©ç®—æ³•ï¼ˆMark-Compactï¼‰"></a>æ ‡è®°-å‹ç¼©ç®—æ³•ï¼ˆMark-Compactï¼‰</h3><h4 id="èƒŒæ™¯-2"><a href="#èƒŒæ™¯-2" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h4><p>å¤åˆ¶ç®—æ³•çš„é«˜æ•ˆæ€§ï¼Œæ˜¯å»ºç«‹åœ¨å­˜æ´»å¯¹è±¡å°‘ã€åƒåœ¾å¯¹è±¡å¤šçš„å‰æä¸‹çš„ã€‚è¿™ç§æƒ…å†µåœ¨æ–°ç”Ÿä»£ç»å¸¸å‘ç”Ÿï¼Œä½†æ˜¯åœ¨è€å¹´ä»£ï¼Œæ›´å¸¸è§çš„æƒ…å†µæ˜¯å¤§éƒ¨åˆ†å¯¹è±¡éƒ½æ˜¯å­˜æ´»å¯¹è±¡ã€‚å¦‚æœä¾ç„¶ä½¿ç”¨å¤åˆ¶ç®—æ³•ï¼Œç”±äºå­˜æ´»å¯¹è±¡è¾ƒå¤šï¼Œå¤åˆ¶çš„æˆæœ¬ä¹Ÿå°†å¾ˆé«˜ã€‚å› æ­¤ï¼ŒåŸºäºè€å¹´ä»£åƒåœ¾å›æ”¶çš„ç‰¹æ€§ï¼Œéœ€è¦ä½¿ç”¨å…¶ä»–çš„ç®—æ³•ã€‚</p><p>æ ‡è®°-æ¸…é™¤ç®—æ³•çš„ç¡®å¯ä»¥åº”ç”¨åœ¨è€å¹´ä»£ä¸­ï¼Œä½†æ˜¯è¯¥ç®—æ³•ä¸ä»…æ‰§è¡Œæ•ˆç‡ä½ä¸‹ï¼Œè€Œä¸”åœ¨æ‰§è¡Œå®Œå†…å­˜å›æ”¶åè¿˜ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ï¼Œæ‰€ä»¥ JVM çš„è®¾è®¡è€…éœ€è¦åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œæ”¹è¿›ã€‚æ ‡è®°-å‹ç¼©ï¼ˆMark-Compactï¼‰ç®—æ³•ä¹Ÿç”±æ­¤è¯ç”Ÿã€‚</p><p>1970 å¹´å‰åï¼ŒG.L.Steeleã€C.J.Chene å’Œ D.S.Wise ç­‰ç ”ç©¶è€…å‘å¸ƒæ ‡è®°-å‹ç¼©ç®—æ³•ã€‚åœ¨è®¸å¤šç°ä»£çš„åƒåœ¾å›æ”¶å™¨ä¸­ï¼Œäººä»¬éƒ½æ˜¯ç”¨äº†æ ‡è®°-å‹ç¼©ç®—æ³•æˆ–å…¶æ”¹è¿›ç‰ˆæœ¬ã€‚</p><h4 id="æ‰§è¡Œè¿‡ç¨‹-1"><a href="#æ‰§è¡Œè¿‡ç¨‹-1" class="headerlink" title="æ‰§è¡Œè¿‡ç¨‹"></a>æ‰§è¡Œè¿‡ç¨‹</h4><p>ç¬¬ä¸€é˜¶æ®µå’Œæ ‡è®°æ¸…é™¤ç®—æ³•ä¸€æ ·ï¼Œä»æ ¹èŠ‚ç‚¹å¼€å§‹æ ‡è®°æ‰€æœ‰è¢«å¼•ç”¨å¯¹è±¡ã€‚</p><p>ç¬¬äºŒé˜¶æ®µå°†æ‰€æœ‰çš„å­˜æ´»å¯¹è±¡å‹ç¼©åˆ°å†…å­˜çš„ä¸€ç«¯ï¼ŒæŒ‰é¡ºåºæ’æ”¾ã€‚</p><p>ä¹‹åæ¸…ç†è¾¹ç•Œå¤–æ‰€æœ‰çš„ç©ºé—´ã€‚</p><p>æ ‡è®°-å‹ç¼©ç®—æ³•çš„æœ€ç»ˆæ•ˆæœç­‰åŒäºæ ‡è®°-æ¸…é™¤ç®—æ³•æ‰§è¡Œå®Œæˆåï¼Œå†è¿›è¡Œä¸€æ¬¡å†…å­˜ç¢ç‰‡æ•´ç†ï¼Œå› æ­¤ï¼Œä¹Ÿå¯ä»¥æŠŠå®ƒç§°ä¸º æ ‡è®°-æ¸…é™¤-å‹ç¼©ï¼ˆMark-Sweep-Compactï¼‰ ç®—æ³•ã€‚</p><p>äºŒè€…æœ¬è´¨å·®å¼‚åœ¨äºæ ‡è®°-æ¸…é™¤ç®—æ³•æ˜¯ä¸€ç§éç§»åŠ¨å¼çš„å›æ”¶ç®—æ³•ï¼Œæ ‡è®°-å‹ç¼©æ˜¯ç§»åŠ¨å¼çš„ã€‚æ˜¯å¦ç§»åŠ¨å›æ”¶åçš„å­˜æ´»å¯¹è±¡æ˜¯ä¸€é¡¹ä¼˜ç¼ºç‚¹å¹¶å­˜çš„é£é™©å†³ç­–ã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼Œæ ‡è®°çš„å­˜æ´»å¯¹è±¡å°†ä¼šè¢«æ•´ç†ï¼ŒæŒ‰ç…§å†…å­˜åœ°å€ä¾æ¬¡æ’åˆ—ï¼Œè€Œæœªè¢«æ ‡è®°çš„å†…å­˜ä¼šè¢«æ¸…ç†æ‰ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œå½“æˆ‘ä»¬éœ€è¦ç»™æ–°å¯¹è±¡åˆ†é…å†…å­˜æ—¶ï¼ŒJVM åªéœ€è¦æŒæœ‰ä¸€ä¸ªå†…å­˜çš„èµ·å§‹åœ°å€å³å¯ï¼Œè¿™æ¯”ç»´æŠ¤ä¸€ä¸ªç©ºé—²åˆ—è¡¨æ˜¾ç„¶å°‘äº†è®¸å¤šå¼€é”€ã€‚</p><p><strong>æŒ‡é’ˆç¢°æ’ï¼ˆBump the Pointerï¼‰</strong></p><p>å¦‚æœå†…å­˜ç©ºé—´ä»¥è§„æ•´å’Œæœ‰åºçš„æ–¹å¼åˆ†å¸ƒï¼Œå³å·²ç”¨å’Œæœªç”¨çš„å†…å­˜éƒ½å„è‡ªä¸€è¾¹ï¼Œå½¼æ­¤ä¹‹é—´ç»´ç³»ç€ä¸€ä¸ªè®°å½•ä¸‹ä¸€æ¬¡åˆ†é…èµ·å§‹ç‚¹çš„æ ‡è®°æŒ‡é’ˆï¼Œå½“ä¸ºæ–°å¯¹è±¡åˆ†é…å†…å­˜æ—¶ï¼Œåªéœ€è¦é€šè¿‡ä¿®æ”¹æŒ‡é’ˆçš„åç§»é‡å°†æ–°å¯¹è±¡åˆ†é…åœ¨ç¬¬ä¸€ä¸ªç©ºé—²å†…å­˜ä½ç½®ä¸Šï¼Œè¿™ç§åˆ†é…æ–¹å¼å°±å«åšæŒ‡é’ˆç¢°æ’ã€‚</p><p><strong>ä¼˜ç‚¹</strong></p><p>æ¶ˆé™¤äº†æ ‡è®°-æ¸…é™¤ç®—æ³•å½“ä¸­ï¼Œå†…å­˜åŒºåŸŸåˆ†æ•£çš„ç¼ºç‚¹ï¼Œæˆ‘ä»¬éœ€è¦ç»™æ–°å¯¹è±¡åˆ†é…å†…å­˜æ—¶ï¼ŒJVM åªéœ€è¦æŒæœ‰ä¸€ä¸ªå†…å­˜çš„èµ·å§‹åœ°å€å³å¯ã€‚</p><p>æ¶ˆé™¤äº†å¤åˆ¶ç®—æ³•å½“ä¸­ï¼Œå†…å­˜å‡åŠçš„é«˜é¢ä»£ä»·</p><p><strong>ç¼ºç‚¹</strong></p><p>ä»æ•ˆç‡ä¸Šæ¥è¯´ï¼Œæ ‡è®°-æ•´ç†ç®—æ³•è¦ä½äºå¤åˆ¶ç®—æ³•ã€‚</p><p>ç§»åŠ¨å¯¹è±¡çš„åŒæ—¶ï¼Œå¦‚æœå¯¹è±¡è¢«å…¶ä»–å¯¹è±¡å¼•ç”¨ï¼Œåˆ™è¿˜éœ€è¦è°ƒæ•´å¼•ç”¨çš„åœ°å€ã€‚</p><p>ç§»åŠ¨çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦å…¨ç¨‹æš‚åœç”¨æˆ·åº”ç”¨ç¨‹åºã€‚å³ï¼šSTW</p><h3 id="å°ç»“-1"><a href="#å°ç»“-1" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><table><thead><tr><th></th><th>Mark-Sweep</th><th>Mark-Compact</th><th>Copying</th></tr></thead><tbody><tr><td>é€Ÿåº¦</td><td>ä¸­ç­‰</td><td>æœ€æ…¢</td><td>æœ€å¿«</td></tr><tr><td>ç©ºé—´å¼€é”€</td><td>å°‘ï¼ˆä½†ä¼šå †ç§¯ç¢ç‰‡ï¼‰</td><td>å°‘ï¼ˆä¸å †ç§¯ç¢ç‰‡ï¼‰</td><td>é€šå¸¸éœ€è¦æ´»å¯¹è±¡çš„ 2 å€å¤§å°ï¼ˆä¸å †ç§¯ç¢ç‰‡ï¼‰</td></tr><tr><td>ç§»åŠ¨å¯¹è±¡</td><td>å¦</td><td>æ˜¯</td><td>æ˜¯</td></tr></tbody></table><p>æ•ˆç‡ä¸Šæ¥è¯´ï¼Œå¤åˆ¶ç®—æ³•æ˜¯å½“ä¹‹æ— æ„§çš„è€å¤§ï¼Œä½†æ˜¯å´æµªè´¹äº†å¤ªå¤šå†…å­˜ã€‚</p><p>è€Œä¸ºäº†å°½é‡å…¼é¡¾ä¸Šé¢æåˆ°çš„ä¸‰ä¸ªæŒ‡æ ‡ï¼Œæ ‡è®°-æ•´ç†ç®—æ³•ç›¸å¯¹æ¥è¯´æ›´å¹³æ»‘ä¸€äº›ï¼Œä½†æ˜¯æ•ˆç‡ä¸Šä¸å°½å¦‚äººæ„ï¼Œå®ƒæ¯”å¤åˆ¶ç®—æ³•å¤šäº†ä¸€ä¸ªæ ‡è®°é˜¶æ®µï¼Œæ¯”æ ‡è®°-æ¸…é™¤ç®—æ³•å¤šäº†ä¸€ä¸ªæ•´ç†å†…å­˜çš„é˜¶æ®µã€‚</p><p><strong>éš¾é“å°±æ²¡æœ‰ä¸€ç§æœ€ä¼˜ç®—æ³•å—ï¼Ÿ</strong></p><p>æ²¡æœ‰æœ€å¥½çš„ç®—æ³•ï¼Œåªæœ‰æœ€åˆé€‚çš„ç®—æ³•ã€‚</p><h2 id="åˆ†ä»£æ”¶é›†ç®—æ³•"><a href="#åˆ†ä»£æ”¶é›†ç®—æ³•" class="headerlink" title="åˆ†ä»£æ”¶é›†ç®—æ³•"></a>åˆ†ä»£æ”¶é›†ç®—æ³•</h2><p>å‰é¢æ‰€æœ‰è¿™äº›ç®—æ³•ä¸­ï¼Œå¹¶æ²¡æœ‰ä¸€ç§ç®—æ³•å¯ä»¥å®Œå…¨æ›¿ä»£å…¶ä»–ç®—æ³•ï¼Œå®ƒä»¬éƒ½å…·æœ‰è‡ªå·±ç‹¬ç‰¹çš„ä¼˜åŠ¿å’Œç¼ºç‚¹ã€‚åˆ†ä»£æ”¶é›†ç®—æ³•åº”è¿è€Œç”Ÿã€‚</p><p>åˆ†ä»£æ”¶é›†ç®—æ³•ï¼Œæ˜¯åŸºäºè¿™æ ·ä¸€ä¸ªäº‹å®ï¼šä¸åŒçš„å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸ä¸€æ ·çš„ã€‚å› æ­¤ï¼Œ<strong>ä¸åŒç”Ÿå‘½å‘¨æœŸçš„å¯¹è±¡å¯ä»¥é‡‡å–ä¸åŒçš„æ”¶é›†æ–¹å¼ï¼Œä»¥ä¾¿æé«˜å›æ”¶æ•ˆç‡</strong>ã€‚ä¸€èˆ¬æ˜¯æŠŠ Java å †åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Œè¿™æ ·å°±å¯ä»¥æ ¹æ®å„ä¸ªå¹´é¾„ä»£çš„ç‰¹ç‚¹ä½¿ç”¨ä¸åŒçš„å›æ”¶ç®—æ³•ï¼Œä»¥æé«˜åƒåœ¾å›æ”¶çš„æ•ˆç‡ã€‚</p><p>åœ¨ Java ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šäº§ç”Ÿå¤§é‡çš„å¯¹è±¡ï¼Œå…¶ä¸­æœ‰äº›å¯¹è±¡æ˜¯ä¸ä¸šåŠ¡ä¿¡æ¯ç›¸å…³ï¼Œæ¯”å¦‚ HTTP è¯·æ±‚ä¸­çš„ Session å¯¹è±¡ã€çº¿ç¨‹ã€Socket è¿æ¥ï¼Œè¿™ç±»å¯¹è±¡è·Ÿä¸šåŠ¡ç›´æ¥æŒ‚é’©ï¼Œå› æ­¤ç”Ÿå‘½å‘¨æœŸæ¯”è¾ƒé•¿ã€‚ä½†æ˜¯è¿˜æœ‰ä¸€äº›å¯¹è±¡ï¼Œä¸»è¦æ˜¯ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ç”Ÿæˆçš„ä¸´æ—¶å˜é‡ï¼Œè¿™äº›å¯¹è±¡ç”Ÿå‘½å‘¨æœŸä¼šæ¯”è¾ƒçŸ­ï¼Œæ¯”å¦‚ï¼šString å¯¹è±¡ï¼Œç”±äºå…¶ä¸å˜æ€§ï¼Œç³»ç»Ÿä¼šäº§ç”Ÿå¤§é‡çš„è¿™äº›å¯¹è±¡ï¼Œæœ‰äº›å¯¹è±¡ç”šè‡³åªç”¨ä¸€æ¬¡å³å¯å›æ”¶ã€‚</p><p>ç›®å‰å‡ ä¹æ‰€æœ‰çš„ GC éƒ½æ˜¯é‡‡ç”¨åˆ†ä»£æ”¶é›†ï¼ˆGenerational Collectingï¼‰ç®—æ³•æ‰§è¡Œåƒåœ¾å›æ”¶çš„ã€‚</p><p>åœ¨ HotSpot ä¸­ï¼ŒåŸºäºåˆ†ä»£çš„æ¦‚å¿µï¼ŒGC æ‰€ä½¿ç”¨çš„å†…å­˜å›æ”¶ç®—æ³•å¿…é¡»ç»“åˆå¹´è½»ä»£å’Œè€å¹´ä»£å„è‡ªçš„ç‰¹ç‚¹ã€‚</p><ul><li>å¹´è½»ä»£ï¼ˆYoung Genï¼‰<ul><li>å¹´è½»ä»£çš„ç‰¹ç‚¹ï¼šåŒºåŸŸç›¸å¯¹è€å¹´ä»£è¾ƒå°ï¼Œå¯¹è±¡ç”Ÿå‘½å‘¨æœŸçŸ­ã€å­˜æ´»ç‡ä½ï¼Œå›æ”¶é¢‘ç¹ã€‚</li><li>è¿™ç§æƒ…å†µå¤åˆ¶ç®—æ³•çš„å›æ”¶æ•´ç†ï¼Œé€Ÿåº¦æ˜¯æœ€å¿«çš„ã€‚å¤åˆ¶ç®—æ³•çš„æ•ˆç‡åªå’Œå½“å‰å­˜æ´»å¯¹è±¡å¤§å°æœ‰å…³ï¼Œå› æ­¤å¾ˆé€‚ç”¨äºå¹´è½»ä»£çš„å›æ”¶ã€‚è€Œå¤åˆ¶ç®—æ³•å†…å­˜åˆ©ç”¨ç‡ä¸é«˜çš„é—®é¢˜ï¼Œé€šè¿‡ HotSpot ä¸­çš„ä¸¤ä¸ª Survivor çš„è®¾è®¡å¾—åˆ°ç¼“è§£</li></ul></li><li>è€å¹´ä»£ï¼ˆTenured Genï¼‰<ul><li>è€å¹´ä»£ç‰¹ç‚¹ï¼šåŒºåŸŸè¾ƒå¤§ï¼Œå¯¹è±¡ç”Ÿå‘½å‘¨æœŸé•¿ã€å­˜æ´»ç‡é«˜ï¼Œå›æ”¶ä¸åŠå¹´è½»ä»£é¢‘ç¹ã€‚</li><li>è¿™ç§æƒ…å†µå­˜åœ¨å¤§é‡å­˜æ´»ç‡é«˜çš„å¯¹è±¡ï¼Œå¤åˆ¶ç®—æ³•æ˜æ˜¾å˜å¾—ä¸åˆé€‚ã€‚ä¸€èˆ¬æ˜¯ç”±æ ‡è®°-æ¸…é™¤æˆ–æ˜¯æ ‡è®°-æ¸…é™¤ä¸æ ‡è®°-æ•´ç†çš„æ··åˆå®ç°ã€‚<ul><li>Mark é˜¶æ®µçš„å¼€é”€ä¸å­˜æ´»å¯¹è±¡çš„æ•°é‡æˆæ­£æ¯”ã€‚</li><li>Sweep é˜¶æ®µçš„å¼€é”€ä¸æ‰€ç®¡ç†åŒºåŸŸå¤§å°æˆæ­£æ¯”ã€‚</li><li>Compact é˜¶æ®µçš„å¼€é”€ä¸å­˜æ´»å¯¹è±¡çš„æ•°æ®æˆæ­£æ¯”ã€‚</li></ul></li></ul></li></ul><p><strong>ä»¥ HotSpot ä¸­çš„ CMS å›æ”¶å™¨ä¸ºä¾‹ï¼ŒCMS æ˜¯åŸºäº Mark-Sweep å®ç°çš„ï¼Œå¯¹äºå¯¹è±¡çš„å›æ”¶ç‡å¾ˆé«˜ã€‚è€Œå¯¹äºç¢ç‰‡é—®é¢˜ï¼ŒCMS é‡‡ç”¨åŸºäº Mark-Compact ç®—æ³•çš„ Serial Old å›æ”¶å™¨ä½œä¸ºè¡¥å¿ï¼šå½“å†…å­˜å›æ”¶ä¸ä½³ï¼ˆç¢ç‰‡å¯¼è‡´çš„ Concurrent Mode Failure æ—¶ï¼‰ï¼Œå°†é‡‡ç”¨ Serial Old æ‰§è¡Œ Full GC ä»¥è¾¾åˆ°å¯¹è€å¹´ä»£å†…å­˜çš„æ•´ç†ã€‚</strong></p><p>åˆ†ä»£çš„æ€æƒ³è¢«ç°æœ‰çš„è™šæ‹Ÿæœºå¹¿æ³›ä½¿ç”¨ã€‚å‡ ä¹æ‰€æœ‰çš„åƒåœ¾å›æ”¶å™¨éƒ½åŒºåˆ†æ–°ç”Ÿä»£å’Œè€å¹´ä»£ã€‚</p><h2 id="å¢é‡æ”¶é›†ç®—æ³•ã€åˆ†åŒºç®—æ³•"><a href="#å¢é‡æ”¶é›†ç®—æ³•ã€åˆ†åŒºç®—æ³•" class="headerlink" title="å¢é‡æ”¶é›†ç®—æ³•ã€åˆ†åŒºç®—æ³•"></a>å¢é‡æ”¶é›†ç®—æ³•ã€åˆ†åŒºç®—æ³•</h2><h3 id="å¢é‡æ”¶é›†ç®—æ³•ï¼ˆIncremental-Collectingï¼‰"><a href="#å¢é‡æ”¶é›†ç®—æ³•ï¼ˆIncremental-Collectingï¼‰" class="headerlink" title="å¢é‡æ”¶é›†ç®—æ³•ï¼ˆIncremental Collectingï¼‰"></a>å¢é‡æ”¶é›†ç®—æ³•ï¼ˆIncremental Collectingï¼‰</h3><p>ä¸Šè¿°ç°æœ‰çš„ç®—æ³•ï¼Œåœ¨åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸­ï¼Œåº”ç”¨è½¯ä»¶å°†å¤„äºä¸€ç§ STW çš„çŠ¶æ€ã€‚åœ¨ STW çŠ¶æ€ä¸‹ï¼Œåº”ç”¨ç¨‹åºæ‰€æœ‰çš„çº¿ç¨‹éƒ½ä¼šæŒ‚èµ·ï¼Œæš‚åœä¸€åˆ‡æ­£å¸¸çš„å·¥ä½œï¼Œç­‰å¾…åƒåœ¾å›æ”¶çš„å®Œæˆã€‚å¦‚æœåƒåœ¾å›æ”¶æ—¶é—´è¿‡é•¿ï¼Œåº”ç”¨ç¨‹åºä¼šè¢«æŒ‚èµ·å¾ˆä¹…ï¼Œ<strong>å°†ä¸¥é‡å½±å“ç”¨æˆ·ä½“éªŒæˆ–è€…ç³»ç»Ÿçš„ç¨³å®šæ€§</strong>ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå³å¯¹å®æ—¶åƒåœ¾æ”¶é›†ç®—æ³•çš„ç ”ç©¶ç›´æ¥å¯¼è‡´äº†å¢é‡æ”¶é›†ï¼ˆIncremental Collectingï¼‰ç®—æ³•çš„è¯ç”Ÿã€‚</p><p>åŸºæœ¬æ€æƒ³ï¼šå¦‚æœä¸€æ¬¡æ€§å°†æ‰€æœ‰çš„åƒåœ¾è¿›è¡Œå¤„ç†ï¼Œéœ€è¦é€ æˆç³»ç»Ÿé•¿æ—¶é—´çš„åœé¡¿ï¼Œé‚£ä¹ˆå°±å¯ä»¥è®©åƒåœ¾æ”¶é›†çº¿ç¨‹å’Œåº”ç”¨ç¨‹åºçº¿ç¨‹äº¤æ›¿æ‰§è¡Œã€‚æ¯æ¬¡ï¼Œ<strong>åƒåœ¾æ”¶é›†çº¿ç¨‹åªæ”¶é›†ä¸€å°ç‰‡åŒºåŸŸçš„å†…å­˜ç©ºé—´ï¼Œæ¥ç€åˆ‡æ¢åˆ°åº”ç”¨ç¨‹åºçº¿ç¨‹ã€‚ä¾æ¬¡åå¤ï¼Œç›´åˆ°åƒåœ¾æ”¶é›†å®Œæˆ</strong>ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œå¢é‡æ”¶é›†ç®—æ³•çš„åŸºç¡€ä»ç„¶æ˜¯ä¼ ç»Ÿçš„æ ‡è®°-æ¸…é™¤å’Œå¤åˆ¶ç®—æ³•ã€‚<strong>å¢é‡æ”¶é›†ç®—æ³•é€šè¿‡å¯¹çº¿ç¨‹é—´å†²çªçš„å¦¥å–„å¤„ç†ï¼Œå…è®¸åƒåœ¾æ”¶é›†çº¿ç¨‹ä»¥åˆ†é˜¶æ®µæ–¹å¼å®Œæˆæ ‡è®°ã€æ¸…ç†æˆ–å¤åˆ¶å·¥ä½œã€‚</strong></p><p>ç¼ºç‚¹ï¼šä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œç”±äºåœ¨åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸­ï¼Œé—´æ–­æ€§åœ°è¿˜æ‰§è¡Œäº†åº”ç”¨ç¨‹åºä»£ç ï¼Œæ‰€ä»¥èƒ½å‡å°‘ç³»ç»Ÿçš„åœé¡¿æ—¶é—´ã€‚ä½†æ˜¯ï¼Œå› ä¸º<strong>çº¿ç¨‹åˆ‡æ¢å’Œä¸Šä¸‹æ–‡è½¬æ¢</strong>çš„æ¶ˆè€—ï¼Œä¼šä½¿å¾—åƒåœ¾å›æ”¶çš„æ€»ä½“æˆæœ¬ä¸Šå‡ï¼Œ<strong>é€ æˆç³»ç»Ÿååé‡çš„ä¸‹é™</strong>ã€‚</p><h3 id="åˆ†åŒºç®—æ³•"><a href="#åˆ†åŒºç®—æ³•" class="headerlink" title="åˆ†åŒºç®—æ³•"></a>åˆ†åŒºç®—æ³•</h3><p>ä¸€èˆ¬æ¥è¯´ï¼Œåœ¨ç›¸åŒæ¡ä»¶ä¸‹ï¼Œå †ç©ºé—´è¶Šå¤§ï¼Œä¸€æ¬¡ GC æ—¶æ‰€éœ€è¦çš„æ—¶é—´å°±è¶Šé•¿ï¼Œæœ‰å…³ GC äº§ç”Ÿçš„åœé¡¿ä¹Ÿè¶Šé•¿ã€‚ä¸ºäº†æ›´å¥½çš„æ§åˆ¶ GC äº§ç”Ÿçš„åœé¡¿æ—¶é—´ï¼Œå°†ä¸€å—å¤§çš„å†…å­˜åŒºåŸŸåˆ†å‰²æˆå¤šä¸ªå°å—ï¼Œæ ¹æ®ç›®æ ‡çš„åœé¡¿æ—¶é—´ï¼Œæ¯æ¬¡åˆç†åœ°å›æ”¶è‹¥å¹²ä¸ªå°åŒºé—´ï¼Œè€Œä¸æ˜¯æ•´ä¸ªå †ç©ºé—´ï¼Œä»è€Œå‡å°‘ä¸€æ¬¡ GC æ‰€äº§ç”Ÿçš„åœé¡¿ã€‚</p><p>åˆ†ä»£ç®—æ³•å°†æŒ‰ç…§å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸé•¿çŸ­åˆ’åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œåˆ†åŒºç®—æ³•å°†æ•´ä¸ªå †ç©ºé—´åˆ’åˆ†æˆè¿ç»­çš„ä¸åŒå°åŒºé—´ regionã€‚æ¯ä¸€ä¸ªå°åŒºé—´éƒ½ç‹¬ç«‹ä½¿ç”¨ï¼Œç‹¬ç«‹å›æ”¶ã€‚è¿™ç§ç®—æ³•çš„å¥½å¤„æ˜¯å¯ä»¥æ§åˆ¶ä¸€æ¬¡å›æ”¶å¤šå°‘ä¸ªå°åŒºé—´ã€‚</p><p>æ€»ç»“ï¼šæ³¨æ„ï¼Œè¿™äº›åªæ˜¯åŸºæœ¬çš„ç®—æ³•æ€è·¯ï¼Œå®é™… GC å®ç°è¿‡ç¨‹è¦å¤æ‚çš„å¤šï¼Œç›®å‰è¿˜åœ¨å‘å±•ä¸­çš„å‰æ²¿ GC éƒ½æ˜¯å¤åˆç®—æ³•ï¼Œå¹¶ä¸”å¹¶è¡Œå’Œå¹¶å‘å…¼å¤‡ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;ä¸ºä»€ä¹ˆä¼šæœ‰-GC&quot;&gt;&lt;a href=&quot;#ä¸ºä»€ä¹ˆä¼šæœ‰-GC&quot; class=&quot;headerlink&quot; title=&quot;ä¸ºä»€ä¹ˆä¼šæœ‰ GC&quot;&gt;&lt;/a&gt;ä¸ºä»€ä¹ˆä¼šæœ‰ GC&lt;/h1&gt;&lt;p&gt;æœ¬è´¨ä¸Šæ˜¯å†…å­˜èµ„æºçš„æœ‰é™æ€§ï¼Œå› æ­¤éœ€è¦å¤§å®¶å…±äº«ä½¿ç”¨ï¼Œæ‰‹å·¥ç”³è¯·ï¼Œæ‰‹åŠ¨é‡Šæ”¾ã€‚&lt;/p&gt;
&lt;p&gt;åƒåœ¾æ”¶é›†ï¼Œä¸æ˜¯ Java è¯­è¨€çš„ä¼´ç”Ÿäº§ç‰©ã€‚æ—©åœ¨ 1960 å¹´ï¼Œç¬¬ä¸€é—¨å¼€å§‹ä½¿ç”¨å†…å­˜åŠ¨æ€åˆ†é…å’Œåƒåœ¾æ”¶é›†æŠ€æœ¯çš„ Lisp è¯­è¨€è¯ç”Ÿã€‚&lt;/p&gt;
&lt;p&gt;å…³äºåƒåœ¾æ”¶é›†æœ‰ä¸‰ä¸ªç»å…¸é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å“ªäº›å†…å­˜éœ€è¦å›æ”¶ï¼Ÿ&lt;/li&gt;
&lt;li&gt;ä»€ä¹ˆæ—¶å€™å›æ”¶ï¼Ÿ&lt;/li&gt;
&lt;li&gt;å¦‚ä½•å›æ”¶ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="Javaè¿›é˜¶" scheme="http://yonghong.tech/categories/Java%E8%BF%9B%E9%98%B6/"/>
    
    
    <category term="Javaè¿›é˜¶" scheme="http://yonghong.tech/tags/Java%E8%BF%9B%E9%98%B6/"/>
    
    <category term="JVM" scheme="http://yonghong.tech/tags/JVM/"/>
    
  </entry>
  
  <entry>
    <title>Java è¿›é˜¶ 05 â€”â€” JVM ç›¸å…³å·¥å…·</title>
    <link href="http://yonghong.tech/java-advance/05-jvm-args-tools/"/>
    <id>http://yonghong.tech/java-advance/05-jvm-args-tools/</id>
    <published>2021-06-11T13:00:00.000Z</published>
    <updated>2021-06-11T13:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="JVM-å‘½ä»¤è¡Œå·¥å…·"><a href="#JVM-å‘½ä»¤è¡Œå·¥å…·" class="headerlink" title="JVM å‘½ä»¤è¡Œå·¥å…·"></a>JVM å‘½ä»¤è¡Œå·¥å…·</h2><table><thead><tr><th align="center">å·¥å…·</th><th>ç®€ä»‹</th></tr></thead><tbody><tr><td align="center">java</td><td>Java åº”ç”¨çš„å¯åŠ¨ç¨‹åº</td></tr><tr><td align="center">javac</td><td>JDK å†…ç½®çš„ç¼–è¯‘å·¥å…·</td></tr><tr><td align="center">javap</td><td>åç¼–è¯‘ class æ–‡ä»¶çš„å·¥å…·</td></tr><tr><td align="center">javadoc</td><td>æ ¹æ® Java ä»£ç å’Œæ ‡å‡†æ³¨é‡Š,è‡ªåŠ¨ç”Ÿæˆç›¸å…³çš„APIè¯´æ˜æ–‡æ¡£</td></tr><tr><td align="center">javah</td><td>JNI å¼€å‘æ—¶, æ ¹æ® java ä»£ç ç”Ÿæˆéœ€è¦çš„ .hæ–‡ä»¶ã€‚</td></tr><tr><td align="center">extcheck</td><td>æ£€æŸ¥æŸä¸ª jar æ–‡ä»¶å’Œè¿è¡Œæ—¶æ‰©å±• jar æœ‰æ²¡æœ‰ç‰ˆæœ¬å†²çªï¼Œå¾ˆå°‘ä½¿ç”¨</td></tr><tr><td align="center">jdb</td><td>Java Debugger ; å¯ä»¥è°ƒè¯•æœ¬åœ°å’Œè¿œç«¯ç¨‹åº, å±äº JPDA ä¸­çš„ä¸€ä¸ª demo å®ç°, ä¾›å…¶ä»–è°ƒè¯•å™¨å‚è€ƒã€‚å¼€å‘æ—¶å¾ˆä½¿ç”¨</td></tr><tr><td align="center">jdeps</td><td>æ¢æµ‹ class æˆ– jar åŒ…éœ€è¦çš„ä¾èµ–</td></tr><tr><td align="center">jar</td><td>æ‰“åŒ…å·¥å…·ï¼Œå¯ä»¥å°†æ–‡ä»¶å’Œç›®å½•æ‰“åŒ…æˆä¸º .jar æ–‡ä»¶ï¼›.jar æ–‡ä»¶æœ¬è´¨ä¸Šå°±æ˜¯ zip æ–‡ä»¶, åªæ˜¯åç¼€ä¸åŒã€‚ä½¿ç”¨æ—¶æŒ‰é¡ºåºå¯¹åº”å¥½é€‰é¡¹å’Œå‚æ•°å³å¯ã€‚</td></tr><tr><td align="center">keytool</td><td>å®‰å…¨è¯ä¹¦å’Œå¯†é’¥çš„ç®¡ç†å·¥å…·; ï¼ˆæ”¯æŒç”Ÿæˆã€å¯¼å…¥ã€å¯¼å‡ºç­‰æ“ä½œï¼‰</td></tr><tr><td align="center">jarsigner</td><td>JAR æ–‡ä»¶ç­¾åå’ŒéªŒè¯å·¥å…·</td></tr><tr><td align="center">policytool</td><td>å®é™…ä¸Šè¿™æ˜¯ä¸€æ¬¾å›¾å½¢ç•Œé¢å·¥å…·, ç®¡ç†æœ¬æœºçš„ Java å®‰å…¨ç­–ç•¥</td></tr><tr><td align="center">jps/jinfo</td><td>æŸ¥çœ‹ java è¿›ç¨‹</td></tr><tr><td align="center"><strong>jstat</strong></td><td>æŸ¥çœ‹ JVM å†…éƒ¨ gc ç›¸å…³ä¿¡æ¯</td></tr><tr><td align="center"><strong>jmap</strong></td><td>æŸ¥çœ‹ heap æˆ–ç±»å ç”¨ç©ºé—´ç»Ÿè®¡</td></tr><tr><td align="center"><strong>jstack</strong></td><td>æŸ¥çœ‹çº¿ç¨‹ä¿¡æ¯</td></tr><tr><td align="center">jcmd</td><td>æ‰§è¡Œ JVM ç›¸å…³åˆ†æå‘½ä»¤ï¼ˆæ•´åˆå‘½ä»¤ï¼‰</td></tr><tr><td align="center">jrunscript/jjs</td><td>æ‰§è¡Œ js å‘½ä»¤</td></tr></tbody></table><span id="more"></span><h3 id="å¸¸ç”¨å‘½ä»¤å®ä¾‹"><a href="#å¸¸ç”¨å‘½ä»¤å®ä¾‹" class="headerlink" title="å¸¸ç”¨å‘½ä»¤å®ä¾‹"></a>å¸¸ç”¨å‘½ä»¤å®ä¾‹</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">jps -l</span><br><span class="line">jps -mlv </span><br><span class="line"><span class="meta">#</span><span class="bash"> -l åˆ—å‡º Java è¿›ç¨‹</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -m åˆ—å‡ºä¼ é€’ç»™ main æ–¹æ³•çš„å‚æ•°</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -v åˆ—å‡ºä¼ é€’ç»™ JVM çš„å‚æ•°</span></span><br><span class="line"></span><br><span class="line">jinfo pid</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å‚è€ƒï¼šhttps://blog.csdn.net/maosijunzi/article/details/46049117</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> jstat   å†…å­˜ä¿¡æ¯</span></span><br><span class="line">jstat -gc pid 1000 1000 # æ¯1000msæ‰“å°1æ¬¡ï¼Œæ‰“å°1000æ¬¡</span><br><span class="line">S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT</span><br><span class="line">4352.0 4352.0 4352.0  0.0   34944.0  10175.9   198132.0   152461.3  142132.0 134139.5 19624.0 16988.2     26    0.201   0      0.000    0.201</span><br><span class="line">4352.0 4352.0 4352.0  0.0   34944.0  10175.9   198132.0   152461.3  142132.0 134139.5 19624.0 16988.2     26    0.201   0      0.000    0.201</span><br><span class="line">4352.0 4352.0 4352.0  0.0   34944.0  10175.9   198132.0   152461.3  142132.0 134139.5 19624.0 16988.2     26    0.201   0      0.000    0.201</span><br><span class="line"><span class="meta">#</span><span class="bash"> S0Cï¼šç¬¬ä¸€ä¸ªå¹¸å­˜åŒºçš„å¤§å°</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> S1Cï¼šç¬¬äºŒä¸ªå¹¸å­˜åŒºçš„å¤§å°</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> S0Uï¼šç¬¬ä¸€ä¸ªå¹¸å­˜åŒºçš„ä½¿ç”¨å¤§å°</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> S1Uï¼šç¬¬äºŒä¸ªå¹¸å­˜åŒºçš„ä½¿ç”¨å¤§å°</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ECï¼šä¼Šç”¸å›­åŒºçš„å¤§å°</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> EUï¼šä¼Šç”¸å›­åŒºçš„ä½¿ç”¨å¤§å°</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> OCï¼šè€å¹´ä»£å¤§å°</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> OUï¼šè€å¹´ä»£ä½¿ç”¨å¤§å°</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> MCï¼šæ–¹æ³•åŒºå¤§å°</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> MUï¼šæ–¹æ³•åŒºä½¿ç”¨å¤§å°</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> CCSCï¼šå‹ç¼©ç±»ç©ºé—´å¤§å°</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> CCSUï¼šå‹ç¼©ç±»ç©ºé—´ä½¿ç”¨å¤§å°</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> YGCï¼šå¹´è½»ä»£åƒåœ¾å›æ”¶æ¬¡æ•°</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> YGCTï¼šå¹´è½»ä»£åƒåœ¾å›æ”¶æ¶ˆè€—æ—¶é—´</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> FGCï¼šè€å¹´ä»£åƒåœ¾å›æ”¶æ¬¡æ•°</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> FGCTï¼šè€å¹´ä»£åƒåœ¾å›æ”¶æ¶ˆè€—æ—¶é—´</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> GCTï¼šåƒåœ¾å›æ”¶æ¶ˆè€—æ€»æ—¶é—´</span></span><br><span class="line"></span><br><span class="line">jstat -gcutil pid 1000 1000</span><br><span class="line">  S0     S1     E      O      M     CCS    YGC     YGCT    FGC    FGCT     GCT</span><br><span class="line">  0.00  79.37  72.86  78.50  94.45  86.65     27    0.207     0    0.000    0.207</span><br><span class="line">  0.00  79.37  72.86  78.50  94.45  86.65     27    0.207     0    0.000    0.207</span><br><span class="line">  0.00  79.37  72.86  78.50  94.45  86.65     27    0.207     0    0.000    0.207</span><br><span class="line"><span class="meta">#</span><span class="bash"> S0ï¼šå¹¸å­˜1åŒºå½“å‰ä½¿ç”¨æ¯”ä¾‹</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> S1ï¼šå¹¸å­˜2åŒºå½“å‰ä½¿ç”¨æ¯”ä¾‹</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Eï¼šä¼Šç”¸å›­åŒºä½¿ç”¨æ¯”ä¾‹</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Oï¼šè€å¹´ä»£ä½¿ç”¨æ¯”ä¾‹</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Mï¼šå…ƒæ•°æ®åŒºä½¿ç”¨æ¯”ä¾‹</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> CCSï¼šå‹ç¼©ä½¿ç”¨æ¯”ä¾‹</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> YGCï¼šå¹´è½»ä»£åƒåœ¾å›æ”¶æ¬¡æ•°</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> FGCï¼šè€å¹´ä»£åƒåœ¾å›æ”¶æ¬¡æ•°</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> FGCTï¼šè€å¹´ä»£åƒåœ¾å›æ”¶æ¶ˆè€—æ—¶é—´</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> GCTï¼šåƒåœ¾å›æ”¶æ¶ˆè€—æ€»æ—¶é—´</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> åªçœ‹ Young æˆ– Old åŒº</span></span><br><span class="line">jstat -gcnew pid</span><br><span class="line">jstat -gcold pid</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> jmap    å¯¹è±¡ä¿¡æ¯</span></span><br><span class="line">jmap -heap pid      # å †å†…å­˜</span><br><span class="line">jmap -histo pid     # ç›´æ–¹å›¾</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> jstack  çº¿ç¨‹ä¿¡æ¯</span></span><br><span class="line">jstack -l pid       # å°†çº¿ç¨‹ç›¸å…³çš„ locks ä¿¡æ¯ä¸€èµ·è¾“ å‡ºï¼Œæ¯”å¦‚æŒæœ‰çš„é”ï¼Œç­‰å¾…çš„é”ã€‚</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> jcmd ç»¼åˆäº†å‰é¢çš„å‡ ä¸ªå‘½ä»¤</span></span><br><span class="line">jcmd pid VM.version</span><br><span class="line">jcmd pid VM.flags</span><br><span class="line">jcmd pid VM.command_line</span><br><span class="line">jcmd pid VM.system_properties</span><br><span class="line">jcmd pid Thread.print</span><br><span class="line">jcmd pid GC.class_histogram</span><br><span class="line">jcmd pid GC.heap_info</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å½“curlå‘½ä»¤ç”¨</span></span><br><span class="line">jrunscript -e &quot;cat(&#x27;http://www.baidu.com&#x27;)&quot; </span><br><span class="line"><span class="meta">#</span><span class="bash"> æ‰§è¡Œjsè„šæœ¬ç‰‡æ®µ</span></span><br><span class="line">jrunscript -e &quot;print(&#x27;hello,kk.jvm&#x27;+1)&quot; </span><br><span class="line"><span class="meta">#</span><span class="bash"> æ‰§è¡Œjsæ–‡ä»¶</span> </span><br><span class="line">jrunscript -l js -f /XXX/XXX/test.js</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="JVM-å›¾å½¢åŒ–å·¥å…·"><a href="#JVM-å›¾å½¢åŒ–å·¥å…·" class="headerlink" title="JVM å›¾å½¢åŒ–å·¥å…·"></a>JVM å›¾å½¢åŒ–å·¥å…·</h2><h3 id="jconsole"><a href="#jconsole" class="headerlink" title="jconsole"></a>jconsole</h3><p>JDK è‡ªå¸¦å·¥å…·</p><p><img src="https://up-img.yonghong.tech/pic/2021/04/03-17-11-jconsole-mem-MJI7ul.png" alt="jconsole-å†…å­˜"><br><img src="https://up-img.yonghong.tech/pic/2021/04/03-17-12-jconsole-thread-b0RSWW.png" alt="jconsole-çº¿ç¨‹"><br><img src="https://up-img.yonghong.tech/pic/2021/04/03-17-12-jconsole-guide-KgMCzE.png" alt="jconsole-æ¦‚è§ˆ"></p><h3 id="jvisualvm"><a href="#jvisualvm" class="headerlink" title="jvisualvm"></a>jvisualvm</h3><p><img src="https://up-img.yonghong.tech/pic/2021/04/03-17-15-jvisualvm-guide-JU8yC7.png" alt="jvisualvm"></p><h3 id="VisualGC"><a href="#VisualGC" class="headerlink" title="VisualGC"></a>VisualGC</h3><p><img src="https://up-img.yonghong.tech/pic/2021/04/03-17-16-VisualGC-poZ5Sm.png" alt="VisualGC"></p><h3 id="jmc"><a href="#jmc" class="headerlink" title="jmc"></a>jmc</h3><p>éœ€è¦å®‰è£… Oracle JDKã€‚</p><p><img src="https://up-img.yonghong.tech/pic/2021/04/03-17-16-jmc-yNni2V.png" alt="jmc"><br><img src="https://up-img.yonghong.tech/pic/2021/04/03-17-16-jmc-1-5ultLq.png" alt="jmc-1"><br><img src="https://up-img.yonghong.tech/pic/2021/04/03-17-16-jmc-2-gKxxpd.png" alt="jmc-2"><br><img src="https://up-img.yonghong.tech/pic/2021/04/03-17-16-jmc-3-GleUio.png" alt="jmc-3"></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;JVM-å‘½ä»¤è¡Œå·¥å…·&quot;&gt;&lt;a href=&quot;#JVM-å‘½ä»¤è¡Œå·¥å…·&quot; class=&quot;headerlink&quot; title=&quot;JVM å‘½ä»¤è¡Œå·¥å…·&quot;&gt;&lt;/a&gt;JVM å‘½ä»¤è¡Œå·¥å…·&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;center&quot;&gt;å·¥å…·&lt;/th&gt;
&lt;th&gt;ç®€ä»‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;java&lt;/td&gt;
&lt;td&gt;Java åº”ç”¨çš„å¯åŠ¨ç¨‹åº&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;javac&lt;/td&gt;
&lt;td&gt;JDK å†…ç½®çš„ç¼–è¯‘å·¥å…·&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;javap&lt;/td&gt;
&lt;td&gt;åç¼–è¯‘ class æ–‡ä»¶çš„å·¥å…·&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;javadoc&lt;/td&gt;
&lt;td&gt;æ ¹æ® Java ä»£ç å’Œæ ‡å‡†æ³¨é‡Š,è‡ªåŠ¨ç”Ÿæˆç›¸å…³çš„APIè¯´æ˜æ–‡æ¡£&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;javah&lt;/td&gt;
&lt;td&gt;JNI å¼€å‘æ—¶, æ ¹æ® java ä»£ç ç”Ÿæˆéœ€è¦çš„ .hæ–‡ä»¶ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;extcheck&lt;/td&gt;
&lt;td&gt;æ£€æŸ¥æŸä¸ª jar æ–‡ä»¶å’Œè¿è¡Œæ—¶æ‰©å±• jar æœ‰æ²¡æœ‰ç‰ˆæœ¬å†²çªï¼Œå¾ˆå°‘ä½¿ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;jdb&lt;/td&gt;
&lt;td&gt;Java Debugger ; å¯ä»¥è°ƒè¯•æœ¬åœ°å’Œè¿œç«¯ç¨‹åº, å±äº JPDA ä¸­çš„ä¸€ä¸ª demo å®ç°, ä¾›å…¶ä»–è°ƒè¯•å™¨å‚è€ƒã€‚å¼€å‘æ—¶å¾ˆä½¿ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;jdeps&lt;/td&gt;
&lt;td&gt;æ¢æµ‹ class æˆ– jar åŒ…éœ€è¦çš„ä¾èµ–&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;jar&lt;/td&gt;
&lt;td&gt;æ‰“åŒ…å·¥å…·ï¼Œå¯ä»¥å°†æ–‡ä»¶å’Œç›®å½•æ‰“åŒ…æˆä¸º .jar æ–‡ä»¶ï¼›.jar æ–‡ä»¶æœ¬è´¨ä¸Šå°±æ˜¯ zip æ–‡ä»¶, åªæ˜¯åç¼€ä¸åŒã€‚ä½¿ç”¨æ—¶æŒ‰é¡ºåºå¯¹åº”å¥½é€‰é¡¹å’Œå‚æ•°å³å¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;keytool&lt;/td&gt;
&lt;td&gt;å®‰å…¨è¯ä¹¦å’Œå¯†é’¥çš„ç®¡ç†å·¥å…·; ï¼ˆæ”¯æŒç”Ÿæˆã€å¯¼å…¥ã€å¯¼å‡ºç­‰æ“ä½œï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;jarsigner&lt;/td&gt;
&lt;td&gt;JAR æ–‡ä»¶ç­¾åå’ŒéªŒè¯å·¥å…·&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;policytool&lt;/td&gt;
&lt;td&gt;å®é™…ä¸Šè¿™æ˜¯ä¸€æ¬¾å›¾å½¢ç•Œé¢å·¥å…·, ç®¡ç†æœ¬æœºçš„ Java å®‰å…¨ç­–ç•¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;jps/jinfo&lt;/td&gt;
&lt;td&gt;æŸ¥çœ‹ java è¿›ç¨‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;&lt;strong&gt;jstat&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŸ¥çœ‹ JVM å†…éƒ¨ gc ç›¸å…³ä¿¡æ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;&lt;strong&gt;jmap&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŸ¥çœ‹ heap æˆ–ç±»å ç”¨ç©ºé—´ç»Ÿè®¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;&lt;strong&gt;jstack&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŸ¥çœ‹çº¿ç¨‹ä¿¡æ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;jcmd&lt;/td&gt;
&lt;td&gt;æ‰§è¡Œ JVM ç›¸å…³åˆ†æå‘½ä»¤ï¼ˆæ•´åˆå‘½ä»¤ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;jrunscript/jjs&lt;/td&gt;
&lt;td&gt;æ‰§è¡Œ js å‘½ä»¤&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;</summary>
    
    
    
    <category term="Javaè¿›é˜¶" scheme="http://yonghong.tech/categories/Java%E8%BF%9B%E9%98%B6/"/>
    
    
    <category term="Javaè¿›é˜¶" scheme="http://yonghong.tech/tags/Java%E8%BF%9B%E9%98%B6/"/>
    
    <category term="JVM" scheme="http://yonghong.tech/tags/JVM/"/>
    
  </entry>
  
  <entry>
    <title>è¯»ä¹¦ç¬”è®°ï¼ˆä¸€ï¼‰</title>
    <link href="http://yonghong.tech/reading-notes/001/"/>
    <id>http://yonghong.tech/reading-notes/001/</id>
    <published>2021-05-31T13:00:00.000Z</published>
    <updated>2021-05-31T13:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ã€Šç§’èµã€‹æ—æ¡‚æ"><a href="#ã€Šç§’èµã€‹æ—æ¡‚æ" class="headerlink" title="ã€Šç§’èµã€‹æ—æ¡‚æ"></a>ã€Šç§’èµã€‹æ—æ¡‚æ</h2><p>1.ä½ çš„æ ·å­é‡Œï¼Œæœ‰ä½ èµ°è¿‡çš„è·¯ï¼Œè¯»è¿‡çš„ä¹¦ï¼Œçœ‹è¿‡çš„é£æ™¯ã€‚</p><p>2.æƒ³å½“åƒåœ¾åƒåƒåœ¾ï¼Œæƒ³å½“è¾£æ¤’åƒè¾£æ¤’ï¼Œæƒ³å½“ä»€ä¹ˆè‡ªå·±è¦æƒ³å¥½åƒä»€ä¹ˆã€‚</p><ul><li>åˆ›å»ºâ€œå¥½ä¸œè¥¿â€æ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢æ”¾å¥½çš„è®¾è®¡ä¸ç…§ç‰‡ã€å‡ºè‰²çš„æ¼”è®²ã€æœ‰è§åœ°çš„æ–‡ç« ã€æœ‰è¶£çš„äº‹ç‰©ã€‚</li><li>å‡†å¤‡ä¸€ä¸ªâ€œå¥½ä¸œè¥¿â€æœ¬å­ï¼Œéšæ—¶è®°å½•æœ‰è¶£çš„å¯¹è¯å’Œæ–‡å­—ï¼Œè¡¥å……æ–°è¯æ±‡ï¼Œä¸æ–­ä¸°å¯Œè‡ªå·±çš„å‚¨å¤‡ã€‚</li><li>å°†è‡ªå·±è®¤ä¸ºâ€œæœ‰æ„Ÿè§‰â€çš„è¯æ±‡è®°ä¸‹æ¥ï¼Œæ¥ç€å°†è¿™äº›è¯æ±‡åˆ†ç»™ä¸åŒçš„äººå’Œä¸åŒçš„äº‹ç‰©ï¼Œæƒ³æƒ³è¿™äº›è¯è¯¥ç»™è°ï¼Œä¸ä»€ä¹ˆä¸œè¥¿ç»“åˆæœ€æœ‰æ„æ€ã€‚</li><li>è¯»å®Œä¸€æœ¬ä¹¦ï¼Œå†™ä¸ªç®€çŸ­çš„è¯»ä¹¦å¿ƒå¾—ï¼›çœ‹å®Œä¸€éƒ¨ç”µå½±ï¼Œè®°å½•è‡ªå·±çš„æ„Ÿå—ã€‚æœ‰æ—¶é—´å¤šå†™ï¼Œå¿™çš„è¯å†™å‡ è¡Œå­—ä¹Ÿå¯ä»¥ã€‚</li><li>ä½ è®°å½•çš„ç‚¹ç‚¹æ»´æ»´å°†ä¼šæˆä¸ºä½ ä¸ªäººçš„å®è´µèµ„äº§ï¼Œä½ çš„ç¼ªæ–¯å¥³ç¥ï¼Œæ›´æ˜¯è®©ä½ å·¥ä½œé¡ºåˆ©ã€è¡¨ç°ä¼˜ç§€çš„åˆ©å™¨ã€‚</li></ul><p>3.äººèƒ½æƒ³è±¡åˆ°çš„ä¸€åˆ‡éƒ½æ˜¯çœŸå®çš„ã€‚â€”â€”æ¯•åŠ ç´¢</p><span id="more"></span><hr><h2 id="ã€Šè´¢åŠ¡è‡ªç”±ä¹‹è·¯-Iã€‹åšå¤šÂ·èˆè´¹å°”"><a href="#ã€Šè´¢åŠ¡è‡ªç”±ä¹‹è·¯-Iã€‹åšå¤šÂ·èˆè´¹å°”" class="headerlink" title="ã€Šè´¢åŠ¡è‡ªç”±ä¹‹è·¯ Iã€‹åšå¤šÂ·èˆè´¹å°”"></a>ã€Šè´¢åŠ¡è‡ªç”±ä¹‹è·¯ Iã€‹åšå¤šÂ·èˆè´¹å°”</h2><p>1.æˆ‘å°†ç”Ÿæ´»ç®€åŒ–ä¸º5ä¸ªé¢†åŸŸï¼šå¥åº·ã€è´¢åŠ¡ã€å…³ç³»ã€æƒ…æ„Ÿå’Œäººç”Ÿæ„ä¹‰ã€‚5ä¸ªé¢†åŸŸéƒ½åŒç­‰é‡è¦ã€‚</p><p>2.ä¸ºä»€ä¹ˆäººä»¬æƒ³åœ¨çŸ­æœŸå†…å˜å¾—å¯Œæœ‰ï¼Ÿå› ä¸ºä»–ä»¬æƒ³è·å¾—è¶³å¤Ÿçš„èƒ½ä¸ºä»–ä»¬æœåŠ¡çš„é‡‘é’±ã€‚å› ä¸ºä»–ä»¬æƒ³æ‹¥æœ‰ä¸€å°èµšé’±æœºå™¨ï¼Œè€Œéç©·å…¶ä¸€ç”Ÿå½“ä¸€å°èµšé’±æœºå™¨ã€‚å› ä¸ºä»–ä»¬æƒ³æ‹¥æœ‰è¶³å¤Ÿçš„èµ„é‡‘ï¼Œä»¥è¿‡ä¸Šä¸€ç§æ”¶æ”¯å¹³è¡¡çš„ç”Ÿæ´»ã€‚</p><p>3.ä½ çš„äº‹ä¸šå»ºç«‹åœ¨ä½ æœ€å¤§çš„çˆ±å¥½ä¹‹ä¸Šã€‚ç”¨ä½ çš„çˆ±å¥½æ¥èµšé’±ã€‚èŠ±ç‚¹æ—¶é—´åˆ†æä¸€ä¸‹ï¼Œä½ çœŸæ­£æ„Ÿå…´è¶£çš„æ˜¯ä»€ä¹ˆã€ä½ çš„æ‰èƒ½åœ¨å“ªæ–¹é¢ï¼Œä¹‹åä½ æ‰æœ‰å¯èƒ½ä»äº‹ä¸€ä»½è‡ªå·±æ—¢æ„Ÿå…´è¶£åˆèƒ½èµšé’±çš„å·¥ä½œã€‚</p><p>4.è´£ä»»è¿™ä¸ªå•è¯åœ¨è‹±è¯­ä¸­å«ä½œâ€œresponsibilityâ€ï¼Œåœ¨è¿™ä¸ªå•è¯ä¸­éšè—ç€å¦å¤–ä¸¤ä¸ªå•è¯â€œresponseâ€ï¼ˆå›åº”ï¼‰å’Œâ€œabilityâ€ï¼ˆæŠ€å·§ï¼‰ã€‚å› æ­¤ï¼Œè´£ä»»è¿™ä¸€è¯ç”¨è‹±è¯­æ¥è§£é‡Šå°±æ˜¯ï¼šæœ‰æŠ€å·§åœ°è¿›è¡Œå›åº”ã€‚ä»¥äº‰åµåº”å¯¹äº‰æ‰§ï¼Œä»¥å†²çªåº”å¯¹æŒ‘è¡…ï¼Œç»éæœ€ä½³çš„é—®é¢˜è§£å†³æ–¹å¼ã€‚</p><p>5.å¦‚æœæçš„é—®é¢˜æ˜¯â€œè°æ¥è´Ÿè´£ä»»â€ï¼Œé‚£æˆ‘ä»¬å°±æ˜¯åœ¨å¯»æ‰¾å€Ÿå£ã€‚å½“æˆ‘ä»¬è¯´â€œä½ è´Ÿæœ‰è´£ä»»â€æ—¶ï¼Œå°†äº‹æƒ…å¼•å‘ç§¯ææ–¹å‘çš„æœºä¼šå°±æ¶ˆå¤±äº†ã€‚è€Œä¸”ï¼Œè¿™ä¸ªå…³äºè´£ä»»çš„é—®é¢˜è¿˜ä¼šå°†æˆ‘ä»¬ä¸€ç›´å¼•å‘è¿‡å»ã€‚æ­£ç¡®çš„æé—®åº”è¯¥æ˜¯ï¼šâ€œåœ¨å½“æ—¶è°åº”è¯¥å¯¹æ­¤è´Ÿè´£ï¼Ÿâ€ä½†ä½ ç°åœ¨ä¸èƒ½æ‹“å®½ä½ å½“æ—¶çš„å¯æ§é¢†åŸŸï¼Œæ‰€ä»¥éœ€è¦å°†ç²¾åŠ›è¿ç”¨åœ¨å½“ä¸‹ã€‚æˆ‘ä»¬æå‡ºçš„é—®é¢˜ä¹Ÿåº”è¯¥ä»¥å½“ä¸‹ä¸ºä¸­å¿ƒï¼šæˆ‘ä»¬ç°åœ¨èƒ½åšäº›ä»€ä¹ˆï¼Ÿ</p><p>6.æ—¥è®°æœ¬æ˜¯ç©ºç™½çš„ä¹¦ç±ï¼Œæ˜¯ä½ å¯ä»¥è‡ªå·±å†™ä½œçš„ä¹¦ç±ï¼Œä¸“å±äºä½ ä¸ªäººã€‚æ¯ä¸ªäººéƒ½åº”è¯¥æ¯å¤©å†™è‡ªå·±çš„æˆåŠŸæ—¥è®°ï¼Œè®°å½•ä¸‹å½“å¤©æ‰€æœ‰çš„æˆåŠŸäº‹ä»¶ï¼šä½ è·å¾—çš„æ¯ä¸€æ¬¡å¤¸å¥–å’Œæ¯ä¸€æ¬¡è®¤å¯ï¼Œæ— è®ºæ˜¯ä½ éµå®ˆçºªå¾‹ï¼Œå®Œæˆä¸€é¡¹ä»»åŠ¡ï¼Œè¿˜æ˜¯ä½ ä½¿æŸäººå¿«ä¹ã€‚â€¦â€¦ éšç€æ—¶é—´çš„æ¨ç§»ï¼Œä½ è¿˜éœ€è¦ä¸€æœ¬æ€æƒ³æ—¥è®°æœ¬ï¼ˆè®°å½•ä½ çš„æ‰€æœ‰åˆ›æ„ï¼‰ã€ä¸€æœ¬å…³ç³»æ—¥è®°æœ¬ï¼ˆè®°å½•æ‰€æœ‰ä½¿ä½ å¿«ä¹çš„å…³ç³»ï¼‰ã€ä¸€æœ¬çŸ¥è¯†æ—¥è®°æœ¬ï¼ˆè®°å½•ä½ ä»è‡ªå·±çŠ¯è¿‡çš„é”™è¯¯ä¸­å­¦åˆ°çš„æ‰€æœ‰ä¸œè¥¿ï¼Œä½¿ä½ ä»¥åä¸ä¼šå†é‡è¹ˆè¦†è¾™ï¼‰ï¼Œä»¥åŠå…¶ä»–å†…å®¹çš„æ—¥è®°æœ¬â€¦â€¦</p><p>7.å»ä¸ºä½ çš„åŠ£åŠ¿æ‰¾åˆ°è§£å†³æ–¹æ¡ˆï¼Œå»ä¸ºä½ çš„ä¼˜åŠ¿æ‰¾ä¸€ä¸ªæ•™ç»ƒå§ï¼</p><p>8.ä½ åœ¨æœªæ¥5å¹´å½“ä¸­å¯ä»¥ä¼‘æ¯ä¸€æ•´å¹´ã€‚åœ¨ä¸€æ•´å¹´çš„æ—¶é—´é‡Œï¼Œä½ å¯ä»¥åšæƒ³åšçš„ä»»ä½•äº‹ï¼Œå¹¶æœ‰èƒ½åŠ›æ”¯ä»˜è¿™ä¸€å¹´çš„æ‰€æœ‰è´¦å•ã€‚ä½ å¯ä»¥å»æ—…è¡Œï¼Œåšä½¿ä½ å¿«ä¹ä½†å¹³æ—¶åˆæ²¡æœ‰è¶³å¤Ÿæ—¶é—´æ¥åšçš„äº‹æƒ…ã€‚</p><p>9.ä¸€è‡´æ€§ä¸æ˜¯ç»å¯¹çš„ç¾å¾·ã€‚å¦‚æœæˆ‘ä»Šå¤©çš„è§‚ç‚¹ä¸æ˜¨å¤©ä¸åŒï¼Œæ˜¯ä¸æ˜¯å°±å› ä¸ºæ”¹å˜è‡ªèº«æ–¹å‘è€Œæ²¡æœ‰ä¸€è‡´æ€§äº†å‘¢ï¼Ÿæˆ‘çš„ç¡®ä¸è‡ªå·±çš„è¿‡å»ä¸ç›¸ä¸€è‡´äº†ï¼Œä½†äºçœŸç†è€Œè¨€ï¼Œæˆ‘æ˜¯ä¿æŒä¸€è‡´äº†â€¦â€¦ä¸€è‡´æ€§åœ¨äºæŒ‰ç…§è®¤çŸ¥å»è¿½éšçœŸç†ã€‚</p><p>10.å€Ÿå£æ˜¯æˆ‘ä»¬è®²ç»™è‡ªå·±å¬çš„è°è¨€ã€‚æˆ‘ä»¬åº”è¯¥è‡ªå·±å¯¹è‡ªå·±è¶Šæ¥è¶Šè¯šå®ï¼Œæ‰¿æ‹…è¶Šæ¥è¶Šå¤šçš„è´£ä»»ã€‚</p><p>11.å…¨ä¸–ç•Œæœ€å¯Œæœ‰çš„æŠ•èµ„è€…æ²ƒä¼¦Â·å·´è²ç‰¹è¯´è¿‡ï¼šâ€œæ¯•ç«Ÿï¼Œåªæœ‰å½“æ½®æ°´é€€å»æ—¶ï¼Œä½ æ‰çŸ¥é“è°åœ¨è£¸æ³³ã€‚â€</p><p>12.ææƒ§æ°¸è¿œä¸åº”è¯¥å·¦å³ä½ çš„å†³å®šã€‚å› ä¸ºä¸–ç•Œä¸Šä¸å­˜åœ¨å¤±è´¥ã€‚æ˜¯çš„ï¼Œä½ æ²¡æœ‰çœ‹é”™ï¼šä¸–ç•Œä¸Šä¸å­˜åœ¨å¤±è´¥ã€‚ç¾å›½è„±å£ç§€å¤§å¸ˆå¥¥æ™®æ‹‰Â·æ¸©å¼—ç‘æ›¾ç»è¯´è¿‡ï¼šâ€œæˆ‘ä¸ç›¸ä¿¡å¤±è´¥ã€‚å› ä¸ºå¦‚æœä½ äº«å—äº†è¿‡ç¨‹ä¸­çš„ä¹è¶£ï¼Œé‚£è¿™å°±ä¸æ˜¯å¤±è´¥ã€‚â€</p><p>13.â€œå¦‚æœä½ ä¸ç»å¸¸çŠ¯é”™ï¼Œè¡¨æ˜ä½ å†’çš„é£é™©ä¸å¤Ÿï¼Œæ²¡æœ‰ä»˜å‡ºæœ€å¤§çš„åŠªåŠ›ã€‚â€</p><hr><h2 id="ã€Šè´¢åŠ¡è‡ªç”±ä¹‹è·¯-IIã€‹åšå¤šÂ·èˆè´¹å°”"><a href="#ã€Šè´¢åŠ¡è‡ªç”±ä¹‹è·¯-IIã€‹åšå¤šÂ·èˆè´¹å°”" class="headerlink" title="ã€Šè´¢åŠ¡è‡ªç”±ä¹‹è·¯ IIã€‹åšå¤šÂ·èˆè´¹å°”"></a>ã€Šè´¢åŠ¡è‡ªç”±ä¹‹è·¯ IIã€‹åšå¤šÂ·èˆè´¹å°”</h2><p>1.æ­£å¦‚çˆ±å› æ–¯å¦ï¼ˆEinsteinï¼‰æ‰€è¨€ï¼Œæˆ‘ç›¸ä¿¡â€œæ¯ä¸ªå­©å­éƒ½å¯èƒ½æ˜¯å¤©æ‰â€ã€‚æˆ‘ä»¬ä¸­çš„æ¯ä¸ªäººï¼Œæ‚¨å’Œæˆ‘è‡³å°‘åœ¨æŸæ–¹é¢æœ‰ç€ç‰¹æ®Šçš„å¤©èµ‹ï¼Œè€Œæˆ‘ä»¬åº”è¯¥æŠŠè¿™äº›å¤©èµ‹å‘æŒ¥åˆ°æè‡´ã€‚</p><p>2.å¯¹äºå¤§å¤šæ•°äººæ¥è¯´ï¼Œè–ªæ°´å…¶å®æ˜¯ç»™è‡ªå·±çš„èµ”å¿è´¹ã€‚</p><p>3.å½“æ‚¨æˆåŠŸæ—¶ï¼Œç”Ÿæ´»çš„å¤§é—¨ä¸ºæ‚¨æ•å¼€ã€‚è™½ç„¶åœ¨é€šå‘èƒœåˆ©çš„é“è·¯ä¸Šï¼Œæ‚¨å°†ä¼šå¸¸å¸¸çœ‹åˆ°åœ°ç‹±ï¼Œç„¶è€Œç”Ÿæ´»å°±æ˜¯å¦‚æ­¤ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨åšæŒæ¢¦æƒ³ï¼Œå°±ä¸ä¼šè¢«æ‰“å€’ã€‚æ‚¨å°†å¾—åˆ°æƒ³å¾—åˆ°çš„ä¸€åˆ‡ï¼Œè¿˜æœ‰å¾ˆå¤šå¾ˆå¤šå…¶ä»–çš„ä¸œè¥¿ã€‚<br>â€”â€”å¼—è±æ˜æ€ï¼ˆJ.Flemmingsï¼‰</p><p>4.ä¸€å¹¢æˆ¿å­æ˜¯ä¸€ç§è´Ÿå€ºï¼Œè€ŒéæŠ•èµ„ã€‚å¹¶ä¸”ï¼Œä»–å¸Œæœ›æˆ‘é¦–å…ˆè¿›è¡ŒæŠ•èµ„ã€‚ä»–çš„åŸåˆ™æ˜¯ï¼šâ€œå½“æ‚¨æ”’å¤Ÿä¸€å®šæ•°é‡çš„èµ„é‡‘ä¹‹åï¼Œå†è´­ç½®æˆ¿äº§ã€‚è€Œä¸”ï¼Œæˆ¿å­çš„ä»·å€¼ä¸åº”è¶…å‡ºå¹´å‡€æ”¶å…¥çš„4å€ï¼Œå¹¶ä¸”æ‚¨æ¯æœˆåˆ†æœŸä»˜æ¬¾ä¸åº”è¶…è¿‡æœˆæ”¶å…¥çš„25%ã€‚â€</p><p>5.è®¸å¤šäººä»…ä»…ä»ç»æµè§’åº¦æ¥è€ƒè™‘ä»–ä»¬çš„ä¸»è¦äº‹ä¸šã€‚ä»–ä»¬éµå¾ªè¿™æ ·çš„ä¿¡æ¡ï¼šâ€œä»€ä¹ˆèƒ½èµšé’±ï¼Œä»€ä¹ˆå°±æ˜¯æˆ‘çš„ä¸»è¦äº‹ä¸šã€‚â€ä¾æˆ‘çœ‹ï¼Œè¿™æ˜¯ä¸ªå®Œå…¨é”™è¯¯çš„å¼€ç«¯ã€‚</p><hr><h2 id="ã€ŠæƒåŠ›ã€‹æ°å¼—ç‘Â·è²ä½›"><a href="#ã€ŠæƒåŠ›ã€‹æ°å¼—ç‘Â·è²ä½›" class="headerlink" title="ã€ŠæƒåŠ›ã€‹æ°å¼—ç‘Â·è²ä½›"></a>ã€ŠæƒåŠ›ã€‹æ°å¼—ç‘Â·è²ä½›</h2><p>1.å¤„åœ¨ä¸€ä¸ªæƒåŠ›å°ã€åœ°ä½ä½çš„èŒä½ä¸Šå¯èƒ½ä¼šå±å®³ä½ çš„å¥åº·ï¼Œç›¸åï¼Œæ‹¥æœ‰æƒåŠ›åŠç›¸åº”çš„æ§åˆ¶æƒåˆ™ä¼šå»¶é•¿ä½ çš„å¯¿å‘½ã€‚</p><p>2.ä½ è¦å…‹æœè‡ªå·±è¿™ä¸ªéšœç¢ï¼Œå…‹æœå¯¹è‡ªæˆ‘å½¢è±¡çš„è¿‡åˆ†å…³æ³¨ï¼Œæˆ–è€…æ˜¯ç‰¹åˆ«åœ¨æ„åˆ«äººå¯¹ä½ çš„çœ‹æ³•ã€‚æ— è®ºå¦‚ä½•ï¼Œå…¶ä»–äººä¸ä¼šç‰¹åˆ«å…³å¿ƒæˆ–æƒ¦è®°ä½ ï¼Œä»–ä»¬å…³æ³¨çš„ä¸»è¦æ˜¯ä»–ä»¬è‡ªå·±ã€‚å¦‚æœä½ ä¸å»å°è¯•è·å¾—å½±å“åŠ›ï¼Œä½ ä¹Ÿè®¸èƒ½å¤Ÿç»´æŠ¤è‰¯å¥½çš„å½¢è±¡ï¼Œä½†å´æ— æ³•ç™»ä¸ŠæƒåŠ›çš„é¡¶å³°ã€‚</p><p>3.é›‡å‘˜çš„è–ªé…¬ä¸ä»–ä»¬çš„å¹´é¾„å’Œåœ¨ç»„ç»‡ä¸­ä»»æœŸé•¿çŸ­çš„å…³ç³»ï¼Œå¼ºäºè–ªé…¬ä¸å·¥ä½œç»©æ•ˆçš„å…³ç³»ã€‚</p><p>4.æŒæƒè€…è‡ªæˆ‘æ„Ÿè§‰è‰¯å¥½ï¼Œæœ€å¥½çš„æ–¹æ³•ä¹‹ä¸€å°±æ˜¯æ­ç»´ä»–ä»¬ã€‚</p><p>5.ä¸ºä½ çš„æˆåŠŸè´Ÿè´£çš„äººï¼Œæ˜¯ä½ çš„ä¸Šå¸ï¼Œæ˜¯æœ‰æƒåŠ›æå‡ä½ æˆ–è€…é˜»æ­¢ä½ åœ¨ç»„ç»‡ä¸­æ™‹å‡çš„äººã€‚è€Œä¸”ä¸ç®¡ä½ çš„ä½ç½®åœ¨å“ªé‡Œï¼Œæ€»ä¼šæœ‰äººåœ¨ä½ ä¸Šé¢ã€‚æ‰€ä»¥ä½ çš„å·¥ä½œå°±æ˜¯ï¼Œç¡®ä¿é‚£äº›æœ‰å½±å“åŠ›çš„äººæœ‰å¼ºçƒˆçš„æ„¿æœ›è®©ä½ è·å¾—æˆåŠŸã€‚è¿™å¯èƒ½éœ€è¦ä½ åšå¥½å·¥ä½œï¼Œä½†ä¹Ÿå¯èƒ½éœ€è¦ç¡®ä¿æŒæƒè€…çŸ¥é“ä½ çš„å·¥ä½œåšå¾—å¾ˆå¥½ï¼Œç¡®ä¿ä»–ä»¬è®°å¾—ä½ ï¼Œå¯¹ä½ çš„è¯„ä»·å¾ˆé«˜ï¼Œå› ä¸ºä½ èƒ½è®©ä»–ä»¬è‡ªæˆ‘æ„Ÿè§‰è‰¯å¥½ã€‚ä¸šç»©å’ŒèŒåœºæ”¿æ²»æŠ€å·§ç»“åˆåœ¨ä¸€èµ·ï¼Œæ‰èƒ½å¸®åŠ©ä½ è·å¾—æ™‹å‡ã€‚åªé ä¸šç»©æœ¬èº«æ˜¯ä¸å¤Ÿçš„ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸šç»©ç”šè‡³å¯èƒ½æ˜¯æ— å…³ç—›ç—’çš„ã€‚</p><p>6.ä¸€äº›äººæ™‹å‡åˆ°å¾ˆé«˜çš„ä½ç½®å¹¶æˆå°±äº†æƒŠäººçš„äº‹ä¸šï¼Œä»–ä»¬ä¸å…¶ä»–äººçš„ä¸åŒä¹‹å¤„æœ‰ä¸¤ç‚¹ï¼šæ„æ„¿å’ŒæŠ€èƒ½ã€‚æ„æ„¿æ˜¯ä½¿äººæ„¿æ„æ‰¿æ‹…å·¨å¤§æŒ‘æˆ˜çš„é©±åŠ¨åŠ›ï¼ŒæŠ€èƒ½åˆ™æ˜¯æŠŠé›„å¿ƒè½¬æ¢ä¸ºæˆå°±çš„èƒ½åŠ›ã€‚æ„æ„¿ä½“ç°åœ¨ä¸ªäººç´ è´¨ä¸­ï¼Œå°±æ˜¯é›„å¿ƒã€ç²¾åŠ›å’Œä¸“æ³¨ã€‚è€Œæœ‰åŠ©äºè·å¾—æƒåŠ›çš„4é¡¹æŠ€èƒ½ï¼Œåˆ™åˆ†åˆ«æ˜¯è‡ªçŸ¥ä¹‹æ˜å’Œåçœå¿ƒæ€ã€æ•£å‘è‡ªä¿¡çš„ä¿¡å¿ƒå’Œèƒ½åŠ›ã€ç†è§£ä»–äººå¹¶æ‡‚å¾—æ¢ä½æ€è€ƒä»¥åŠåŒ–è§£å†²çªçš„èƒ½åŠ›ã€‚åœ¨å¯¹ä»¥ä¸Šæ¯ä¸ªç‰¹è´¨è¿›è¡Œè¯´æ˜ä¹‹åï¼Œæˆ‘å°†è®¨è®ºå¦ä¸€ä¸ªç‰¹è´¨ï¼šæ™ºåŠ›ã€‚æ™ºåŠ›å’ŒæƒåŠ›æœ‰äº›å…³ç³»ï¼Œä½†æˆ‘è®¤ä¸ºå®ƒè¢«ä¸¥é‡é«˜ä¼°äº†ã€‚</p><p>7.å¦‚æœä½ å¯¹ä½ çš„å·¥ä½œå€¼å¤šå°‘å›æŠ¥æ²¡æœ‰è‡ªä¿¡ï¼Œå¯¹ä½ æƒ³è¦çš„ä¸œè¥¿ä¹Ÿä¸è‡ªä¿¡ï¼Œä½ å°±ä¸æ„¿æ„è¦æ±‚æˆ–è€…æ¨åŠ¨åˆ«äººï¼Œå› æ­¤ï¼Œç›¸è¾ƒäºé‚£äº›æ¯”ä½ æ´»è·ƒçš„äººè€Œè¨€ï¼Œä½ è·å¾—çš„é‡‘é’±æˆ–å½±å“åŠ›å°±æ¯”è¾ƒå°‘ã€‚</p><p>8.å¼•äººæ³¨æ„å¯ä»¥å¸®åŠ©ä½ è·å¾—ä½ éœ€è¦çš„ä½ç½®å’ŒæƒåŠ›ã€‚ä½ åº”è¯¥ä¸ºä½ æƒ³è¦çš„ä¸œè¥¿æå‡ºè¯·æ±‚ï¼Œå¹¶ä¸”åœ¨ä¸ºè‡ªå·±æ„å»ºæƒåŠ›ä¹‹è·¯æ—¶ï¼Œä¸è¦å¤ªåœ¨ä¹åˆ«äººæ€ä¹ˆçœ‹ä½ ã€‚ä½†æ˜¯ï¼Œè¦è·å¾—å’Œè¡Œä½¿æƒåŠ›ï¼Œå°±éœ€è¦èµ„æºæ¥å¥–åŠ±ä½ çš„æœ‹å‹å’Œæƒ©ç½šä½ çš„æ•Œäººï¼Œéœ€è¦ä¿¡æ¯å’Œé—¨è·¯æ¥ä¿ƒè¿›ä½ åœ¨ç»„ç»‡ä¸­çš„å‡è¿ã€‚</p><p>9.äº‹å®ä¸Šäººä»¬å¸¸çŠ¯çš„ä¸€ä¸ªä¸¥é‡é”™è¯¯æ˜¯ï¼Œä»–ä»¬ä»¥ä¸ºåœ¨ç›®å‰çš„èŒä½ä¸Šæ— æ³•å»ºç«‹æƒåŠ›åŸºç¡€å’ŒæŒæ¡èµ„æºï¼Œä»¥ä¸ºéœ€è¦åœ¨æ›´é«˜çš„èŒä½ä¸Šæ‰èƒ½è¿™æ ·åšã€‚å…¶å®ï¼Œå¦‚æœä½ æŠŠæƒåŠ›åŸºç¡€æ‰“å¥½ï¼Œé‚£ä¹ˆæ”€å‡åˆ°æ›´é«˜çš„èŒä½å°±ä¼šå˜å¾—æ›´ç®€å•å®¹æ˜“ä¸€äº›ï¼Œè€Œä¸”ä½ åœ¨ä»»ä½•æ—¶å€™éƒ½å¯ä»¥è¿™æ ·åšï¼Œæ°¸è¿œéƒ½ä¸ä¼šå¤ªæ—©æˆ–å¤ªè¿Ÿã€‚</p><p>10.é¢†å¯¼çš„å®è´¨å°±æ˜¯ï¼šè®©æ‹¥æœ‰ä¸åŒèƒ½åŠ›å’Œè§†è§’çš„äººæˆ–éƒ¨é—¨åä½œï¼Œå…±åŒå®Œæˆä¸€é¡¹ä»»åŠ¡æˆ–è¾¾æˆä¸€æ¡©äº¤æ˜“ã€‚</p><p>11.é¢†å¯¼åŠ›çš„ç§˜è¯€å°±æ˜¯è¦æ‰®æ¼”è§’è‰²ï¼Œè¦è£…æ¨¡ä½œæ ·ï¼Œè¦åœ¨è¿™é—¨èˆå°è‰ºæœ¯ä¸Šå¯ŒäºæŠ€å·§ã€‚</p><p>12.ä¸è¡¨è¾¾æ‚²ä¼¤ã€å†…ç–šæˆ–è‡ªè´£çš„äººç›¸æ¯”ï¼Œè¡¨è¾¾æ„¤æ€’çš„äººé€šå¸¸è¢«è§†ä¸ºæ›´åŠ å¼ºå¤§ã€‚</p><p>13.é¢†å¯¼åŠ›çš„ç§˜è¯€å°±æ˜¯è¦æ‰®æ¼”è§’è‰²ï¼Œè¦è£…æ¨¡ä½œæ ·ï¼Œè¦åœ¨è¿™é—¨èˆå°è‰ºæœ¯ä¸Šå¯ŒäºæŠ€å·§ã€‚</p><p>14.æˆ‘ä»¬é€‰æ‹©äº†æˆ‘ä»¬è¡Œäº‹å’Œè¯´è¯çš„æ–¹å¼ï¼Œè¿™äº›å†³å®šå¯¹äºè·å–å’Œä¿æŒæƒåŠ›è€Œè¨€éå¸¸é‡è¦ã€‚</p><p>15.â€œæƒåŠ›ä¹‹ä¸­æœ‰20%æ˜¯è¢«èµ‹äºˆçš„ï¼Œæœ‰80%æ˜¯è‡ªå·±è·å–çš„ã€‚â€</p><p>16.ä¸€æ—¦äººä»¬å¯¹æŸä¸ªäººå½¢æˆäº†å°è±¡ï¼Œä»–ä»¬å°±ä¸ä¼šæ‰¿è®¤ä»»ä½•ä¸ä»–ä»¬æœ€åˆæƒ³æ³•ä¸ä¸€è‡´çš„ä¿¡æ¯ã€‚</p><p>17.è¡Œä¸ºåŠ¨åŠ›æœºåˆ¶å€¾å‘äºå·©å›ºäººä»¬çš„åˆæ­¥å°è±¡å’Œå£°æœ›ï¼Œå¹¶å€¾å‘äºè®©è¿™äº›å°è±¡æˆçœŸï¼Œå³ä½¿å®ƒä»¬ä¸€å¼€å§‹å¹¶ä¸æ˜¯çœŸçš„ã€‚</p><p>18.è¿™é‡Œçš„å»ºè®®ä¸æ˜¯è®©ä½ åœ¨ä»»ä½•ä¸€ä¸ªå•ä¸€çš„åœ°æ–¹ç•™ä¸‹è‰¯å¥½çš„å°è±¡ï¼Œè€Œæ˜¯å»ºè®®ä½ æ‰¾åˆ°ä¸€ä¸ªå¯ä»¥è®©ä½ æ ‘ç«‹è¾‰ç…Œå£°æœ›çš„ç¯å¢ƒï¼Œä¹Ÿå°±æ˜¯å»ºè®®ä½ ä¸æ–­å°è¯•ä¸åŒçš„ç¯å¢ƒï¼Œç›´åˆ°ä½ æˆåŠŸåœ°å‘ç°äº†è¿™æ ·ä¸€ä¸ªç¯å¢ƒä¸ºæ­¢ã€‚</p><p>19.ç”±äºäººä»¬æ¥è‡ªä¸åŒçš„èƒŒæ™¯ï¼Œé¢ä¸´çš„æ¿€åŠ±æœºåˆ¶ä¸åŒï¼Œè·å¾—çš„ä¿¡æ¯ä¸åŒï¼Œæ‰€ä»¥ä»–ä»¬æ‰€çœ‹åˆ°çš„ä¸–ç•Œä¹Ÿå„ä¸ç›¸åŒã€‚å› æ­¤åœ¨ç»„ç»‡ä¸­ï¼Œåˆ†æ­§æ˜¯ä¸å¯é¿å…çš„ã€‚ä»¤äººé—æ†¾çš„æ˜¯ï¼Œè®¸å¤šäººéƒ½ä¼šå°è¯•é¿å…å†²çªï¼Œä»–ä»¬è®¤ä¸ºåˆ†æ­§ä»¤äººä¸å¿«ï¼Œå› æ­¤ä»–ä»¬é¿å…è®©ä¸åŒçš„æ„è§æµ®å‡ºæ°´é¢ï¼Œä¹Ÿé¿å…ä¸å¯¹æ‰‹è¿›è¡Œè‰°éš¾çš„äº¤è°ˆã€‚</p><p>20.å¦‚æœä½ å¤„åœ¨ä¸€ä¸ªæƒåŠ›ç›¸å½“å¤§çš„ä½ç½®ä¸Šï¼Œè€Œä½ è§‰å¾—è‡ªå·±å˜å¾—è¶Šæ¥è¶Šç–²å€¦æ—¶ï¼Œé‚£ä½ è¿˜ä¸å¦‚ç¦»å¼€è¿™ä¸ªä½ç½®ã€‚</p><p>21.äººä»¬åŒ…æ‹¬å…¬å¸éƒ½å®¹æ˜“è½å…¥èƒ½åŠ›é™·é˜±ã€‚ä»–ä»¬æ›¾ä»¥æŸç§æ–¹å¼åšæŸäº›äº‹ï¼Œå¹¶è·å¾—äº†æˆåŠŸã€‚</p><p>22.æœ‰äº›äººä»¥ä¸ºè‡ªå·±ä¸å–œæ¬¢æˆ–è€…ä¸å¯èƒ½å–œæ¬¢ç©æƒåŠ›æ¸¸æˆã€‚ä½†ä»–ä»¬æ ¹æœ¬å°±æ²¡æœ‰å°è¯•è¿‡ï¼Œåˆå¦‚ä½•çŸ¥é“è‡ªå·±ä¼šä¸å–œæ¬¢å‘¢ï¼Ÿ</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;ã€Šç§’èµã€‹æ—æ¡‚æ&quot;&gt;&lt;a href=&quot;#ã€Šç§’èµã€‹æ—æ¡‚æ&quot; class=&quot;headerlink&quot; title=&quot;ã€Šç§’èµã€‹æ—æ¡‚æ&quot;&gt;&lt;/a&gt;ã€Šç§’èµã€‹æ—æ¡‚æ&lt;/h2&gt;&lt;p&gt;1.ä½ çš„æ ·å­é‡Œï¼Œæœ‰ä½ èµ°è¿‡çš„è·¯ï¼Œè¯»è¿‡çš„ä¹¦ï¼Œçœ‹è¿‡çš„é£æ™¯ã€‚&lt;/p&gt;
&lt;p&gt;2.æƒ³å½“åƒåœ¾åƒåƒåœ¾ï¼Œæƒ³å½“è¾£æ¤’åƒè¾£æ¤’ï¼Œæƒ³å½“ä»€ä¹ˆè‡ªå·±è¦æƒ³å¥½åƒä»€ä¹ˆã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆ›å»ºâ€œå¥½ä¸œè¥¿â€æ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢æ”¾å¥½çš„è®¾è®¡ä¸ç…§ç‰‡ã€å‡ºè‰²çš„æ¼”è®²ã€æœ‰è§åœ°çš„æ–‡ç« ã€æœ‰è¶£çš„äº‹ç‰©ã€‚&lt;/li&gt;
&lt;li&gt;å‡†å¤‡ä¸€ä¸ªâ€œå¥½ä¸œè¥¿â€æœ¬å­ï¼Œéšæ—¶è®°å½•æœ‰è¶£çš„å¯¹è¯å’Œæ–‡å­—ï¼Œè¡¥å……æ–°è¯æ±‡ï¼Œä¸æ–­ä¸°å¯Œè‡ªå·±çš„å‚¨å¤‡ã€‚&lt;/li&gt;
&lt;li&gt;å°†è‡ªå·±è®¤ä¸ºâ€œæœ‰æ„Ÿè§‰â€çš„è¯æ±‡è®°ä¸‹æ¥ï¼Œæ¥ç€å°†è¿™äº›è¯æ±‡åˆ†ç»™ä¸åŒçš„äººå’Œä¸åŒçš„äº‹ç‰©ï¼Œæƒ³æƒ³è¿™äº›è¯è¯¥ç»™è°ï¼Œä¸ä»€ä¹ˆä¸œè¥¿ç»“åˆæœ€æœ‰æ„æ€ã€‚&lt;/li&gt;
&lt;li&gt;è¯»å®Œä¸€æœ¬ä¹¦ï¼Œå†™ä¸ªç®€çŸ­çš„è¯»ä¹¦å¿ƒå¾—ï¼›çœ‹å®Œä¸€éƒ¨ç”µå½±ï¼Œè®°å½•è‡ªå·±çš„æ„Ÿå—ã€‚æœ‰æ—¶é—´å¤šå†™ï¼Œå¿™çš„è¯å†™å‡ è¡Œå­—ä¹Ÿå¯ä»¥ã€‚&lt;/li&gt;
&lt;li&gt;ä½ è®°å½•çš„ç‚¹ç‚¹æ»´æ»´å°†ä¼šæˆä¸ºä½ ä¸ªäººçš„å®è´µèµ„äº§ï¼Œä½ çš„ç¼ªæ–¯å¥³ç¥ï¼Œæ›´æ˜¯è®©ä½ å·¥ä½œé¡ºåˆ©ã€è¡¨ç°ä¼˜ç§€çš„åˆ©å™¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;3.äººèƒ½æƒ³è±¡åˆ°çš„ä¸€åˆ‡éƒ½æ˜¯çœŸå®çš„ã€‚â€”â€”æ¯•åŠ ç´¢&lt;/p&gt;</summary>
    
    
    
    <category term="è¯»ä¹¦ç¬”è®°" scheme="http://yonghong.tech/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="è¯»ä¹¦ç¬”è®°" scheme="http://yonghong.tech/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>Java è¿›é˜¶ 04 â€”â€” JVM å†…å­˜æ¨¡å‹ï¼šå †å’Œæ ˆæ˜¯ä»€ä¹ˆï¼Ÿ</title>
    <link href="http://yonghong.tech/java-advance/04-jvm-mem/"/>
    <id>http://yonghong.tech/java-advance/04-jvm-mem/</id>
    <published>2021-05-16T13:00:00.000Z</published>
    <updated>2021-05-16T13:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="JVM-è¿è¡Œæ—¶æ•°æ®åŒºæ¦‚è¿°"><a href="#JVM-è¿è¡Œæ—¶æ•°æ®åŒºæ¦‚è¿°" class="headerlink" title="JVM è¿è¡Œæ—¶æ•°æ®åŒºæ¦‚è¿°"></a>JVM è¿è¡Œæ—¶æ•°æ®åŒºæ¦‚è¿°</h2><p>å†…å­˜æ˜¯éå¸¸é‡è¦çš„ç³»ç»Ÿèµ„æºï¼Œæ˜¯ç¡¬ç›˜å’Œ CPU çš„ä¸­é—´ä»“åº“åŠæ¡¥æ¢ï¼Œæ‰¿è½½ç€æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºçš„å®æ—¶è¿è¡Œã€‚JVM å†…å­˜å¸ƒå±€è§„å®šäº† Java åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å†…å­˜ç”³è¯·ã€åˆ†é…ã€ç®¡ç†çš„ç­–ç•¥ï¼Œä¿è¯äº† JVM çš„é«˜æ•ˆç¨³å®šè¿è¡Œã€‚ä¸åŒçš„ JVM å¯¹äºå†…å­˜çš„åˆ’åˆ†æ–¹å¼å’Œç®¡ç†æœºåˆ¶å­˜åœ¨ç€éƒ¨åˆ†å·®å¼‚ã€‚ç»“åˆ JVM è™šæ‹Ÿæœºè§„èŒƒï¼Œæ¥è®¨è®ºä¸€ä¸‹ç»å…¸çš„ JVM å†…å­˜å¸ƒå±€ã€‚</p><p>Java è™šæ‹Ÿæœºå®šä¹‰äº†è‹¥å¹²ç§ç¨‹åºè¿è¡ŒæœŸé—´ä¼šä½¿ç”¨åˆ°çš„è¿è¡Œæ—¶æ•°æ®åŒºï¼Œå…¶ä¸­æœ‰ä¸€äº›ä¼šéšç€è™šæ‹Ÿæœºå¯åŠ¨è€Œåˆ›å»ºï¼Œéšç€è™šæ‹Ÿæœºé€€å‡ºè€Œé”€æ¯ã€‚è€Œå¦å¤–ä¸€äº›åˆ™æ˜¯ä¸çº¿ç¨‹ä¸€ä¸€å¯¹åº”çš„ï¼Œè¿™äº›ä¸çº¿å¯¹åº”çš„æ•°æ®åŒºåŸŸä¼šéšç€çº¿ç¨‹å¼€å§‹å’Œç»“æŸè€Œåˆ›å»ºå’Œé”€æ¯ã€‚</p><span id="more"></span><h3 id="JVM-æ•´ä½“æ¶æ„"><a href="#JVM-æ•´ä½“æ¶æ„" class="headerlink" title="JVM æ•´ä½“æ¶æ„"></a>JVM æ•´ä½“æ¶æ„</h3><p><img src="https://up-img.yonghong.tech/pic/2021/04/03-19-47-VusNfO-S1kg66.png" alt="JVM æ•´ä½“æ¶æ„ - è‹±æ–‡"></p><hr><p><img src="https://up-img.yonghong.tech/pic/2021/04/03-19-46-8oddUR-oMwPkk.png" alt="JVM æ•´ä½“æ¶æ„ - ä¸­æ–‡"></p><h3 id="JVM-ç³»ç»Ÿçº¿ç¨‹"><a href="#JVM-ç³»ç»Ÿçº¿ç¨‹" class="headerlink" title="JVM ç³»ç»Ÿçº¿ç¨‹"></a>JVM ç³»ç»Ÿçº¿ç¨‹</h3><p>çº¿ç¨‹æ˜¯ä¸€ä¸ªç¨‹åºé‡Œçš„è¿è¡Œå•å…ƒã€‚JVM å…è®¸ä¸€ä¸ªåº”ç”¨æœ‰å¤šä¸ªçº¿ç¨‹å¹¶è¡Œçš„æ‰§è¡Œ</p><p>åœ¨ HotSpot è™šæ‹Ÿæœºé‡Œï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½ä¸æ“ä½œç³»ç»Ÿçš„æœ¬åœ°çº¿ç¨‹ç›´æ¥æ˜ å°„ã€‚å½“ä¸€ä¸ª Java çº¿ç¨‹å‡†å¤‡å¥½æ‰§è¡Œä»¥åï¼Œæ­¤æ—¶ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„æœ¬åœ°çº¿ç¨‹ä¹ŸåŒæ—¶åˆ›å»ºã€‚Java çº¿ç¨‹æ‰§è¡Œç»ˆæ­¢åï¼Œæœ¬åœ°çº¿ç¨‹ä¹Ÿä¼šå›æ”¶</p><p>æ“ä½œç³»ç»Ÿè´Ÿè´£æ‰€æœ‰çš„çº¿ç¨‹çš„å®‰æ’è°ƒåº¦åˆ°ä»»ä½•ä¸€ä¸ªå¯ç”¨çš„ CPU ä¸Šã€‚ä¸€æ—¦æœ¬åœ°çº¿ç¨‹åˆå§‹åŒ–æˆåŠŸï¼Œå®ƒå°±ä¼šè°ƒç”¨ Java çº¿ç¨‹ä¸­çš„äººrun() æ–¹æ³•</p><p>å¦‚æœä½ ä½¿ç”¨ jconsole æˆ–è€…æ˜¯ä»»ä½•ä¸€ä¸ªè°ƒè¯•å·¥å…·ï¼Œéƒ½èƒ½çœ‹åˆ°åœ¨åå°æœ‰è®¸å¤šçº¿ç¨‹åœ¨è¿è¡Œã€‚è¿™äº›åå°çº¿ç¨‹ä¸åŒ…æ‹¬è°ƒç”¨ public static void main(String[] args) çš„ main çº¿ç¨‹ä»¥åŠæ‰€æœ‰è¿™ä¸ª main çº¿ç¨‹è‡ªå·±åˆ›å»ºçš„çº¿ç¨‹ã€‚</p><p>è¿™äº›ä¸»è¦çš„åå°ç³»ç»Ÿçº¿ç¨‹åœ¨ HotSpot è™šæ‹Ÿæœºé‡Œä¸»è¦æ˜¯ä»¥ä¸‹å‡ ä¸ª</p><ul><li>è™šæ‹Ÿæœºçº¿ç¨‹ï¼šè¿™ç§çº¿ç¨‹çš„æ“ä½œæ˜¯éœ€è¦ JVM è¾¾åˆ°å®‰å…¨ç‚¹æ‰ä¼šå‡ºç°ã€‚è¿™äº›æ“ä½œå¿…é¡»åœ¨ä¸åŒçš„çº¿ç¨‹ä¸­å‘ç”Ÿçš„åŸå› æ˜¯ä»–ä»¬éƒ½éœ€è¦ JVM è¾¾åˆ°å®‰å…¨ç‚¹ï¼Œè¿™æ ·å †æ‰ä¸ä¼šå˜åŒ–ã€‚è¿™ç§çº¿ç¨‹çš„æ‰§è¡Œç±»å‹åŒ…æ‹¬â€œstop-the-worldâ€çš„åƒåœ¾æ”¶é›†ï¼Œçº¿ç¨‹æ ˆæ”¶é›†ï¼Œçº¿ç¨‹æŒ‚èµ·ä»¥åŠåå‘é”æ’¤é”€</li><li>å‘¨æœŸä»»åŠ¡çº¿ç¨‹ï¼šè¿™ç§çº¿ç¨‹æ˜¯æ—¶é—´å‘¨æœŸäº‹ä»¶çš„ä½“ç°ï¼ˆæ¯”å¦‚ä¸­æ–­ï¼‰ï¼Œä»–ä»¬ä¸€èˆ¬ç”¨äºå‘¨æœŸæ€§æ“ä½œçš„è°ƒåº¦æ‰§è¡Œ</li><li>GC çº¿ç¨‹ï¼šè¿™ç§çº¿ç¨‹å¯¹åœ¨ JVM é‡Œä¸åŒç§ç±»çš„åƒåœ¾æ”¶é›†è¡Œä¸ºæä¾›äº†æ”¯æŒ</li><li>ç¼–è¯‘çº¿ç¨‹ï¼šè¿™ç§çº¿ç¨‹åœ¨è¿è¡Œæ—¶ä¼šå°†å­—èŠ‚ç ç¼–è¯‘æˆæœ¬åœ°ä»£ç </li><li>ä¿¡å·è°ƒåº¦çº¿ç¨‹ï¼šè¿™ç§çº¿ç¨‹æ¥æ”¶ä¿¡å·å¹¶å‘é€ç»™ JVMï¼Œåœ¨å®ƒå†…éƒ¨é€šè¿‡è°ƒç”¨é€‚å½“çš„æ–¹æ³•è¿›è¡Œå¤„ç†</li></ul><h2 id="JVM-å†…å­˜ç»“æ„"><a href="#JVM-å†…å­˜ç»“æ„" class="headerlink" title="JVM å†…å­˜ç»“æ„"></a>JVM å†…å­˜ç»“æ„</h2><p><img src="https://up-img.yonghong.tech/pic/2021/04/02-20-39-01-JVM%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84-OjY1mD.png" alt="JVMå†…å­˜ç»“æ„"></p><ul><li>æ¯ä¸ªçº¿ç¨‹åªèƒ½è®¿é—®è‡ªå·±çš„çº¿ç¨‹æ ˆã€‚</li><li>æ¯ä¸ªçº¿ç¨‹éƒ½ä¸èƒ½è®¿é—®ï¼ˆçœ‹ä¸è§ï¼‰å…¶ä»–çº¿ç¨‹çš„å±€éƒ¨å˜é‡ã€‚</li><li>æ‰€æœ‰åŸç”Ÿç±»å‹çš„å±€éƒ¨å˜é‡éƒ½å­˜å‚¨åœ¨çº¿ç¨‹æ ˆä¸­ï¼Œå› æ­¤å¯¹å…¶ä»–çº¿ç¨‹æ˜¯ä¸å¯è§çš„ã€‚</li><li>çº¿ç¨‹å¯ä»¥å°†ä¸€ä¸ªåŸç”Ÿå˜é‡å€¼çš„å‰¯æœ¬ä¼ ç»™å¦ä¸€ä¸ªçº¿ç¨‹ï¼Œä½†ä¸èƒ½å…±äº«åŸç”Ÿå±€éƒ¨å˜é‡æœ¬èº«ã€‚</li><li>å †å†…å­˜ä¸­åŒ…å«äº† Java ä»£ç ä¸­åˆ›å»ºçš„æ‰€æœ‰å¯¹è±¡ï¼Œä¸ç®¡æ˜¯å“ªä¸ªçº¿ç¨‹åˆ›å»ºçš„ã€‚å…¶ä¸­ä¹Ÿæ¶µç›–äº†åŒ…è£…ç±»å‹ï¼ˆä¾‹å¦‚ï¼ŒByteï¼ŒIntegerï¼ŒLongç­‰ï¼‰ã€‚</li><li>ä¸ç®¡æ˜¯åˆ›å»ºä¸€ä¸ªå¯¹è±¡å¹¶å°†å…¶å€¼èµ‹å€¼ç»™å±€éƒ¨å˜é‡ï¼Œè¿˜æ˜¯èµ‹å€¼ç»™å¦ä¸€ä¸ªå¯¹è±¡çš„æˆå‘˜å˜é‡ï¼Œåˆ›å»ºçš„å¯¹è±¡éƒ½ä¼šè¢«ä¿å­˜åˆ°å †å†…å­˜ä¸­ã€‚</li></ul><hr><ul><li>å¦‚æœæ˜¯åŸç”Ÿæ•°æ®ç±»å‹çš„å±€éƒ¨å˜é‡ï¼Œé‚£ä¹ˆå®ƒçš„å†…å®¹å°±å…¨éƒ¨ä¿ç•™åœ¨çº¿ç¨‹æ ˆä¸Šã€‚ </li><li>å¦‚æœæ˜¯å¯¹è±¡å¼•ç”¨ï¼Œåˆ™æ ˆä¸­çš„å±€éƒ¨å˜é‡æ§½ä½ä¸­ä¿å­˜ç€å¯¹è±¡çš„å¼•ç”¨åœ°å€ï¼Œè€Œå®é™…çš„å¯¹è±¡å†…å®¹ä¿å­˜åœ¨å †ä¸­ã€‚</li><li>å¯¹è±¡çš„æˆå‘˜å˜é‡ä¸å¯¹è±¡æœ¬èº«ä¸€èµ·å­˜å‚¨åœ¨å †ä¸Šï¼Œä¸ç®¡æˆå‘˜å˜é‡çš„ç±»å‹æ˜¯åŸç”Ÿæ•°æ®ç±»å‹ï¼Œè¿˜æ˜¯å¯¹è±¡å¼•ç”¨ã€‚</li><li>ç±»çš„é™æ€å˜é‡åˆ™å’Œç±»å®šä¹‰ä¸€æ ·éƒ½ä¿å­˜åœ¨å †ä¸­ã€‚</li></ul><hr><ul><li>æ€»ç»“ä¸€ä¸‹ï¼šæ–¹æ³•ä¸­ä½¿ç”¨çš„åŸç”Ÿæ•°æ®ç±»å‹å’Œå¯¹è±¡å¼•ç”¨åœ°å€åœ¨æ ˆä¸Šå­˜å‚¨ï¼›å¯¹è±¡ã€å¯¹è±¡æˆå‘˜ä¸ç±»å®šä¹‰ã€é™æ€å˜é‡åœ¨å †ä¸Šã€‚</li><li>å †å†…å­˜åˆç§°ä¸ºâ€œå…±äº«å †â€ï¼Œå †ä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼Œå¯ä»¥è¢«æ‰€æœ‰çº¿ç¨‹è®¿é—®ï¼Œåªè¦ä»–ä»¬èƒ½æ‹¿åˆ°å¯¹è±¡çš„å¼•ç”¨åœ°å€ã€‚</li><li>å¦‚æœä¸€ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®æŸä¸ªå¯¹è±¡æ—¶ï¼Œä¹Ÿå°±å¯ä»¥è®¿é—®è¯¥å¯¹è±¡çš„æˆå‘˜å˜é‡ã€‚</li><li>å¦‚æœä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨æŸä¸ªå¯¹è±¡çš„åŒä¸€æ–¹æ³•ï¼Œåˆ™å®ƒä»¬éƒ½å¯ä»¥è®¿é—®åˆ°è¿™ä¸ªå¯¹è±¡çš„æˆå‘˜å˜é‡ï¼Œä½†æ¯ä¸ªçº¿ç¨‹çš„å±€éƒ¨å˜é‡å‰¯æœ¬æ˜¯ç‹¬ç«‹çš„ã€‚</li></ul><h2 id="JVM-å†…å­˜æ•´ä½“ç»“æ„"><a href="#JVM-å†…å­˜æ•´ä½“ç»“æ„" class="headerlink" title="JVM å†…å­˜æ•´ä½“ç»“æ„"></a>JVM å†…å­˜æ•´ä½“ç»“æ„</h2><p><img src="https://up-img.yonghong.tech/pic/2021/04/02-20-41-01-JVM%E5%86%85%E5%AD%98%E6%95%B4%E4%BD%93%E7%BB%93%E6%9E%84-eSeqP8.png" alt="JVMå†…å­˜æ•´ä½“ç»“æ„"></p><ul><li>æ¯å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼ŒJVMå°±ä¼šåœ¨æ ˆç©ºé—´æ ˆåˆ†é…å¯¹åº”çš„çº¿ç¨‹æ ˆï¼Œæ¯”å¦‚ 1MB ç©ºé—´ï¼ˆ-Xss1mï¼‰ </li><li>çº¿ç¨‹æ ˆä¹Ÿå«åš Java æ–¹æ³•æ ˆã€‚å¦‚æœä½¿ç”¨äº† JNI æ–¹æ³•ï¼Œåˆ™ä¼šåˆ†é…ä¸€ä¸ªå•ç‹¬çš„æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Stackï¼‰ </li><li>çº¿ç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸€èˆ¬ä¼šæœ‰å¤šä¸ªæ–¹æ³•ç»„æˆè°ƒç”¨æ ˆï¼ˆStack Traceï¼‰ï¼Œæ¯”å¦‚ A è°ƒç”¨ Bï¼ŒB è°ƒç”¨ C ã€‚æ¯æ‰§è¡Œåˆ°ä¸€ä¸ªæ–¹æ³•ï¼Œå°±ä¼šåˆ›å»ºå¯¹åº”çš„æ ˆå¸§ï¼ˆFrameï¼‰ã€‚</li></ul><h2 id="JVM-æ ˆå†…å­˜æœºæ„"><a href="#JVM-æ ˆå†…å­˜æœºæ„" class="headerlink" title="JVM æ ˆå†…å­˜æœºæ„"></a>JVM æ ˆå†…å­˜æœºæ„</h2><p><img src="https://up-img.yonghong.tech/pic/2021/04/02-20-44-01-JVM%E6%A0%88%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84-Z8QlQS.png" alt="JVMæ ˆå†…å­˜ç»“æ„"></p><ul><li>æ ˆå¸§æ˜¯ä¸€ä¸ªé€»è¾‘ä¸Šçš„æ¦‚å¿µï¼Œå…·ä½“çš„å¤§å°åœ¨ä¸€ä¸ªæ–¹æ³•ç¼–å†™å®ŒæˆååŸºæœ¬ä¸Šå°±èƒ½ç¡®å®šã€‚ </li><li>æ¯”å¦‚è¿”å›å€¼ï¼Œéœ€è¦æœ‰ä¸€ä¸ªç©ºé—´å­˜æ”¾å§ï¼Œæ¯ä¸ªå±€éƒ¨å˜é‡éƒ½éœ€è¦å¯¹åº”çš„åœ°å€ç©ºé—´ï¼Œæ­¤å¤–è¿˜æœ‰ç»™æŒ‡ä»¤ä½¿ç”¨çš„æ“ä½œæ•°æ ˆï¼Œä»¥åŠ Class æŒ‡é’ˆï¼ˆæ ‡è¯†è¿™ä¸ªæ ˆå¸§å¯¹åº”çš„æ˜¯å“ªä¸ªç±»çš„æ–¹æ³•ï¼ŒæŒ‡å‘éå †é‡Œé¢çš„ Class å¯¹è±¡ï¼‰ã€‚</li></ul><h2 id="JVM-å †å†…å­˜ç»“æ„"><a href="#JVM-å †å†…å­˜ç»“æ„" class="headerlink" title="JVM å †å†…å­˜ç»“æ„"></a>JVM å †å†…å­˜ç»“æ„</h2><p><img src="https://up-img.yonghong.tech/pic/2021/04/02-20-45-01-JVM%E5%A0%86%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84-0TRoeN.png" alt="JVMå †å†…å­˜ç»“æ„"></p><p><img src="https://up-img.yonghong.tech/pic/2021/04/02-20-46-01-jconsole%E5%86%85%E5%AD%98-KNrKkU.png" alt="jconsoleå†…å­˜"></p><ul><li>å †å†…å­˜æ˜¯æ‰€æœ‰çº¿ç¨‹å…±ç”¨çš„å†…å­˜ç©ºé—´ï¼ŒJVM å°† Heap å†…å­˜åˆ†ä¸ºå¹´è½»ä»£ï¼ˆYoung generationï¼‰å’Œè€å¹´ä»£ï¼ˆOld generationï¼Œä¹Ÿå« Tenuredï¼‰ä¸¤éƒ¨åˆ†ã€‚</li><li>å¹´è½»ä»£è¿˜åˆ’åˆ†ä¸º3ä¸ªå†…å­˜æ± ï¼Œä¼Šç”¸å›­åŒºï¼ˆEden spaceï¼‰å’Œå­˜æ´»åŒºï¼ˆSurvivor spaceï¼‰ï¼Œåœ¨å¤§éƒ¨åˆ†GCç®—æ³•ä¸­æœ‰ä¸¤ä¸ªå­˜æ´»åŒºï¼ˆS0ï¼ŒS1ï¼‰ï¼Œåœ¨æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°çš„ä»»ä½•æ—¶åˆ»ï¼ŒS0å’ŒS1æ€»æœ‰ä¸€ä¸ªæ˜¯ç©ºçš„ï¼Œä½†ä¸€èˆ¬å¾ˆå°ï¼Œä¹Ÿæµªè´¹ä¸äº†å¤šå°‘ç©ºé—´ã€‚</li><li>Non-Heapæœ¬è´¨ä¸Šè¿˜æ˜¯Heapï¼Œåªæ˜¯ä¸€èˆ¬ä¸å½’GCç®¡ç†ï¼Œé‡Œé¢åˆ’åˆ†ä¸º3ä¸ªå†…å­˜åŒºæ± ã€‚</li><li>Metaspace ä»¥å‰å«æŒä¹…ä»£ï¼ˆæ°¸ä¹…ä»£ï¼ŒPermanent generationï¼‰ï¼ŒJava æ¢äº†ä¸ªåå­—å« Metaspace</li><li>CCS Compressed Class Spaceï¼Œå­˜æ”¾ class ä¿¡æ¯çš„ï¼Œå’Œ Metaspace æœ‰äº¤å‰</li><li>Code Cacheï¼Œå­˜æ”¾ JIT ç¼–è¯‘å™¨ç¼–è¯‘åçš„æœ¬åœ°æœºå™¨ä»£ç ã€‚</li></ul><h2 id="CPU-ä¸å†…å­˜è¡Œä¸º"><a href="#CPU-ä¸å†…å­˜è¡Œä¸º" class="headerlink" title="CPU ä¸å†…å­˜è¡Œä¸º"></a>CPU ä¸å†…å­˜è¡Œä¸º</h2><p><img src="https://up-img.yonghong.tech/pic/2021/04/02-20-47-01-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E6%9E%B6%E6%9E%84-3aWMrH.png" alt="è®¡ç®—æœºç¡¬ä»¶æ¶æ„"></p><ul><li>CPU ä¹±åºæ‰§è¡Œ</li><li>volatile å…³é”®å­—</li><li>åŸå­æ€§æ“ä½œ</li><li>å†…å­˜å±éšœ</li></ul><h2 id="Javaå¯¹è±¡æ¨¡å‹"><a href="#Javaå¯¹è±¡æ¨¡å‹" class="headerlink" title="Javaå¯¹è±¡æ¨¡å‹"></a>Javaå¯¹è±¡æ¨¡å‹</h2><p><img src="https://up-img.yonghong.tech/pic/2021/04/02-20-47-01-Java%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B-K1uNvD.png" alt="Javaå¯¹è±¡æ¨¡å‹"></p><h2 id="Javaå†…å­˜æ¨¡å‹"><a href="#Javaå†…å­˜æ¨¡å‹" class="headerlink" title="Javaå†…å­˜æ¨¡å‹"></a>Javaå†…å­˜æ¨¡å‹</h2><p><img src="https://up-img.yonghong.tech/pic/2021/04/02-20-47-01-Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B-G12dzM.jpg" alt="Javaå†…å­˜æ¨¡å‹"></p><p>JMM è§„èŒƒå¯¹åº”çš„æ˜¯ JSR-133 Java Memory Model and Thread Specification ã€ŠJava è¯­è¨€è§„èŒƒã€‹ $17.4 Memory Model ç« èŠ‚</p><p>JMM è§„èŒƒæ˜ç¡®å®šä¹‰äº†ä¸åŒçš„çº¿ç¨‹ä¹‹é—´é€šè¿‡å“ªäº›æ–¹å¼ï¼Œåœ¨ä»€ä¹ˆæ—¶å€™å¯ä»¥çœ‹è§å…¶ä»–çº¿ç¨‹ä¿å­˜åˆ°å…±äº«å˜é‡ä¸­çš„å€¼ï¼›ä»¥åŠåœ¨å¿…è¦æ—¶ï¼Œå¦‚ä½•å¯¹å…±äº«å˜é‡çš„è®¿é—®è¿›è¡ŒåŒæ­¥ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯å±è”½å„ç§ç¡¬ä»¶å¹³å°çš„æ“ä½œç³»ç»Ÿä¹‹é—´çš„å†…å­˜è®¿é—®å·®å¼‚ï¼Œå®ç°äº†Javaå¹¶å‘ç¨‹åºçœŸæ­£çš„è·¨å¹³å°ã€‚</p><ul><li>æ‰€æœ‰çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬å†…éƒ¨çš„å®ä¾‹æˆå‘˜å˜é‡ï¼‰ï¼Œstatic å˜é‡ï¼Œä»¥åŠæ•°ç»„ï¼Œéƒ½å¿…é¡»å­˜æ”¾åˆ°å †å†…å­˜ä¸­ã€‚</li><li>å±€éƒ¨å˜é‡ï¼Œæ–¹æ³•çš„å½¢å‚/å…¥å‚ï¼Œå¼‚å¸¸å¤„ç†è¯­å¥çš„å…¥å‚ä¸å…è®¸åœ¨çº¿ç¨‹ä¹‹é—´å…±äº«ï¼Œæ‰€ä»¥ä¸å—å†…å­˜æ¨¡å‹çš„å½±å“ã€‚</li><li>å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€ä¸ªå˜é‡è®¿é—®æ—¶ã€è¯»å–/å†™å…¥ã€‘ï¼Œè¿™æ—¶å€™åªè¦æœ‰æŸä¸ªçº¿ç¨‹æ‰§è¡Œçš„æ˜¯å†™æ“ä½œï¼Œé‚£ä¹ˆè¿™ç§ç°è±¡ç§°ä¹‹ä¸ºâ€œå†²çªâ€ã€‚</li><li>å¯ä»¥è¢«å…¶ä»–çº¿ç¨‹å½±å“æˆ–æ„ŸçŸ¥çš„æ“ä½œï¼Œç§°ä¸ºçº¿ç¨‹é—´çš„äº¤äº’è¡Œä¸ºï¼Œå¯åˆ†ä¸ºï¼šè¯»å–ã€å†™å…¥ã€åŒæ­¥æ“ä½œã€å¤–éƒ¨æ“ä½œç­‰ç­‰ã€‚å…¶ä¸­åŒæ­¥æ“ä½œåŒ…æ‹¬ï¼šå¯¹ volatile å˜é‡çš„è¯»å†™ï¼Œå¯¹ç®¡ç¨‹ï¼ˆmonitorï¼‰çš„é”å®šä¸è§£é”ï¼Œçº¿ç¨‹çš„èµ·å§‹æ“ä½œä¸ç»“å°¾æ“ä½œï¼Œçº¿ç¨‹å¯åŠ¨å’Œç»“æŸç­‰ç­‰ã€‚å¤–éƒ¨æ“ä½œåˆ™æ˜¯æŒ‡å¯¹çº¿ç¨‹æ‰§è¡Œç¯å¢ƒä¹‹å¤–çš„æ“ä½œï¼Œæ¯”å¦‚åœæ­¢å…¶ä»–çº¿ç¨‹ç­‰ç­‰ã€‚</li><li>JMM è§„èŒƒçš„æ˜¯çº¿ç¨‹é—´çš„äº¤äº’æ“ä½œï¼Œè€Œä¸ç®¡çº¿ç¨‹å†…éƒ¨å¯¹å±€éƒ¨å˜é‡è¿›è¡Œçš„æ“ä½œã€‚</li></ul><hr><h2 id="JVM-å¯åŠ¨å‚æ•°"><a href="#JVM-å¯åŠ¨å‚æ•°" class="headerlink" title="JVM å¯åŠ¨å‚æ•°"></a>JVM å¯åŠ¨å‚æ•°</h2><ul><li>ä»¥ - å¼€å¤´ä¸ºæ ‡å‡†å‚æ•°ï¼Œæ‰€æœ‰çš„ JVM éƒ½è¦å®ç°è¿™äº›å‚æ•°ï¼Œå¹¶ä¸”å‘åå…¼å®¹ã€‚ä¾‹ï¼Œ<code>-server</code></li><li>-D è®¾ç½®ç³»ç»Ÿå±æ€§ã€‚ä¾‹ï¼Œ<code>-Dfile.encoding=UTF-8</code></li><li>ä»¥ -X å¼€å¤´ä¸ºéæ ‡å‡†å‚æ•°ï¼ŒåŸºæœ¬éƒ½æ˜¯ä¼ ç»™ JVM çš„ï¼Œé»˜è®¤ JVM å®ç°è¿™äº›å‚æ•°çš„åŠŸèƒ½ï¼Œä½†æ˜¯å¹¶ä¸ä¿è¯æ‰€æœ‰ JVM å®ç°éƒ½æ»¡è¶³ï¼Œä¸”ä¸ä¿è¯å‘åå…¼å®¹ã€‚å¯ä»¥ä½¿ç”¨ <code>java -X</code> å‘½ä»¤æ¥æŸ¥çœ‹å½“å‰ JVM æ”¯æŒçš„éæ ‡å‡†å‚æ•°ã€‚ä¾‹ï¼Œ<code>-Xmx8g</code></li><li>ä»¥ -XX: å¼€å¤´ä¸ºéç¨³å®šå‚æ•°ï¼Œä¸“é—¨ç”¨äºæ§åˆ¶ JVM çš„è¡Œä¸ºï¼Œè·Ÿå…·ä½“çš„ JVM å®ç°æœ‰å…³ï¼Œéšæ—¶å¯èƒ½ä¼šåœ¨ä¸‹ä¸ªç‰ˆæœ¬å–æ¶ˆã€‚<ul><li>-XX: +-Flags å½¢å¼ï¼Œ+-æ˜¯å¯¹å¸ƒå°”å€¼è¿›è¡Œå¼€å…³ã€‚ä¾‹ï¼Œ<code>-XX:+UseG1GC</code></li><li>-XX: key=value å½¢å¼ï¼ŒæŒ‡å®šæŸä¸ªé€‰é¡¹çš„å€¼ã€‚ä¾‹ï¼Œ<code>-XX:MaxPermSize=256m</code></li></ul></li></ul><p>1.ç³»ç»Ÿå±æ€§å‚æ•°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-Dfile.encoding=UTF-<span class="number">8</span></span><br><span class="line">-Duser.timezone=GMT+08</span><br><span class="line">-Dmaven.test.skip=<span class="keyword">true</span></span><br><span class="line">-Dio.netty.eventLoopThreads=<span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿˜å¯ä»¥è¿™æ ·</span></span><br><span class="line">System.setProperty(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;A100&quot;</span>);</span><br><span class="line">String a = System.getProperty(<span class="string">&quot;a&quot;</span>);</span><br></pre></td></tr></table></figure><p>2.è¿è¡Œæ¨¡å¼å‚æ•°</p><ul><li>-server: è®¾ç½® JVM ä½¿ç”¨ server æ¨¡å¼ï¼Œç‰¹ç‚¹æ˜¯å¯åŠ¨é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œä½†è¿è¡Œæ—¶æ€§èƒ½å’Œå†…å­˜ç®¡ç†æ•ˆç‡å¾ˆé«˜ï¼Œé€‚ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚åœ¨å…·æœ‰ 64 ä½èƒ½åŠ›çš„ JDK ç¯å¢ƒä¸‹å°†é»˜è®¤å¯ç”¨è¯¥æ¨¡å¼ï¼Œè€Œå¿½ç•¥ -client å‚æ•°ã€‚</li><li>-client: JDK1.7 ä¹‹å‰åœ¨32ä½çš„ x86 æœºå™¨ä¸Šçš„é»˜è®¤å€¼æ˜¯ -client é€‰é¡¹ã€‚è®¾ç½® JVM ä½¿ç”¨ client æ¨¡å¼ï¼Œç‰¹ç‚¹æ˜¯å¯åŠ¨é€Ÿåº¦æ¯”è¾ƒå¿«ï¼Œä½†è¿è¡Œæ—¶æ€§èƒ½å’Œå†…å­˜ç®¡ç†æ•ˆç‡ä¸é«˜ï¼Œé€šå¸¸ç”¨äºå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºæˆ–è€… PC åº”ç”¨å¼€å‘å’Œè°ƒè¯•ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬çŸ¥é“ JVM åŠ è½½å­—èŠ‚ç åï¼Œå¯ä»¥è§£é‡Šæ‰§è¡Œï¼Œä¹Ÿå¯ä»¥ç¼–è¯‘æˆæœ¬åœ°ä»£ç å†æ‰§è¡Œï¼Œæ‰€ä»¥å¯ä»¥é…ç½® JVM å¯¹å­—èŠ‚ç çš„å¤„ç†æ¨¡å¼ã€‚</li><li>-Xint: åœ¨è§£é‡Šæ¨¡å¼(interpreted mode)ä¸‹è¿è¡Œï¼Œ-Xint æ ‡è®°ä¼šå¼ºåˆ¶ JVM è§£é‡Šæ‰§è¡Œæ‰€æœ‰çš„å­—èŠ‚ç ï¼Œè¿™å½“ç„¶ä¼šé™ä½è¿è¡Œé€Ÿåº¦ï¼Œé€šå¸¸ä½10å€æˆ–æ›´å¤šã€‚</li><li>-Xcomp: -Xcomp å‚æ•°ä¸ -Xint æ­£å¥½ç›¸åï¼ŒJVM åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶ä¼šæŠŠæ‰€æœ‰çš„å­—èŠ‚ç ç¼–è¯‘æˆæœ¬åœ°ä»£ç ï¼Œä»è€Œå¸¦æ¥æœ€å¤§ç¨‹åº¦çš„ä¼˜åŒ–ã€‚ã€æ³¨æ„é¢„çƒ­ã€‘</li><li>-Xmixed: -Xmixed æ˜¯æ··åˆæ¨¡å¼ï¼Œå°†è§£é‡Šæ¨¡å¼å’Œç¼–è¯‘æ¨¡å¼è¿›è¡Œæ··åˆä½¿ç”¨ï¼Œæœ‰ JVM è‡ªå·±å†³å®šï¼Œè¿™æ˜¯ JVM çš„é»˜è®¤æ¨¡å¼ï¼Œä¹Ÿæ˜¯æ¨èæ¨¡å¼ã€‚ æˆ‘ä»¬ä½¿ç”¨ java -version å¯ä»¥çœ‹åˆ° mixed mode ç­‰ä¿¡æ¯ã€‚</li></ul><p>3.å †å†…å­˜è®¾ç½®å‚æ•°</p><ul><li>-Xmx, æŒ‡å®šæœ€å¤§å †å†…å­˜ã€‚ å¦‚ -Xmx4g. è¿™åªæ˜¯é™åˆ¶äº† Heap éƒ¨åˆ†çš„æœ€å¤§å€¼ä¸º4gã€‚è¿™ä¸ªå†…å­˜ä¸åŒ…æ‹¬æ ˆå†…å­˜ï¼Œä¹Ÿä¸åŒ…æ‹¬å †å¤–ä½¿ç”¨çš„å†…å­˜ã€‚</li><li>-Xms, æŒ‡å®šå †å†…å­˜ç©ºé—´çš„åˆå§‹å¤§å°ã€‚ å¦‚ -Xms4gã€‚ è€Œä¸”æŒ‡å®šçš„å†…å­˜å¤§å°ï¼Œå¹¶ä¸æ˜¯æ“ä½œç³»ç»Ÿå®é™…åˆ†é…çš„åˆå§‹å€¼ï¼Œè€Œæ˜¯GCå…ˆè§„åˆ’å¥½ï¼Œç”¨åˆ°æ‰åˆ†é…ã€‚ä¸“ç”¨æœåŠ¡å™¨ä¸Šéœ€è¦ä¿æŒ â€“Xms å’Œ â€“Xmx ä¸€è‡´ï¼Œå¦åˆ™åº”ç”¨åˆšå¯åŠ¨å¯èƒ½å°±æœ‰å¥½å‡ ä¸ª FullGCã€‚ å½“ä¸¤è€…é…ç½®ä¸ä¸€è‡´æ—¶ï¼Œå †å†…å­˜æ‰©å®¹å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½æŠ–åŠ¨ã€‚</li><li>-Xmn, ç­‰ä»·äº -XX:NewSizeï¼Œä½¿ç”¨ G1 åƒåœ¾æ”¶é›†å™¨ ä¸åº”è¯¥ è®¾ç½®è¯¥é€‰é¡¹ï¼Œåœ¨å…¶ä»–çš„æŸäº›ä¸šåŠ¡åœºæ™¯ä¸‹å¯ä»¥è®¾ç½®ã€‚å®˜æ–¹å»ºè®®è®¾ç½®ä¸º -Xmx çš„ 1/2 ~ 1/4.</li><li>-XX:MaxPermSize=size, è¿™æ˜¯ JDK1.7 ä¹‹å‰ä½¿ç”¨çš„ã€‚Java8 é»˜è®¤å…è®¸çš„ Metaç©ºé—´æ— é™å¤§ï¼Œæ­¤å‚æ•°æ— æ•ˆã€‚</li><li>-XX:MaxMetaspaceSize=size, Java8 é»˜è®¤ä¸é™åˆ¶ Meta ç©ºé—´, ä¸€èˆ¬ä¸å…è®¸è®¾ç½®è¯¥é€‰é¡¹ã€‚</li><li>-XX:MaxDirectMemorySize=sizeï¼Œç³»ç»Ÿå¯ä»¥ä½¿ç”¨çš„æœ€å¤§å †å¤–å†…å­˜ï¼Œè¿™ä¸ªå‚æ•°è·Ÿ -Dsun.nio.MaxDirectMemorySize æ•ˆæœç›¸åŒã€‚</li><li>-Xss, è®¾ç½®æ¯ä¸ªçº¿ç¨‹æ ˆçš„å­—èŠ‚æ•°ï¼Œå½±å“æ ˆçš„æ·±åº¦ã€‚ ä¾‹å¦‚ -Xss1m æŒ‡å®šçº¿ç¨‹æ ˆä¸º 1MBï¼Œä¸-XX:ThreadStackSize=1m ç­‰ä»·</li></ul><ol><li>å¦‚æœä»€ä¹ˆéƒ½ä¸é…ç½®ä¼šå¦‚ä½•?</li><li>Xmx æ˜¯å¦ä¸ Xms è®¾ç½®ç›¸ç­‰?</li><li>Xmx è®¾ç½®ä¸ºæœºå™¨å†…å­˜çš„ä»€ä¹ˆæ¯”ä¾‹åˆé€‚?</li><li>ä½œä¸š: ç”»ä¸€ä¸‹ Xmxã€Xmsã€Xmnã€Metaã€DirectMemoryã€Xss è¿™äº›å†…å­˜å‚æ•°çš„å…³ç³»</li></ol><p>4.GCè®¾ç½®å‚æ•°</p><ul><li>-XX:+UseG1GC:ä½¿ç”¨ G1 åƒåœ¾å›æ”¶å™¨ </li><li>-XX:+UseConcMarkSweepGC:ä½¿ç”¨ CMS åƒåœ¾å›æ”¶å™¨ </li><li>-XX:+UseSerialGC:ä½¿ç”¨ä¸²è¡Œåƒåœ¾å›æ”¶å™¨ </li><li>-XX:+UseParallelGC:ä½¿ç”¨å¹¶è¡Œåƒåœ¾å›æ”¶å™¨</li><li>-XX:+UnlockExperimentalVMOptions -XX:+UseZGC // Java 11+</li><li>-XX:+UnlockExperimentalVMOptions -XX:+UseShenandoahGC // Java 12+</li></ul><p>å„ä¸ª JVM ç‰ˆæœ¬çš„é»˜è®¤ GC æ˜¯ä»€ä¹ˆ?</p><p>5.åˆ†æè¯Šæ–­å‚æ•°</p><ul><li>-XX:+-HeapDumpOnOutOfMemoryError é€‰é¡¹, å½“ OutOfMemoryError äº§ç”Ÿï¼Œå³å†…å­˜æº¢å‡º(å †å†…å­˜æˆ–æŒä¹…ä»£)æ—¶ï¼Œè‡ªåŠ¨ Dump å †å†…å­˜ã€‚<ul><li>ç¤ºä¾‹ç”¨æ³•: java -XX:+HeapDumpOnOutOfMemoryError -Xmx256m ConsumeHeap</li></ul></li><li>-XX:HeapDumpPath é€‰é¡¹, ä¸ HeapDumpOnOutOfMemoryError æ­é…ä½¿ç”¨, æŒ‡å®šå†…å­˜æº¢å‡ºæ—¶ Dump æ–‡ä»¶çš„ç›® å½•ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šåˆ™é»˜è®¤ä¸ºå¯åŠ¨ Java ç¨‹åºçš„å·¥ä½œç›®å½•ã€‚<ul><li>ç¤ºä¾‹ç”¨æ³•: java -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/usr/local/ ConsumeHeap </li><li>è‡ªåŠ¨ Dump çš„ hprof æ–‡ä»¶ä¼šå­˜å‚¨åˆ° /usr/local/ ç›®å½•ä¸‹</li></ul></li><li>-XX:OnError é€‰é¡¹, å‘ç”Ÿè‡´å‘½é”™è¯¯æ—¶(fatal error)æ‰§è¡Œçš„è„šæœ¬ã€‚<ul><li>ä¾‹å¦‚, å†™ä¸€ä¸ªè„šæœ¬æ¥è®°å½•å‡ºé”™æ—¶é—´, æ‰§è¡Œä¸€äº›å‘½ä»¤, æˆ–è€… curl ä¸€ä¸‹æŸä¸ªåœ¨çº¿æŠ¥è­¦çš„ url. ç¤ºä¾‹ç”¨æ³•:java -XX:OnError=â€gdb - %pâ€ MyApp</li><li>å¯ä»¥å‘ç°æœ‰ä¸€ä¸ª %p çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºè¿›ç¨‹ PIDã€‚</li></ul></li><li>-XX:OnOutOfMemoryError é€‰é¡¹, æŠ›å‡º OutOfMemoryError é”™è¯¯æ—¶æ‰§è¡Œçš„è„šæœ¬ã€‚ </li><li>-XX:ErrorFile=filename é€‰é¡¹, è‡´å‘½é”™è¯¯çš„æ—¥å¿—æ–‡ä»¶å,ç»å¯¹è·¯å¾„æˆ–è€…ç›¸å¯¹è·¯å¾„ã€‚</li><li>-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=1506ï¼Œè¿œç¨‹è°ƒè¯•</li></ul><p>6.JavaAgentå‚æ•°</p><p>Agent æ˜¯ JVM ä¸­çš„ä¸€é¡¹é»‘ç§‘æŠ€, å¯ä»¥é€šè¿‡æ— ä¾µå…¥æ–¹å¼æ¥åšå¾ˆå¤šäº‹æƒ…ï¼Œæ¯”å¦‚æ³¨å…¥ AOP ä»£ç ï¼Œæ‰§è¡Œç»Ÿè®¡ç­‰ç­‰ï¼Œæƒé™éå¸¸å¤§ã€‚è¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹é…ç½®é€‰é¡¹ï¼Œè¯¦ç»†åŠŸèƒ½éœ€è¦ä¸“é—¨æ¥è®²ã€‚</p><p>è®¾ç½® agent çš„è¯­æ³•å¦‚ä¸‹:</p><ul><li>-agentlib:libname[=options] å¯ç”¨ native æ–¹å¼çš„ agent, å‚è€ƒ LD_LIBRARY_PATH è·¯å¾„ã€‚</li><li>-agentpath:pathname[=options] å¯ç”¨ native æ–¹å¼çš„ agentã€‚</li><li>-javaagent:jarpath[=options] å¯ç”¨å¤–éƒ¨çš„ agent åº“, æ¯”å¦‚ pinpoint.jar ç­‰ç­‰ã€‚</li><li>-Xnoagent åˆ™æ˜¯ç¦ç”¨æ‰€æœ‰ agentã€‚ ä»¥ä¸‹ç¤ºä¾‹å¼€å¯ CPU ä½¿ç”¨æ—¶é—´æŠ½æ ·åˆ†æ:<ul><li>JAVA_OPTS=â€-agentlib:hprof=cpu=samples,file=cpu.samples.logâ€</li></ul></li></ul>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;JVM-è¿è¡Œæ—¶æ•°æ®åŒºæ¦‚è¿°&quot;&gt;&lt;a href=&quot;#JVM-è¿è¡Œæ—¶æ•°æ®åŒºæ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;JVM è¿è¡Œæ—¶æ•°æ®åŒºæ¦‚è¿°&quot;&gt;&lt;/a&gt;JVM è¿è¡Œæ—¶æ•°æ®åŒºæ¦‚è¿°&lt;/h2&gt;&lt;p&gt;å†…å­˜æ˜¯éå¸¸é‡è¦çš„ç³»ç»Ÿèµ„æºï¼Œæ˜¯ç¡¬ç›˜å’Œ CPU çš„ä¸­é—´ä»“åº“åŠæ¡¥æ¢ï¼Œæ‰¿è½½ç€æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºçš„å®æ—¶è¿è¡Œã€‚JVM å†…å­˜å¸ƒå±€è§„å®šäº† Java åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å†…å­˜ç”³è¯·ã€åˆ†é…ã€ç®¡ç†çš„ç­–ç•¥ï¼Œä¿è¯äº† JVM çš„é«˜æ•ˆç¨³å®šè¿è¡Œã€‚ä¸åŒçš„ JVM å¯¹äºå†…å­˜çš„åˆ’åˆ†æ–¹å¼å’Œç®¡ç†æœºåˆ¶å­˜åœ¨ç€éƒ¨åˆ†å·®å¼‚ã€‚ç»“åˆ JVM è™šæ‹Ÿæœºè§„èŒƒï¼Œæ¥è®¨è®ºä¸€ä¸‹ç»å…¸çš„ JVM å†…å­˜å¸ƒå±€ã€‚&lt;/p&gt;
&lt;p&gt;Java è™šæ‹Ÿæœºå®šä¹‰äº†è‹¥å¹²ç§ç¨‹åºè¿è¡ŒæœŸé—´ä¼šä½¿ç”¨åˆ°çš„è¿è¡Œæ—¶æ•°æ®åŒºï¼Œå…¶ä¸­æœ‰ä¸€äº›ä¼šéšç€è™šæ‹Ÿæœºå¯åŠ¨è€Œåˆ›å»ºï¼Œéšç€è™šæ‹Ÿæœºé€€å‡ºè€Œé”€æ¯ã€‚è€Œå¦å¤–ä¸€äº›åˆ™æ˜¯ä¸çº¿ç¨‹ä¸€ä¸€å¯¹åº”çš„ï¼Œè¿™äº›ä¸çº¿å¯¹åº”çš„æ•°æ®åŒºåŸŸä¼šéšç€çº¿ç¨‹å¼€å§‹å’Œç»“æŸè€Œåˆ›å»ºå’Œé”€æ¯ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Javaè¿›é˜¶" scheme="http://yonghong.tech/categories/Java%E8%BF%9B%E9%98%B6/"/>
    
    
    <category term="Javaè¿›é˜¶" scheme="http://yonghong.tech/tags/Java%E8%BF%9B%E9%98%B6/"/>
    
    <category term="JVM" scheme="http://yonghong.tech/tags/JVM/"/>
    
  </entry>
  
  <entry>
    <title>Java è¿›é˜¶ 03 â€”â€” ç±»åŠ è½½å™¨å’ŒåŒäº²å§”æ´¾åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</title>
    <link href="http://yonghong.tech/java-advance/03-jvm-classloader/"/>
    <id>http://yonghong.tech/java-advance/03-jvm-classloader/</id>
    <published>2021-05-15T13:00:00.000Z</published>
    <updated>2021-05-15T13:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç±»åŠ è½½å­ç³»ç»Ÿä½œç”¨"><a href="#ç±»åŠ è½½å­ç³»ç»Ÿä½œç”¨" class="headerlink" title="ç±»åŠ è½½å­ç³»ç»Ÿä½œç”¨"></a>ç±»åŠ è½½å­ç³»ç»Ÿä½œç”¨</h2><ul><li>ç±»åŠ è½½å­ç³»ç»Ÿè´Ÿè´£ä»æ–‡ä»¶ç³»ç»Ÿæˆ–è€…ç½‘ç»œä¸­åŠ è½½ Class æ–‡ä»¶ï¼ŒClass æ–‡ä»¶åœ¨æ–‡ä»¶å¼€å¤´æœ‰ç‰¹å®šçš„æ–‡ä»¶æ ‡è¯†ï¼ˆcafebabeï¼‰</li><li>ClassLoader åªè´Ÿè´£ Class æ–‡ä»¶çš„åŠ è½½ï¼Œè‡³äºå®ƒæ˜¯å¦èƒ½å¤Ÿè¿è¡Œï¼Œåˆ™ç”± Execution Engine å†³å®š</li><li>åŠ è½½çš„ç±»ä¿¡æ¯å­˜æ”¾äºä¸€å—ç§°ä¸ºæ–¹æ³•åŒºçš„å†…å­˜ç©ºé—´ã€‚é™¤äº†ç±»çš„ä¿¡æ¯å¤–ï¼Œæ–¹æ³•åŒºè¿˜å­˜æ”¾è¿è¡Œæ—¶å¸¸é‡æ± ä¿¡æ¯ï¼Œå¯èƒ½è¿˜åŒ…å«å­—ç¬¦ä¸²å­—é¢å€¼å’Œæ•°å­—å¸¸é‡ï¼ˆè¿™éƒ¨åˆ†å¸¸é‡ä¿¡æ¯æ˜¯ Class æ–‡ä»¶ä¸­å¸¸é‡æ± éƒ¨åˆ†çš„å†…å­˜æ˜ å°„ï¼‰</li></ul><span id="more"></span><h2 id="ç±»åŠ è½½å™¨çš„è§’è‰²"><a href="#ç±»åŠ è½½å™¨çš„è§’è‰²" class="headerlink" title="ç±»åŠ è½½å™¨çš„è§’è‰²"></a>ç±»åŠ è½½å™¨çš„è§’è‰²</h2><p><img src="https://up-img.yonghong.tech/pic/2021/04/03-20-16-U6ND22-TgTnLm.png" alt="ç±»åŠ è½½å™¨çš„è§’è‰²"></p><ul><li>class file å­˜æ”¾äºæœ¬åœ°ç¡¬ç›˜ä¸Šï¼Œå¯ä»¥ç†è§£æˆè®¾è®¡å¸ˆç”»åœ¨çº¸ä¸Šçš„æ¨¡æ¿ï¼Œæœ€ç»ˆè¿™ä¸ªæ¨¡æ¿åœ¨æ‰§è¡Œçš„æ—¶å€™è¦åŠ è½½åˆ° JVM ä¸­æ¥ï¼Œæ ¹æ®è¿™ä¸ªæ–‡ä»¶å®ä¾‹åŒ–å‡º n ä¸ªä¸€æ¨¡ä¸€æ ·çš„å®ä¾‹</li><li>class file åŠ è½½åˆ° JVM ä¸­ï¼Œè¢«ç§°ä¸º DNA åŸæ•°æ®æ¨¡æ¿ï¼Œæ”¾åœ¨æ–¹æ³•åŒº</li><li>åœ¨ class æ–‡ä»¶ -&gt; JVM -&gt; æœ€ç»ˆæˆä¸ºåŸæ•°æ®æ¨¡æ¿ï¼Œæ­¤è¿‡ç¨‹éœ€è¦ä¸€ä¸ªè¿è¾“å·¥å…·ï¼Œå³ç±»åŠ è½½å™¨ Class Loaderï¼Œæ‰®æ¼”ä¸€ä¸ªå¿«é€’å‘˜çš„è§’è‰²</li></ul><h2 id="ç±»çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#ç±»çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç±»çš„ç”Ÿå‘½å‘¨æœŸ"></a>ç±»çš„ç”Ÿå‘½å‘¨æœŸ</h2><p><img src="https://up-img.yonghong.tech/pic/2021/04/02-20-18-01-%E7%B1%BB%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%9A%847%E4%B8%AA%E6%AD%A5%E9%AA%A4-r3r8RQ.png" alt="ç±»ç”Ÿå‘½å‘¨æœŸçš„7ä¸ªæ­¥éª¤"></p><ol><li>åŠ è½½ï¼ˆLoadingï¼‰ï¼šæ‰¾Classæ–‡ä»¶</li><li>éªŒè¯ï¼ˆVerificationï¼‰ï¼šéªŒè¯æ ¼å¼ã€ä¾èµ–</li><li>å‡†å¤‡ï¼ˆPreparationï¼‰ï¼šé™æ€å­—æ®µã€æ–¹æ³•è¡¨</li><li>è§£æï¼ˆResolutionï¼‰ï¼šç¬¦å·è§£æä¸ºå¼•ç”¨</li><li>åˆå§‹åŒ–ï¼ˆInitializationï¼‰ï¼šæ„é€ å™¨ã€é™æ€å˜é‡èµ‹å€¼ã€é™æ€ä»£ç å—</li><li>ä½¿ç”¨ï¼ˆUsingï¼‰</li><li>å¸è½½ï¼ˆUnloadingï¼‰</li></ol><h3 id="Loading-é˜¶æ®µ"><a href="#Loading-é˜¶æ®µ" class="headerlink" title="Loading é˜¶æ®µ"></a>Loading é˜¶æ®µ</h3><ol><li><p>é€šè¿‡ä¸€ä¸ªç±»çš„å…¨é™å®šåè·å–å®šä¹‰æ­¤ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµ</p></li><li><p>å°†è¿™ä¸ªå­—èŠ‚æµæ‰€ä»£è¡¨çš„çš„é™æ€å­˜å‚¨ç»“æ„è½¬åŒ–ä¸ºæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®åŒº</p></li><li><p><strong>åœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¿™ä¸ªç±»çš„ java.lang.Class å¯¹è±¡</strong>ï¼Œä½œä¸ºæ–¹æ³•åŒºè¿™ä¸ªç±»çš„å„ç§æ•°æ®çš„è®¿é—®å…¥å£</p></li></ol><p>è¡¥å……ï¼šåŠ è½½ class æ–‡ä»¶çš„æ–¹å¼</p><ul><li>ä»æœ¬åœ°ç³»ç»Ÿä¸­ç›´æ¥åŠ è½½</li><li>é€šè¿‡ç½‘ç»œè·å–ï¼Œå…¸å‹åœºæ™¯ï¼šWeb Applet</li><li>ä» zip å‹ç¼©åŒ…ä¸­è¯»å–ï¼Œæˆä¸ºæ—¥å jarã€war æ ¼å¼çš„åŸºç¡€</li><li>è¿è¡Œæ—¶è®¡ç®—ç”Ÿæˆï¼Œä½¿ç”¨æœ€å¤šçš„æ˜¯ï¼šåŠ¨æ€ä»£ç†æŠ€æœ¯</li><li>ç”±å…¶ä»–æ–‡ä»¶ç”Ÿæˆï¼Œå…¸å‹åœºæ™¯ï¼šJSP åº”ç”¨</li><li>ä»ä¸“æœ‰æ•°æ®åº“ä¸­æå– class æ–‡ä»¶ï¼Œæ¯”è¾ƒå°‘è§</li><li>ä»åŠ å¯†æ–‡ä»¶ä¸­è·å–ï¼Œå…¸å‹çš„é˜² class æ–‡ä»¶è¢«åç¼–è¯‘çš„ä¿æŠ¤æªæ–½</li></ul><h3 id="Linking-é˜¶æ®µ"><a href="#Linking-é˜¶æ®µ" class="headerlink" title="Linking é˜¶æ®µ"></a>Linking é˜¶æ®µ</h3><p>1.éªŒè¯ï¼ˆVerifyï¼‰ï¼š</p><ul><li>ç›®çš„åœ¨äºç¡®ä¿ class æ–‡ä»¶çš„å­—èŠ‚æµä¸­åŒ…å«ä¿¡æ¯ç¬¦åˆå½“å‰è™šæ‹Ÿæœºè¦æ±‚ï¼Œä¿è¯è¢«åŠ è½½ç±»çš„æ­£ç¡®æ€§ï¼Œä¸ä¼šå±å®³è™šæ‹Ÿæœºçš„è‡ªèº«å®‰å…¨</li><li>ä¸»è¦åŒ…æ‹¬å››ç§éªŒè¯ï¼šæ–‡ä»¶æ ¼å¼éªŒè¯ï¼Œå…ƒæ•°æ®éªŒè¯ï¼Œå­—èŠ‚ç éªŒè¯ï¼Œç¬¦å·å¼•ç”¨éªŒè¯</li></ul><p>2.å‡†å¤‡ï¼ˆPrepareï¼‰ï¼š</p><ul><li>ä¸ºç±»å˜é‡åˆ†é…å†…å­˜å¹¶ä¸”è®¾ç½®è¯¥ç±»å˜é‡çš„é»˜è®¤åˆå§‹å€¼ï¼Œå³é›¶å€¼</li><li>è¿™é‡Œä¸åŒ…å«ç”¨ final ä¿®é¥°çš„ staticï¼Œå› ä¸º final åœ¨ç¼–è¯‘çš„æ—¶å€™å°±ä¼šåˆ†é…äº†ï¼Œå‡†å¤‡é˜¶æ®µä¼šæ˜¾ç¤ºåˆå§‹åŒ–</li><li>è¿™é‡Œä¸ä¼šä¸ºå®ä¾‹å˜é‡åˆ†é…åˆå§‹å€¼ï¼Œç±»å˜é‡ä¼šåˆ†é…åœ¨æ–¹æ³•åŒºä¸­ï¼Œè€Œå®ä¾‹å˜é‡æ˜¯ä¼šéšç€å¯¹è±¡ä¸€èµ·åˆ†é…åˆ° Java å †ä¸­</li></ul><p>3.è§£æï¼ˆResolveï¼‰ï¼š</p><ul><li>å°†å¸¸é‡æ± å†…çš„ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨çš„è¿‡ç¨‹</li><li>äº‹å®ä¸Šï¼Œè§£ææ“ä½œå¾€å¾€ä¼šä¼´éšç€ JVM åœ¨æ‰§è¡Œå®Œåˆå§‹åŒ–ä¹‹åå†æ‰§è¡Œ</li><li>ç¬¦å·å¼•ç”¨å°±æ˜¯ä¸€ç»„ç¬¦å·æ¥æè¿°æ‰€å¼•ç”¨çš„ç›®æ ‡ã€‚ç¬¦å·å¼•ç”¨çš„å­—é¢é‡å½¢å¼æ˜ç¡®å®šä¹‰åœ¨ã€ŠJava è™šæ‹Ÿæœºè§„èŒƒã€‹çš„ class æ–‡ä»¶æ ¼å¼ä¸­ã€‚ç›´æ¥å¼•ç”¨å°±æ˜¯ç›´æ¥æŒ‡å‘ç›®æ ‡çš„æŒ‡é’ˆã€ç›¸å¯¹åç§»é‡æˆ–è€…ä¸€ä¸ªé—´æ¥å®šä½åˆ°ç›®æ ‡çš„å¥æŸ„</li><li>è§£æåŠ¨ä½œä¸»è¦é’ˆå¯¹ç±»æˆ–æ¥å£ã€å­—æ®µã€ç±»æ–¹æ³•ã€æ¥å£æ–¹æ³•ã€æ–¹æ³•ç±»å‹ç­‰ã€‚å¯¹åº”å¸¸é‡æ± ä¸­çš„ CONSTANT_Class_infoã€CONSTANT_Fieldref_infoã€CONSTANT_Methodref_info ç­‰ã€‚</li></ul><h3 id="Initialization-é˜¶æ®µ"><a href="#Initialization-é˜¶æ®µ" class="headerlink" title="Initialization é˜¶æ®µ"></a>Initialization é˜¶æ®µ</h3><ul><li>åˆå§‹åŒ–é˜¶æ®µå°±æ˜¯æ‰§è¡Œç±»æ„é€ å™¨æ–¹æ³• <code>&lt;clinit&gt;()</code> çš„è¿‡ç¨‹</li><li>æ­¤æ–¹æ³•ä¸éœ€è¦å®šä¹‰ï¼Œæ˜¯ javac ç¼–è¯‘å™¨è‡ªåŠ¨æ”¶é›†ç±»ä¸­æ‰€æœ‰ç±»å˜é‡çš„èµ‹å€¼åŠ¨ä½œå’Œé™æ€ä»£ç å—ä¸­çš„è¯­å¥åˆå¹¶è€Œæ¥</li><li>æ„é€ å™¨æ–¹æ³•ä¸­æŒ‡ä»¤æŒ‰è¯­å¥åœ¨æºæ–‡ä»¶ä¸­å‡ºç°çš„é¡ºåºæ‰§è¡Œ</li><li><code>&lt;clinit&gt;()</code> ä¸åŒäºç±»çš„æ„é€ å™¨ã€‚ï¼ˆå…³è”ï¼šæ„é€ å™¨æ˜¯è™šæ‹Ÿæœºè§†è§’ä¸‹çš„ <code>&lt;init&gt;()</code>ï¼‰</li><li>è‹¥è¯¥ç±»å…·æœ‰çˆ¶ç±»ï¼ŒJVM ä¼šä¿è¯å­ç±»çš„ <code>&lt;clinit&gt;()</code> æ‰§è¡Œå‰ï¼Œçˆ¶ç±»çš„ <code>clinit()</code> å·²ç»æ‰§è¡Œå®Œæ¯•</li><li>è™šæ‹Ÿæœºå¿…é¡»ä¿è¯ä¸€ä¸ªç±»çš„ <code>clinit()</code> æ–¹æ³•åœ¨å¤šçº¿ç¨‹ä¸‹è¢«åŒæ­¥åŠ è½½</li></ul><h2 id="ç±»çš„åŠ è½½æ—¶æœº"><a href="#ç±»çš„åŠ è½½æ—¶æœº" class="headerlink" title="ç±»çš„åŠ è½½æ—¶æœº"></a>ç±»çš„åŠ è½½æ—¶æœº</h2><ol><li>å½“è™šæ‹Ÿæœºå¯åŠ¨æ—¶ï¼Œåˆå§‹åŒ–ç”¨æˆ·æŒ‡å®šçš„ä¸»ç±»ï¼Œå°±æ˜¯å¯åŠ¨æ‰§è¡Œçš„mainæ–¹æ³•æ‰€åœ¨çš„ç±»ï¼›</li><li>å½“é‡åˆ°ç”¨ä¸€æ–°å»ºç›®æ ‡ç±»å®ä¾‹çš„newæŒ‡ä»¤æ—¶ï¼Œåˆå§‹åŒ–newæŒ‡ä»¤çš„ç›®æ ‡ç±»ï¼Œå°±æ˜¯newä¸€ä¸ªç±»çš„æ—¶å€™è¦åˆå§‹åŒ–ï¼›</li><li>å½“é‡åˆ°è°ƒç”¨é™æ€æ–¹æ³•çš„æŒ‡ä»¤æ—¶ï¼Œåˆå§‹åŒ–è¯¥é™æ€æ–¹æ³•æ‰€åœ¨çš„ç±»ï¼›</li><li>å½“é‡åˆ°è®¿é—®é™æ€å­—æ®µçš„æŒ‡ä»¤æ—¶ï¼Œåˆå§‹åŒ–è¯¥é™æ€å­—æ®µæ‰€åœ¨çš„ç±»ï¼›</li><li>å­ç±»çš„åˆå§‹åŒ–ä¼šè§¦å‘çˆ¶ç±»çš„åˆå§‹åŒ–ï¼›</li><li>å¦‚æœä¸€ä¸ªæ¥å£å®šä¹‰äº†defaultæ–¹æ³•ï¼Œé‚£ä¹ˆç›´æ¥å®ç°æˆ–è€…é—´æ¥å®ç°è¯¥æ¥å£çš„ç±»åˆå§‹åŒ–ï¼Œä¼šè§¦å‘è¯¥æ¥å£çš„åˆå§‹åŒ–ï¼›</li><li>ä½¿ç”¨åå°„APIå¯¹æŸä¸ªç±»å‹è¿›è¡Œåå°„è°ƒç”¨æ—¶ï¼Œåˆå§‹åŒ–è¿™ä¸ªç±»ï¼Œå…¶å®è·Ÿå‰é¢ä¸€æ ·ï¼Œåå°„è°ƒç”¨è¦ä¹ˆæ˜¯å·²ç»æœ‰å®ä¾‹äº†ï¼Œè¦ä¹ˆæ˜¯é™æ€æ–¹æ³•ï¼Œéƒ½éœ€è¦åˆå§‹åŒ–ï¼›</li><li>å½“åˆæ¬¡è°ƒç”¨MethodHandleå®ä¾‹æ—¶ï¼Œåˆå§‹åŒ–è¯¥MethodHandleæŒ‡å‘çš„æ–¹æ³•æ‰€åœ¨çš„ç±»ï¼›</li></ol><h3 id="ä¸ä¼šåˆå§‹åŒ–ï¼ˆå¯èƒ½ä¼šåŠ è½½ï¼‰"><a href="#ä¸ä¼šåˆå§‹åŒ–ï¼ˆå¯èƒ½ä¼šåŠ è½½ï¼‰" class="headerlink" title="ä¸ä¼šåˆå§‹åŒ–ï¼ˆå¯èƒ½ä¼šåŠ è½½ï¼‰"></a>ä¸ä¼šåˆå§‹åŒ–ï¼ˆå¯èƒ½ä¼šåŠ è½½ï¼‰</h3><ol><li>é€šè¿‡å­ç±»å¼•ç”¨çˆ¶ç±»çš„é™æ€å­—æ®µï¼Œåªä¼šè§¦å‘çˆ¶ç±»çš„åˆå§‹åŒ–ï¼Œè€Œä¸ä¼šè§¦å‘å­ç±»çš„åˆå§‹åŒ–ï¼›</li><li>å®šä¹‰å¯¹è±¡æ•°ç»„ï¼Œä¸ä¼šè§¦å‘è¯¥ç±»çš„åˆå§‹åŒ–ï¼›</li><li>å¸¸é‡åœ¨ç¼–è¯‘æœŸé—´ä¼šå­˜å…¥è°ƒç”¨ç±»çš„å¸¸é‡æ± ä¸­ï¼Œæœ¬è´¨ä¸Šå¹¶æ²¡æœ‰ç›´æ¥å¼•ç”¨å®šä¹‰å¸¸é‡çš„ç±»ï¼Œä¸ä¼šè§¦å‘å®šä¹‰å¸¸é‡æ‰€åœ¨çš„ç±»ï¼›</li><li>é€šè¿‡ç±»åè·å–Classå¯¹è±¡ï¼Œä¸ä¼šè§¦å‘ç±»çš„åˆå§‹åŒ–ï¼ŒHello.classä¸ä¼šè®©Helloç±»åˆå§‹åŒ–ï¼›</li><li>é€šè¿‡Class.forNameåŠ è½½æŒ‡å®šç±»æ—¶ï¼Œå¦‚æœæŒ‡å®šå‚æ•°initializeä¸ºfalseæ—¶ï¼Œä¹Ÿä¸ä¼šè§¦å‘ç±»åˆå§‹åŒ–ï¼Œå…¶å®è¿™ä¸ªå‚æ•°æ˜¯å‘Šè¯‰è™šæ‹Ÿæœºï¼Œæ˜¯å¦è¦å¯¹ç±»è¿›è¡Œåˆå§‹åŒ–ï¼ŒClass.forName(â€œjvm.Helloâ€) é»˜è®¤ä¼šåŠ è½½Helloç±»ï¼›</li><li>é€šè¿‡ClassLoaderé»˜è®¤çš„loadClassæ–¹æ³•ï¼Œä¹Ÿä¸ä¼šè§¦å‘åˆå§‹åŒ–åŠ¨ä½œï¼ˆåŠ è½½äº†ï¼Œä½†æ˜¯ä¸ä¼šåˆå§‹åŒ–ï¼‰ï¼›</li></ol><h2 id="è™šæ‹Ÿæœºè‡ªå¸¦çš„åŠ è½½å™¨"><a href="#è™šæ‹Ÿæœºè‡ªå¸¦çš„åŠ è½½å™¨" class="headerlink" title="è™šæ‹Ÿæœºè‡ªå¸¦çš„åŠ è½½å™¨"></a>è™šæ‹Ÿæœºè‡ªå¸¦çš„åŠ è½½å™¨</h2><p><img src="https://up-img.yonghong.tech/pic/2021/04/02-20-23-01-3%E4%B8%AA%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8-pnd3RO.png" alt="3ä¸ªç±»åŠ è½½å™¨"></p><ul><li>å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆå¼•å¯¼ç±»åŠ è½½å™¨ï¼ŒBootstrap ClassLoaderï¼‰<ul><li>è¿™ä¸ªç±»åŠ è½½å™¨ä½¿ç”¨ C/C++ è¯­è¨€å®ç°çš„ï¼ŒåµŒå¥—åœ¨ JVM å†…éƒ¨</li><li>å®ƒç”¨æ¥åŠ è½½ Java çš„æ ¸å¿ƒåº“ï¼ˆJAVA_HOME/jre/lib/rt.jarã€resources.jar æˆ– sun.boot.class.path è·¯å¾„ä¸‹çš„å†…å®¹ï¼‰ï¼Œç”¨äºæä¾› JVM è‡ªèº«éœ€è¦çš„ç±»</li><li>å¹¶ä¸ç»§æ‰¿è‡ª java.lang.ClassLoaderï¼Œæ²¡æœ‰çˆ¶åŠ è½½å™¨ã€‚</li><li>åŠ è½½æ‹“å±•ç±»å’Œåº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ï¼Œå¹¶æŒ‡å®šä¸ºä»–ä»¬çš„çˆ¶ç±»åŠ è½½å™¨</li><li>å‡ºäºå®‰å…¨è€ƒè™‘ï¼ŒBootstrap å¯åŠ¨ç±»åŠ è½½å™¨åªåŠ è½½åŒ…åä¸º javaã€javaxã€sun ç­‰å¼€å¤´çš„ç±»</li></ul></li><li>æ‹“å±•ç±»åŠ è½½å™¨ï¼ˆExtension ClassLoaderï¼‰<ul><li>Java è¯­è¨€ç¼–å†™ï¼Œç”± sun.misc.Launcher$ExtClassLoader å®ç°</li><li>æ´¾ç”Ÿäº ClassLoader ç±»</li><li>çˆ¶ç±»åŠ è½½å™¨ä¸ºå¯åŠ¨ç±»åŠ è½½å™¨</li><li>ä» java.ext.dirs ç³»ç»Ÿå±æ€§æ‰€æŒ‡å®šçš„ç›®å½•ä¸­åŠ è½½ç±»åº“ï¼Œæˆ–ä» JDK çš„å®‰è£…ç›®å½•çš„ jre/lib/ext å­ç›®å½•ï¼ˆæ‹“å±•ç›®å½•ï¼‰ä¸‹åŠ è½½ç±»åº“ã€‚å¦‚æœç”¨æˆ·åˆ›å»ºçš„ JAR æ”¾åœ¨æ­¤ç›®å½•ä¸‹ï¼Œä¹Ÿä¼šè‡ªåŠ¨ç”±æ‹“å±•ç±»åŠ è½½å™¨åŠ è½½</li></ul></li><li>åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ï¼ˆç³»ç»Ÿç±»åŠ è½½å™¨ï¼ŒAppClassLoaderï¼‰<ul><li>java è¯­è¨€ç¼–å†™ï¼Œç”± sun.misc.Launcher$AppClassLoader å®ç°</li><li>æ´¾ç”Ÿäº ClassLoader ç±»</li><li>çˆ¶ç±»åŠ è½½å™¨ä¸ºæ‹“å±•ç±»åŠ è½½å™¨</li><li>ä»–è´Ÿè´£åŠ è½½ç¯å¢ƒå˜é‡ classpath æˆ–ç³»ç»Ÿå±æ€§ java.class.path æŒ‡å®šè·¯å¾„ä¸‹çš„ç±»åº“</li><li>è¯¥ç±»åŠ è½½æ˜¯ç¨‹åºä¸­é»˜è®¤çš„ç±»åŠ è½½å™¨ï¼Œä¸€èˆ¬æ¥è¯´ï¼ŒJava åº”ç”¨çš„ç±»éƒ½æ˜¯ç”±å®ƒæ¥å®ŒæˆåŠ è½½</li><li>é€šè¿‡ ClassLoader$getSystemClassLoader() æ–¹æ³•å¯ä»¥è·å–åˆ°è¯¥ç±»åŠ è½½å™¨</li></ul></li></ul><p>ç±»åŠ è½½å™¨å¯ä»¥é€šè¿‡getParentè·å–çˆ¶åŠ è½½å™¨ï¼Œè¿™å¹¶ä¸æ˜¯ç»§æ‰¿å…³ç³»ï¼Œå¦‚æœç›´æ¥ç»§æ‰¿ClassLoaderè‡ªå·±å®ç°ä¸€ä¸ªç±»åŠ è½½å™¨ï¼Œä¸”ä¸æŒ‡å®šçˆ¶åŠ è½½å™¨ï¼Œä»–çš„çˆ¶åŠ è½½å™¨å°±æ˜¯AppClassLoader</p><p>ä»»ä½•parentä¸ºnullçš„åŠ è½½å™¨ï¼Œå…¶çˆ¶åŠ è½½å™¨ä¸º BootstrapClassLoader</p><p><img src="https://up-img.yonghong.tech/pic/2021/04/02-20-26-01-%E6%8B%93%E5%B1%95%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E5%92%8C%E5%BA%94%E7%94%A8%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8-PRIfeU.png" alt="æ‹“å±•ç±»åŠ è½½å™¨å’Œåº”ç”¨ç±»åŠ è½½å™¨"></p><h2 id="åŠ è½½å™¨ç‰¹ç‚¹"><a href="#åŠ è½½å™¨ç‰¹ç‚¹" class="headerlink" title="åŠ è½½å™¨ç‰¹ç‚¹"></a>åŠ è½½å™¨ç‰¹ç‚¹</h2><h3 id="åŒäº²å§”æ‰˜"><a href="#åŒäº²å§”æ‰˜" class="headerlink" title="åŒäº²å§”æ‰˜"></a>åŒäº²å§”æ‰˜</h3><p>Java è™šæ‹Ÿæœºå¯¹ class æ–‡ä»¶é‡‡ç”¨çš„æ˜¯æŒ‰éœ€åŠ è½½çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯è¯´å½“éœ€è¦ä½¿ç”¨è¯¥ç±»æ—¶æ‰ä¼šå°†å®ƒçš„ class æ–‡ä»¶åŠ è½½åˆ°å†…å­˜ç”Ÿæˆ class å¯¹è±¡ã€‚è€Œä¸”åŠ è½½æŸä¸ªç±»çš„ class æ–‡ä»¶æ—¶ï¼ŒJava è™šæ‹Ÿæœºé‡‡ç”¨çš„æ˜¯åŒäº²å§”æ´¾æ¨¡å¼ï¼Œå³æŠŠè¯·æ±‚äº¤ç”±çˆ¶ç±»å¤„ç†ï¼Œå®ƒæ˜¯ä¸€ç§ä»»åŠ¡å§”æ´¾æ¨¡å¼ã€‚</p><ul><li>å¦‚æœä¸€ä¸ªç±»åŠ è½½å™¨æ”¶åˆ°äº†ç±»åŠ è½½çš„è¯·æ±‚ï¼Œå®ƒå¹¶ä¸ä¼šè‡ªå·±å…ˆå»åŠ è½½ï¼Œè€Œæ˜¯æŠŠè¿™ä¸ªè¯·æ±‚å§”æ‰˜ç»™çˆ¶ç±»çš„åŠ è½½å™¨å»æ‰§è¡Œ</li><li>å¦‚æœçˆ¶ç±»åŠ è½½å™¨è¿˜å­˜åœ¨å…¶ä»–çˆ¶ç±»åŠ è½½å™¨ï¼Œåˆ™è¿›ä¸€æ­¥å‘ä¸Šå§”æ‰˜ï¼Œä¾æ¬¡é€’å½’è¯·æ±‚æœ€ç»ˆå°†åˆ°è¾¾é¡¶å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨</li><li>å¦‚æœçˆ¶ç±»åŠ è½½å™¨å¯ä»¥å®Œæˆç±»çš„åŠ è½½ä»»åŠ¡ï¼Œå°±æˆåŠŸè¿”å›ï¼Œå€˜è‹¥çˆ¶ç±»åŠ è½½å™¨æ— æ³•å®Œæˆæ­¤åŠ è½½ä»»åŠ¡ï¼Œå­åŠ è½½å™¨æ‰ä¼šå°è¯•è‡ªå·±å»åŠ è½½ï¼Œè¿™å°±æ˜¯åŒäº²å§”æ´¾æœºåˆ¶</li></ul><p><strong>ä¼˜åŠ¿</strong></p><ul><li>é¿å…ç±»çš„é‡å¤åŠ è½½</li><li>ä¿æŠ¤ç¨‹åºå®‰å…¨ï¼Œé˜²æ­¢æ ¸å¿ƒ API è¢«éšæ„ç¯¡æ”¹</li></ul><p><strong>æ²™ç®±å®‰å…¨æœºåˆ¶</strong></p><p>è‡ªå®šä¹‰ String ç±»ï¼Œä½†æ˜¯åœ¨åŠ è½½è‡ªå®šä¹‰ String ç±»çš„æ—¶å€™ä¼šç‡å…ˆä½¿ç”¨å¼•å¯¼ç±»åŠ è½½å™¨åŠ è½½ï¼Œè€Œå¼•å¯¼ç±»åŠ è½½å™¨åœ¨åŠ è½½è¿‡ç¨‹ä¸­ä¼šç‡å…ˆåŠ è½½ JDK è‡ªå¸¦çš„æ–‡ä»¶ï¼ˆrt.jar åŒ…ä¸­ java/lang/String.classï¼‰ï¼ŒæŠ¥é”™ä¿¡æ¯è¯´æ²¡æœ‰ main æ–¹æ³•ï¼Œå°±æ˜¯å› ä¸ºåŠ è½½çš„æ˜¯rt.jar åŒ…ä¸­çš„ String ç±»ã€‚è¿™æ ·å¯ä»¥ä¿è¯å¯¹ Java æ ¸å¿ƒæºä»£ç çš„ä¿æŠ¤ï¼Œè¿™å°±æ˜¯æ²™ç®±å®‰å…¨æœºåˆ¶ã€‚</p><p>åœ¨ JVM ä¸­è¡¨ç¤ºä¸¤ä¸ª class å¯¹è±¡æ˜¯å¦ä¸ºåŒä¸€ä¸ªç±»å­˜åœ¨ä¸¤ä¸ªå¿…è¦æ¡ä»¶ï¼š</p><ul><li>ç±»çš„å®Œæ•´ç±»åå¿…é¡»ä¸€è‡´ï¼ŒåŒ…æ‹¬åŒ…å</li><li>åŠ è½½è¿™ä¸ªç±»çš„ ClassLoader ï¼ˆæŒ‡ ClassLoader å®ä¾‹å¯¹è±¡ï¼‰å¿…é¡»ç›¸åŒ</li></ul><p>æ¢å¥è¯è¯´ï¼Œåœ¨ JVM ä¸­ï¼Œå³ä½¿è¿™ä¸¤ä¸ªç±»å¯¹è±¡ï¼ˆclass å¯¹è±¡ï¼‰æ¥æºäºåŒä¸€ä¸ª Class æ–‡ä»¶ï¼Œè¢«åŒä¸€ä¸ªè™šæ‹Ÿæœºæ‰€åŠ è½½ï¼Œä½†åªè¦åŠ è½½å®ƒä»¬çš„ ClassLoader å®ä¾‹å¯¹è±¡ä¸åŒï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªç±»å¯¹è±¡ä¹Ÿæ˜¯ä¸ç›¸ç­‰çš„ã€‚</p><p>JVM å¿…é¡»çŸ¥é“ä¸€ä¸ªç±»å‹æ˜¯ç”±å¯åŠ¨åŠ è½½å™¨åŠ è½½çš„è¿˜æ˜¯ç”±ç”¨æˆ·ç±»åŠ è½½å™¨åŠ è½½çš„ã€‚å¦‚æœä¸€ä¸ªç±»å‹æ˜¯ç”±ç”¨æˆ·ç±»åŠ è½½å™¨åŠ è½½çš„ï¼Œé‚£ä¹ˆ JVM ä¼šå°†è¿™ä¸ªç±»åŠ è½½å™¨çš„ä¸€ä¸ªå¼•ç”¨ä½œä¸ºç±»å‹ä¿¡æ¯çš„ä¸€éƒ¨åˆ†ä¿å­˜åœ¨æ–¹æ³•åŒºä¸­ã€‚å½“è§£æä¸€ä¸ªç±»å‹åˆ°å¦ä¸€ä¸ªç±»å‹çš„å¼•ç”¨çš„æ—¶å€™ï¼ŒJVM éœ€è¦ä¿è¯è¿™ä¸¤ä¸ªç±»å‹çš„ç±»åŠ è½½å™¨æ˜¯ç›¸åŒçš„ã€‚</p><h3 id="è´Ÿè´£ä¾èµ–"><a href="#è´Ÿè´£ä¾èµ–" class="headerlink" title="è´Ÿè´£ä¾èµ–"></a>è´Ÿè´£ä¾èµ–</h3><p>å¦‚æœä¸€ä¸ªç±»ä¾èµ–äº†å…¶ä»–çš„ç±»ï¼Œé‚£ä¹ˆå°±éœ€è¦å…ˆåŠ è½½ä¾èµ–çš„ç±»ã€‚</p><h3 id="ç¼“å­˜åŠ è½½"><a href="#ç¼“å­˜åŠ è½½" class="headerlink" title="ç¼“å­˜åŠ è½½"></a>ç¼“å­˜åŠ è½½</h3><p>ç±»åŠ è½½ä¹‹åï¼Œå°±æŠŠå®ƒç¼“å­˜èµ·æ¥ï¼Œåç»­ä»ç¼“å­˜ä¸­è·å–</p><h2 id="å…³äº-ClassLoader"><a href="#å…³äº-ClassLoader" class="headerlink" title="å…³äº ClassLoader"></a>å…³äº ClassLoader</h2><p>ClassLoader ç±»ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå…¶åæ‰€æœ‰çš„ç±»åŠ è½½å™¨éƒ½ç»§æ‰¿è‡ª ClassLoader ï¼ˆä¸åŒ…æ‹¬å¯åŠ¨ç±»åŠ è½½å™¨ï¼‰</p><table><thead><tr><th>æ–¹æ³•åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td>getParent()</td><td>è¿”å›è¯¥ç±»åŠ è½½å™¨çš„è¶…ç±»åŠ è½½å™¨</td></tr><tr><td>loadClass(String name)</td><td>åŠ è½½åç§°ä¸º name çš„ç±»ï¼Œè¿”å›ç»“æœä¸º java.lang.Class ç±»çš„å®ä¾‹</td></tr><tr><td>findClass(String name)</td><td>æŸ¥æ‰¾åç§°ä¸º name çš„ç±»ï¼Œè¿”å›ç»“æœä¸º java.lang.Class ç±»çš„å®ä¾‹</td></tr><tr><td>findLoadedClass(String name)</td><td>æŸ¥æ‰¾åç§°ä¸º name çš„å·²ç»è¢«åŠ è½½è¿‡çš„ç±»ï¼Œè¿”å›ç»“æœä¸º java.lang.Class ç±»çš„å®ä¾‹</td></tr><tr><td>defineClass(String name, byte[] b, int off, int len)</td><td>æŠŠå­—èŠ‚æ•°ç»„ b ä¸­çš„å†…å­˜è½¬æ¢æˆä¸ºä¸€ä¸ª Java ç±»ï¼Œè¿”å›ç»“æœä¸º java.lang.Class ç±»çš„å®ä¾‹</td></tr><tr><td>resolveClass(Class&lt;?&gt; c)</td><td>è¿æ¥æŒ‡å®šçš„ä¸€ä¸ª Java ç±»</td></tr></tbody></table><h2 id="è·å–-ClassLoader-çš„é€”å¾„"><a href="#è·å–-ClassLoader-çš„é€”å¾„" class="headerlink" title="è·å– ClassLoader çš„é€”å¾„"></a>è·å– ClassLoader çš„é€”å¾„</h2><p>æ–¹å¼ä¸€ï¼šè·å–å½“å‰ç±»çš„ ClassLoader</p><p>clazz.getClassLoader()</p><p>æ–¹å¼äºŒï¼šè·å–å½“å‰çº¿ç¨‹ä¸Šä¸‹æ–‡çš„ ClassLoader</p><p>Thread.currentThread().getContextClassLoader()</p><p>æ–¹å¼ä¸‰ï¼šè·å–ç³»ç»Ÿçš„ClassLoader</p><p>ClassLoader.getSystemClassLoader()</p><p>æ–¹å¼å››ï¼šè·å–è°ƒç”¨è€…çš„ CLassLoader</p><p>DriverManager.getCallerClassLoader()</p><h2 id="æ˜¾ç¤ºå½“å‰-ClassLoader-åŠ è½½äº†å“ªäº›-Jar-ï¼Ÿ"><a href="#æ˜¾ç¤ºå½“å‰-ClassLoader-åŠ è½½äº†å“ªäº›-Jar-ï¼Ÿ" class="headerlink" title="æ˜¾ç¤ºå½“å‰ ClassLoader åŠ è½½äº†å“ªäº› Jar ï¼Ÿ"></a>æ˜¾ç¤ºå½“å‰ ClassLoader åŠ è½½äº†å“ªäº› Jar ï¼Ÿ</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.net.URLClassLoader;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JvmClassLoaderPrintPath</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å¯åŠ¨ç±»åŠ è½½å™¨</span></span><br><span class="line">        URL[] urls = sun.misc.Launcher.getBootstrapClassPath().getURLs();</span><br><span class="line">        System.out.println(<span class="string">&quot;å¯åŠ¨ç±»åŠ è½½å™¨&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (URL url : urls) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot; ===&gt; &quot;</span> + url.toExternalForm());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‹“å±•ç±»åŠ è½½å™¨</span></span><br><span class="line">        printClassLoader(<span class="string">&quot;æ‹“å±•ç±»åŠ è½½å™¨&quot;</span>, JvmClassLoaderPrintPath.class.getClassLoader().getParent());</span><br><span class="line">        <span class="comment">// åº”ç”¨ç±»åŠ è½½å™¨</span></span><br><span class="line">        printClassLoader(<span class="string">&quot;åº”ç”¨ç±»åŠ è½½å™¨&quot;</span>, JvmClassLoaderPrintPath.class.getClassLoader());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printClassLoader</span><span class="params">(String name, ClassLoader classLoader)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (classLoader != <span class="keyword">null</span>) &#123;</span><br><span class="line">            System.out.println(name + <span class="string">&quot; ClassLoader -&gt; &quot;</span> + classLoader.toString());</span><br><span class="line">            printUrlForClassLoader(classLoader);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(name + <span class="string">&quot; ClassLoader -&gt; null&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printUrlForClassLoader</span><span class="params">(ClassLoader classLoader)</span> </span>&#123;</span><br><span class="line">        Object ucp = insightField(classLoader, <span class="string">&quot;ucp&quot;</span>);</span><br><span class="line">        Object path = insightField(ucp, <span class="string">&quot;path&quot;</span>);</span><br><span class="line">        ArrayList ps = (ArrayList) path;</span><br><span class="line">        <span class="keyword">for</span> (Object p : ps) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot; ===&gt; &quot;</span> + p.toString());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Object <span class="title">insightField</span><span class="params">(Object obj, String fName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Field f = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> URLClassLoader) &#123;</span><br><span class="line">                f = URLClassLoader.class.getDeclaredField(fName);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                f = obj.getClass().getDeclaredField(fName);</span><br><span class="line">            &#125;</span><br><span class="line">            f.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">            <span class="keyword">return</span> f.get(obj);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">å¯åŠ¨ç±»åŠ è½½å™¨</span><br><span class="line"> ===&gt; file:/Users/yq/.sdkman/candidates/java/8.0.275.hs-adpt/jre/lib/resources.jar</span><br><span class="line"> ===&gt; file:/Users/yq/.sdkman/candidates/java/8.0.275.hs-adpt/jre/lib/rt.jar</span><br><span class="line"> ===&gt; file:/Users/yq/.sdkman/candidates/java/8.0.275.hs-adpt/jre/lib/sunrsasign.jar</span><br><span class="line"> ===&gt; file:/Users/yq/.sdkman/candidates/java/8.0.275.hs-adpt/jre/lib/jsse.jar</span><br><span class="line"> ===&gt; file:/Users/yq/.sdkman/candidates/java/8.0.275.hs-adpt/jre/lib/jce.jar</span><br><span class="line"> ===&gt; file:/Users/yq/.sdkman/candidates/java/8.0.275.hs-adpt/jre/lib/charsets.jar</span><br><span class="line"> ===&gt; file:/Users/yq/.sdkman/candidates/java/8.0.275.hs-adpt/jre/lib/jfr.jar</span><br><span class="line"> ===&gt; file:/Users/yq/.sdkman/candidates/java/8.0.275.hs-adpt/jre/classes</span><br><span class="line">æ‹“å±•ç±»åŠ è½½å™¨ ClassLoader -&gt; sun.misc.Launcher$ExtClassLoader@6d06d69c</span><br><span class="line"> ===&gt; file:/Users/yq/.sdkman/candidates/java/8.0.275.hs-adpt/jre/lib/ext/sunec.jar</span><br><span class="line"> ===&gt; file:/Users/yq/.sdkman/candidates/java/8.0.275.hs-adpt/jre/lib/ext/nashorn.jar</span><br><span class="line"> ===&gt; file:/Users/yq/.sdkman/candidates/java/8.0.275.hs-adpt/jre/lib/ext/cldrdata.jar</span><br><span class="line"> ===&gt; file:/Users/yq/.sdkman/candidates/java/8.0.275.hs-adpt/jre/lib/ext/dnsns.jar</span><br><span class="line"> ===&gt; file:/Users/yq/.sdkman/candidates/java/8.0.275.hs-adpt/jre/lib/ext/localedata.jar</span><br><span class="line"> ===&gt; file:/Users/yq/.sdkman/candidates/java/8.0.275.hs-adpt/jre/lib/ext/sunjce_provider.jar</span><br><span class="line"> ===&gt; file:/Users/yq/.sdkman/candidates/java/8.0.275.hs-adpt/jre/lib/ext/sunpkcs11.jar</span><br><span class="line"> ===&gt; file:/Users/yq/.sdkman/candidates/java/8.0.275.hs-adpt/jre/lib/ext/jaccess.jar</span><br><span class="line"> ===&gt; file:/Users/yq/.sdkman/candidates/java/8.0.275.hs-adpt/jre/lib/ext/zipfs.jar</span><br><span class="line"> ===&gt; file:/System/Library/Java/Extensions/MRJToolkit.jar</span><br><span class="line">åº”ç”¨ç±»åŠ è½½å™¨ ClassLoader -&gt; sun.misc.Launcher$AppClassLoader@659e0bfd</span><br><span class="line"> ===&gt; file:/Users/yq/code/wangyonghong/code-lab/gtu-java/out/production/gtu-java/</span><br></pre></td></tr></table></figure><h2 id="ç”¨æˆ·è‡ªå®šä¹‰ç±»åŠ è½½å™¨"><a href="#ç”¨æˆ·è‡ªå®šä¹‰ç±»åŠ è½½å™¨" class="headerlink" title="ç”¨æˆ·è‡ªå®šä¹‰ç±»åŠ è½½å™¨"></a>ç”¨æˆ·è‡ªå®šä¹‰ç±»åŠ è½½å™¨</h2><ul><li><p>åœ¨ Java çš„æ—¥å¸¸åº”ç”¨ç¨‹åºå¼€å‘ä¸­ï¼Œç±»çš„åŠ è½½å‡ ä¹æ˜¯ç”±ä¸Šè¿° 3 ç§ç±»åŠ è½½å™¨ç›¸äº’é…åˆæ‰§è¡Œçš„ï¼Œåœ¨å¿…è¦æ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œæ¥å®šåˆ¶ç±»çš„åŠ è½½æ–¹å¼</p></li><li><p>ä¸ºä»€ä¹ˆè¦è‡ªå®šä¹‰ç±»åŠ è½½å™¨</p><ul><li>éš”ç¦»åŠ è½½ç±»</li><li>ä¿®æ”¹ç±»åŠ è½½æ–¹å¼</li><li>æ‹“å±•åŠ è½½æº</li><li>é˜²æ­¢æºç æ³„éœ²</li></ul></li><li><p>å¼€å‘äººå‘˜å¯ä»¥é€šè¿‡ç»§æ‰¿æŠ½è±¡ç±» java.lang.ClassLoader ç±»çš„æ–¹å¼ï¼Œå®ç°è‡ªå·±çš„ç±»åŠ è½½å™¨ï¼Œä»¥æ»¡è¶³ä¸€äº›ç‰¹æ®Šéœ€æ±‚</p></li><li><p>åœ¨ JDK 1.2 ä¹‹å‰ï¼Œåœ¨è‡ªå®šä¹‰ç±»åŠ è½½å™¨æ—¶ï¼Œæ€»ä¼šå»ç»§æ‰¿ ClassLoader ç±»å¹¶é‡å†™ loadClass() æ–¹æ³•ï¼Œä»è€Œå®ç°è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨ç±»ï¼Œä½†æ˜¯åœ¨ JDK 1.2 ä¹‹åå·²ä¸å†å»ºè®®ç”¨æˆ·å»è¦†ç›– loadClass() æ–¹æ³•ï¼Œè€Œæ˜¯å»ºè®®æŠŠè‡ªå®šä¹‰çš„ç±»åŠ è½½é€»è¾‘å†™åœ¨ findClass() æ–¹æ³•ä¸­</p></li><li><p>åœ¨ç¼–å†™è‡ªå®šä¹‰ç±»åŠ è½½å™¨æ—¶ï¼Œå¦‚æœæ²¡æœ‰å¤ªè¿‡äºå¤æ‚çš„éœ€æ±‚ï¼Œå¯ä»¥ç›´æ¥ç»§æ‰¿ URLClassLoader ç±»ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…è‡ªå·±å»ç¼–å†™ findClass() æ–¹æ³•ä»¥åŠè·å–å­—èŠ‚ç æµçš„æ–¹å¼ï¼Œä½¿è‡ªå®šä¹‰ç±»åŠ è½½å™¨ç¼–å†™æ›´åŠ ç®€å•</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hello</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello, classLoader!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä»¥ä¸‹æ–¹æ³•æ‹¿åˆ° base64</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> javac Hello.java</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> base64 Hello.class</span> </span><br><span class="line">yv66vgAAADQAHAoABgAOCQAPABAIABEKABIAEwcAFAcAFQEABjxpbml0PgEAAygpVgEABENvZGUBAA9MaW5lTnVtYmVyVGFibGUBAAVoZWxsbwEAClNvdXJjZUZpbGUBAApIZWxsby5qYXZhDAAHAAgHABYMABcAGAEAE0hlbGxvLCBjbGFzc0xvYWRlciEHABkMABoAGwEABUhlbGxvAQAQamF2YS9sYW5nL09iamVjdAEAEGphdmEvbGFuZy9TeXN0ZW0BAANvdXQBABVMamF2YS9pby9QcmludFN0cmVhbTsBABNqYXZhL2lvL1ByaW50U3RyZWFtAQAHcHJpbnRsbgEAFShMamF2YS9sYW5nL1N0cmluZzspVgAhAAUABgAAAAAAAgABAAcACAABAAkAAAAdAAEAAQAAAAUqtwABsQAAAAEACgAAAAYAAQAAAAQAAQALAAgAAQAJAAAAJQACAAEAAAAJsgACEgO2AASxAAAAAQAKAAAACgACAAAABgAIAAcAAQAMAAAAAgAN</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é€šè¿‡ä»¥ä¸‹æ–¹æ³•å¯ä»¥è‡ªå®šä¹‰ClassLoader</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Base64;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yonghongwang#163.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2021/4/2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloClassLoader</span> <span class="keyword">extends</span> <span class="title">ClassLoader</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">new</span> HelloClassLoader().findClass(<span class="string">&quot;Hello&quot;</span>).newInstance();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InstantiationException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt; findClass(String name) <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">        String helloBase64 = <span class="string">&quot;yv66vgAAADQAHAoABgAOCQAPABAIABEKABIAEwcAFAcAFQEABjxpbml0PgEAAygpVgEABENvZGUBAA9MaW5lTnVtYmVyVGFibGUBAAVoZWxsbwEAClNvdXJjZUZpbGUBAApIZWxsby5qYXZhDAAHAAgHABYMABcAGAEAE0hlbGxvLCBjbGFzc0xvYWRlciEHABkMABoAGwEABUhlbGxvAQAQamF2YS9sYW5nL09iamVjdAEAEGphdmEvbGFuZy9TeXN0ZW0BAANvdXQBABVMamF2YS9pby9QcmludFN0cmVhbTsBABNqYXZhL2lvL1ByaW50U3RyZWFtAQAHcHJpbnRsbgEAFShMamF2YS9sYW5nL1N0cmluZzspVgAhAAUABgAAAAAAAgABAAcACAABAAkAAAAdAAEAAQAAAAUqtwABsQAAAAEACgAAAAYAAQAAAAQAAQALAAgAAQAJAAAAJQACAAEAAAAJsgACEgO2AASxAAAAAQAKAAAACgACAAAABgAIAAcAAQAMAAAAAgAN&quot;</span>;</span><br><span class="line">        <span class="keyword">byte</span>[] bytes = decode(helloBase64);</span><br><span class="line">        <span class="keyword">return</span> defineClass(name, bytes, <span class="number">0</span>, bytes.length);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">byte</span>[] decode(String base64) &#123;</span><br><span class="line">        <span class="keyword">return</span> Base64.getDecoder().decode(base64);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ·»åŠ ç±»çš„å‡ ç§æ–¹å¼ï¼Ÿ"><a href="#æ·»åŠ ç±»çš„å‡ ç§æ–¹å¼ï¼Ÿ" class="headerlink" title="æ·»åŠ ç±»çš„å‡ ç§æ–¹å¼ï¼Ÿ"></a>æ·»åŠ ç±»çš„å‡ ç§æ–¹å¼ï¼Ÿ</h2><ol><li>æ”¾åˆ° JDK çš„ lib/ext ä¸‹ï¼Œæˆ–è€… -Djava.ext.dirs=path</li><li>java -cp/classpath æˆ–è€… class æ–‡ä»¶æ”¾åˆ°å½“å‰è·¯å¾„</li><li>è‡ªå®šä¹‰ ClassLoader åŠ è½½</li><li>æ‹¿åˆ°å½“å‰æ‰§è¡Œç±»çš„ ClassLoaderï¼Œåå°„è°ƒç”¨ addUrl æ–¹æ³•æ·»åŠ  Jar æˆ–è·¯å¾„ï¼ˆJDK 9 ä¹‹åå¹³çº§äº†ï¼Œå¯ä»¥ä½¿ç”¨ <code>Class.forName(&quot;xxx&quot;, new URLClassLoader(&quot;path&quot;));</code>ï¼‰</li></ol><h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><p>è‡ªå®šä¹‰ä¸€ä¸ª Classloaderï¼ŒåŠ è½½ä¸€ä¸ª Hello.xlass æ–‡ä»¶ï¼Œæ‰§è¡Œ hello æ–¹æ³•ï¼Œ æ­¤æ–‡ä»¶å†…å®¹æ˜¯ä¸€ä¸ª Hello.class æ–‡ä»¶æ‰€æœ‰å­—èŠ‚(x=255-x)å¤„ç†åçš„æ–‡ä»¶ã€‚</p><p>é¢˜è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationTargetException;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.net.URLDecoder;</span><br><span class="line"><span class="keyword">import</span> java.nio.ByteBuffer;</span><br><span class="line"><span class="keyword">import</span> java.nio.channels.FileChannel;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yonghongwang#163.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyClassloader</span> <span class="keyword">extends</span> <span class="title">ClassLoader</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Class&lt;?&gt; helloClass = <span class="keyword">new</span> MyClassloader().findClass(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">        Method helloMethod = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            helloMethod = helloClass.getMethod(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchMethodException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            helloMethod.invoke(helloClass.newInstance());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InvocationTargetException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InstantiationException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt; findClass(String name) &#123;</span><br><span class="line">        String path = <span class="keyword">this</span>.getClass().getResource(<span class="string">&quot;Hello.xlass&quot;</span>).getPath();</span><br><span class="line">        File file;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            file = <span class="keyword">new</span> File(URLDecoder.decode(path, <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;failed to find path: &quot;</span> + path);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">byte</span>[] bytes;</span><br><span class="line">        <span class="keyword">if</span> (file.isFile() &amp;&amp; file.exists()) &#123;</span><br><span class="line">            <span class="keyword">try</span> (FileChannel channel = <span class="keyword">new</span> FileInputStream(file).getChannel()) &#123;</span><br><span class="line">                ByteBuffer byteBuffer = ByteBuffer.allocate((<span class="keyword">int</span>) channel.size());</span><br><span class="line">                channel.read(byteBuffer);</span><br><span class="line">                bytes = byteBuffer.array();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;failed to find path: &quot;</span> + path);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;failed to find path: &quot;</span> + path);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> defineClass(name, decode(bytes), <span class="number">0</span>, bytes.length);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * replace each byte with x-&gt;255-x</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">byte</span>[] decode(<span class="keyword">byte</span>[] bytes) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; bytes.length; i++) &#123;</span><br><span class="line"><span class="comment">//            bytes[i] = (byte) (255 - bytes[i]);</span></span><br><span class="line">            bytes[i] = (<span class="keyword">byte</span>) ~bytes[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bytes;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;ç±»åŠ è½½å­ç³»ç»Ÿä½œç”¨&quot;&gt;&lt;a href=&quot;#ç±»åŠ è½½å­ç³»ç»Ÿä½œç”¨&quot; class=&quot;headerlink&quot; title=&quot;ç±»åŠ è½½å­ç³»ç»Ÿä½œç”¨&quot;&gt;&lt;/a&gt;ç±»åŠ è½½å­ç³»ç»Ÿä½œç”¨&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;ç±»åŠ è½½å­ç³»ç»Ÿè´Ÿè´£ä»æ–‡ä»¶ç³»ç»Ÿæˆ–è€…ç½‘ç»œä¸­åŠ è½½ Class æ–‡ä»¶ï¼ŒClass æ–‡ä»¶åœ¨æ–‡ä»¶å¼€å¤´æœ‰ç‰¹å®šçš„æ–‡ä»¶æ ‡è¯†ï¼ˆcafebabeï¼‰&lt;/li&gt;
&lt;li&gt;ClassLoader åªè´Ÿè´£ Class æ–‡ä»¶çš„åŠ è½½ï¼Œè‡³äºå®ƒæ˜¯å¦èƒ½å¤Ÿè¿è¡Œï¼Œåˆ™ç”± Execution Engine å†³å®š&lt;/li&gt;
&lt;li&gt;åŠ è½½çš„ç±»ä¿¡æ¯å­˜æ”¾äºä¸€å—ç§°ä¸ºæ–¹æ³•åŒºçš„å†…å­˜ç©ºé—´ã€‚é™¤äº†ç±»çš„ä¿¡æ¯å¤–ï¼Œæ–¹æ³•åŒºè¿˜å­˜æ”¾è¿è¡Œæ—¶å¸¸é‡æ± ä¿¡æ¯ï¼Œå¯èƒ½è¿˜åŒ…å«å­—ç¬¦ä¸²å­—é¢å€¼å’Œæ•°å­—å¸¸é‡ï¼ˆè¿™éƒ¨åˆ†å¸¸é‡ä¿¡æ¯æ˜¯ Class æ–‡ä»¶ä¸­å¸¸é‡æ± éƒ¨åˆ†çš„å†…å­˜æ˜ å°„ï¼‰&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="Javaè¿›é˜¶" scheme="http://yonghong.tech/categories/Java%E8%BF%9B%E9%98%B6/"/>
    
    
    <category term="Javaè¿›é˜¶" scheme="http://yonghong.tech/tags/Java%E8%BF%9B%E9%98%B6/"/>
    
    <category term="JVM" scheme="http://yonghong.tech/tags/JVM/"/>
    
  </entry>
  
</feed>
